{"data":{"site":{"siteMetadata":{"title":"Takumon Blog","author":"Takuto Inoue"}},"markdownRemark":{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>便利なランチャーは色々ありますが、Windows PCだと僕はファイル名を指定して実行（<code class=\"language-text\">windows + r</code>）をランチャー代わりにしています。\nこの方法は、どんなWindows PCでもすぐに使えるというのが最大の利点です。\nPCリプレースしたときや、ネットにつながらない環境でアプリをインストールできない場合でも適用できます。\nただこのやり方、会社の同僚などで使ってる人に遭遇したことはありません。マイナーなんですかね<img null=\"\" data-icon=\"emoji-cry\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAVv0lEQVR4Ae2bBZAcR5aGv5dVTUOaGQ0JTUKzLTIzs5d3bd8eMzMzMy3GLTObacHMeLtitkayaBiaqirfdXZnxFRMSPKKjjP0ojo0Cf/358usypoe4f94Mf9vwP8b8H+7hBzn8odg7ryTk0PlDAynibBAoM8E0o7SBIBQtImOKOxRZTOWNbHwvc9+lq2A5TgW+cPjAy3b7mKlCrdkAq4xGTk1yJgmkzWYrCBGIBBIl0RRq9iqC0sS2aKNdG2U8Kgo9570GV4E9JgbwDEsL99M08x23mUCfjibNxcGBWNMU4DJOXBFjEUCrYWATBtaFU1cCGoNtirYisUWE5KStdWyfcYmfHxwhC8DRY5RMTXRHG08dhlhbcZ/sLdbXmhqCz7R3Je7ODcnZ3KzQ3LdSrY7INvXRX7B2eROv5bcsh8gf95PUbjgF+rhPrv/cz9zdVxd18a1dX24vlyfrm83Rs3kHxwfJ6wFRxtSE39UZfZsVuYz/Hm+JbgynBEStgVILsHkQ8L2eZi+czC9y5CWBUi+E8ImkACEVEYLKKAJxEW0PIRObMbufQW75zXikX5sOUYrAfFYQjwaU55Ivl2O+G3gRY6iyIb3cURl8eeRrXfwy/km+aNsR6Y5aM/U2CymKSTsPYPghGsw3Suh0OnhYsCCemhJ86c/C2BAQhCgNITd/yLJG48S7/0ethgTFw3JSER1OJosF/UPTv4cfw/of9YeIC+/k7buAv+abw3uzHRlCWcEBIWEsGcRwYK3Y3rOgzAPWgVNEDEcSVG1PluyEJex+54n2fw14n0bSUoB8WhCNFClPJ58dn+Jn13+FcYAPZ4GyKu3MKuzk881zQgvy/TW4FuFsKV2PeVazIlvR3LtYMsIgMiRjaZMdwIFMHm0MoLdXjNhyyPEE1XicSXaW6U4Gj8+NMQd597L7sMxITxc+K5O7s7PzKzIdecIWiHs6CBc+l5M78WgERKPgsihwA6/qPcurkAQECy4A2mdj6z7AmKGMSYPYeUyQ3R3TeNtKROOmQHy8LV01OC/UIfvc/BCpmMm4Wk/gnQsRZJRQKav7WNS0iiiAEVMz0oymVZkzccgGCQX5ABWdBF9oab19useYRjQY2GAAGZJH/+c7wgvyfXkCNpMDb6dcOldmLYTIRoGMSn442VAKiOSElIbOzz1Llj3KZARcjYHVi9ZovE/A+8HLKBHboCH33gnv1xoC+7I9GQJ2wPC1tr15BuRlnkQjzTg9bCBj96QuFzX4LSw8asIVazNUoj1jo13Jv++6LP8/VuZIG8F/+w7WXZih3wnPyffnO3OEbZBOO8izJyrgBhEEF/7P7Wop1IFQuyubxH3P008BtX9Fcq7ypPbh/WKC77CK4cyITwU/F295Oe08je5mZnmTEeGsMUQdPRhus4BOwko4un/KwwQtMGP1DUFE1vB7kHjDFpOmufE1b+pMdzwmb2U8SYclgG/cxXvLrQEl4Q1+KAlgykYzMzTITCQFBvwMo3cCIQGjKuTQGQ5qpIxEARgLcQWrJIuot6EIMTMPAMt7ieIhbAjoTCZXPI7VyXv/szn+Ayg358BHv63VtLWnJNfr8O31iIvmJYupKkPkglEFFRAUuC5kGSiwo6twwwPF5nV11aLGaBHflTbvWOU3XvG6OhoYv6cDoKWHFRib0QqE6wgTb11jUG0H9uaqZvQPGF//bdW6j1/8SKjKRMOaYABgvcu4O25tmBx2BZiCrXIGaRlDogitpie+Tp4tRTxrQfX8+i317Fz1yB790csPrWPD/zN28llAHuYLhihUoXf+/P72bB2D73dGebOmck1Vy7lqiuXkC1kGkakM0HCukZTHKxrdtpzbfHi9y6I314z4FMePjnUGyFxsaqTXGtefsQdbExzSJA3SC6H5GcgtgS2ArbciFzC9k27+L0/vJuPfewx9vfvoUDEldev4Od+64fJZYGo6OsfRkRF19b14fpyfbq+3RhuLDemGzvVpuK0NTTmck5zXbtjcCyOCc93qAwQIPjLSzi30CTLg5YQkw8wWYNkC4gJISmBKADkQ777Uj//+MFnSEpF+lqgY3YvN/7QOzj/ggUwth1Gho78FlEuc9aJIWf95ft47tmVPPCJrzL85l72vLGbP/7zh/jFn76QM8+ZBWWfCSpOY12ryUZ17Y6h0BQt/8tL9NzL7+a56ZtheKD0720xt2RagvrLjCAbIKGBMAfEoBEokAvYtG4v//CBZ8gkVZpzsGTl6bz7Z26lq2kS3ngKbAIScFRlcDsM93P+ufNZuORH+dIH7mH9i6upxOXa2E/x279yIQsXdUIlAQDEaXWa69qTGoNj6W3hFrAvAglgD2SAAObkDjKFvF4u9Tc5AZIxSCiYIGykPhYCYXwo5kMfewUTVShkYNWN5/HO919AZnQj9I9CEPi7QQKRgurhnYZEICNgFeIq9K+lq20GP/5r1/CVT7XwwgMvkESVuoY/+o1VtLaEkChg6lptKE57ncGxFPLx5Y5t6zBx+gBuphvwB8s4OZeXxUEhQLIBxhngYEgaBiS1CCLufXATe3aNkA/gottX8N4fPJPM3jUwOghiIYwZ2DvG5g0D2KgIlCCegHgcojGIRiAaduE/jzV+5upQqrdxbV0fri/Eur7dGG4sN6Yb22lwWpwmp81PUoIEXns2wLE4JsfmmeVgGRDMa+WMMGcK9fd4oYB/f4e6zosQGIb3VHn6hd3kDKy6/jTe8e5TkJ3rIIoBB2957PFhPvz5nYxPRCw7vYVf++Eu2loEYnuQB3zxigxjI8rffHyAV1ZP0NqS4SffN5fLL+qA2EDJ1MdyY5aKRR67e3Vdyw2Xd9PRkYXENrRKQ7tjcCyOaV6rPQPY6AfjgBnQXjCnBjlBMrUIDGKkHmjUmCETsXbzKLt2lliyYjbvuWM+0r8OivsgGgAdYOfWPXzsC9tpNjGn9BjWrB3nM3cPgklDy7Twxair69q4tq4P15fr0/XtxnBjuTHd2E6D0+I0OW2NDNLI6/YMGcExObZDZYBxkQv1FAkNErgQMAbE148nIY6ZKJfoWdDKD/7oLLIDm6EUgfF1jOGpV4tkFE7sDsgEUAjhu+tK7N+X0N0VQqwcsIRSqxPX6y7oC+hoNkQtsK3WzvX53nk50ARIoFStjV2sa9i0Y5yJSgliA3HF+9vQLoE3ITTkwvgUPOf0DBAfQUbowae+iIfHgAooUCxz4fnN/NXfLKZXijARgzFTXVhhx5sRM1uE1nwtclIHIbHsqMERcPAS0KiT2Hob19b14fpyfWIF8CEGxmN6KfJXf7uYC89rrmtDAfWaxTMEgmOqs0GQ4p2+B5AJQtrFr3uC1HapioiAQktSpWU0gnIC/v/SG3gcKfmM6wwCA9kQApRKpN7Qg2SASL1OgDbaeKn5TL1PDzft3DFWYaZ/NMZXSZ3NPa7gmBwbkDnUJmiMkBfjwbURogoC6q4wdc8V/zNSXQZC64yQ4mDaFMhmDC1tAdjk4AZYrddxddNVVKn3SaBThytNXUqxHz9lrnfDS0cMOLaD7AGpI42A+sbeAVQt+Mnzig7+6isQTllYYMf6CayCUahGSnNbyPx5WYijg58/Y+p1XN1qFFPIClahUqXeJ4EFtR5vmgk6TUhKPzSYvP7UekVD0n6CSSxlEjx0gqogGqQTy/P7rJjOUbasWlXg+WcyDI9ENDcZBoYtF9zaRntHAiMxmIO9NNVaHcO5F7Xx7D0DZAJhsmgpdGbqfVKuopKm9nzQ0DllhteZNMJaSKDOBgZvzwHPArFlzDXQJK6FgHozBED8iDrlhvjRvK9qla62mPf+bAf3fHqEkcGEc25s46ZbsjA4CYEe+t1UMarVzVOK21j/bJHm2Vne+QPtdLUU0bR5Fk8uqaQXF1Ou1MEjz2JxbId6H6AAlZiBumPWuWdQaxDslOOiUyaQstvvm19+9QTGSxl+9PZtnPzHrY6HzpzCnjEUfcujgSrkxqrceWeOoXe105SB/EQZ3e/vIAiqaeOEuiQvApWpLcBqLRLPYutsgBzoMKQ+GK3KG7MjRRNtOKgxWEH9xuh3RdQ3kdSWsnusiR///O1MVLJctPhDLJk/RD4DRBZVgQwHLxbAM8Qguyp0Zg1EQFQ3zkP6Sgam5kVgmgGNOWowaKxopHU2UA62BBSI3xizWxZXA2yiWGsxahBSaZ4+TQbqb7mKCHzqhWWMNZ8NLYYPPXMh/zTv6w2A4Pt4cWo8WrpelIACoUlJBqw3gMbsk8hUQ2PA+mqKY2iwVMGxAcnBjsMWiJ/ZzdYrF9oykc1rYlBrAfEzrSAWnwVg1F9hoprl46tvhhPngxG+sPlmfnPiUWa1jzXqvZUBesDnAg9uUwZI2gRQmQpSRiSg1mdybEkqtuzYgAiwBzMg+vQadv7yCrbkK3qaxj6FMAgggXr4RmgtpBagfO21c9icPYefveNEOpoMf/LRmE89fx6/ecPDh22Ar+fBvDL10Fbx+z2KHKBf9f9oaI8UW1EmSmxxbIcyQIHKZES0d0yen+kM8FXT6zO9DMVHZAM+9OrNzDqzh1+7sJ3WrPCVV3v4t2du42eveoyWQsW30e/v17RWpv8MVKaqqI+UT9PrkwAxqIuS4pgmozpRBdCDGRABpW/126cXzTM/FJbVJFUweW0ImGaAN4HvbFjES/H5/OjyDlSFkTLctqydv3zpDL7+2tn8wIXPQ7otekgX/Lbug+l1fBYeyKRGU6tAoiQOvqzEZbWOCSgB0aFeiVmg+Pcvsf49p+nq3k57ZlAVbGQIcuIhUiKN1K8fePFGCid2ceOCZkaqSmLh6hOa+PDCLj744q2874IXCY1NmSff3zLQadM7zf3UMvETJKgFErCxohVLUrIMjepqxwQUPSOHMqA0FlF6/U29+5pue6aWDTQB/ilUQjeQnwGjvNI/n0eGr+SCizs4pT1TMwBUYVZzwGVndHD3+gv51tolXHfWWjBedxYIAJtiqabmRpgGhzcbQFKJktoQLaD+mvjUryg6bnEsjgnqYQ/1Wlx9pbHfeZonRofs9mS84aJWLcRekIg3QPjAc9dg5/Rx66ltVCyUE6FqhbEYblvSQv6kLv7l2VsgEMgLhLD634VPf0z4678w/N1fG772RaF/Bw2jcwd6SZLKvqAxLkHqsw8FNJG6VluyOO2jw3a7YwHGPNtb/mIkBsa3jDL+XL9++rp2+/tBs8EWwOSAjEAAGFizp5cv776RUy/t4NzeDENlb6/AcAUWdmZYtqSdRx65mqfe+ConZLfwiU8EdQOMhWwIqvD8U/C1ryqXXKbccafS2gaUp2WApB6BvfnYRghTnzUCW4ZkQklGLI7BsUA9YoC3MkCBCWDkp77NE8/Psq/Oak3OlSbBOBMyBgJBAvjrx64n7pvLshOaCUxAJRYCAygkVkgUzpnbxCvzuvnNz72NhVv+AVuEk7ugKSeEni9OYLysPP4wbNlk+ZVfV/rmAKW0CQJ4eEnf9z24ixj8uiceTdg7YF91DMAIMHE4vxytACOjZWZ85HX9wG+0JR+QgslLTsiEFhMYtox08o1dV9Gzoo3ulhylBDR9OgPKCXQ0ZZjV18rzWy9nlv0aZ/b1kwshSJ/oMpAPheY89Pcb/vrPLb/3x0pHh0DVGwDToL0JiaAKmoAtW6JJrcFbykNJ2WmvMYx5AyqH82Vp9Wtm8B9fZssL2+RjyWCCHbHYycbu+vTGk4hae5g1M48VQ9Wml2Tjc6SClYC+zjz5rnYGg0UkEWgImQ5onluL2RC2eZ4qNTNhf7/w0Q8arBUw6a/OpQygEWpBI9ByQ5sdtTitTrPT7hg8ix7uN0SqwBDQdNs37D0vtcrCBZn4GjIhiGH74EwKrVk6m0MSNe6gQVc+/V4EhqtQTkytTkBzW5bMvC5u+0HD7JOUGTOUIPBLIILBAaF/I3z3aSi+BE98W1mxAq643kAx/RicWu9xwzRbAjuuRCOW6v6YLf320du+ofcAA56hCnC4Bigw4Tso3HW/fvTut9ue3iA5G4G4rHUv8gEUQmWwAs1hLTIAUIxhoAy5QOt1MgGccqbhnBUWSlqLqfWSFaGpS5k3T7jgasO61cKXP2nZsN1yhU2lvmUq7atAVdCiYscs0XAt9iXs22Vfd1qBYa/dr/3DNwAg8esns36I3I8+rH/9sRuT3+uBpTOTQZK4ik1iAhRRZSQSIj/UZAyqSohF44S4VKa7dT8MHOApDoEIGFcQy9KTDX/wVyHlEWeUBSU96xAJWgFbsm7mG/B7HXyyzmmsad0D7PPak6P9lljJu5l9up/wRx7QP/nItcmvndG86ZxkcB+jo7MpVarY5hBVQyURoAGv1lKqxIxNlCgOjLJy+SZQkzq0pA8zDUAAhhVIyBv/f4m7+rUeC1oCLVricSUZtUR7Yt7st6/9xMP6t0/vZBew12suHavvCY77ukHNBG77iv7Zv1y792cuqD50+YYdc5nb1URbLiAkRy5jAKjElpHJiH0jk/TvHOLs3GOcO29nA2j6ywFNXac/2cWgiZ/5qmLLFp1QYn+fj/YnbN5hv/m++/TfNjdm3sUgMH6svyk64lWzaRS97sv6kZ+/5IGx11cvv2VNS1ZQy+TMFlpzAQCT1YQ3h4qs3bKfobXr+Nurv0w+IJUBgEw3wEeMP8/jNzptPNaWIJm0JGNKPJRQGkzKz26RT7z96/qQ17cX2O8/c6wNUN+xAhaQf35y94PnnvHRob0a3fH86LLs/PkdzGjNAzA+UanN/CiTW1fzF+f8Iwta95EXg1YB0dTtDVD1Mz6V6vjXWK6+Lfv17u/xyZBl9x776kde0U/+8yu6FRjy4IPAKKDH9dviQCswE1gEzA5nzJm94Ozr3jPZefaSqHVOaI3QVN7DqvzT3LX0cU7qGKSpRZgzS5AQxKQPN3hL1Z/kvAEVJak2zvK2qCQTtr7eRwbstse36dd/5mGeLSWM+7U+mEp7/c/6k5kWb8JSoANoac/R9JPLOP38uXJxb6csCppETEHIFAxzZxnyTSD+LOHCGACwHhz1J7hq45oUbR0+nrA6OKTfe26nPvK7j/PyrgkmwD/hwbCf9Yn/ir8ZygFdwAKgE2gGmoDg1gXMvfIkOWNpN6ct6GPOjDaTMzmBTCMLTJjOAH9+jwH/CqtaspWJcbZvG5aXH9hkX6491W0DYg867uHH/OfKf+UfTRm/JOYCPcAMIO8jCaB48yJmXjKPOYtnmnldTTq7KUNnLqQlE5DzL38rlZiJYsTQQFHe3DBo+5/sZ9d9G9mXgPWAk0DRA/tIn+//6wxIb6gFoDmVCQVvRNZH4MPirykTE/zVR9VH2YMWgUkfpelH2/9qA6YbkUtlQcHDp00w/pouCWDT8D5KQNlHJQ3+39WAdN+ZaRH6qzcgtQtMGRB5yGha6PES+Z9VPDTGx/SxFbA+vBnHv/wHR9sVi/1sdagAAAAASUVORK5CYII=\">\nつい最近Surface Pro 6を買ったついでに、今回は<code class=\"language-text\">windows + r</code>ランチャーの設定方法・使い方を紹介します。</p>\n<h2 id=\"余談\"><a href=\"#%E4%BD%99%E8%AB%87\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>余談</h2>\n<p>Surface Pro 6買いました。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/38d91eb15e599e585710f6ad5e08e861/cdf6e/pc-open.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAwAB/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAEm1LAkiv/EABwQAAEFAAMAAAAAAAAAAAAAAAIAAxESEwEUIv/aAAgBAQABBQK/IELvhkLD1VgMZQv/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwGH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAwACAwAAAAAAAAAAAAAAAAEhEVEyYXH/2gAIAQEABj8Ca12VX0bezmYdIf/EABsQAQACAgMAAAAAAAAAAAAAAAEAESExQVGR/9oACAEBAAE/ISgx0NZg1PdjBHapRbV5KyFjllMKBP/aAAwDAQACAAMAAAAQSO//xAAWEQEBAQAAAAAAAAAAAAAAAAAhARD/2gAIAQMBAT8Qic//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREx/9oACAECAQE/ELMZT//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQVFxofD/2gAIAQEAAT8QSAU2Ll5+qME0vYNuu5kvXMDWJYIK29/co4JRid3xC+O1Qs//2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Surface Pro 6 その１\"\n        title=\"\"\n        src=\"/static/38d91eb15e599e585710f6ad5e08e861/893a4/pc-open.jpg\"\n        srcset=\"/static/38d91eb15e599e585710f6ad5e08e861/bbf57/pc-open.jpg 200w,\n/static/38d91eb15e599e585710f6ad5e08e861/260b8/pc-open.jpg 400w,\n/static/38d91eb15e599e585710f6ad5e08e861/893a4/pc-open.jpg 800w,\n/static/38d91eb15e599e585710f6ad5e08e861/25965/pc-open.jpg 1200w,\n/static/38d91eb15e599e585710f6ad5e08e861/e54c8/pc-open.jpg 1600w,\n/static/38d91eb15e599e585710f6ad5e08e861/7c0ed/pc-open.jpg 2400w,\n/static/38d91eb15e599e585710f6ad5e08e861/cdf6e/pc-open.jpg 4160w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d58e60b44184ee6f71c9725c316bb31f/cdf6e/pc-close.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAbLaLlJhr//EABsQAAEEAwAAAAAAAAAAAAAAAAEAAhEhAzFB/9oACAEBAAEFAumYGRA07Vr/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAEBAQEBAQAAAAAAAAAAAAABABFBITH/2gAIAQEAAT8h9V9uTZgdNiQzHPZAuF//2gAMAwEAAgADAAAAEAvP/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Qh//EABYRAQEBAAAAAAAAAAAAAAAAABEAAf/aAAgBAgEBPxBwi//EABsQAQEBAAIDAAAAAAAAAAAAAAERACExQVGR/9oACAEBAAE/EFKET5oWqr5wgzHtx0FEtwEe3G6uVvZv/9k='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Surface Pro 6 その２\"\n        title=\"\"\n        src=\"/static/d58e60b44184ee6f71c9725c316bb31f/893a4/pc-close.jpg\"\n        srcset=\"/static/d58e60b44184ee6f71c9725c316bb31f/bbf57/pc-close.jpg 200w,\n/static/d58e60b44184ee6f71c9725c316bb31f/260b8/pc-close.jpg 400w,\n/static/d58e60b44184ee6f71c9725c316bb31f/893a4/pc-close.jpg 800w,\n/static/d58e60b44184ee6f71c9725c316bb31f/25965/pc-close.jpg 1200w,\n/static/d58e60b44184ee6f71c9725c316bb31f/e54c8/pc-close.jpg 1600w,\n/static/d58e60b44184ee6f71c9725c316bb31f/7c0ed/pc-close.jpg 2400w,\n/static/d58e60b44184ee6f71c9725c316bb31f/cdf6e/pc-close.jpg 4160w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>4年前くらいのMBA（リンゴが光る世代のやつ）を今は使っていて、ちょうど<a href=\"https://www.apple.com/jp/macbook-air/\">MBAの新型が発表されたし</a>購入を迷っていたんですが、会社のリモートワーク用端末としてはWindowsが良さそうだし、IEとEdgeの検証環境ほしいってことで<a href=\"https://www.microsoft.com/ja-jp/p/surface-pro-6/8zcnc665slq5?activetab=pivot%3aoverviewtab\">Surface Pro 6</a>を買いました。基本リモート接続で使うので最低スペックのやつです。\n一週間使ってみたところ、サブPCとしてはとてもいい感じです！</p>\n<h3 id=\"メリット\"><a href=\"#%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>メリット</h3>\n<ul>\n<li>軽い（784g 自分のMBA(1350g)に比べるとかなり軽い）</li>\n<li>電源コードがマグセーフ形式で脱着が容易</li>\n<li>顔認証ログインができるのでログインが簡単</li>\n<li>タブレットとしても使用可能（家で漫画やYouTube見るのに最適）</li>\n</ul>\n<h3 id=\"デメリット\"><a href=\"#%E3%83%87%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>デメリット</h3>\n<ul>\n<li>別売りキーボードは２万円とお高め（東プレのREALFORCE並み）</li>\n<li>ベゼルが大きい（最近のPCならもうちょっとベゼルレスにしてほしい</li>\n<li>Cortanaが邪魔</li>\n</ul>\n<h3 id=\"cortanaを消す\"><a href=\"#cortana%E3%82%92%E6%B6%88%E3%81%99\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cortanaを消す</h3>\n<p>購入して真っ先にCortanaを消しました。\nただ設定とかでは消せなくてレジストリをいじる必要がありました。</p>\n<ul>\n<li><a href=\"https://www.pasoble.jp/windows/10/cortana-mukouka.html\">Windows 10 Cortana を停止して無効化する | Pasoble</a></li>\n</ul>\n<p>以下本題です。</p>\n<h2 id=\"windows--rランチャーの仕組み・初期設定\"><a href=\"#windows--r%E3%83%A9%E3%83%B3%E3%83%81%E3%83%A3%E3%83%BC%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF%E3%83%BB%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>windows + rランチャーの仕組み・初期設定</h2>\n<p>パスの通ったランチャー専用のフォルダをつくって、\nそこにフォルダショートカット、アプリショートカット、バッチを配置します。\nそうすると<code class=\"language-text\">windows + r</code>で呼び出せるという仕組みです。</p>\n<p>まずはランチャー専用のフォルダを作成します。自分は<code class=\"language-text\">C:\\shrotcut</code>としました。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a014f5f185056aa809657ef1f6929ea1/1b47a/setting-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 700px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 93.71428571428571%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA6cAAAOnAEHlFPdAAACGklEQVQ4y+1US2/aQBD2D+65/SdVT+mlhwglsZWkbSrRJiUKAsIrxLyxUR6AMcY2YMPau/Z0vOAQUtJGbY8d6fPMeme+2ZlZrbCzd/wmV7z6UixdHqRzeenr9wvpIluQKrWWVJYbUrn6DOQlitc1KVMoi/kr+WPyLPVOeLWTOXxfBfAD+GvJt/v3wmlO3nWRzPM8omoWO+/YzJgRDtP1UXsckW06PtMshzmOy2azGbPtCbMsixFC/Iiwod7WhetaIxEtFgtCgyAE4lMIggAYIghDsOwpGKYNjDGYLwiMrQlQSjlcdw6+70d7vD5tqDeFhnrHCceGTj3P/6kMQhYwmUww4YInwpOB4zgbPiEAJxzoo6ZQqXeQ0IVWs04VRYVev8+D4sDRSIfBYIDZh2AjsaahrWkwnU65T6TxlMsT6kZTKMmtBJtrULjM0vteD0zThPF4zDX2B+5ub6Dd6UC32wVd10FRFFBVFRMZfD/yxf6vCRvKDS957jp02+Si3mEA71Ukvr+2H0oOVyUPseRaS02sftIQP0+xGRhu2DFwmOse1tpLQmw4jQMek21LsmV/C2EY0qcEvyKMa135PE/4J/KfMJ5yGE35QZZ+L5ZH97Dd3V1lIahoDFy/GHgYftOHI6MuVFvqEfwj6fa0nvBh7+j1yWn65Cyd30+mMqL46ZuYPM+K+BKL+bIcvcS/RalSPRBTheOd/c9vfwCvAp//xoDqAAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ランチャー専用フォルダ作成\"\n        title=\"\"\n        src=\"/static/a014f5f185056aa809657ef1f6929ea1/1b47a/setting-1.png\"\n        srcset=\"/static/a014f5f185056aa809657ef1f6929ea1/45c00/setting-1.png 200w,\n/static/a014f5f185056aa809657ef1f6929ea1/7f762/setting-1.png 400w,\n/static/a014f5f185056aa809657ef1f6929ea1/1b47a/setting-1.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>次に「システムのプロパティ」 > 環境変数 > ユーザー環境変数　> Path を選択して編集で<br>\nランチャー専用フォルダのパスを追加します。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6f2097b2ce53ecd881aff5c5483d91b6/f2995/setting-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 674px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 109.79228486646883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA6cAAAOnAEHlFPdAAADAUlEQVQ4y6VUa2/aMBTlr07apm3Svkz7NO0f7Fd0VExr6apqj7ZDdFq1vngkECjQ8AppGkhCCI8AAZvc3Rtoq2oV3YalIzsGH59zfezQ2ofoy/jPX9sHh0frsR+HkYQgRfKlSiRXlBHlByBHpMJFJHteWsfx1tf92JtQQshEAdtoOIQhYpXWaCiHoZOksDbxPND1ptdqGUzTNKZeXjK702Gj0YgNXJe59wA3Z23bZoqisHw+j2tbIAjCNyQUw4N+D+RymZXLFbBMM1A6Ho9hNpstVdTr9UkVFAoF3m63QRTFvdBpSgwPXRfKSFitVqFWq+GfGthXoV6vQ7fbw4U9cBwHuth76Mb3/YCQvlEhpFIpbpoWiIJAhEKY6nchy0yWZahUKgGI/HpsGAYSO+B0uwHhrcI5YbFY5LShQIRn6UyYLJLlutIABdU1Gioq6sJ0ymAymcJCUNBoyLEUNBcQoovzwjnvdJy55YSQDU9HA9BVhWn1CjTV+mLZw83F2lNZJEnihmHeKqwaLuwnZRYTqvDltAT7Qg0SNQfyLQ9yzfEfyCOkpgcNowuW0QJVVflwOIJcLrcXSqbFcLTI4PWOxl7tXMGTTQ0eb6jwNKrB8+0mPPukI5p38ALnH23qsJszoGcboF3pnMqGSvcoh+GFA/avQaa4USJKpRKe8sLyNeHM9xnljs/8ALMlCA4F19CpEyGdMiVhTphIB4SYLUb5+ltQ6/cHYFkWoDo+mUzmNbxW+D+ElD26KXgZMDad1Qlt2ya7kMlkuIIZDiwfr2AZH4ngPg8GA07fSL6aQiQCsorgdKD4SBBh+iY2vr/8hvjzje8QOkiIteQ0NydcWGbzBsvAETPO50BFRNjF6OCdvmP5PbGj7AnttAyW3eFay+KXuhn0TbNNgea6rk/ppuAp74ZSGekjsXveGDjuzDm7F/6Mg+N6oBodkOsaKM026HYf2pZJb2mgNpvNHITWN7bfpjPSCb6L389SYnwZ8DGOHyfFOL7yN/3it1hSzB5t7Xx+9xsSGlXr0HJ0HQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ランチャー専用フォルダ作成\"\n        title=\"\"\n        src=\"/static/6f2097b2ce53ecd881aff5c5483d91b6/f2995/setting-3.png\"\n        srcset=\"/static/6f2097b2ce53ecd881aff5c5483d91b6/c64b3/setting-3.png 200w,\n/static/6f2097b2ce53ecd881aff5c5483d91b6/a5dc1/setting-3.png 400w,\n/static/6f2097b2ce53ecd881aff5c5483d91b6/f2995/setting-3.png 674w\"\n        sizes=\"(max-width: 674px) 100vw, 674px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>これで設定は完了です。あとはどんどんショートカットをランチャー専用フォルダに追加していきましょう。\nショートカットのファイル名がそのままコマンド名になるのでファイル名は自分の好きなようにしてください（例えばよく使うコマンドはファイル名を短くするなど）。</p>\n<h2 id=\"windows--rランチャーの使いどころ\"><a href=\"#windows--r%E3%83%A9%E3%83%B3%E3%83%81%E3%83%A3%E3%83%BC%E3%81%AE%E4%BD%BF%E3%81%84%E3%81%A9%E3%81%93%E3%82%8D\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>windows + rランチャーの使いどころ</h2>\n<h3 id=\"フォルダ・ファイルを開く\"><a href=\"#%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E9%96%8B%E3%81%8F\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>フォルダ・ファイルを開く</h3>\n<p>試しに「ランチャー専用フォルダ」自身のショートカットを配置してみましょう。ショートカット名は<code class=\"language-text\">shortcut</code>にします。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2b5a6bb9176061c81b7912d2682c0166/bc5f4/setting-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 701px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 93.4379457917261%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA6cAAAOnAEHlFPdAAABiklEQVQ4y+2UTU/CQBCG+685+UvUqyFNhCqYCAcvxKhEASnS0pbypYmCbbfY0m1323W7FGywfuHFg5O8yczbzTMzSTOccFLKyYpSkWSx0Gh3hOtmW9BHE0EdTARFH3+uwViQ+0NBlNVip6eVr25a+9wO3zw+0AmZw5DEgSJCltnPQxxOn7laQ8oHtIA+gsA2cbFt4t2LGZ7aCwwWCJtusJbhBMyfOy52XRdbloUXCw8HAYoRZHj/qHMtscvHheM4CGNMfBQSz0cEh+FaIVUQBORpZpAXxyXxu1ix7/s+MUzAljJMa8SJcp8BAbAQjQ/XiaKIQOgRz/MYLO1TjwFNYFOgpPLJN7R6kKWsBil/OaGVAtLx0epBGpD2shokdQIEKWAUoU3Yd+MNaL8HbhMroPkP/DXQ+PNAM+PH3jZSE8pqPmkEqfA2okB2bYA917l6Uywtj4NNL4rPrsdXghBmrq6NHgzu6PQsV6vfVi4bnUNJGxTvlP6G9My8S/OuqjOvp+mF6o1U5qvne6+KGq6u+8xMGwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ランチャー専用フォルダ作成\"\n        title=\"\"\n        src=\"/static/2b5a6bb9176061c81b7912d2682c0166/bc5f4/setting-2.png\"\n        srcset=\"/static/2b5a6bb9176061c81b7912d2682c0166/22c3c/setting-2.png 200w,\n/static/2b5a6bb9176061c81b7912d2682c0166/3ec8f/setting-2.png 400w,\n/static/2b5a6bb9176061c81b7912d2682c0166/bc5f4/setting-2.png 701w\"\n        sizes=\"(max-width: 701px) 100vw, 701px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><code class=\"language-text\">windows + r</code> → <code class=\"language-text\">shortcut</code>と入力 →　<code class=\"language-text\">Enter</code>キー　でショートカット専用フォルダが開けば設定成功です。</p>\n<p>この要領でショートカットやバッチを追加していくと、いろんなことが<code class=\"language-text\">windows + r</code>で実行できるようになります。</p>\n<h3 id=\"アプリを起動する\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリを起動する</h3>\n<p>exeファイルへのショートカットを作成すればアプリを起動できます。\n例えばサクラエディタの場合、exeファイルを右クリック → ショートカットの作成　を選択し、\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6ee6409a2bb80dfca5df85f96b234ef9/a3c16/sakura-setting-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 776px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 95.36082474226805%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA6cAAAOnAEHlFPdAAAC10lEQVQ4y5WU23LaMBCGefFc5ll6k9BpS5KrUtrptKRNZqApGHzAxtjgs/EBG9uC7a6wE1Iy01QzO8LS6tP++oVal1cfzu5Ho4+iNH4/0xcdzdA7sqR3+ldC5/ZK7Nx/Eju/xiMcNzoqzqu6zmNW9zQmq9o7/O5+/tY/a529ub3umnDaSoAqxn4Hr24/Bf2mNZ6IF3x9kRd5FrMkTVkYhizLNyyMQuYFPkvrsTzP2X6/Z2VZYlS8z7KMJUmyJcZc1y9bmqq0qYx1FFd/77jJclivI6jKEvJtAUmSQlEUwBgDBALCm1S+1rJWb1u6Pm/Tx8IwKqyEz+52h0TcHbAySDcbVEDABGIMAhEYK67zdxy4WhFwriJwC6ulWW2ztN7wAKQFYRBAmiZQVSXEUQQb/E3zrCxgWwNxgyegKMttFxMHU61ykxIiNCMtdpCXOwjiDZi2B04QQZTipq4PSy+CIN/Dwo3Bix4VPQGnstom0J2gVtIyBDvdgb60YTSZgoUAxw8hjBLwwxgjQmAMToZHFGQI3JwCFwudn6E2Uyrfc7B+BsZyCYPBAITxGEzTgCDwudxDrDmEJOd4xieSVVXlwCAIqgLdpOZhNZqmgaIoMJvNKBHdXkNEwCThOWQKOX0C1OcHlxvrcRYeVBtUbQ6mYcASq7UsC3zfPwDj+NnVIsefAec1kKyvJ8F1XaxOBpwDQRDAcRx+ZQiY1BU2uScVNsBmkJJoIUkmqaZpgud5XHJTZZN3VOW/gZIkcQjdRZJJcSz5v4AkURRFbgjJpkrpHOk80bzXA5skSZFgOByCLMtgoDG2bfMgKP0Vj8/wJVMualMKekkobMdm0+mU4TkylMlQOg96ceibrmGTS4FrtzXwsoUVXL/0th1Lem2zbPum9fV7/1yQ1R/KXO/+nsq9h4nUmyhqTzdXPTfwe7br9mzPw96re7dnOc5jrDBs1+kOVfPu5kv//A/V35ZW9Xdy1wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"サクラエディタのショートカット作成１\"\n        title=\"\"\n        src=\"/static/6ee6409a2bb80dfca5df85f96b234ef9/a3c16/sakura-setting-1.png\"\n        srcset=\"/static/6ee6409a2bb80dfca5df85f96b234ef9/bc317/sakura-setting-1.png 200w,\n/static/6ee6409a2bb80dfca5df85f96b234ef9/a25fb/sakura-setting-1.png 400w,\n/static/6ee6409a2bb80dfca5df85f96b234ef9/a3c16/sakura-setting-1.png 776w\"\n        sizes=\"(max-width: 776px) 100vw, 776px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>ランチャー専用フォルダに配置します。ここの例ではショートカット名を<code class=\"language-text\">sakura</code>にしています。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c6760a2f8d1c0ce0c972150245c42c13/29a5c/sakura-setting-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 72.12475633528264%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA6cAAAOnAEHlFPdAAACDUlEQVQ4y61Ta47TQAzutRAnQOJKXACt9hgUqUcg0sIifgBC4gcSKrttkrbLtk22k9c8MnHmw5O0ScVDSAhLjmOP54vtz5k8e/nxbRCDpcUoDmhqkCp7t+lDf5M3n+fvJ5s4fNXdscbWRpKUirIsI6UNlZUk21iilkgZTa1rqW3ZOUrFuVprttJ6jPnNt9eTRRgHqSR4oD99ua4tDkL4HDBg34NzKKsKxhgf6+7ehOH1JI7joMgFtrsd+SSv7Zn1Yq1FmqYdaEN0BASKokCeF1BKjYCr1SqQliAOKcG14wwH5Sc1qIocSlY4zzFKwmgJsnUHuIwYcL6IgyjV+BJuKVFAIl2v/L4/2vvCYnEvsNzl2JbUxRLlEO0LREmJjTDEIXz4yoCLMAr2osTtXUo5j/aBEw8aR3UQhoE94F2CeJchqQgH05/F+wyrJMd3oalmwE9zP8NoGegyxTqOqNbqrOXRto2FeEhRZIIdGs60LKFV5Z2x5SgKA+caFGVJpq4HBv3Q3UBKAyEyJqEEb0s/XT6TSnlC4PeqI2XJgOv1OvBJzCKdAE5sn/ymaZAxw55VGlh2ne+15GJ87DaMriebzSbwDlviKpzrUdxJ/DsDOr7opJSOd25YAQbqtKqqcW18hTj7wX4nP+3RL3GWsWWu7Ar/Sbjld5PLy8tHs9ns6XQ6ffKv+oLVYzy/uHj8Aw4FFuqhNvzUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"サクラエディタのショートカット作成２\"\n        title=\"\"\n        src=\"/static/c6760a2f8d1c0ce0c972150245c42c13/42603/sakura-setting-2.png\"\n        srcset=\"/static/c6760a2f8d1c0ce0c972150245c42c13/f931c/sakura-setting-2.png 200w,\n/static/c6760a2f8d1c0ce0c972150245c42c13/e8031/sakura-setting-2.png 400w,\n/static/c6760a2f8d1c0ce0c972150245c42c13/42603/sakura-setting-2.png 800w,\n/static/c6760a2f8d1c0ce0c972150245c42c13/29a5c/sakura-setting-2.png 1026w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><code class=\"language-text\">windows + r</code> → <code class=\"language-text\">sakura</code>と入力 → <code class=\"language-text\">Enter</code>キー でサクラエディタが開けば設定成功です。\nちょっとしたメモの時に、素早くサクラエディタが開けるようになります。</p>\n<p>なおWindows10なら「スタートメニュー」→「すべてのアプリ」からアプリを選択し、アプリアイコンをドラッグ＆ドロップでショートカットを簡単に作成できます。</p>\n<ul>\n<li>参考：　<a href=\"http://tanweb.net/2015/08/17/4715/\">Windows 10 アプリのショートカットをデスクトップに表示したい！ | Tanweb.net</a></li>\n</ul>\n<h3 id=\"アプリを引数付きで起動する\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E5%BC%95%E6%95%B0%E4%BB%98%E3%81%8D%E3%81%A7%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリを引数付きで起動する</h3>\n<p>例えばVisual Studio Codeで特定のフォルダを開きたい場合は、ショートカットにアプリ引数を指定します。\nアプリのパスの後にスペース区切りで指定できます。具体的には下記のような感じです。</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">&quot;C:\\Users\\xxx\\AppData\\Local\\Programs\\Microsoft vS code\\Code.exe&quot; C:\\Users\\xxx\\workspace\\memo</code></pre></div>\n<p>Chromeで特定のサイトを開きたいときも同様です。</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">&quot;C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe&quot; https://soundcloud.com</code></pre></div>\n<p>作成したショートカットをランチャー専用フォルダに格納すればVSCodeやChromeなどが<code class=\"language-text\">windows + r</code>で呼び出せるようになります。</p>\n<h3 id=\"コントロールパネルの設定を起動する\"><a href=\"#%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB%E3%83%91%E3%83%8D%E3%83%AB%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>コントロールパネルの設定を起動する</h3>\n<p>コントロールパネルを開いてドラック＆ドロップでショートカットが作れます。\n作成したショートカットを好きな名前にリネームしてランチャー専用フォルダに格納すればサウンド設定などが<code class=\"language-text\">windows + r</code>で呼び出せるようになります。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f839b3554f85654d3b8e1c7e11d94b90/0c762/controlpannel.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 46.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABcRAAAXEQHKJvM/AAAB10lEQVQoz22RW2/TQBBG/RMRF0GqqoKHNEkT+F+889QH4AlaJEC0gcbOjTQhtRMHJ7bXbuzdHMabSlzEyJ92tDt7/M2O8204pQpdlpgdyEcp+Y0fEMeKotCyqYnShHWesTVQaGPr/o3BcIjT8zw2cfzXQZqmDMcTvk99UcDox5Kr6YLZShFnmo0qiPOSbFv9bIc2xt7ruR6O67nkmbIbSaLwFyt6wznvPo9482HM+4s5n1yfs6sxQz8VyI70VstqUALU5jfQFXPOZDIizTLbwuUg4PT8mrOuz+tzj5m/kbNCLmhGfsgs2hDEmQUVese2NOSFQes90KuAL08v+Oj5jIMNvVnMeJETKs31fI7Rxd37an7GKQuBJdJqnGvWqhSwsdCi3AP7FfDV2y7Tm4jZfEkg7Zpyaw/9ICDLc5sXRYG/ilgmOca2uFc1nFJXDvV+KH0XJ96s+F+E4dKCqhCDBOuMRZKJOyPaIUapjOk/xj0Z9XEuu19ZhiHzG58oWstgElKlcPsD1uuIPL8VZdatUpWk7VSh5N2zOympL8Wl2/2Cc+/BI2qHRzx8csDR02fUG8fUm03uP65xXK/TkrzRaFg9b5/wQtQ5adFpNWlbtWxNp93m8KDGL8zhjsBroj8mAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"コントロールパネルのショートカット設定\"\n        title=\"\"\n        src=\"/static/f839b3554f85654d3b8e1c7e11d94b90/42603/controlpannel.png\"\n        srcset=\"/static/f839b3554f85654d3b8e1c7e11d94b90/f931c/controlpannel.png 200w,\n/static/f839b3554f85654d3b8e1c7e11d94b90/e8031/controlpannel.png 400w,\n/static/f839b3554f85654d3b8e1c7e11d94b90/42603/controlpannel.png 800w,\n/static/f839b3554f85654d3b8e1c7e11d94b90/5b8b9/controlpannel.png 1200w,\n/static/f839b3554f85654d3b8e1c7e11d94b90/c7ea5/controlpannel.png 1600w,\n/static/f839b3554f85654d3b8e1c7e11d94b90/0c762/controlpannel.png 2000w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id=\"デフォルトで用意されているコマンドを使う\"><a href=\"#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%A7%E7%94%A8%E6%84%8F%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E4%BD%BF%E3%81%86\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>デフォルトで用意されているコマンドを使う</h3>\n<p>デフォルトでいくつかコマンドが用意されています。\n使いそうなものだけ下記に列挙します。<br>\n※電卓、メモ帳、ペイントあたりは列挙していません。</p>\n<h4 id=\"ファイル系\"><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ファイル系</h4>\n<ul>\n<li>\n<p><code class=\"language-text\">\\</code></p>\n<ul>\n<li>Cドライブを開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">.</code></p>\n<ul>\n<li>ログインユーザのフォルダを開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">shell:desktop</code></p>\n<ul>\n<li>デスクトップを開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">shell:recent</code></p>\n<ul>\n<li>最近使ったファイル一覧を開きます。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"オフィス系\"><a href=\"#%E3%82%AA%E3%83%95%E3%82%A3%E3%82%B9%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>オフィス系</h4>\n<ul>\n<li>\n<p><code class=\"language-text\">excel</code></p>\n<ul>\n<li>Excelを起動します。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">winword</code></p>\n<ul>\n<li>Wordを起動します。<code class=\"language-text\">word</code>ではなく <code class=\"language-text\">win</code>を頭に付けます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">explore</code></p>\n<ul>\n<li>Internet Explorerを起動します。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">powerpnt</code></p>\n<ul>\n<li>PowerPointを開きます。なぜか後半略語です。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"その他\"><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>その他</h4>\n<ul>\n<li>\n<p><code class=\"language-text\">cmd</code></p>\n<ul>\n<li>コマンドプロンプトを起動します。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">control</code></p>\n<ul>\n<li>コントロールパネルを開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">mstsc</code></p>\n<ul>\n<li>リモートデスクトップ接続を開きます。これは使用頻度高です。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">winver</code></p>\n<ul>\n<li>Windowsのバージョン情報を開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">desk.cpl</code></p>\n<ul>\n<li>画面のプロパティを開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">sysdm.cpl</code></p>\n<ul>\n<li>システムのプロパティを開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">msconfig</code></p>\n<ul>\n<li>システム構成を開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">netstat</code></p>\n<ul>\n<li>ネットワークのアクティブな接続をコマンドプロンプトで確認します。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">regedit</code></p>\n<ul>\n<li>レジストリエディタを開きます。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ms-settingsでシステム設定などを起動する\"><a href=\"#ms-settings%E3%81%A7%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E8%A8%AD%E5%AE%9A%E3%81%AA%E3%81%A9%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ms-settingsでシステム設定などを起動する</h3>\n<p>Windowsの設定は<code class=\"language-text\">ms-settings:URL</code>コマンドで開けます。\n例えば下記のようなバッチファイルを作成してランチャー専用フォルダに配置します。ここではファイル名を<code class=\"language-text\">blue.bat</code>とします。</p>\n<div class=\"gatsby-code-title\">blue.bat</div>\n<div class=\"gatsby-highlight\" data-language=\"batch\"><pre class=\"language-batch\"><code class=\"language-batch\"><span class=\"token command\"><span class=\"token keyword\">start</span> ms-settings:bluetooth</span></code></pre></div>\n<p>これで<code class=\"language-text\">windows + r</code> → <code class=\"language-text\">blue</code>と入力 → <code class=\"language-text\">Enterキー</code> でブルートゥース設定が開けます。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4a7d5d5e52171ea7bc8711d5d4177053/69419/mssettings-setting-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 78.16091954022988%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACnElEQVQ4y31U227TQBRce32Jb3HcJHYSJ75VIk2KyksF70gW8D99g18D1+IB9ZOAlQ9ztkkQpenD6Jw48ezMmbMRm6p+yIuyy8uy39RNn8znvTBlLyyrN227NwDuhTwAvaGfO70QohfL/F7cfb437r58N95/eCf2ux2VZalRVRUtFwtarVaU5znlqPyM+zAIyJKSpGkSiDRMwyDTsskcxyTiCYkw/Ciur6+pKIpfm81GlVWl6rpWRZ6rNE1VlmWn6geBsm1HBaggUyPXVRCh1vhtma9UhAPhqBVvbm5ot9+r/X5PNdSkUDV7tSXXdclgBVDEsG1bP7MsS6sbjUa0Wq9pmqYD3hmiJCHb91vxGgpBxsqogu1pllFcN5RMJuT5PsWo4/H4ZPMEHCDCiMTIG0QQDjKKyAuCVuyurtiyKjYbPa90PqcLEExnM00keW7AU0LbcSjBb0wpB3weJJR747gV2+2WLi8v1TEYzIzmAFfP8/5XdoCBQ6zkgpD4I6HtgHDcitvbW22Z1TFmOJWJ4jjWsztHKPi76Yxt/1UYQ+EVLHPCsH0iZDIe+lkyBtZFTBIS0XgQfjBIiPCiqBWcLMfPhEfLWBNaLpc61bOWQSg9/9Gy4w4SAXph2ApWVRwIuZ8jFAcDZ7yk0ELKk2zB6/RvKM8RTrAq0+lU3xhWy6oXuEF6DNhNrdCU5IYhz3vAFgxY6ucJj6H4sBDiBSY5LjVX40CIdSEfoQSz+WBb1mAeQ+FlBtlP3kUQKhAqvKxAqmBbIWl91V7Ab4aEda2waRo6rgz3bI/D4R77SWtcLx4BJ8/13GxBSKMo+iSKuvmBv7Cv66rqiqbpLtKssz2/c3y/c4Ogk67bIcnOcBxUR/dYmSewvhmu2xsj7+0fKdpeqmP/PugAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ブルートゥース設定画面\"\n        title=\"\"\n        src=\"/static/4a7d5d5e52171ea7bc8711d5d4177053/42603/mssettings-setting-1.png\"\n        srcset=\"/static/4a7d5d5e52171ea7bc8711d5d4177053/f931c/mssettings-setting-1.png 200w,\n/static/4a7d5d5e52171ea7bc8711d5d4177053/e8031/mssettings-setting-1.png 400w,\n/static/4a7d5d5e52171ea7bc8711d5d4177053/42603/mssettings-setting-1.png 800w,\n/static/4a7d5d5e52171ea7bc8711d5d4177053/69419/mssettings-setting-1.png 957w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h4 id=\"ms-settingsコマンド一覧\"><a href=\"#ms-settings%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E4%B8%80%E8%A6%A7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ms-settingsコマンド一覧</h4>\n<p>ms-setttings:URLはsystemsettings.dllに定義されています。Stringsコマンドで確認できます。</p>\n<div class=\"gatsby-highlight\" data-language=\"batch\"><pre class=\"language-batch\"><code class=\"language-batch\"><span class=\"token command\"><span class=\"token keyword\">strings</span> C:\\Windows\\ImmersiveControlPanel\\systemsettings.dll | Find <span class=\"token parameter attr-name\">/I</span> <span class=\"token string\">\"ms-settings:\"</span></span></code></pre></div>\n<p>Stringsはファイルから表示可能な文字だけ出力するコマンドです。Linux環境ではインストールされています。\nマイクロソフトがWindows向けのStringコマンドを配布しています。以下のサイトからインストール可能です。</p>\n<p><a href=\"https://technet.microsoft.com/ja-jp/sysinternals/strings.aspx\">https://technet.microsoft.com/ja-jp/sysinternals/strings.aspx</a></p>\n<p>主要なものを下記に列挙します。</p>\n<table>\n<thead>\n<tr>\n<th>ms-settings:URI</th>\n<th>設定の場所</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ms-settings:about</td>\n<td>システム・バージョン情報</td>\n</tr>\n<tr>\n<td>ms-settings:activation</td>\n<td>更新とセキュリティ・ライセンス認証</td>\n</tr>\n<tr>\n<td>ms-settings:appsfeatures</td>\n<td>アプリ・アプリと機能</td>\n</tr>\n<tr>\n<td>ms-settings:appsforwebsites</td>\n<td>アプリ・Web サイト用のアプリ</td>\n</tr>\n<tr>\n<td>ms-settings:backup</td>\n<td>更新とセキュリティ・バックアップ</td>\n</tr>\n<tr>\n<td>ms-settings:batterysaver</td>\n<td>システム・バッテリー</td>\n</tr>\n<tr>\n<td>ms-settings:batterysaver-settings</td>\n<td>システム・バッテリー</td>\n</tr>\n<tr>\n<td>ms-settings:batterysaver-usagedetails</td>\n<td>システム・バッテリー・アプリによるバッテリーの使用</td>\n</tr>\n<tr>\n<td>ms-settings:bluetooth</td>\n<td>デバイス・Bluetoothとその他のデバイス</td>\n</tr>\n<tr>\n<td>ms-settings:colors</td>\n<td>個人用設定・色</td>\n</tr>\n<tr>\n<td>ms-settings:connecteddevices</td>\n<td>デバイス・Bluetoothとその他のデバイス</td>\n</tr>\n<tr>\n<td>ms-settings:crossdevice</td>\n<td>システム・共有エクスペリエンス</td>\n</tr>\n<tr>\n<td>ms-settings:datausage</td>\n<td>ネットワークとインターネット・データ使用状況</td>\n</tr>\n<tr>\n<td>ms-settings:dateandtime</td>\n<td>時刻と言語・日付と時刻</td>\n</tr>\n<tr>\n<td>ms-settings:defaultapps</td>\n<td>アプリ・既定のアプリ</td>\n</tr>\n<tr>\n<td>ms-settings:developers</td>\n<td>更新とセキュリティ・開発者向け</td>\n</tr>\n<tr>\n<td>ms-settings:deviceencryption</td>\n<td>システム・バージョン情報（デバイスの暗号化）</td>\n</tr>\n<tr>\n<td>ms-settings:devices-touchpad</td>\n<td>デバイス・タッチパッド</td>\n</tr>\n<tr>\n<td>ms-settings:display</td>\n<td>システム・ディスプレイ</td>\n</tr>\n<tr>\n<td>ms-settings:easeofaccess-closedcaptioning</td>\n<td>簡単操作・字幕</td>\n</tr>\n<tr>\n<td>ms-settings:easeofaccess-highcontrast</td>\n<td>簡単操作・ハイコントラスト</td>\n</tr>\n<tr>\n<td>ms-settings:easeofaccess-keyboard</td>\n<td>簡単操作・キーボード</td>\n</tr>\n<tr>\n<td>ms-settings:easeofaccess-magnifier</td>\n<td>簡単操作・拡大鏡</td>\n</tr>\n<tr>\n<td>ms-settings:easeofaccess-mouse</td>\n<td>簡単操作・マウス</td>\n</tr>\n<tr>\n<td>ms-settings:easeofaccess-narrator</td>\n<td>簡単操作・ナレーター</td>\n</tr>\n<tr>\n<td>ms-settings:easeofaccess-otheroptions</td>\n<td>簡単操作・その他のオプション</td>\n</tr>\n<tr>\n<td>ms-settings:emailandaccounts</td>\n<td>アカウント・メール＆アプリのアカウント</td>\n</tr>\n<tr>\n<td>ms-settings:findmydevice</td>\n<td>更新とセキュリティ・デバイスの検索</td>\n</tr>\n<tr>\n<td>ms-settings:gaming-broadcasting</td>\n<td>ゲーム・ブロードキャスト</td>\n</tr>\n<tr>\n<td>ms-settings:gaming-gamebar</td>\n<td>ゲーム・ゲーム バー</td>\n</tr>\n<tr>\n<td>ms-settings:gaming-gamedvr</td>\n<td>ゲーム・ゲーム DVR</td>\n</tr>\n<tr>\n<td>ms-settings:gaming-gamemode</td>\n<td>ゲーム・ゲーム モード</td>\n</tr>\n<tr>\n<td>ms-settings:lockscreen</td>\n<td>個人用設定・ロック画面</td>\n</tr>\n<tr>\n<td>ms-settings:maps</td>\n<td>アプリ・オフライン マップ</td>\n</tr>\n<tr>\n<td>ms-settings:maps-downloadmaps</td>\n<td>アプリ・オフライン マップ・地図のダウンロード</td>\n</tr>\n<tr>\n<td>ms-settings:mousetouchpad</td>\n<td>デバイス・マウス</td>\n</tr>\n<tr>\n<td>ms-settings:multitasking</td>\n<td>システム・マルチタスク</td>\n</tr>\n<tr>\n<td>ms-settings:network</td>\n<td>ネットワークとインターネット（・状態）</td>\n</tr>\n<tr>\n<td>ms-settings:network-airplanemode</td>\n<td>ネットワークとインターネット・機内モード</td>\n</tr>\n<tr>\n<td>ms-settings:network-cellular</td>\n<td>ネットワークとインターネット・携帯ネットワーク</td>\n</tr>\n<tr>\n<td>ms-settings:network-dialup</td>\n<td>ネットワークとインターネット・ダイヤルアップ</td>\n</tr>\n<tr>\n<td>ms-settings:network-directaccess</td>\n<td>ネットワークとインターネット・DirectAccess</td>\n</tr>\n<tr>\n<td>ms-settings:network-ethernet</td>\n<td>ネットワークとインターネット・イーサネット</td>\n</tr>\n<tr>\n<td>ms-settings:network-mobilehotspot</td>\n<td>ネットワークとインターネット・モバイル ホットスポット</td>\n</tr>\n<tr>\n<td>ms-settings:network-proxy</td>\n<td>ネットワークとインターネット・プロキシ</td>\n</tr>\n<tr>\n<td>ms-settings:network-status</td>\n<td>ネットワークとインターネット・状態</td>\n</tr>\n<tr>\n<td>ms-settings:network-vpn</td>\n<td>ネットワークとインターネット・VPN</td>\n</tr>\n<tr>\n<td>ms-settings:network-wifi</td>\n<td>ネットワークとインターネット・Wi-Fi</td>\n</tr>\n<tr>\n<td>ms-settings:network-wifisettings</td>\n<td>ネットワークとインターネット・Wi-Fi・既知のネットワークの管理</td>\n</tr>\n<tr>\n<td>ms-settings:notifications</td>\n<td>システム・通知とアクション</td>\n</tr>\n<tr>\n<td>ms-settings:optionalfeatures</td>\n<td>アプリ・アプリと機能・オプション機能の管理</td>\n</tr>\n<tr>\n<td>ms-settings:otherusers</td>\n<td>アカウント・家族とその他のユーザー</td>\n</tr>\n<tr>\n<td>ms-settings:pen</td>\n<td>デバイス・ペンと Windows Ink</td>\n</tr>\n<tr>\n<td>ms-settings:personalization</td>\n<td>個人設定（・背景）</td>\n</tr>\n<tr>\n<td>ms-settings:personalization-background</td>\n<td>個人用設定・背景</td>\n</tr>\n<tr>\n<td>ms-settings:personalization-colors</td>\n<td>個人用設定・色</td>\n</tr>\n<tr>\n<td>ms-settings:personalization-start</td>\n<td>個人用設定・スタート</td>\n</tr>\n<tr>\n<td>ms-settings:powersleep</td>\n<td>システム・電源とスリープ</td>\n</tr>\n<tr>\n<td>ms-settings:printers</td>\n<td>デバイス・プリンターとスキャナー</td>\n</tr>\n<tr>\n<td>ms-settings:privacy</td>\n<td>プライバシー（・全般）</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-accountinfo</td>\n<td>プライバシー・アカウント情報</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-appdiagnostics</td>\n<td>プライバシー・アプリの診断</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-backgroundapps</td>\n<td>プライバシー・バックグラウンド アプリ</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-calendar</td>\n<td>プライバシー・カレンダー</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-callhistory</td>\n<td>プライバシー・通話履歴</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-contacts</td>\n<td>プライバシー・連絡先</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-customdevices</td>\n<td>プライバシー・他のデバイス</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-email</td>\n<td>プライバシー・メール</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-feedback</td>\n<td>プライバシー・フィードバックと診断</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-general</td>\n<td>プライバシー・全般</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-location</td>\n<td>プライバシー・位置情報</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-messaging</td>\n<td>プライバシー・メッセージング</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-microphone</td>\n<td>プライバシー・マイク</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-notifications</td>\n<td>プライバシー・通知</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-radios</td>\n<td>プライバシー・無線</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-speechtyping</td>\n<td>プライバシー・音声認識、手書き入力、入力の設定</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-tasks</td>\n<td>プライバシー・タスク</td>\n</tr>\n<tr>\n<td>ms-settings:privacy-webcam</td>\n<td>プライバシー・カメラ</td>\n</tr>\n<tr>\n<td>ms-settings:project</td>\n<td>システム・このPCへのプロジェクション</td>\n</tr>\n<tr>\n<td>ms-settings:proximity</td>\n<td>ネットワークとインターネット・機内モード</td>\n</tr>\n<tr>\n<td>ms-settings:recovery</td>\n<td>更新とセキュリティ・回復</td>\n</tr>\n<tr>\n<td>ms-settings:regionlanguage</td>\n<td>時刻と言語・地域と言語</td>\n</tr>\n<tr>\n<td>ms-settings:regionlanguage-chsime-pinyin</td>\n<td>時刻と言語・地域と言語</td>\n</tr>\n<tr>\n<td>ms-settings:regionlanguage-chsime-wubi</td>\n<td>時刻と言語・地域と言語</td>\n</tr>\n<tr>\n<td>ms-settings:screenrotation</td>\n<td>システム・ディスプレイ</td>\n</tr>\n<tr>\n<td>ms-settings:signinoptions</td>\n<td>アカウント・サインイン オプション</td>\n</tr>\n<tr>\n<td>ms-settings:signinoptions-launchfaceenrollment</td>\n<td>アカウント・サインイン オプション・Windows Hello セットアップ（顔認証）</td>\n</tr>\n<tr>\n<td>ms-settings:signinoptions-launchfingerprintenrollment</td>\n<td>アカウント・サインイン オプション・Windows Hello セットアップ（指紋認証）</td>\n</tr>\n<tr>\n<td>ms-settings:speech</td>\n<td>時刻と言語・音声認識</td>\n</tr>\n<tr>\n<td>ms-settings:storagepolicies</td>\n<td>システム・ストレージ（ストレージセンサー）・空き領域を増やす方法を変更する</td>\n</tr>\n<tr>\n<td>ms-settings:storagesense</td>\n<td>システム・ストレージ</td>\n</tr>\n<tr>\n<td>ms-settings:sync</td>\n<td>アカウント・同期</td>\n</tr>\n<tr>\n<td>ms-settings:tabletmode</td>\n<td>システム・タブレット モード</td>\n</tr>\n<tr>\n<td>ms-settings:taskbar</td>\n<td>個人用設定・タスク バー</td>\n</tr>\n<tr>\n<td>ms-settings:themes</td>\n<td>個人用設定・テーマ</td>\n</tr>\n<tr>\n<td>ms-settings:troubleshoot</td>\n<td>更新とセキュリティ・トラブルシューティング</td>\n</tr>\n<tr>\n<td>ms-settings:typing</td>\n<td>デバイス・入力</td>\n</tr>\n<tr>\n<td>ms-settings:usb</td>\n<td>デバイス・USB</td>\n</tr>\n<tr>\n<td>ms-settings:windowsdefender</td>\n<td>更新とセキュリティ・Windows Defender</td>\n</tr>\n<tr>\n<td>ms-settings:windowsinsider</td>\n<td>更新とセキュリティ・Windows Insider Program</td>\n</tr>\n<tr>\n<td>ms-settings:windowsupdate</td>\n<td>更新とセキュリティ・Windows Update</td>\n</tr>\n<tr>\n<td>ms-settings:windowsupdate-action</td>\n<td>更新とセキュリティ・Windows Update・更新プログラムのチェック</td>\n</tr>\n<tr>\n<td>ms-settings:windowsupdate-history</td>\n<td>更新とセキュリティ・Windows Update・更新の履歴</td>\n</tr>\n<tr>\n<td>ms-settings:windowsupdate-options</td>\n<td>更新とセキュリティ・Windows Update・詳細オプション</td>\n</tr>\n<tr>\n<td>ms-settings:windowsupdate-restartoptions</td>\n<td>更新とセキュリティ・Windows Update・再起動のオプション</td>\n</tr>\n<tr>\n<td>ms-settings:workplace</td>\n<td>アカウント・職場または学校にアクセスする</td>\n</tr>\n<tr>\n<td>ms-settings:yourinfo</td>\n<td>アカウント・ユーザーの情報</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"その他（シャットダウンなど）\"><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96%EF%BC%88%E3%82%B7%E3%83%A3%E3%83%83%E3%83%88%E3%83%80%E3%82%A6%E3%83%B3%E3%81%AA%E3%81%A9%EF%BC%89\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>その他（シャットダウンなど）</h3>\n<p>バッチファイルやパワーシェルファイルをランチャー専用フォルダに配置すれなんでもできます。\n例えばshutdownコマンドでシャットダウンや再起動ができます。下記のようなバッチを作ってランチャー専用フォルダに配置しましょう。</p>\n<div class=\"gatsby-code-title\">sd.bat</div>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre class=\"language-bat\"><code class=\"language-bat\">shutdown -s -t 0</code></pre></div>\n<div class=\"gatsby-code-title\">restart.bat</div>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre class=\"language-bat\"><code class=\"language-bat\">shutdown -r -t 0</code></pre></div>\n<br>\n<p>これで<code class=\"language-text\">windows + r</code> → <code class=\"language-text\">sb</code>と入力 → <code class=\"language-text\">Enterキー</code> でPCが即シャットダウンできます。\n気軽にシャットダウンできる反面、誤爆も増えます。間違ってシャットダウンしてしまって、いままで作業していたエクセルがパー...のようになりかねないので、会社のPCでは設定していません。</p>\n<h3 id=\"管理者権限で実行\"><a href=\"#%E7%AE%A1%E7%90%86%E8%80%85%E6%A8%A9%E9%99%90%E3%81%A7%E5%AE%9F%E8%A1%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>管理者権限で実行</h3>\n<p>管理者権限で実行したい場合、<br>\n<code class=\"language-text\">windows + r</code> → コマンド入力 → <code class=\"language-text\">Enter</code> の代わりに<br>\n<code class=\"language-text\">windows + r</code> → コマンド入力 → <code class=\"language-text\">ctrl + shift + Enter</code> で実行できます。<br>\nコマンドプロンプト実行などで使う機会があるかと。</p>\n<h2 id=\"自分の設定\"><a href=\"#%E8%87%AA%E5%88%86%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自分の設定</h2>\n<p>Surface Pro 6では下記のように設定しました。</p>\n<h3 id=\"フォルダショートカット系\"><a href=\"#%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%AB%E3%83%83%E3%83%88%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>フォルダショートカット系</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">shortcut</code></p>\n<ul>\n<li>ランチャー専用フォルダを開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">w</code></p>\n<ul>\n<li>作業フォルダを開きます。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"アプリ起動系\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E8%B5%B7%E5%8B%95%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリ起動系</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">chrome</code></p>\n<ul>\n<li>クロームを開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">sakura</code></p>\n<ul>\n<li>サクラエディタを開きます。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"アプリ起動系（起動引数付き）\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E8%B5%B7%E5%8B%95%E7%B3%BB%EF%BC%88%E8%B5%B7%E5%8B%95%E5%BC%95%E6%95%B0%E4%BB%98%E3%81%8D%EF%BC%89\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリ起動系（起動引数付き）</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">soundcloud</code></p>\n<ul>\n<li>サウンドクラウドをクロームで開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">blog</code></p>\n<ul>\n<li>ブログをVSCodeで開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">memo</code></p>\n<ul>\n<li>メモ用フォルダをVSCodeで開きます。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ms-settings系\"><a href=\"#ms-settings%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ms-settings系</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">blue</code></p>\n<ul>\n<li>ブルートゥース設定を開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">display</code></p>\n<ul>\n<li>ディスプレイ設定を開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">proxy</code></p>\n<ul>\n<li>プロキシ設定を開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">soundsetting</code></p>\n<ul>\n<li>サウンド設定を開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">wifi</code></p>\n<ul>\n<li>WiFi設定を開きます。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">wuapp</code></p>\n<ul>\n<li>Windows update画面を開きます。<code class=\"language-text\">ms-settings:windowsupdate</code>をバッチでたたいています。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">wuappaction</code></p>\n<ul>\n<li>Windows updateで更新ファイルがないかチェックします。<code class=\"language-text\">ms-settings:windowsupdate-action</code>をバッチでたたいています。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"バッチ系\"><a href=\"#%E3%83%90%E3%83%83%E3%83%81%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>バッチ系</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">sd</code></p>\n<ul>\n<li>シャットダウンします。</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">restart</code></p>\n<ul>\n<li>再起動します。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回は<code class=\"language-text\">windows + r</code>をランチャーとして使う方法を紹介しました。\nWindows10からは<code class=\"language-text\">ms-settins</code>も加わって用途が拡大されているので、ますます便利になりました。\nバッチファイル起動もできるので、ちょっと込み入ったことをするならPowerShellでスクリプトを書けばなんでもできそうですね🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"http://imanyu.blog86.fc2.com/blog-entry-308.html\">Winキー＋R をもっと活用しよう！| 平凡かつフツーな日記</a></li>\n<li><a href=\"http://honda-consulting.com/win-r/\">良く使うWindowsのファイル名を指定して実行コマンドのまとめ | 本多コンサルティング</a></li>\n<li><a href=\"https://azby.fmworld.net/usage/closeup/20150325/\">この人デキる…！一目置かれるキー操作</a></li>\n<li><a href=\"http://www.kamomer.com/entry/windows10-run-filename\">Windows の「ファイル名を指定して実行」を使いこなす！ ～ 知ってるとはかどるよく使う機能の呼び出し方を紹介します。 【Windows10 対応】 | カモメのリズム</a></li>\n<li><a href=\"http://rhodium.co.jp/%E3%80%8C%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%90%8D%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%A6%E5%AE%9F%E8%A1%8C%E3%80%8D%E3%81%AE%E6%84%8F%E5%A4%96%E3%81%AB%E4%BE%BF%E5%88%A9%E3%81%AA%E4%BD%BF/\">「ファイル名を指定して実行」の意外に便利な使い方 | ロジウム株式会社</a></li>\n<li><a href=\"http://d.hatena.ne.jp/hiboma/20070311/1173592731\">Windowsの「ファイル名を指定して実行」を256倍快適にする | hibomaのはてなダイアリ</a></li>\n<li><a href=\"https://bizlog.tech/windows10-wuapp/\">Windows10で「ファイル名を指定して実行」からWindows Updateを実行する方法 | BIZLOG.TECH</a></li>\n<li><a href=\"http://www.atmarkit.co.jp/ait/articles/1707/11/news009_2.html\">ms-setting:UIL一覧</a></li>\n<li><a href=\"http://www.atmarkit.co.jp/ait/articles/1707/11/news009.html\">Windows 10のショートカット「ms-settings:URI」は使い始めると止められない| @IT</a></li>\n<li><a href=\"https://i-bitzedge.com/tips/ms-settings-command\">Windows10「Fall Creators Update」で使える「ms-settings」コマンド一覧 | iBitzEdge</a></li>\n<li><a href=\"https://news.mynavi.jp/article/win10tips-283/\">管理者権限で「ファイル名を指定して実行」するには</a></li>\n<li><a href=\"https://linuxfan.info/strings-on-windows\">Stringsコマンドのインストール</a></li>\n</ul>","headingsDetail":[{"id":"なにこれ","value":"なにこれ","depth":2,"parents":[]},{"id":"余談","value":"余談","depth":2,"parents":[]},{"id":"メリット","value":"メリット","depth":3,"parents":[{"id":"余談","value":"余談","depth":2}]},{"id":"デメリット","value":"デメリット","depth":3,"parents":[{"id":"余談","value":"余談","depth":2}]},{"id":"cortanaを消す","value":"Cortanaを消す","depth":3,"parents":[{"id":"余談","value":"余談","depth":2}]},{"id":"windows--rランチャーの仕組み・初期設定","value":"windows + rランチャーの仕組み・初期設定","depth":2,"parents":[]},{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2,"parents":[]},{"id":"フォルダ・ファイルを開く","value":"フォルダ・ファイルを開く","depth":3,"parents":[{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"アプリを起動する","value":"アプリを起動する","depth":3,"parents":[{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"アプリを引数付きで起動する","value":"アプリを引数付きで起動する","depth":3,"parents":[{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"コントロールパネルの設定を起動する","value":"コントロールパネルの設定を起動する","depth":3,"parents":[{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"デフォルトで用意されているコマンドを使う","value":"デフォルトで用意されているコマンドを使う","depth":3,"parents":[{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"ファイル系","value":"ファイル系","depth":4,"parents":[{"id":"デフォルトで用意されているコマンドを使う","value":"デフォルトで用意されているコマンドを使う","depth":3},{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"オフィス系","value":"オフィス系","depth":4,"parents":[{"id":"デフォルトで用意されているコマンドを使う","value":"デフォルトで用意されているコマンドを使う","depth":3},{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"その他","value":"その他","depth":4,"parents":[{"id":"デフォルトで用意されているコマンドを使う","value":"デフォルトで用意されているコマンドを使う","depth":3},{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"ms-settingsでシステム設定などを起動する","value":"ms-settingsでシステム設定などを起動する","depth":3,"parents":[{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"ms-settingsコマンド一覧","value":"ms-settingsコマンド一覧","depth":4,"parents":[{"id":"ms-settingsでシステム設定などを起動する","value":"ms-settingsでシステム設定などを起動する","depth":3},{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"その他（シャットダウンなど）","value":"その他（シャットダウンなど）","depth":3,"parents":[{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"管理者権限で実行","value":"管理者権限で実行","depth":3,"parents":[{"id":"windows--rランチャーの使いどころ","value":"windows + rランチャーの使いどころ","depth":2}]},{"id":"自分の設定","value":"自分の設定","depth":2,"parents":[]},{"id":"フォルダショートカット系","value":"フォルダショートカット系","depth":3,"parents":[{"id":"自分の設定","value":"自分の設定","depth":2}]},{"id":"アプリ起動系","value":"アプリ起動系","depth":3,"parents":[{"id":"自分の設定","value":"自分の設定","depth":2}]},{"id":"アプリ起動系（起動引数付き）","value":"アプリ起動系（起動引数付き）","depth":3,"parents":[{"id":"自分の設定","value":"自分の設定","depth":2}]},{"id":"ms-settings系","value":"ms-settings系","depth":3,"parents":[{"id":"自分の設定","value":"自分の設定","depth":2}]},{"id":"バッチ系","value":"バッチ系","depth":3,"parents":[{"id":"自分の設定","value":"自分の設定","depth":2}]},{"id":"まとめ","value":"まとめ","depth":2,"parents":[]},{"id":"参考","value":"参考","depth":2,"parents":[]}],"fields":{"title":"ファイル名を指定して実行（windows + r）をランチャーとして使う","excerpt":"なにこれ便利なランチャーは色々ありますが、Windows PCだと僕はファイル名を指定して実行（windows + r）をランチャー代わりにしています。この方法は、どんなWindows PCでもすぐに使えるというのが最大の利点です。PCリプ...","date":"2018-11-18T12:00:00.000+09:00","tags":["Windows","ランチャー"],"thumbnail":"thumbnail/2018/windows-r-rancher.png"}}},"pageContext":{"slug":"/2018/11/18/","relatedPosts":[],"latestPosts":[{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>自分専用のRSSリーダーを<a href=\"https://gatsbyjs.org\">Gatsby</a> + <a href=\"https://netlify.com\">Netlify</a> + <a href=\"https://zapier.com/\">Zapier</a>を使って作りました。Gatsbyビルド時にRSSとOGPを取得して、Webサイトに表示しています。\n今回はこのWebサイトのビルドの仕組みと、GatsbyビルドでRSS+OGPを取得する方法をご紹介します。</p>\n<p>サイトはコチラ↓</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://favorite-blogs.netlify.com//\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Ffavorite-blogs.netlify.com&key=0658bf78be97cafcf2b0b9f96c1270ee\"></a></div></div>\n<br/>\n<p>ソースはコチラ↓</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://github.com/Takumon/blog-rss\" data-iframely-url=\"//cdn.iframe.ly/B8twzEh\"></a></div></div>\n<br/>\n<h2 id=\"ビルドの仕組み\"><a href=\"#%E3%83%93%E3%83%AB%E3%83%89%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ビルドの仕組み</h2>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 105.86881472957421%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABcRAAAXEQHKJvM/AAADJElEQVQ4y6WVW3PTRhiG/dt70avedmhpO0Og0EIChCQOYAcfZNmSZVmWLB8U2zlgwKFTEgewSdI0+/TTyk5CJ1DaXnyzHu3q1fN+h3WKZoWrQgVlCC3eWhuMcmuMy1k+uEV5Zus9FZ+Lz/ztvdQnBX0TOg57dh7zl5/IL1zjlZmFrZCzeO8T76U+S9iymEQ9jF+zBGmb/fAlDELZMxPCfy3YsfjdjzBuuriLIVFuC3Y6mv6/CbYqTHs7mA+rrP6wzsvaSCy3/5/g22hANvOMhesL7FpD2P5SwlhgVjV1SfCwOyAMIqKwz7C6pwn5xxzOxS6Lxmvb5mgwoF3y2LV9oX0hRWl9JKhb6BJIKhZQbQfVqoqAc0EnceyVGHsW07AOu6GI+ahO7Xx/3glceielmvIgfw9Ky6icrF4hEd90mdaK9J6s0kk/4o35lH1pbuT8eWPLuUPrGUd1Q2CqM8LNBkoLPgTjPqpbg9W7qFvfg/x+H9aoLC3Sz6wwNDLQ80VUaDY9/XtnY4V9Oyf0TaF3RbAfcNxrspVd5TRqwLCHSi+iblwDITqql2gu/azJ4pS896siss5pp55QSp61ZRlToroIivLILfPozi2sOz/qKv7p5Dmr5UGsbKfvk/72G04kn9O6ySRwmDhFjtt1TgProihiX2lBIRx6Ntuj1+xUCsmsBhU9XrHlSdNhkHks+TR4XcqwXdzgg3zwpF3Tl4ee+Tjk0kgIRWDcDXjuuxw05VBfZrU5O9iymUiFh0aRUdlgr5znhSXUmTX262K364pVWwdSfSJPqiyJjCnpSf4GgbSQbAiBzonEgVeVvDn85li88+MPNpJWicVEIKZKwtO2U7pJGwZnckg9XoKb36GePkBJm9CpclDJMxG7Y6vAGyGcOIau8tnMqpqFth334fmkSB9RXIcHUtHl26jsMrh5Dqsmpw2TQ7vESaMiogVNwrwXPzvLkrO4EKrrJAkX668Ka9reQTXH2M5y0qoxKqxIaq4WvSCcr7GF+dr3mRpfy+rxh3+XY+eGvg8nxa90i3yZ4EeXg5B2hVQIiZLQhZCx1HN/xX/KX27fz4YdRTNFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"build flow\"\n        title=\"\"\n        src=\"/static/d3807cd064fa752ebfead37f471691c0/42603/build-flow.png\"\n        srcset=\"/static/d3807cd064fa752ebfead37f471691c0/f931c/build-flow.png 200w,\n/static/d3807cd064fa752ebfead37f471691c0/e8031/build-flow.png 400w,\n/static/d3807cd064fa752ebfead37f471691c0/42603/build-flow.png 800w,\n/static/d3807cd064fa752ebfead37f471691c0/5b8b9/build-flow.png 1200w,\n/static/d3807cd064fa752ebfead37f471691c0/c7ea5/build-flow.png 1600w,\n/static/d3807cd064fa752ebfead37f471691c0/bc63a/build-flow.png 2400w,\n/static/d3807cd064fa752ebfead37f471691c0/81c80/build-flow.png 2607w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>以下時系列で説明します。</p>\n<ul>\n<li>\n<p>Zapier</p>\n<ul>\n<li>ジョブで定義したRSSを監視</li>\n<li>RSSに更新があったらNetlifyビルドをトリガー</li>\n</ul>\n</li>\n<li>\n<p>Netlify</p>\n<ul>\n<li>ビルドでGitHubからGatsbyプロジェクトのリポジトリをフェッチ</li>\n<li>Gatsbyプロジェクトのビルドを実行</li>\n<li>Gatsbyプロジェクトのビルドの中で、設定ファイルに定義したRSSをフェッチ</li>\n<li>ビルドが終わったらCDNにホスティング</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"netlifyとgithubの連携\"><a href=\"#netlify%E3%81%A8github%E3%81%AE%E9%80%A3%E6%90%BA\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NetlifyとGitHubの連携</h3>\n<p>Netlify上でGitHubリポジトリをビルド＆ホストできるようにしておきます。\n連携はNelityのGUIで簡単にできます。</p>\n<h3 id=\"zapierとnetlifyの連携\"><a href=\"#zapier%E3%81%A8netlify%E3%81%AE%E9%80%A3%E6%90%BA\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ZapierとNetlifyの連携</h3>\n<p>RSSリーダーは「RSSが更新されたらビルドをトリガーする」ような仕組みが必要です。この仕組みはNetlifyとZapierで実現できます。\nZapierはいろんなサービスやアプリを連携させて自動化できるWebサービスで、Netlifyにも対応しています。\nZapierの画面上で、監視したいRSSをポチポチ登録すると「RSSが更新されたらNetlifyのビルドをトリガーする」が簡単に実現できます。</p>\n<h2 id=\"rss--ogp取得\"><a href=\"#rss--ogp%E5%8F%96%E5%BE%97\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RSS + OGP取得</h2>\n<p>さてビルドの仕組みを整えたので、次はGatsbyのビルドでRSSを取得する方法について説明します。</p>\n<p>どのRSSを引っ張ってくるかは、GitHubリポジトリに設定ファイルにて定義します（<a href=\"https://github.com/Takumon/blog-rss/blob/master/favorite-blog-rss.js\">実際の設定ファイル</a>）。\nただコレ、ZapierのジョブのRSS定義と二重管理になるのが難点です。Zapierのタスクがyamlで書けるようになったら一元管理できるかもですが...</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> striptags <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'striptags'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> cheerio <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cheerio'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> crypto <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"crypto\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> Parser <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rss-parser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> parser <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Parser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'something different'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG</span> <span class=\"token operator\">=</span> <span class=\"token string\">'blog'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG_POST</span> <span class=\"token operator\">=</span> <span class=\"token string\">'blogPost'</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// RSSのような外部リソースを</span>\n<span class=\"token comment\">// GatsbyでGraphQLのデータとして扱うためには</span>\n<span class=\"token comment\">// sorceNodeで処理する</span>\nexports<span class=\"token punctuation\">.</span>sourceNodes <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> createNodeId<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> cache <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> feeds <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// 設定ファイルかなにかしらの方法でRSSのURLを読み込む</span>\n  <span class=\"token keyword\">const</span> blogUrls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'rss-url-1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'rss-url-2'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> blogUrl <span class=\"token keyword\">of</span> blogUrls<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  \n    <span class=\"token comment\">// rss-parserでRSS情報を取得する</span>\n    <span class=\"token keyword\">const</span> feed <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> parser<span class=\"token punctuation\">.</span><span class=\"token function\">parseURL</span><span class=\"token punctuation\">(</span>blogUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>feed <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>feed<span class=\"token punctuation\">,</span>\n        items<span class=\"token punctuation\">:</span> feed<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>item <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          title<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n          excerpt<span class=\"token punctuation\">:</span> <span class=\"token function\">excerpt</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          content<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">,</span>\n          pubDate<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>pubDate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toISOString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          link <span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    feeds<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>feed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n\n  <span class=\"token comment\">// ブログごとにノード生成</span>\n  feeds\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>feed <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      title<span class=\"token punctuation\">:</span> feed<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n      description<span class=\"token punctuation\">:</span> feed<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">,</span>\n      link<span class=\"token punctuation\">:</span> feed<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span>\n      lastBuildDate<span class=\"token punctuation\">:</span> feed<span class=\"token punctuation\">.</span>lastBuildDate<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>b <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> contentDigest <span class=\"token operator\">=</span> crypto<span class=\"token punctuation\">.</span><span class=\"token function\">createHash</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`md5`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">digest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>b<span class=\"token punctuation\">,</span>\n        id<span class=\"token punctuation\">:</span> <span class=\"token function\">createNodeId</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">INTERNAL_TYPE_BLOG</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>b<span class=\"token punctuation\">.</span>link<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        parent<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`__SOURCE__`</span></span><span class=\"token punctuation\">,</span>\n        internal<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token punctuation\">:</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG</span><span class=\"token punctuation\">,</span>\n          contentDigest<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// RSSに加えて、OGPを取得</span>\n  <span class=\"token keyword\">const</span> rssPosts <span class=\"token operator\">=</span> feeds<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>feed <span class=\"token operator\">=></span> feed<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>a<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> rssPostsWithImageUrl <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Promise.allでやると503になるのでfor文を使う</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> p <span class=\"token keyword\">of</span> rssPosts<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> pWithImageUrl <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'something different'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>res <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token comment\">// 取得したHTMLからOGPを取得</span>\n      <span class=\"token keyword\">const</span> $ <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">let</span> imageUrl<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head meta'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> property <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'property'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'content'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>property <span class=\"token operator\">===</span> <span class=\"token string\">'og:image'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          imageUrl <span class=\"token operator\">=</span> content\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 記事情報にOGPのURLを追加</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>p<span class=\"token punctuation\">,</span>\n        imageUrl<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    rssPostsWithImageUrl<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>pWithImageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n\n  <span class=\"token comment\">// OGP画像のノードを生成</span>\n  <span class=\"token comment\">// 重複を考慮してユニークにしてから処理する</span>\n  <span class=\"token keyword\">const</span> imageUrls <span class=\"token operator\">=</span> <span class=\"token function\">_uniq</span><span class=\"token punctuation\">(</span>rssPostsWithImageUrl<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> p<span class=\"token punctuation\">.</span>imageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> p<span class=\"token punctuation\">.</span>imageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>imageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> imageUrl <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fileNode <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">createRemoteFileNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      url<span class=\"token punctuation\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n      cache<span class=\"token punctuation\">,</span>\n      store<span class=\"token punctuation\">,</span>\n      createNode<span class=\"token punctuation\">:</span> actions<span class=\"token punctuation\">.</span>createNode<span class=\"token punctuation\">,</span>\n      createNodeId<span class=\"token punctuation\">:</span> createNodeId<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'ThumbnailImage'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'link'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> fileNode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n  <span class=\"token comment\">// ブログ記事ごとのノード生成</span>\n  rssPostsWithImageUrl<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> contentDigest <span class=\"token operator\">=</span> crypto<span class=\"token punctuation\">.</span><span class=\"token function\">createHash</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`md5`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">digest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">const</span> excerpt <span class=\"token operator\">=</span> \n    actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>p<span class=\"token punctuation\">,</span>\n      id<span class=\"token punctuation\">:</span> <span class=\"token function\">createNodeId</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">INTERNAL_TYPE_BLOG_POST</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>p<span class=\"token punctuation\">.</span>link<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      parent<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`__SOURCE__`</span></span><span class=\"token punctuation\">,</span>\n      internal<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG_POST</span><span class=\"token punctuation\">,</span>\n        contentDigest<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// 記事要約は記事本文から抽出</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">excerpt</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">,</span> maxLength<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> rowText <span class=\"token operator\">=</span> <span class=\"token function\">striptags</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">,</span> <span class=\"token string\">'&lt;pre>'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/&lt;pre[\\s\\S]+?>[\\s\\S]+?&lt;\\/pre>/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/\\n/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/ /g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> rowText<span class=\"token punctuation\">.</span>length <span class=\"token operator\">>=</span> maxLength\n    <span class=\"token operator\">?</span> rowText<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> maxLength<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'...'</span>\n    <span class=\"token punctuation\">:</span> rowText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>OGP画像をGatsbyで扱う処理は今も参考にしてみてください。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"padding-bottom: 52.5%; padding-top: 120px;\"><a href=\"https://takumon.com/gatsby-image-of-remote-in-building-by-using-create-remote-file-node\" data-iframely-url=\"//cdn.iframe.ly/r1GTW3Y\"></a></div></div>\n<h3 id=\"リソース取得は間隔を置かないと503になる\"><a href=\"#%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E5%8F%96%E5%BE%97%E3%81%AF%E9%96%93%E9%9A%94%E3%82%92%E7%BD%AE%E3%81%8B%E3%81%AA%E3%81%84%E3%81%A8503%E3%81%AB%E3%81%AA%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リソース取得は間隔を置かないと503になる</h3>\n<p>ビルド時にRSSやらOGPやらを引っ張ってくるために、大量のリクエストを発行しますが、サイトによっては時間当たりのリクエスト上限に引っかかって503エラーになることがあります。\n対処法としては、<code class=\"language-text\">Promise.all</code>で一度にリクエストを投げずに、for文でリクエスト1つずつawaitしながら投げて、適度に間隔を開けるのが良いと思います。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>RSSリーダーのようなものをSPAだけで作ろうとすると、フロント側の高負荷処理で画面描画が遅くなってしまいますが、\nGatsbyを使えばビルド時に重い処理を流せるので、パフォーマンスの向上が期待できます。\nまた今回のように、NetlifyやZapierなど他サービスと連携することで、作れる静的サイトの幅も広がります。\nSPA(Single Page Application)でこのような静的サイトを作っている方は一度Gatsbyを導入してみてはいかがでしょうか🍅</p>","fields":{"slug":"/gatsby-rss-reader-with-netlify-and-zapier","title":"Gatsby + Netlify + ZapierでRSSリーダーを作る","date":"2019-06-18T10:00:00.000-07:00","excerpt":"なにこれ自分専用のRSSリーダーをGatsby + Netlify + Zapierを使って作りました。Gatsbyビルド時にRSSとOGPを取得して、Webサイトに表示しています。今回はこのWebサイトのビルドの仕組みと、Gatsbyビル...","tags":["Gatsby","Netlify","Zapier","RSS","gatsby-plugin-feed"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2019/06/gatsby-rss-reader-with-netlify-zapier.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://www.netlify.com/docs/form-handling/\">Netlify Forms</a>はNetlifyにホストしている静的サイトでお問い合わせフォームを作れる機能です。DBを用意しなくても、お問い合わせフォーム送信結果はNetlify側で保持しれくれます。Netlifyの管理画面からCSVダウンロードなども可能です。\nさらに<a href=\"https://zapier.com/\">Zapier</a>と連携すると、お問い合わフォームで入力したメールアドレス宛てに定型フォーマットのメールを送信できたりもします。\nそんな便利なNetlify Formsですが、ググっても、お問い合わせフォームを同期的に送信する簡単な方法しか実装サンプルを見つけられませんでした。そこで今回は以下のような実用的サンプルの実装方法をご紹介します。</p>\n<ul>\n<li>お問い合わせフォームにファイルアップロードを含む</li>\n<li>Reactを使う</li>\n<li>入力チェックに<a href=\"https://jaredpalmer.com/formik/\">Formik</a>を使う</li>\n<li><a href=\"https://github.com/axios/axios\">axios</a>で非同期にお問い合わせフォームを送信する</li>\n</ul>\n<h2 id=\"step1-ファイルアップロード--単純なhmlt--同期送信\"><a href=\"#step1-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--%E5%8D%98%E7%B4%94%E3%81%AAhmlt--%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.1 ファイルアップロード + 単純なHMLT + 同期送信</h2>\n<p>もっとも単純なパターン、こちら<a href=\"https://www.netlify.com/docs/form-handling/\">Netlifyの公式サイト</a>に書いてある情報を参考に実装します。</p>\n<div class=\"gatsby-code-title\">index.html</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- (中略) --></span>\n  <span class=\"token comment\">&lt;!-- name：Formの名前NetlifyのおけるFormの識別子となる --></span>\n  <span class=\"token comment\">&lt;!-- novalidate：Formikで入力チェックするためブラウザの入力チェックはオフ --></span>\n  <span class=\"token comment\">&lt;!-- data-netlify：NetlifyでFormを認識させるための属性 --></span>\n  <span class=\"token comment\">&lt;!-- netlify-honeypot：NetlifyでFormを認識させるための属性 --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span>\n    <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>POST<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>contact<span class=\"token punctuation\">\"</span></span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">novalidate</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">data-netlify</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">netlify-honeypot</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>bot-field<span class=\"token punctuation\">\"</span></span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">></span></span>\n</span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleFile<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token comment\">&lt;!-- 送信ボタン --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">></span></span>\n      SUBMIT\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!-- (中略) --></span></code></pre></div>\n<br/>\n<h2 id=\"step2-ファイルアップロード--react--同期送信\"><a href=\"#step2-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--react--%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.2 ファイルアップロード + React + 同期送信</h2>\n<p>次にReactの場合です。Reactの場合はフォーム情報に<code class=\"language-text\">bot-field</code>と<code class=\"language-text\">form-name</code>を付与する必要があります。\nこれらは<code class=\"language-text\">&lt;input type=&quot;hidden&quot;&gt;</code>で実装します。</p>\n<div class=\"gatsby-code-title\">SampleForm.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>  <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>form\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"contact\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formの名前NetlifyのおけるFormの識別子となる */</span><span class=\"token punctuation\">}</span>\n    method<span class=\"token operator\">=</span><span class=\"token string\">\"POST\"</span>\n    novalidate<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formikで入力チェックするためブラウザの入力チェックはオフ */</span><span class=\"token punctuation\">}</span>\n    data<span class=\"token operator\">-</span>netlify<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    netlify<span class=\"token operator\">-</span>honeypot<span class=\"token operator\">=</span><span class=\"token string\">\"bot-field\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>bot-field<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleFile<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* 送信ボタン */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      SUBMIT</span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">);</span></code></pre></div>\n<br/>\n<h2 id=\"step3-ファイルアップロード--react--formik--同期送信\"><a href=\"#step3-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--react--formik--%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.3 ファイルアップロード + React + Formik + 同期送信</h2>\n<p>Netlify Formsはサーバー側のバリデーション機能はないので、\n実際使うときはフロント側のバリデーションが必要です。\nここでは、Reactのバリデーションライブラリ<a href=\"https://jaredpalmer.com/formik/\">Fromik</a>を使ってバリデーションを追加します。</p>\n<p>入力チェックエラーメッセージ表示はコンポーネント化します。そのほうがすっきりするので。</p>\n<div class=\"gatsby-code-title\">ErrorMessage.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Field<span class=\"token punctuation\">,</span> getIn <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'formik'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Formikエラーメッセージ表示用コンポーネント</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Field</span>\n    <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> form <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> error <span class=\"token operator\">=</span> <span class=\"token function\">getIn</span><span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> touch <span class=\"token operator\">=</span> <span class=\"token function\">getIn</span><span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>touched<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      cosnt isShowError <span class=\"token operator\">=</span> touch <span class=\"token operator\">&amp;&amp;</span> error<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> isShowError\n        <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>error<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>入力フォームのコンポーネントはFormikの作法にしたがって以下を実装します。<br/></p>\n<ul>\n<li><code class=\"language-text\">initialValues</code>:入力フォーム初期値設定処理</li>\n<li><code class=\"language-text\">validate</code>: 入力チェック処理</li>\n<li><code class=\"language-text\">render</code>: 入力フォーム描画処理</li>\n</ul>\n<p>ただしファイルについてはFormikが用意している<code class=\"language-text\">Field</code>タグは<code class=\"language-text\">type=file</code>をサポートしていないので、HTMLの<code class=\"language-text\">input</code>タグでファイル変更時に手動でFormikにファイルを追加します。</p>\n<div class=\"gatsby-code-title\">SampleForm.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> navigate <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Formik<span class=\"token punctuation\">,</span> Field <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'formik'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ErrorMessage <span class=\"token keyword\">from</span> <span class=\"token string\">'./ErrorMessage'</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// フォームの値を初期化</span>\n<span class=\"token keyword\">const</span> initialValues <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">'form-name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'contact'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// NetlifyFormで必要な値</span>\n  <span class=\"token string\">'bot-field'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// NetlifyFormで必要な値</span>\n  sampleText<span class=\"token punctuation\">]</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  sampleFile<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// 入力チェック</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleValidate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> errors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// sampleText</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>values<span class=\"token punctuation\">.</span>sampleText<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    errors<span class=\"token punctuation\">.</span>sampleText <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`テキストを記入してください`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// sampleFile</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>values<span class=\"token punctuation\">.</span>sampleFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    errors<span class=\"token punctuation\">.</span>sampleFile <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`ファイルを添付してください`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">.</span>sampleFile<span class=\"token punctuation\">.</span>size <span class=\"token operator\">></span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    errors<span class=\"token punctuation\">.</span>sampleFile <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`100MB以下のファイルを添付してください`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> errors<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// Form描画処理</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renderForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  dirty<span class=\"token punctuation\">,</span>\n  isSubmitting<span class=\"token punctuation\">,</span>\n  setFieldValue<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>form\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"contact\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formの名前NetlifyのおけるFormの識別子となる */</span><span class=\"token punctuation\">}</span>\n    method<span class=\"token operator\">=</span><span class=\"token string\">\"POST\"</span>\n    novalidate<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formikで入力チェックするためブラウザの入力チェックはオフ */</span><span class=\"token punctuation\">}</span>\n    data<span class=\"token operator\">-</span>netlify<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    netlify<span class=\"token operator\">-</span>honeypot<span class=\"token operator\">=</span><span class=\"token string\">\"bot-field\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Field</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>bot-field<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Field</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Field</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ErrorMessage</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* FormikのFieldタグではなくHTMLのinputタグを使う */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span>input\n      id<span class=\"token operator\">=</span><span class=\"token string\">\"sampleFile\"</span>\n      name<span class=\"token operator\">=</span><span class=\"token string\">\"sampleFile\"</span>\n      type<span class=\"token operator\">=</span><span class=\"token string\">\"file\"</span>\n      <span class=\"token punctuation\">{</span><span class=\"token comment\">/* ファイル変更時に、手動でFormikの値に設定 */</span><span class=\"token punctuation\">}</span>\n      onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>event <span class=\"token operator\">=></span> <span class=\"token function\">setFieldValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sampleFile\"</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ErrorMessage</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleFile<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* 送信ボタン */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">disabled</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>isSubmitting<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span> isSubmitting <span class=\"token operator\">?</span> <span class=\"token string\">'SUBMITTING...'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'SUBMIT'</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n);\n\n\n// Form用Reactコンポーネント\nexport default () =>  (\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Formik</span>\n    <span class=\"token attr-name\">initialValues</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>initialValues<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">validate</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleValidate<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>renderForm<span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n);</span></code></pre></div>\n<br />\n<h2 id=\"step5-ファイルアップロード--react--formik--非同期送信axios\"><a href=\"#step5-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--react--formik--%E9%9D%9E%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1axios\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.5 ファイルアップロード + React + Formik + 非同期送信(Axios)</h2>\n<p>Reactを使っている場合、SPAなので同期通信は極力控えたほうが良いです。\nそのため入力フォームの送信も非同期でやるのが現実的でしょう。\nここでは、<code class=\"language-text\">Formik</code>の<code class=\"language-text\">onSubmit</code>でAxiosを使ってお問い合わせフォームを非同期送信する例を示します。<br/>\n<code class=\"language-text\">Formik</code>タグは<code class=\"language-text\">onSubmit</code>プロパティでサブミット処理を自分で定義できます。\nこの<code class=\"language-text\">onSubmit</code>にて、axiosを使うことで非同期処理が可能です。<br/></p>\n<p><small>大半は前セクションと同じなので差分にフォーカスして説明します</small></p>\n<p>エラーメッセージ用コンポーネントは前回と同じなので割愛します。</p>\n<p>以下フォーム用コンポーネントです。</p>\n<div class=\"gatsby-code-title\">SampleForm.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> navigate <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Formik<span class=\"token punctuation\">,</span> Field <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'formik'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ErrorMessage <span class=\"token keyword\">from</span> <span class=\"token string\">'./ErrorMessage'</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">\"axios\"</span><span class=\"token punctuation\">;</span>\n</span>\n<span class=\"token comment\">// フォームの値を初期化</span>\n<span class=\"token comment\">/* (略) */</span>\n\n<span class=\"token comment\">// 入力チェック</span>\n<span class=\"token comment\">/* (略) */</span>\n\n<span class=\"token comment\">// サブミット処理</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// FormData作成</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span>  params <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'form-name'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'form-name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// for Netlify Forms</span>\n</span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bot-field'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'bot-field'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// for Netlify Forms</span>\n</span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sampleText'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'sampleText'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sampleFile'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'sampleFile'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// Formikの送信中フラグをオンにする</span>\n</span><span class=\"gatsby-highlight-code-line\">  actions<span class=\"token punctuation\">.</span><span class=\"token function\">setSubmitting</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// axiosで非同期にお問い合わせフォームを送信</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    method<span class=\"token punctuation\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"Content-Type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"application/x-www-form-urlencoded\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    data<span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    url<span class=\"token punctuation\">:</span> <span class=\"token string\">\"/\"</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>res <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// フォーム送信完了後</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// 他画面に遷移（同期遷移ではなくSPAとしての遷移）</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/application-complete'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// フォーム内容初期化</span>\n</span><span class=\"gatsby-highlight-code-line\">    actions<span class=\"token punctuation\">.</span><span class=\"token function\">resetForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// 最後にFormikの送信中フラグをオフにする</span>\n</span><span class=\"gatsby-highlight-code-line\">    actions<span class=\"token punctuation\">.</span><span class=\"token function\">setSubmitting</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span>err <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// なにかしらエラーハンドリング</span>\n</span><span class=\"gatsby-highlight-code-line\">    actions<span class=\"token punctuation\">.</span><span class=\"token function\">setSubmitting</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span>    <span class=\"token comment\">/* (中略) */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// Form描画処理</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renderForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  handleSubmit<span class=\"token punctuation\">,</span>\n  dirty<span class=\"token punctuation\">,</span>\n  isSubmitting<span class=\"token punctuation\">,</span>\n  setFieldValue<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>form\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"contact\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formの名前NetlifyのおけるFormの識別子となる */</span><span class=\"token punctuation\">}</span>\n    method<span class=\"token operator\">=</span><span class=\"token string\">\"POST\"</span>\n    novalidate<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formikで入力チェックするためブラウザの入力チェックはオフ */</span><span class=\"token punctuation\">}</span>\n    data<span class=\"token operator\">-</span>netlify<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    netlify<span class=\"token operator\">-</span>honeypot<span class=\"token operator\">=</span><span class=\"token string\">\"bot-field\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* (中略) */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// Form用Reactコンポーネント</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>  <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Formik</span>\n    <span class=\"token attr-name\">initialValues</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>initialValues<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">validate</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleValidate<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>renderForm<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br />\n<p>これでようやくNetlify FormsにおいてReactを使って非同期でファイルアップロードできるようになりました！</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>自分の復習も兼ねてステップごとに実装方法をご紹介しました。\nAngularとVueで実装する場合も今回紹介した実装と似たような感じになると思います。\n参考にしてみてください🍅</p>","fields":{"slug":"/async-file-upload-in-netlify-forms-with-react-formik-axios","title":"Netlify Formsでファイルを非同期アップロード with React + Formik + Axios","date":"2019-06-01T22:00:00.000-07:00","excerpt":"なにこれNetlify FormsはNetlifyにホストしている静的サイトでお問い合わせフォームを作れる機能です。DBを用意しなくても、お問い合わせフォーム送信結果はNetlify側で保持しれくれます。Netlifyの管理画面からCSVダ...","tags":["Netlify","NetlifyForms","React","Fromik","Axios"],"keywords":["Netlify"],"thumbnail":"thumbnail/2019/06/async-file-upload-in-netlify-forms-with-react-formik-axios.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Gatsbyで画像を扱う場合<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-image\">gatsby-image</a>を使うとイイ感じに最適化してくれます。\nWebサイトのリポジトリ内の画像については<code class=\"language-text\">gatsby-config.js</code>で簡単に設定できますが、<strong>今回はビルド時に動的に取得する外部画像に対して設定する方法をご紹介します。</strong></p>\n<h2 id=\"実装方法\"><a href=\"#%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装方法</h2>\n<h3 id=\"step1-外部画像ファイルノード生成\"><a href=\"#step1-%E5%A4%96%E9%83%A8%E7%94%BB%E5%83%8F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%8E%E3%83%BC%E3%83%89%E7%94%9F%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step1. 外部画像ファイルノード生成</h3>\n<p>Gatsbyの<a href=\"\">gatsby-source-filesystem</a>では、外部画像を扱うためのAPI(<code class=\"language-text\">createRemoteFileNode</code>)が用意されています。\nコチラを<code class=\"language-text\">gatsby-node.js</code>の<code class=\"language-text\">sourceNodes</code>で呼び出せば外部画像にgatsby-imageを適用できます。\nあと、ちょっとしたハックとして、Reactコンポーネント側で他ファイルノードと区別できるように、ノード生成時に識別子を付けましょう。これは後述する外部画像表示用コンポーネントで使うためのものです。</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createRemoteFileNode <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// sourceNodesにて外部画像のファイルノードを作成する</span>\nexports<span class=\"token punctuation\">.</span>sourceNodes <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> createNodeId<span class=\"token punctuation\">,</span> cache<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* (中略) */</span>\n\n  <span class=\"token comment\">// ここでは外部画像のURLの配列を処理するサンプルを示す</span>\n  <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>sampleImageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> sampleImageUrl <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// createRemoteFileNodeで外部の画像のファイルノードを作成する</span>\n    <span class=\"token keyword\">const</span> fileNode <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">createRemoteFileNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      url<span class=\"token punctuation\">:</span> sampleImageUrl<span class=\"token punctuation\">,</span>\n      cache<span class=\"token punctuation\">,</span>\n      store<span class=\"token punctuation\">,</span>\n      createNode<span class=\"token punctuation\">:</span> actions<span class=\"token punctuation\">.</span>createNode<span class=\"token punctuation\">,</span>\n      createNodeId<span class=\"token punctuation\">:</span> createNodeId<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 他ファイルノードと区別するための識別子を付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'SampleImage'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// メタ情報として画像のURLを付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'link'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> sampleImageUrl<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> fileNode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3 id=\"step2-外部画像表示用reactコンポーネント作成\"><a href=\"#step2-%E5%A4%96%E9%83%A8%E7%94%BB%E5%83%8F%E8%A1%A8%E7%A4%BA%E7%94%A8react%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step2. 外部画像表示用Reactコンポーネント作成</h3>\n<p>外部画像のファイルノードを生成できたら、\n今度はReactコンポーネント側で、それに<code class=\"language-text\">gatsby-iamge</code>を適用して表示します。\nGraphQLのクエリで、ファイルノードを生成時に付与した識別子を使い、すべてのファイルノードから外部画像だけを抽出するようにしましょう。</p>\n<div class=\"gatsby-code-title\">sample-image.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> GatsbyImage <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-image'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> StaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// OGP画像のURLを引数に取る</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> url <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n</span>  <span class=\"token operator\">&lt;</span>StaticQuery\n    query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>graphql<span class=\"token template-string\"><span class=\"token string\">`\n      query {\n        allFile(\n          # Gatsby Buildで付与した識別子をもとに\n          # 全ファイルからOPG画像のみ抽出\n          filter: {fields: {SampleImage: {eq: \"true\"}}}\n        ){\n          edges {\n            node {\n              childImageSharp {\n                resolutions {\n                  ...GatsbyImageSharpResolutions\n                }\n              }\n              id\n              fields {\n                # 一応メタ情報も取得する\n                SampleImage\n                link\n              }\n            }\n          }\n        }\n      }\n    `</span></span><span class=\"token punctuation\">}</span>\n    render<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// OGP画像リストの中から、コンポーネント引数で指定したURLの画像を抽出する</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> targetEdge <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allFile<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>edge <span class=\"token operator\">=></span> edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>link <span class=\"token operator\">===</span> url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>\n      <span class=\"token comment\">// 画像が取得できた場合のみgatsby-imageのコンポーネントを返す</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        targetEdge <span class=\"token operator\">&amp;&amp;</span> targetEdge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>childImageSharp\n          <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>GatsbyImage</span> <span class=\"token attr-name\">resolutions</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>targetEdge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>childImageSharp<span class=\"token punctuation\">.</span>resolutions<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n          <span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"step3-上記で作成したコンポーネントの呼び出し\"><a href=\"#step3-%E4%B8%8A%E8%A8%98%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step3. 上記で作成したコンポーネントの呼び出し</h3>\n<p>最後に上記コンポーネントの呼び出します。以下のように外部画像のURLを指定してあげましょう。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SampleImage</span> <span class=\"token attr-name\">url</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>SampleImageUrl<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<br/>\n<p>これで外部画像に<code class=\"language-text\">gatsby-image</code>を適用してイイ感じに表示できます！</p>\n<h2 id=\"例：webサイトurlからogp画像を取得する場合\"><a href=\"#%E4%BE%8B%EF%BC%9Aweb%E3%82%B5%E3%82%A4%E3%83%88url%E3%81%8B%E3%82%89ogp%E7%94%BB%E5%83%8F%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>例：WEBサイトURLからOGP画像を取得する場合</h2>\n<p>実用的な例として、複数のWebサイトのOGP画像を<code class=\"language-text\">gatsby-image</code>として扱う方法をご紹介します。</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> cheerio <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cheerio'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createRemoteFileNode <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// sourceNodesにて外部画像のファイルノードを作成する</span>\nexports<span class=\"token punctuation\">.</span>sourceNodes <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> createNodeId<span class=\"token punctuation\">,</span> cache<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* (中略) */</span>\n\n\n  <span class=\"token comment\">// WEBサイトURLからHTMLを取得してOGPを抽出</span>\n  <span class=\"token keyword\">const</span> ogpImageUrls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Promise.allで処理するとリクエスト多可で503になるのでfor文で一件ずつ処理する</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> postUrl <span class=\"token keyword\">of</span> postUrls<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>postUrl<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'something different'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// cheerioを使ってHMTLからOGP画像URLを抽出</span>\n    <span class=\"token keyword\">let</span> ogpImageUrl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> $ <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head meta'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> property <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'property'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'content'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>property <span class=\"token operator\">===</span> <span class=\"token string\">'og:image'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        ogpImageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>ogpImageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 取得したOGP画像URLをもとにファイルノードを生成</span>\n  <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>ogpImageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> imageUrl <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fileNode <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">createRemoteFileNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      url<span class=\"token punctuation\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n      cache<span class=\"token punctuation\">,</span>\n      store<span class=\"token punctuation\">,</span>\n      createNode<span class=\"token punctuation\">:</span> actions<span class=\"token punctuation\">.</span>createNode<span class=\"token punctuation\">,</span>\n      createNodeId<span class=\"token punctuation\">:</span> createNodeId<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 他ファイルノードと区別するための識別子を付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'OgpImage'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// メタ情報として画像のURLを付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'link'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> fileNode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>Reactのコンポーネントの定義、呼び出し側定義は<a href=\"#%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95\">実装方法</a>で紹介した内容とほぼ同じなので割愛します。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回の方法を使えば、外部から画像をかき集めてリッチなWebサイトを構築する場合でも、Gatsby側でブラウザ表示を最適化してくれて、画面表示が遅くなる心配もありません。\n是非参考にしてみてください🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://www.wildsmithstudio.com/blog/remote-images-with-gatsby/\">Wrangling remote images with Gatsby</a></li>\n<li><a href=\"https://stackoverflow.com/questions/52612936/gatsby-fetching-remote-images-with-createremotefilenode\">graphql - Gatsby - fetching remote images with createRemoteFileNode - Stack Overflow</a></li>\n</ul>","fields":{"slug":"/gatsby-image-of-remote-in-building-by-using-create-remote-file-node","title":"Gatsbyにおける外部取得画像へのgatsby-image適用方法","date":"2019-06-01T21:30:00.000-07:00","excerpt":"なにこれGatsbyで画像を扱う場合gatsby-imageを使うとイイ感じに最適化してくれます。Webサイトのリポジトリ内の画像についてはgatsby-config.jsで簡単に設定できますが、今回はビルド時に動的に取得する外部画像に対し...","tags":["Gatsby","gatsby-image"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2019/06/gatsby-image-of-remote-in-building-by-using-create-remote-file-node.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>GatsbyでWebサイトを作るときに、ブログや職種紹介など2種類以上のマークダウンファイルを管理する場合があると思います。通常だとMarkdownRemarkNodeの<code class=\"language-text\">fileAbsolutePath</code>でしか両者のマークダウンファイルを見分ける術がありませんが、ここではもっとスマートなやり方を紹介します。簡単に言うとFileNodeの<code class=\"language-text\">sourceInstanceName</code>をMarkdownRemarkNodeに引き継ぐことにより、GraphQLのfilterで簡単に区別できるという方法です。</p>\n<h2 id=\"実装方法\"><a href=\"#%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装方法</h2>\n<h3 id=\"step1-マークダウンファイルのflenodeでsourceinstancenameを定義\"><a href=\"#step1-%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AEflenode%E3%81%A7sourceinstancename%E3%82%92%E5%AE%9A%E7%BE%A9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step1. マークダウンファイルのFleNodeでsourceInstanceNameを定義</h3>\n<p>マークダウンファイルの読み込み設定はgatsby-config.jsで以下のようにします。\n<code class=\"language-text\">name</code>を付けることでマークダウンファイルのFileNodeにおいて<code class=\"language-text\">sourceInstanceName</code>が設定できます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* (中略) */</span>\n\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">/* (中略) */</span>\n\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-source-filesystem'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token comment\">// オプションでname(FileNodeにおけるsourceInstanceName)を指定</span>\n</span><span class=\"gatsby-highlight-code-line\">        name<span class=\"token punctuation\">:</span> <span class=\"token string\">'posts'</span><span class=\"token punctuation\">,</span>\n</span>        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/content/posts`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-source-filesystem'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token comment\">// オプションでname(FileNodeにおけるsourceInstanceName)を指定</span>\n</span><span class=\"gatsby-highlight-code-line\">        name<span class=\"token punctuation\">:</span> <span class=\"token string\">'jobs'</span><span class=\"token punctuation\">,</span>\n</span>        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/content/jobs`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'gatsby-transformer-remark'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/* (中略) */</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"step2-filenodeのnameをmarkdownfilenodeに引継ぐ\"><a href=\"#step2-filenode%E3%81%AEname%E3%82%92markdownfilenode%E3%81%AB%E5%BC%95%E7%B6%99%E3%81%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step2. FileNodeのnameをMarkdownFileNodeに引継ぐ</h3>\n<p>何もしないとFileNodeの<code class=\"language-text\">sourceInstanceName</code>はMarkdownRemarkNodeに引き継がれません。\nそのため<code class=\"language-text\">gatsby-node.js</code>で引継ぎ処理を実装します。</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span>  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> boundActionCreators<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> boundActionCreators\n\n  <span class=\"token comment\">// MarkdownRemarkNodeの場合のみ処処</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node <span class=\"token operator\">&amp;&amp;</span> node<span class=\"token punctuation\">.</span>internal <span class=\"token operator\">&amp;&amp;</span> node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'MarkdownRemark'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// 親のFileNodeを取得して</span>\n    <span class=\"token keyword\">const</span> parent <span class=\"token operator\">=</span> <span class=\"token function\">getNode</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// gatsby-config.jsで設定したFileNodeのsourceInstanceNameを</span>\n    <span class=\"token comment\">// MarkdownRemarkのフィールドに引き継ぐ</span>\n    <span class=\"token comment\">// 名前はMarkdownRemarkの他プロパティとかぶらないようにcollectionとしている</span>\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'collection'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> parent<span class=\"token punctuation\">.</span>sourceInstanceName<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"step3-graphqlでnameをもとにマークダウンを区別\"><a href=\"#step3-graphql%E3%81%A7name%E3%82%92%E3%82%82%E3%81%A8%E3%81%AB%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%82%92%E5%8C%BA%E5%88%A5\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step3. GraphQLでnameをもとにマークダウンを区別</h3>\n<p>GraphQLではcollectionフィールドで、それぞれを区別します。</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  allMarkdownRemark<span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\"># collectionにて記事のNodeのみ抽出</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token attr-name\">fields</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token attr-name\">collection</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token attr-name\">eq</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"posts\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n</span>  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\"># (中略)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>簡単ですがGatsbyで良く困る事例の1つを紹介しました。\nGatsbyは多くのフックポイントを設けているので、今回のよう、やろうと思えば結構いろんなことができます🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/issues/1634\">Question: How do I query based on gatsby-source-filesystem name? · Issue #1634 · gatsbyjs/gatsby</a></li>\n</ul>","fields":{"slug":"/how-to-distinct-2-kinds-of-markdown-in-gatsby","title":"Gatsbyで2種類のマークダウンファイルの区別する方法","date":"2019-06-01T21:00:00.000-07:00","excerpt":"なにこれGatsbyでWebサイトを作るときに、ブログや職種紹介など2種類以上のマークダウンファイルを管理する場合があると思います。通常だとMarkdownRemarkNodeのfileAbsolutePathでしか両者のマークダウンファイ...","tags":["Gatsby"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2019/06/how-to-distinct-2-kinds-of-markdown-in-gatsby.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Gatsbyでは、gatsby-node.jsのcreatePagesで以下のようにページを作成できます。\nただルートページ（index.jsのページ）はGatsby側で生成されるので通常はContextが設定できません。\nしかし場合によってはルートページにContextを設定したい時もあるでしょう。\nそこで今回は、ルートページにContextを設定する方法をご紹介します。</p>\n<div class=\"gatsby-code-title\">gatsby-node.jsでページにContextを設定する方法（ルートページでは使えない）</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> actions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* (中略) */</span>\n\n  actions<span class=\"token punctuation\">.</span><span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span>\n    component<span class=\"token punctuation\">:</span> qiitaPost<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      slug<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      relatedPosts<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      latestPosts<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">...</span><span class=\"token function\">previouseAndNext</span><span class=\"token punctuation\">(</span>posts<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"実装方法\"><a href=\"#%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装方法</h2>\n<p>gatsby-node.jsでは<a href=\"https://www.gatsbyjs.org/docs/node-apis/#onCreatePage\"><code class=\"language-text\">onCreatePage</code></a>というAPIが用意されており、ページ生成時の処理を定義できます。これを使って以下のような処理を実行します。</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreatePage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage<span class=\"token punctuation\">,</span> deletePage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// ルートページの場合のみ処理継続</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">.</span>path <span class=\"token operator\">===</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span>\n</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// いったんルートページを削除</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">deletePage</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">)</span>\n</span>\n  <span class=\"token comment\">// pageオブジェクトをもとにルートページを再生成</span>\n  <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>page<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">...</span>page<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      house<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`Gryffindor`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>やり方は原始的で、ルートページ生成されたときに一度削除して、ルートページを再生成します。\nこの時<code class=\"language-text\">createPage</code>の引数でContextを渡せば追加できます。</p>\n<p>ちなみに、<code class=\"language-text\">onCreatePage</code>で<code class=\"language-text\">craetePage</code>を呼び出すと無限ループになるのでは？と思うかもしれませんが、\n<code class=\"language-text\">onCratePage</code>はGatsby側で生成されたページの場合しか呼び出されないので、その心配はありません。<br/>\n以上です。🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/docs/creating-and-modifying-pages/#pass-context-to-pages\">Creating and Modifying Pages | GatsbyJS</a></li>\n</ul>","fields":{"slug":"/how-to-attach-context-to-root-page-in-gatsby","title":"GatsbyのルートページにContextを設定する方法","date":"2019-05-31T16:10:00.000+09:00","excerpt":"なにこれGatsbyでは、gatsby-node.jsのcreatePagesで以下のようにページを作成できます。ただルートページ（index.jsのページ）はGatsby側で生成されるので通常はContextが設定できません。しかし場合に...","tags":["Gatsby"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2019/05/how-to-attach-context-to-root-page-in-gatsby.png"}}],"previous":{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>GatsbyにQiitaの記事を取り込めるプラグイン(<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-qiita/\">gatsby-source-qiita</a>)を作りました\nQiitaからGatsbyに乗り換えようと考えている方で、Qiitaの記事を引き継ぎたい場合に便利なプラグインです。サンプル(<a href=\"https://takumon.github.io/gatsby-starter-qiita/\">gatsby-starter-qiita</a>)も用意してます。\n今回はこのプラグインとサンプルについて紹介します。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 700px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 111.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAE2ElEQVQ4y41UW2wUVRgeqCLxTQOC1RiNL5qYGOMlER9MfCHxQXky+AIEFAM8EGKCxAfFEDTxxgMxBhMx0BIIFSiXLu3Slt1u2Uu3Zbfby7bbkW53u5czszszuzsze5k55/PMbEVQYtzky/f/55x8+///d84InWvXjHU+86hy9Oh3xe7uLvLbqZOkq/s06b18iXSf6SKb3nqTrO5YRVatFlwIq+7Hw2seIh0dHUQQBHnjk52icPnC7+mAz498WoGuWNDkOsrFGhSiQ5UMJCbmcdMbdHHLF0VwZBxB/wTHOG75o7jaO4ABrxeePg8uXLykCwBEyV7EYPakfXO5i91cPsOGMqfZcKab8ykWlHpYWLnAxtReFuWIVTwsql1iMc3DUtYIO3R8Hzv6zQ+U6yC9lNEEMIhXCt/iyPRm+lNqJ47NbcXx1DZ8PfMufhH34sjUZhyf24EvE+/gx+RWnEjt4fl27AptwBa/gA+CAl7Z/Tg7duxnzCZnNbfCntxh7Bl7ln4e34RPJ17GF5NvY//4CzgUewMHJl7Cwdir2Bd93uXPYq9xvI4docfwvk/AlhEB226vZQe+2o9DBw+3Ba+R7/Fh6BG6O9qJj6MbsSuyHrvCG7AzvI7zEy5/FHHy9StYh92Rp7A3+hw+iTyNA7dfZKVWFv19g5pgWbYIUGTkOarqEmStCM0oo27r/0DtvtzkuWlVOVehtyrMmWEuy2do8RmibsC3/T0qJWIoyArUsob/9WN34QpK+RwXtJ0KeY2ZNIXdevBpRu/J/g2KFcFlp8JGXcRMDNVoiFaCAWijPlSDfigBH8ocKs8xHgAbvAw2fLUN70WwoStgnvNg538FCw27gnJ+WRNskhfpZBTRnEHjmQrm5QbEUgNThTom8yayFatdx515YIk3k14A/kgCiTEgOAR4e8GunmVoNVEmeS4oFUQk48gqKpXLJeiNBqr1Ouc6GraFimGg2miialGojRZqNkWT/4UT67xXJ6azMQazhlzeEVTLIi8ZS6ERmgv5UYiMQp4IQYlHOcZ5HHZjfSYOM5lAc34aljgLg4+pMZeAvZgCCw4xWC0uyE1pUSpiYRrw9VHcugEEBoCR/jYH/uKV2Fkf9QIh3mp4mLc8CPg9YHOT7gwLjil2WRLt2xGMzeZobDqNUl6CVpQg5QgSySx0SQa0MphaAmoVLsRN8vQA3BRcOwecPQF27RwDtVEoONeGm4K5SeSMJpW1GpqUuTBt5s7I/vtqoEEpLL0GSybgo4LNuVmSYEX8DA0ThWKBC7qmxFBUFJpZXEQ2k0FmaQmFfA61agWaqkJVFChK2d1TK1XXuIphIl8kILqJWtjnChJyVzAOuarTWpU/Je5wuVwGkSRUeK5zl3Wdfxu5sMMGh+k47wjzfadyGg/zlgyUSvwetpyWUwncc+H/851R5ryclXOUtncmI65grpjVBCoXFppTMYQLlr1ADBrL1miKmHRE1OhwSqNTeZ1Oc8i1JtWMFlX0NpxzmZLpFkjjEQpTRyaXVQUm5ZfA71aQmzklW7hjAEluZqIM5BvtQuwH1Hvf2swEYDWxXMgbQqNaGbMCA4p2vaeoeHqIfqOX2IHrxB7xECvQT0zfddIMDLhcG+4jBmdjZa056iWmv5+0Rm8QWJacyaTFPwGTJue8m2czAQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"デモイメージ（コメント付き）\"\n        title=\"\"\n        src=\"/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png\"\n        srcset=\"/static/9293b3eb97aeb22d4a07c16875d1784d/45c00/gatsby-starter-qiita-with-comment.png 200w,\n/static/9293b3eb97aeb22d4a07c16875d1784d/7f762/gatsby-starter-qiita-with-comment.png 400w,\n/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"概要\"><a href=\"#%E6%A6%82%E8%A6%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>概要</h2>\n<ul>\n<li>プラグイン作成の経緯と最近のQiita</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-qiita/\">gatsby-source-qiita</a></p>\n<ul>\n<li>使い方</li>\n<li>\n<p>実装ポイント</p>\n<ul>\n<li>プラグイン公開手順</li>\n<li>gatsby/graphql not found</li>\n<li>目次情報作成</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://takumon.github.io/gatsby-starter-qiita/\">gatsby-starter-qiita</a></p>\n<ul>\n<li>概要</li>\n<li>\n<p>実装ポイント</p>\n<ul>\n<li>シンタックスハイライトのスタイル</li>\n<li>オリジナル記事とQiita記事のスキーマ統一</li>\n<li>Github-rebbons便利</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>まとめ</li>\n</ul>\n<h2 id=\"プラグイン作成の経緯と最近のqiita\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E4%BD%9C%E6%88%90%E3%81%AE%E7%B5%8C%E7%B7%AF%E3%81%A8%E6%9C%80%E8%BF%91%E3%81%AEqiita\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグイン作成の経緯と最近のQiita</h2>\n<p>最近Qiitaが微妙なので、Qiitaとブログを別々に管理するより、ブログにまとめたほうが良さそうと思ったのと、\n1つぐらい<a href=\"https://www.gatsbyjs.org/plugins/\">Gatsby公式サイト</a>で公開してみたいという思いから作りました。\n大枠は<a href=\"https://github.com/mottox2\">mottox2</a>さんの<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-esa/\">gatsby-source-esa</a>を参考にして、\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark\">gatsby-transform-remark</a>\n、<a href=\"https://qiita.com/api/v2/docs\">Qiita APIドキュメント</a>を見ながら実装してます。<br></p>\n<p>余談ですが、最近のQiitaはポエムが乱立していて、変な方向に向かっていますね。<br>\nかつては有用な技術記事がたくさん投稿されているイメージでしたが、トレンド機能を導入してからでしょうか？<br>\n昔に戻ってもらえるとうれしいです。来月のQiita Advent Calendarに期待です！！<br>\nとはいえ、今でも良記事もたくさんあって、<code class=\"language-text\">Angualr</code>とかで絞ると結構見つかります。\n最近、これは！と思った記事は、<a href=\"https://qiita.com/shibukawa/items/6eeaace2a130a0213386\">「Angularで、Angular Materialのテーマに対応するライブラリを作る」</a>などです。このような記事こそQiitaにあるべきだと思います。</p>\n<h2 id=\"gatsby-source-qiita\"><a href=\"#gatsby-source-qiita\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/Takumon/gatsby-source-qiita\">gatsby-source-qiita</a></h2>\n<h3 id=\"使い方\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h3>\n<p>インストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save gatsby-source-qiita</code></pre></div>\n<br>\n<p>アクセストークやユーザ名を設定します。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-qiita`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        accessToken<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`YOUR_PERSONAL_ACCESS_TOKEN`</span></span><span class=\"token punctuation\">,</span>\n        userName<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`YOUR_UAWE_NAME`</span></span><span class=\"token punctuation\">,</span>\n        fetchPrivate<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        excludedPostIds<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'da8347f81a9f021b637f'</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>accessToken</p>\n<ul>\n<li>【必須】API認証用のQiitaアクセストークンです。<code class=\"language-text\">Qiitaの設定ページ &gt;  アプリケーション &gt; 新しくトークンを発行する</code>で発行してください。</li>\n</ul>\n</li>\n<li>\n<p>userName</p>\n<ul>\n<li>【必須】Qiitaアカウント名です。ここで指定したアカウントに紐付く記事を引っ張ってきます。</li>\n</ul>\n</li>\n<li>\n<p>fetchPrivate</p>\n<ul>\n<li>【任意】限定公開記事も取得するかを設定します。デフォルトはfalseです。</li>\n</ul>\n</li>\n<li>\n<p>excludedPostIds</p>\n<ul>\n<li>【任意】除外したい記事をid配列で指定します。デフォルトは何も除外しません。</li>\n</ul>\n</li>\n</ul>\n<br>\n<p>これでQiitaの記事をGraphQLで取得できるようになります。\n取得情報はほぼQiita APIのまんまですが、目次情報(headings)を追加しています。</p>\n<div class=\"gatsby-code-title\">Qiita記事取得用のクエリ</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  allQiitaPost <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        id\n        title\n<span class=\"gatsby-highlight-code-line\">        headings <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          value\n</span><span class=\"gatsby-highlight-code-line\">          id\n</span><span class=\"gatsby-highlight-code-line\">          depth\n</span><span class=\"gatsby-highlight-code-line\">          parents <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">            value\n</span><span class=\"gatsby-highlight-code-line\">            id\n</span><span class=\"gatsby-highlight-code-line\">            depth\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span>\n</span>        rendered_body\n        body\n        comments_count\n        created_at\n        likes_count\n        reactions_count\n        tags <span class=\"token punctuation\">{</span>\n          name\n        <span class=\"token punctuation\">}</span>\n        updated_at\n        url\n        user <span class=\"token punctuation\">{</span>\n          id\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"実装のポイント\"><a href=\"#%E5%AE%9F%E8%A3%85%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装のポイント</h3>\n<h4 id=\"プラグイン公開手順\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E5%85%AC%E9%96%8B%E6%89%8B%E9%A0%86\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグイン公開手順</h4>\n<p>いきなしnpmパッケージで開発を始めるより、下記のように段階を経て動作確認していく方が楽でした。</p>\n<ol>\n<li>(Gatsby APIを使わない処理について)コンポーネントで実装</li>\n<li>アプリケーション自体の<code class=\"language-text\">gatsby-node.js</code>や<code class=\"language-text\">gatsby-browser.js</code>で実装</li>\n<li>ローカルプラグインに切り出して<code class=\"language-text\">gatsby-node.js</code>や<code class=\"language-text\">gatsby-browser.js</code>で実装</li>\n<li>別プロジェクトに切り出してnpmパッケージとして実装、　アプリケーション側からは<code class=\"language-text\">npm install ../gatsby-source-qiita</code>のようにローカルnpmインストール</li>\n<li>npm公開</li>\n<li>アプリケーション側で<code class=\"language-text\">npm install gatsby-source-qiita</code>のようにnpmインストール</li>\n</ol>\n<h4 id=\"プラグインをローカルインストールするとgatsbygraphql-not-found\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B%E3%81%A8gatsbygraphql-not-found\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグインをローカルインストールするとgatsby/graphql not found</h4>\n<blockquote>\n<p>Gatsbyではプラグインで<code class=\"language-text\">gatsby/graphql</code>を使う場合でも依存ライブラリには追加しません。\nビルド時にアプリ側の<code class=\"language-text\">gatsby/graphql</code>を使ってプラグインも含め全体をコントロールするからです。</p>\n</blockquote>\n<p>のはずなんですが、プラグインをnpmでローカルインストールする(<code class=\"language-text\">npm install ../gatsby-source-qiita</code>する)と\nビルド時に「gatsby/graphql not found」と怒られました。\nしょうがないので動作確認時だけローカルプラグインとして扱う(アプリのplugins配下に置く)ことで回避しました。\nnpm公開版だと問題なく動いたのですが... 最後まで謎でした。</p>\n<h3 id=\"目次情報作成\"><a href=\"#%E7%9B%AE%E6%AC%A1%E6%83%85%E5%A0%B1%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>目次情報作成</h3>\n<p>QiitaAPIで取得するHTMLは既にリンクが埋め込まれていたので、HTMLから目次を抽出しています。\nHTML構文解析には<a href=\"https://github.com/unifiedjs/unified\">unified</a>の<a href=\"https://github.com/rehypejs/rehype\">rehype</a>を使いました。</p>\n<div class=\"gatsby-code-title\">HTMLから目次情報抽出する処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> rehype <span class=\"token keyword\">from</span> <span class=\"token string\">'rehype'</span>\n<span class=\"token keyword\">import</span> visit <span class=\"token keyword\">from</span> <span class=\"token string\">'unist-util-visit'</span>\n<span class=\"token keyword\">import</span> hastToString <span class=\"token keyword\">from</span> <span class=\"token string\">'hast-util-to-string'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MIN_HEADER_DEPTH</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">HEADER_TYPE_IN_HAST</span> <span class=\"token operator\">=</span> <span class=\"token string\">'element'</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">HEADER_TAG_NAMES_IN_HAST</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'h1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'h2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'h3'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'h4'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'h5'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'h6'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">_extractHeadingDetails</span><span class=\"token punctuation\">(</span>htmlStr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// HAST形式の抽象構文木に変換</span>\n  <span class=\"token keyword\">const</span> htmlAst <span class=\"token operator\">=</span> rehype<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>htmlStr<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// ヘッダータグ(h1〜h6タグ)を探す</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token function\">visit</span><span class=\"token punctuation\">(</span>htmlAst<span class=\"token punctuation\">,</span> <span class=\"token constant\">HEADER_TYPE_IN_HAST</span><span class=\"token punctuation\">,</span> node <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token constant\">HEADER_TAG_NAMES_IN_HAST</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>tagName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// ヘッダータグから深さとタイトルを抽出</span>\n    <span class=\"token keyword\">const</span> heading <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      depth<span class=\"token punctuation\">:</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>tagName<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> <span class=\"token function\">hastToString</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// aタグのうちhref属性が#始まりのものを探しidを抽出</span>\n    node<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">=></span> <span class=\"token function\">_isHeaderIdLink</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      heading<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token function\">decodeURI</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>heading<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">_isHeaderIdLink</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> node<span class=\"token punctuation\">.</span>tagName <span class=\"token operator\">===</span> <span class=\"token string\">'a'</span>\n          <span class=\"token operator\">&amp;&amp;</span> node<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>href\n          <span class=\"token operator\">&amp;&amp;</span> node<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">.</span><span class=\"token function\">startsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"gatsby-starter-qiita\"><a href=\"#gatsby-starter-qiita\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/docs/create-source-plugin/\">gatsby-starter-qiita</a></h2>\n<h3 id=\"概要-1\"><a href=\"#%E6%A6%82%E8%A6%81-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>概要</h3>\n<p>Gatsbyの一番ベーシックなサンプル(<a href=\"https://github.com/gatsbyjs/gatsby-starter-blog\">gatsby-starter-blog</a>)をベースに、gatsby-source-qiitaを導入し、オリジナルの記事とQiitaの記事を一緒くたに扱えるサンプルです。\n<a href=\"https://takumon.github.io/gatsby-starter-qiita/\">デモ</a>もあります。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 700px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 111.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAE2ElEQVQ4y41UW2wUVRgeqCLxTQOC1RiNL5qYGOMlER9MfCHxQXky+AIEFAM8EGKCxAfFEDTxxgMxBhMx0BIIFSiXLu3Slt1u2Uu3Zbfby7bbkW53u5czszszuzsze5k55/PMbEVQYtzky/f/55x8+///d84InWvXjHU+86hy9Oh3xe7uLvLbqZOkq/s06b18iXSf6SKb3nqTrO5YRVatFlwIq+7Hw2seIh0dHUQQBHnjk52icPnC7+mAz498WoGuWNDkOsrFGhSiQ5UMJCbmcdMbdHHLF0VwZBxB/wTHOG75o7jaO4ABrxeePg8uXLykCwBEyV7EYPakfXO5i91cPsOGMqfZcKab8ykWlHpYWLnAxtReFuWIVTwsql1iMc3DUtYIO3R8Hzv6zQ+U6yC9lNEEMIhXCt/iyPRm+lNqJ47NbcXx1DZ8PfMufhH34sjUZhyf24EvE+/gx+RWnEjt4fl27AptwBa/gA+CAl7Z/Tg7duxnzCZnNbfCntxh7Bl7ln4e34RPJ17GF5NvY//4CzgUewMHJl7Cwdir2Bd93uXPYq9xvI4docfwvk/AlhEB226vZQe+2o9DBw+3Ba+R7/Fh6BG6O9qJj6MbsSuyHrvCG7AzvI7zEy5/FHHy9StYh92Rp7A3+hw+iTyNA7dfZKVWFv19g5pgWbYIUGTkOarqEmStCM0oo27r/0DtvtzkuWlVOVehtyrMmWEuy2do8RmibsC3/T0qJWIoyArUsob/9WN34QpK+RwXtJ0KeY2ZNIXdevBpRu/J/g2KFcFlp8JGXcRMDNVoiFaCAWijPlSDfigBH8ocKs8xHgAbvAw2fLUN70WwoStgnvNg538FCw27gnJ+WRNskhfpZBTRnEHjmQrm5QbEUgNThTom8yayFatdx515YIk3k14A/kgCiTEgOAR4e8GunmVoNVEmeS4oFUQk48gqKpXLJeiNBqr1Ouc6GraFimGg2miialGojRZqNkWT/4UT67xXJ6azMQazhlzeEVTLIi8ZS6ERmgv5UYiMQp4IQYlHOcZ5HHZjfSYOM5lAc34aljgLg4+pMZeAvZgCCw4xWC0uyE1pUSpiYRrw9VHcugEEBoCR/jYH/uKV2Fkf9QIh3mp4mLc8CPg9YHOT7gwLjil2WRLt2xGMzeZobDqNUl6CVpQg5QgSySx0SQa0MphaAmoVLsRN8vQA3BRcOwecPQF27RwDtVEoONeGm4K5SeSMJpW1GpqUuTBt5s7I/vtqoEEpLL0GSybgo4LNuVmSYEX8DA0ThWKBC7qmxFBUFJpZXEQ2k0FmaQmFfA61agWaqkJVFChK2d1TK1XXuIphIl8kILqJWtjnChJyVzAOuarTWpU/Je5wuVwGkSRUeK5zl3Wdfxu5sMMGh+k47wjzfadyGg/zlgyUSvwetpyWUwncc+H/851R5ryclXOUtncmI65grpjVBCoXFppTMYQLlr1ADBrL1miKmHRE1OhwSqNTeZ1Oc8i1JtWMFlX0NpxzmZLpFkjjEQpTRyaXVQUm5ZfA71aQmzklW7hjAEluZqIM5BvtQuwH1Hvf2swEYDWxXMgbQqNaGbMCA4p2vaeoeHqIfqOX2IHrxB7xECvQT0zfddIMDLhcG+4jBmdjZa056iWmv5+0Rm8QWJacyaTFPwGTJue8m2czAQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"デモイメージ（コメント付き）\"\n        title=\"\"\n        src=\"/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png\"\n        srcset=\"/static/9293b3eb97aeb22d4a07c16875d1784d/45c00/gatsby-starter-qiita-with-comment.png 200w,\n/static/9293b3eb97aeb22d4a07c16875d1784d/7f762/gatsby-starter-qiita-with-comment.png 400w,\n/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id=\"実装ポイント\"><a href=\"#%E5%AE%9F%E8%A3%85%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装ポイント</h3>\n<h4 id=\"シンタックスハイライトのスタイル\"><a href=\"#%E3%82%B7%E3%83%B3%E3%82%BF%E3%83%83%E3%82%AF%E3%82%B9%E3%83%8F%E3%82%A4%E3%83%A9%E3%82%A4%E3%83%88%E3%81%AE%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>シンタックスハイライトのスタイル</h4>\n<p>Qiita APIで取得するHMTLのソースコードブロックは、Qiitaで想定してるシンタックスハイライト用クラスが付与されています。\nそのためスタイルはQiitaのサイトで開発者ツールで該当のCSS開いてほぼ流用しました。</p>\n<h3 id=\"オリジナル記事とqiita記事のスキーマを統一したい\"><a href=\"#%E3%82%AA%E3%83%AA%E3%82%B8%E3%83%8A%E3%83%AB%E8%A8%98%E4%BA%8B%E3%81%A8qiita%E8%A8%98%E4%BA%8B%E3%81%AE%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E3%82%92%E7%B5%B1%E4%B8%80%E3%81%97%E3%81%9F%E3%81%84\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>オリジナル記事とQiita記事のスキーマを統一したい</h3>\n<p>オリジナル記事とQiita記事でスキーマが違うため、ソースコードで一緒くたに扱おうとするとif文だらけになって扱いづらい状態でした。\n対策として<a href=\"https://github.com/Takumon/blog/tree/master/plugins/gatsby-remark-and-qiita/gatsby-node.js\">スキーマ統一用ローカルプラグイン</a>を作りました。ローカルプラグインなので名前はテキトーですが...<br>\nGatsbyプラグインでは、<a href=\"https://www.gatsbyjs.org/docs/actions/#createNodeField\">createNodeField</a>というAPIでノードのfieldsに自由にプロパティが追加できます。\n今回は<a href=\"https://www.gatsbyjs.org/docs/node-apis/#onCreateNode\">onCreateNode</a>(ノード生成時に呼ばれるAPI)時にcreateNodeFieldを使ってfieldsにタイトルや作成日など共通プロパティを追加することでスキーマの差異を吸収しています。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownRemark`</span></span> <span class=\"token operator\">&amp;&amp;</span> node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token string\">`QiitaPost`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// ここで差異を吸収</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">    slug<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    title<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    date<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    excerpt<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    tags<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span>\n</span><span class=\"gatsby-highlight-code-line\">    node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownRemark`</span></span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">_excerptMarkdown</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>rawMarkdownBody<span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>tags\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token template-string\"><span class=\"token string\">`/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>node<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        node<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        node<span class=\"token punctuation\">.</span>created_at<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">_excerptHtml</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>rendered_body<span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>tag <span class=\"token operator\">=></span> tag<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Qiita'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// Qiitaタグを追加</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span>\n</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// ノードのfieldsにプロパティを追加</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`slug`</span></span><span class=\"token punctuation\">,</span>     node<span class=\"token punctuation\">,</span>   value<span class=\"token punctuation\">:</span> slug     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`title`</span></span><span class=\"token punctuation\">,</span>    node<span class=\"token punctuation\">,</span>   value<span class=\"token punctuation\">:</span> title    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`date`</span></span><span class=\"token punctuation\">,</span>     node<span class=\"token punctuation\">,</span>   value<span class=\"token punctuation\">:</span> date     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`excerpt`</span></span><span class=\"token punctuation\">,</span>  node<span class=\"token punctuation\">,</span>   value<span class=\"token punctuation\">:</span> excerpt  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`tags`</span></span><span class=\"token punctuation\">,</span>     node<span class=\"token punctuation\">,</span>   value<span class=\"token punctuation\">:</span> tags     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"github-ribbons便利\"><a href=\"#github-ribbons%E4%BE%BF%E5%88%A9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github-ribbons便利</h4>\n<p>GitHub Pagesなどでサンプル公開したときに、ソースコードのリンクを貼り付けたくなりますが、\nその時に便利なのが<a href=\"https://blog.github.com/2008-12-19-github-ribbons/\">Github-ribbons</a>です。\nいろんなところで見かけるこのリボン、実はコピペで簡単に実装できたんですね。知らなかった。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/283def24fa1c8479482c9b1b6b377b72/1b47a/github-ribbons.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 700px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAAC/klEQVQ4y3WSSWgTURzGg+ICnlwrngQvCoLgCl4EL4pYBS/qRcUNF3BBsepBhaKIqAWriB4Et4NLW6laaa22brGa1ca2SQ22ySTNMma2TJNJZt7/883EuqEDH9/7/+e9H99bXM2NDwfedL7C0KAEXTKhiEXk0nlIGR1ydhjdvgg62tyO3nV64H7thfuVj8vr1I+bWtHa1oaWlhY0NDblXQC+ZK0BtAs3rI7EbepI3KUX8Vv0Mn6H+01yZx9Ql9RAH+VH5OEKqC3kUZrIzz1ivqaay3vp9NkLjHMQi8VlGxhtTp1D7ecV7Er/VtSFN6C+fxPO9KzC9ege1IZWoD68BSe7l+Ni3wZc69+NS5Et2PmmCuteuLD+rQvzt0+iurqr6OvrUxzgg+Qp7P44kx0PLsUh3zyc+LQM+72zcTSwGAd9c3EksAB7PbMcrwks4lqIbR+q8HDHePQvmYD66xNp17l9OH74VAX4JHMeG9+PYzs9M7DDM51PnoptXVXY2jWF+zTHt3+wa953T8Zm31QcuTUGsTljwUaPwuMDVRRHEs+b2xWXZbEowBAXw0zWsxCVNJThHIqW/pfyFVEBBZ6i7HkHZc50aMf2oBDoIvsMh4Q4B/KEMAro3LyGZbsDSIkS5JyC/37fRL4yCVgWrCEBVCrZXQcoppKKy7SsqF0wIcZglX9bST9FxCqyK78b9PQe6Nl9Dk9XZprlCjAp8ISm6QA1AlMNBqVQhmaYkIZN5IbLkAvmDyhVgGIaJOdAmSTIMCo9+6cdPpVQXIwn5NuGZ0BiwUSeImKJorkShdJF+pQqkqCa9Efcf2gEKKXshD+2LMQGmZhJk57XSFMV0jWVjIJOqiyRpuW5NJJlmfLcS4ZBspQjXdf5EZaIMfbrUnjx1QEKAtKZDDLZLHKSBFVVoWoaJEl2xsViEXwxvwvLOTeDb9c0zT/uK5kQ8i6v17s8GAyuDYfDqyORSDX3av7iq3t7ex3Zte09PT2OQqFQNZ/v9EbGfr/f9jXtba0rvwOmN26/0ndh4wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"GitHub Ribbons\"\n        title=\"\"\n        src=\"/static/283def24fa1c8479482c9b1b6b377b72/1b47a/github-ribbons.png\"\n        srcset=\"/static/283def24fa1c8479482c9b1b6b377b72/45c00/github-ribbons.png 200w,\n/static/283def24fa1c8479482c9b1b6b377b72/7f762/github-ribbons.png 400w,\n/static/283def24fa1c8479482c9b1b6b377b72/1b47a/github-ribbons.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Github-rebbonsで紹介されているコードを少しReactベースに修正して貼り付けました。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://github.com/Takumon/gatsby-starter-qiita<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n    <span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>{{</span>\n      <span class=\"token attr-name\"><span class=\"token namespace\">position:</span></span> <span class=\"token attr-name\">'absolute',</span>\n      <span class=\"token attr-name\"><span class=\"token namespace\">top:</span></span> <span class=\"token attr-name\">0,</span>\n      <span class=\"token attr-name\"><span class=\"token namespace\">right:</span></span> <span class=\"token attr-name\">0,</span>\n      <span class=\"token attr-name\"><span class=\"token namespace\">border:</span></span> <span class=\"token attr-name\">0</span>\n    <span class=\"token attr-name\">}}</span>\n    <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_png<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Fork me on GitHub<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はQiitaから記事を取得するGatsbyプラグインを作りました。\n自分のプラグインが<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-qiita/\">Gatsbyのサイト</a>で検索できるようになったときは少し感動しました。\nまた自分のブログに<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-qiita/\">gatsby-source-qiita</a>を適用したことにより記事数とバリエーションが増えてので、なんとなく満足してます🍅</p>","fields":{"slug":"/2018/11/11/","title":"GatsbyでQiitaから記事を取得する(gatsby-source-qiita)","date":"2018-11-11T21:00:00.000+09:00","excerpt":"なにこれGatsbyにQiitaの記事を取り込めるプラグイン(gatsby-source-qiita)を作りましたQiitaからGatsbyに乗り換えようと考えている方で、Qiitaの記事を引き継ぎたい場合に便利なプラグインです。サンプル(...","tags":["Gatsby","GatsbyPlugin","Qiita"],"keywords":["GatsbyPlugin"],"thumbnail":"thumbnail/2018/gatsby-plugin-qiita.png"}},"next":{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>下記の<a href=\"https://www.gatsbyjs.org/blog/2018-11-11-introducing-gatsby-themes/\">記事</a>を読んで、\n実験的に追加されたGatsby themeで何ができるのか<a href=\"chrome://flags/#enable-ephemeral-flash-permission\">サンプル</a>作って試してみました。そのときのメモです。</p>\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"en\" dir=\"ltr\">Excited to talk a bit about something I&#39;ve been working on a lot lately<br><br>Introducing <a href=\"https://twitter.com/gatsbyjs?ref_src=twsrc%5Etfw\">@gatsbyjs</a> Themes <a href=\"https://t.co/ysDITHlbsV\">https://t.co/ysDITHlbsV</a></p>&mdash; :party-corgi: (@chrisbiscardi) <a href=\"https://twitter.com/chrisbiscardi/status/1062426813840814080?ref_src=twsrc%5Etfw\">2018年11月13日</a></blockquote>\n<h2 id=\"gatsby-themeはどんな問題を解決してくれるか\"><a href=\"#gatsby-theme%E3%81%AF%E3%81%A9%E3%82%93%E3%81%AA%E5%95%8F%E9%A1%8C%E3%82%92%E8%A7%A3%E6%B1%BA%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%81%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby themeはどんな問題を解決してくれるか</h2>\n<p>Gatsbyはスキャフォールド機能があって初期導入が非常に簡単です。最小構成のものから、かなりデザインが作り込まれたものまで65個(2018/11/24現在)のスキャフォールドが存在し、<a href=\"https://www.gatsbyjs.org/starters/?v=2\">Gatsby Starter</a>から好きなものを選べます。<br>\nただし初期導入後はスキャフォールドのアップデートに追従できませんし、途中で別のものに変更することも容易ではありません。変更できたとしても実質作り直しと同じくらい改修が必要でしょう。（スキャフォールドなんであたりまえですが...）\nテーマを容易に変更できるようなWordPressなどに比べると拡張性の面で劣っています。<br>\nGatsby themeはこれらの問題を解決するための機能です。</p>\n<h2 id=\"gatsby-themeの概要\"><a href=\"#gatsby-theme%E3%81%AE%E6%A6%82%E8%A6%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby themeの概要</h2>\n<ul>\n<li>\n<p>テーマでは下記を定義でき、Gatsbyの資産の大部分をコンテンツから切り離してnpmパッケージとして管理できます。</p>\n<ul>\n<li>依存関係（package.json）</li>\n<li>設定ファイル（gatsby-config.js）</li>\n<li>ページ（blog-post.jsやindex.jsなど）</li>\n<li>コンポーネント（Bio.jsやLayout.jsなど）</li>\n</ul>\n</li>\n<li>コンテンツ側は、今までのように<code class=\"language-text\">package.json</code>で大量のGatsbyプラグインの依存関係を定義したり、<code class=\"language-text\">gatsby-config.js</code>で大量のプラグイン設定を定義する必要がなくなります、使用テーマの宣言とコンテンツの定義だけで、Webサイトを構築できます。</li>\n<li>テーマの設定は引数を許容するので、コンテンツ側から指定した値を設定値に反映できます。</li>\n<li>テーマで用意しているページやコンポーネントは、コンテンツ側で上書きでき、別途追加作成も可能です。　※現時点では若干自力実装が必要ですが...</li>\n</ul>\n<h2 id=\"gatsby-themeの作り方\"><a href=\"#gatsby-theme%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby themeの作り方</h2>\n<p>ここでは2種類のテーマと3種類のブログを作ります。<br>\n<small>※ソースは<a href=\"https://github.com/Takumon/my-gatsby-theme-sample\">GitHub</a>参照</small></p>\n<h3 id=\"1-とりあえずテーマを作る\"><a href=\"#1-%E3%81%A8%E3%82%8A%E3%81%82%E3%81%88%E3%81%9A%E3%83%86%E3%83%BC%E3%83%9E%E3%82%92%E4%BD%9C%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. とりあえずテーマを作る</h3>\n<p><a href=\"https://github.com/gatsbyjs/gatsby-starter-blog\">gatsby-starter-blog</a>を最小限の修正でテーマ化します。<br>\n<small>※<a href=\"https://github.com/Takumon/my-gatsby-theme-sample/tree/master/themes/gatsby-blog-theme\">ソース</a>、<a href=\"https://github.com/Takumon/my-gatsby-theme-sample/commit/10b68c4f3ad5158973952432da2b4d518570f53d\">参考コミット</a></small></p>\n<h4 id=\"1-1-設定ファイルgatsby-configjs修正\"><a href=\"#1-1-%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%ABgatsby-configjs%E4%BF%AE%E6%AD%A3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-1. 設定ファイル(gatsby-config.js)修正</h4>\n<p>コンテンツ側のルートパスを受け取り、それを元にファイルパスを組み立てるようにします。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// ユーザ側からルートディレクトリを指定して、それをもとに設定の中でパスを組み立てる</span>\n</span><span class=\"gatsby-highlight-code-line\">module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> root <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n</span>  <span class=\"token comment\">// ･･･</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token comment\">// ページはコンテンツ側の資産を読み込む</span>\n</span><span class=\"gatsby-highlight-code-line\">        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`src/pages`</span></span><span class=\"token punctuation\">,</span>\n</span>        name<span class=\"token punctuation\">:</span> <span class=\"token string\">'pages'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-plugin-typography'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token comment\">// typographyはテーマで用意した資産を使うのでrootからの相対パスを指定する</span>\n</span><span class=\"gatsby-highlight-code-line\">        pathToConfigModule<span class=\"token punctuation\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">relative</span><span class=\"token punctuation\">(</span>\n</span><span class=\"gatsby-highlight-code-line\">          root<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./src/utils/typography'</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// ページとして、テーマで用意した資産を読み込む</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-page-creator`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        path<span class=\"token punctuation\">:</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`./src/pages`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"1-2-ファイルパス設定ユーティリティwith-theme-pathjs作成\"><a href=\"#1-2-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%91%E3%82%B9%E8%A8%AD%E5%AE%9A%E3%83%A6%E3%83%BC%E3%83%86%E3%82%A3%E3%83%AA%E3%83%86%E3%82%A3with-theme-pathjs%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-2. ファイルパス設定ユーティリティ(with-theme-path.js)作成</h4>\n<p>パス指定時に、コンテンツ側資産を優先的に使い、無ければテーマ側資産を使うようするユーティリティを作成します。※自力で実装します。</p>\n<div class=\"gatsby-code-title\">with-theme-path.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">/**\n * テーマで用意したページをユーザが上書き可能にするためのファイルパス解決ユーティリティ\n *\n * 指定した相対パスから\n * 1. ユーザが作成したファイルのパスを返却する\n * 2. ユーザが作成したファイルがなければテーマで用意しているパスを返却する\n * 3. テーマでもファイルを用意していない場合、指定した相対パスをそのまま返却する\n */</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> relativePath <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> pathResolvedPath <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>relativePath<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">let</span> finalPath <span class=\"token operator\">=</span> pathResolvedPath\n\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ファイル読み込み時にユーザが作成したファイルがあるかチェック</span>\n    require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>pathResolvedPath<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 1. ユーザが作成したファイルのパスを返却する</span>\n    finalPath <span class=\"token operator\">=</span> pathResolvedPath\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 2. ユーザが作成したファイルがなければテーマで用意しているパスを返却する</span>\n      finalPath <span class=\"token operator\">=</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>relativePath<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 3. テーマでもファイルを用意していない場合、指定した相対パスをそのまま返却する</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> relativePath\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> finalPath\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"1-3-gatsby-nodejs修正\"><a href=\"#1-3-gatsby-nodejs%E4%BF%AE%E6%AD%A3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-3. gatsby-node.js修正</h4>\n<p>先ほど作ったwith-theme-pash.jsを使ってページを読み込むようにします。\nまたnpmパッケージ公開用のビルド設定を追加します。\n※ここらへんも自力実装です。</p>\n<div class=\"gatsby-code-title\">gatsby-node.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> withThemePath <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./with-theme-path'</span><span class=\"token punctuation\">)</span>\n</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// withThemePathを使って、ユーザが作成したページまたはテーマで用意しているページを読み込む</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> blogPost <span class=\"token operator\">=</span> <span class=\"token function\">withThemePath</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./src/templates/blog-post.js'</span><span class=\"token punctuation\">)</span>\n</span>    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>\n        <span class=\"token comment\">// ･･･</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ･･･</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">/*\n</span><span class=\"gatsby-highlight-code-line\"> * Gatsbyテーマのビルド方法をwebpackに設定しています。\n</span><span class=\"gatsby-highlight-code-line\"> * NPMモジュールの公開時は、(1)事前コンパイルするか、(2)コンパイル方法の設定追加 どちらかが必要です。\n</span><span class=\"gatsby-highlight-code-line\"> * Gatsbyテーマの場合(2)が可能なので、ここで設定しています。\n</span><span class=\"gatsby-highlight-code-line\"> */</span>\n</span><span class=\"gatsby-highlight-code-line\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateWebpackConfig</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> stage<span class=\"token punctuation\">,</span> loaders<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">  actions<span class=\"token punctuation\">.</span><span class=\"token function\">setWebpackConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    module<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      rules<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.js$/</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          include<span class=\"token punctuation\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span>require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gatsby-blog-theme'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          use<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>loaders<span class=\"token punctuation\">.</span><span class=\"token function\">js</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span>\n</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// ユーザがsrc/pages未作成の場合にエラーになるのを防ぐため、無ければ作成する</span>\n</span><span class=\"gatsby-highlight-code-line\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onPreBootstrap</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> store <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> program <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> dir <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>program<span class=\"token punctuation\">.</span>directory<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/pages`</span></span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    fs<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirSync</span><span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span>\n</span></code></pre></div>\n<h4 id=\"1-4-indexjs作成\"><a href=\"#1-4-indexjs%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-4. index.js作成</h4>\n<p>npmパッケージ公開用に空のindex.jsを作成します。</p>\n<h4 id=\"1-5-srccomponentslayoutjs修正\"><a href=\"#1-5-srccomponentslayoutjs%E4%BF%AE%E6%AD%A3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-5. src/components/Layout.js修正</h4>\n<p>ESLintエラーを解消すための設定を追加します。</p>\n<div class=\"gatsby-code-title\">src/components/Layout.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">/* eslint-disable */</span>\n</span><span class=\"token comment\">// 冒頭に上記コメントを追加</span></code></pre></div>\n<br>\n<p>これでテーマ化完了です。</p>\n<h3 id=\"2-とりあえずテーマを使ってみる\"><a href=\"#2-%E3%81%A8%E3%82%8A%E3%81%82%E3%81%88%E3%81%9A%E3%83%86%E3%83%BC%E3%83%9E%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. とりあえずテーマを使ってみる</h3>\n<p>前手順で作ったテーマを使って最小構成でブログを作ります。<br>\n<small><a href=\"https://github.com/Takumon/my-gatsby-theme-sample/tree/master/ui-surfaces/blog-minimal\">ソース</a>、<a href=\"https://github.com/Takumon/my-gatsby-theme-sample/commit/72b955f8d82dfca2ff009c477e72f53386e4a6a7\">参考コミット</a></small></p>\n<h4 id=\"2-1-設定ファイルgatsby-configjs作成\"><a href=\"#2-1-%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%ABgatsby-configjs%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. 設定ファイル(gatsby-config.js)作成</h4>\n<p>ここがGatsby themeにおいて肝となる機能で、\n<code class=\"language-text\">__experimentalThemes</code>プロパティで使用テーマを指定できます。\nここでは使用テーマに前手順で作った<code class=\"language-text\">gatsby-blog-theme</code>を指定します。\nその際、<code class=\"language-text\">gatsby-blog-theme</code>は設定引数としてルートディレクトリをとるので、それも指定します。※ここはGatsby側でよしなりやってくれます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// テーマを指定する</span>\n  __experimentalThemes<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// テーマにgatsby-blog-themeを指定する</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-blog-theme\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// テーマgatsby-blog-themeではrootをオプションで受け取る想定なので本ブログのルートフォルダを指定する</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> root<span class=\"token punctuation\">:</span> __dirname <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4 id=\"2-2-packagejson作成\"><a href=\"#2-2-packagejson%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-2. package.json作成</h4>\n<p><code class=\"language-text\">gatsby</code>と<code class=\"language-text\">gatsby-blog-theme</code>を依存関係に指定するだけの簡単なpackage.jsonを作成します。</p>\n<div class=\"gatsby-code-title\">package.json</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"blog-minimal\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"scripts\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"develop\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby develop\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"build\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby build\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token string\">\"dependencies\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token string\">\"gatsby\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^2.0.19\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token string\">\"gatsby-blog-theme\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"*\"</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span>\n</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"2-3-srcpages配下に記事作成\"><a href=\"#2-3-srcpages%E9%85%8D%E4%B8%8B%E3%81%AB%E8%A8%98%E4%BA%8B%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-3. src/pages配下に記事作成</h4>\n<p>文字通り、テキトーにマークダウンファイルの記事を作成します。</p>\n<h4 id=\"2-4-srcassetsgatsby-iconpng配置\"><a href=\"#2-4-srcassetsgatsby-iconpng%E9%85%8D%E7%BD%AE\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-4. src/assets/gatsby-icon.png配置</h4>\n<p>本編とはあまり関係無い修正ですが、テーマからコンテンツ側のアイコン資産読み込みを期待しているので、これがないとエラーで落ちます。　※工夫次第でこれも「なければテーマ側の資産を使う」ようにはできるのでしょうが本記事ではそこまで触れていません。</p>\n<h4 id=\"2-5-動作確認\"><a href=\"#2-5-%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-5. 動作確認</h4>\n<p>この状態でブログを起動すると、下記のような画面が表示できます。</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 92.2029702970297%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACDElEQVQ4y6WUS2/aQBSFWUI3XXXZVbvnT6ZLhMQSSiVEhRACCWF3BaIiiEaAG6ou0kVxTAikBgZqGydgYHw6M8GEFOgjXOlonvp0z9xr+14+f/b19asX5ru370eyJJN8Pk8kSSKVSoVks1kSDAZJIBAgfr9/PTIF1vLm7MyTr/Kx3FeUBrTLDrrda6iXGnr9G/w0DJDxBBcX36Aon9FUFDF6Oj9vCbVaX1D91MDpaRW1Wg0+6rpXuA/K5B4r32Kx6HKaJMk0k8kgHo8jlUohHA6jXq8jnU4jFAqBn3ElEgkUCgXYtn2fBaVwXXejDbBcLlN+mb0fSqUSYrEY2Bui0WgIaDKZFJZyuRyKxaIA8diGCeByuRTASCRCT07eIBqNCti/hAfZnm+AWueKttttNJtNyLL8kMHalmeNbkG2wV5sLPc0lfb1oUDwC4QQjEYjTCZjTC1TyLansEwD9tQSa4N1wnzuPM7QceYCeFb8QJtnVdEyqqpC0zSoLGOtN4Cqm/h+Y6D9w4DK1BmYYjSsKZjD/ZZd3jZsY7VaYeXZ41bZweqA9lr2gGybPnoX/L7a1R+LYs4pZYI2dqBbi51KHtLBDEdkTPXBEPqQYGrfsseegxVspz3+FhvgbDajvIp3d7dwHAeWZfG9pwPX3/Le5v2feKiy67KePT448HpvYZ8YrLEdbf3XWDAtj9UvlSU0bJbmFAoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"blog-mininal\"\n        title=\"\"\n        src=\"/static/22a88b15fab002ed304462e5cacf619a/42603/blog-minimal.png\"\n        srcset=\"/static/22a88b15fab002ed304462e5cacf619a/f931c/blog-minimal.png 200w,\n/static/22a88b15fab002ed304462e5cacf619a/e8031/blog-minimal.png 400w,\n/static/22a88b15fab002ed304462e5cacf619a/42603/blog-minimal.png 800w,\n/static/22a88b15fab002ed304462e5cacf619a/a35e6/blog-minimal.png 808w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>従来のGatsbyであれば、一覧用ページ、記事詳細ページ、その他コンポーネントなどなど非常に多くの資産を必要としますが、\nテーマを使えば、ほぼgatsby-node.jsとpackage.jsonだけでブログが完成します。<br>\nまたテーマ側がアップデートした場合も依存パッケージのバージョンを上げればいいだけなので常に最新のテーマを適用できます。</p>\n<h3 id=\"3-テーマのページを上書きしてみる\"><a href=\"#3-%E3%83%86%E3%83%BC%E3%83%9E%E3%81%AE%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%B8%8A%E6%9B%B8%E3%81%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. テーマのページを上書きしてみる</h3>\n<p>最小構成のブログにページを追加してテーマで用意しているページを上書きします。<br>\n<small><a href=\"https://github.com/Takumon/my-gatsby-theme-sample/tree/master/ui-surfaces/blog-override-page\">ソース</a>、<a href=\"https://github.com/Takumon/my-gatsby-theme-sample/commit/7a09088d774035f3cbf370730e7af9ac6869849b\">参考コミット</a></small></p>\n<h4 id=\"3-1-記事詳細ページ作成\"><a href=\"#3-1-%E8%A8%98%E4%BA%8B%E8%A9%B3%E7%B4%B0%E3%83%9A%E3%83%BC%E3%82%B8%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3-1. 記事詳細ページ作成</h4>\n<p>ページはテーマと同じ相対パスに配置します。with-theme-pathによりコンテンツ側のページが優先的に読み込まれます。</p>\n<div class=\"gatsby-code-title\">src/templates/blog-post.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// 上書きページではテーマで用意しているコンポーネントを使用できる</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> Bio <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-blog-theme/src/components/Bio'</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-blog-theme/src/components/Layout'</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> rhythm<span class=\"token punctuation\">,</span> scale <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-blog-theme/src/utils/typography'</span>\n</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BlogPostTemplate</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// テーマのblog-post.jsと同じ実装</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"3-2-動作確認\"><a href=\"#3-2-%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3-2. 動作確認</h4>\n<p>これでブログを立ち上げると、記事詳細のページが差し替わっているのが確認できます。</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 92.3172242874845%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACBklEQVQ4y6VT227aQBD1p/Ylgrymr/xUVSG1IgmkKUEgCi1QcYvBdhAmLvjGHXv3ZNZgy45o67QjHc3sePdo5sxYen/x7sfV1YXz8cPnX6ViaX5zcz0vFArzYrEY+FwuN89ms4TM/DJ7eYqTyGSEP36Tqg/lSbv9Har6hOlUh/ZEXp9h9mxgYZp4lGXU63XcFr/iy0MF5VoDjUYTjfsSmneEZhPVagWV8j3lv0E6eJ4KMsd1mGVZ3DRNblk2XyxMbts2D833GfcZ4yxMMF8kOY4HzsSZTPJ9XxOEo9GItVotdDod9Ho9DAYD9Pt9MMbw2ujd0cfi8Cx5nhcQDodDpus6xuMxut0uarUa8vk8VqtVRJIGEaEsy4xIhQ8qE5UK7bbbbaKqv1lEKITY7/fY7XYgGaILIg7bTkMaEdJDJtqjoYCGA9d1A2w2G9CdfyMUFR4OBwj/+vGbW6YVYaqqYjKZQNO0hHZpEN6NCEk7tlwuBXFCs7eQJSokC1g8z0/dXkgUL0AizY57+LPNZEXDer0OqjQMI4C5WMB1HIKNJQ3JsS3yTgCbYrEV8W4kGkBAWL39xBq1Cv3HOhRFIai0k49QpgZGzy6Gug155mA0s6EYbhA7yzX82AYkNAxbFuUnNBI5fh7nNkAQquFi89PvmQT/Lc5ZvML0k/jTHtJQxqdWPYL/v3gBZgFX0n6srxwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"blog-override-page\"\n        title=\"\"\n        src=\"/static/58fc204037ec56de00a4acbd0d2ef3f5/42603/blog-override-page.png\"\n        srcset=\"/static/58fc204037ec56de00a4acbd0d2ef3f5/f931c/blog-override-page.png 200w,\n/static/58fc204037ec56de00a4acbd0d2ef3f5/e8031/blog-override-page.png 400w,\n/static/58fc204037ec56de00a4acbd0d2ef3f5/42603/blog-override-page.png 800w,\n/static/58fc204037ec56de00a4acbd0d2ef3f5/1fe39/blog-override-page.png 807w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<h3 id=\"4-コンポーネント差し替え可能なテーマを作る\"><a href=\"#4-%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E5%B7%AE%E3%81%97%E6%9B%BF%E3%81%88%E5%8F%AF%E8%83%BD%E3%81%AA%E3%83%86%E3%83%BC%E3%83%9E%E3%82%92%E4%BD%9C%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. コンポーネント差し替え可能なテーマを作る</h3>\n<p>今まで作ったテーマでは、ページで使うコンポーネントだけをを差し替えるようなことはできません。\nここではコンポーネントだけを差し替えられるようなテーマを作ります。<br>\n<small><a href=\"https://github.com/Takumon/my-gatsby-theme-sample/tree/master/themes/gatsby-blog-component-replacement-theme\">ソース</a>、<a href=\"https://github.com/Takumon/my-gatsby-theme-sample/commit/c9a14eb985ffcbc7c639ae82512c8a507ad149e1\">参考コミット</a></small></p>\n<h4 id=\"4-1-gatsby-nodejs修正\"><a href=\"#4-1-gatsby-nodejs%E4%BF%AE%E6%AD%A3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4-1. gatsby-node.js修正</h4>\n<p>gatsby-node.jsでコンポーネントだけ差し替えられるようにします。このときコンテンツ側の差し替え資産配置場所を決めます。\nここでは<code class=\"language-text\">src/components/gatsby-blog-component-replacement-theme--component</code>を指定しています。\nまたエイリアスを設定して<code class=\"language-text\">gatsby-blog-component-replacement-theme--component/コンポーネント名</code>でimportできるようにしています。\n※これも自力実装です。</p>\n<div class=\"gatsby-code-title\">gatsby-node.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// テーマ差し替え用フォルダを指定して</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// ユーザがフォルダ配下にコンポーネントを配置している場合、テーマで用意したものと差し替えるようにする</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token constant\">THEME_PREFIX</span> <span class=\"token operator\">=</span> <span class=\"token string\">'gatsby-blog-component-replacement-theme--component'</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token constant\">RELATIVE_DIR_PATH_OF_REPLACEMENT_COMPONETS</span> <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`./src/components/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">THEME_PREFIX</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span>\n</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateWebpackConfig</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// ユーザが作成したコンポーネント読み込んで</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// エイリアスを作成する</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> userComponents <span class=\"token operator\">=</span> fs\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">.</span><span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token constant\">RELATIVE_DIR_PATH_OF_REPLACEMENT_COMPONETS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">,</span> componentName<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">...</span>acc<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">THEME_PREFIX</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>componentName<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> componentName<span class=\"token punctuation\">.</span><span class=\"token function\">lastIndexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">RELATIVE_DIR_PATH_OF_REPLACEMENT_COMPONETS</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>componentName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span>\n</span>        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// エイリアス設定でユーザが作成したコンポーネントを先に定義することで</span>\n  <span class=\"token comment\">// ユーザが作成したコンポーネントを優先的に読み込むようにする</span>\n  actions<span class=\"token punctuation\">.</span><span class=\"token function\">setWebpackConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      alias<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>userComponents<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span><span class=\"token constant\">THEME_PREFIX</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./src/components'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// ユーザがsrc/pages未作成の場合にエラーになるのを防ぐため、無ければ作成する</span>\n<span class=\"token comment\">// RELATIVE_DIR_PATH_OF_REPLACEMENT_COMPONETSも同様</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onPreBootstrap</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> store <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> program <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> pageDir <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>program<span class=\"token punctuation\">.</span>directory<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/pages/`</span></span>\n  <span class=\"token keyword\">const</span> componentDir <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>program<span class=\"token punctuation\">.</span>directory<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/components/`</span></span>\n  <span class=\"token keyword\">const</span> replaceComponentDir <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>componentDir<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">THEME_PREFIX</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/`</span></span>\n\n  <span class=\"token function\">mkdir</span><span class=\"token punctuation\">(</span>pageDir<span class=\"token punctuation\">)</span>\n  <span class=\"token function\">mkdir</span><span class=\"token punctuation\">(</span>componentDir<span class=\"token punctuation\">)</span>\n  <span class=\"token function\">mkdir</span><span class=\"token punctuation\">(</span>replaceComponentDir<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">mkdir</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirSync</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"4-2-ページ修正\"><a href=\"#4-2-%E3%83%9A%E3%83%BC%E3%82%B8%E4%BF%AE%E6%AD%A3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4-2. ページ修正</h4>\n<p>各ページのimport文を上記で指定したエイリアスに修正します。</p>\n<div class=\"gatsby-code-title\">src/pages/404.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// コンポーネント読み込みはgatsby-node.jsで指定したファイルパスから読み込む</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-blog-component-replacement-theme--component/Layout'</span></code></pre></div>\n<div class=\"gatsby-code-title\">src/pages/index.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// コンポーネント読み込みはgatsby-node.jsで指定したファイルパスから読み込む</span>\n<span class=\"token keyword\">import</span> Bio <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-blog-component-replacement-theme--component/Bio'</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-blog-component-replacement-theme--component/Layout'</span></code></pre></div>\n<div class=\"gatsby-code-title\">src/templates/blog-post.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// コンポーネント読み込みはgatsby-node.jsで指定したファイルパスから読み込む</span>\n<span class=\"token keyword\">import</span> Bio <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-blog-component-replacement-theme--component/Bio'</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-blog-component-replacement-theme--component/Layout'</span></code></pre></div>\n<h3 id=\"5-コンポーネントを差し替えてみる\"><a href=\"#5-%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%82%92%E5%B7%AE%E3%81%97%E6%9B%BF%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. コンポーネントを差し替えてみる</h3>\n<p>前手順で作ったテーマを使い、コンポーネントのみを差し替えてみます。<br>\n<small><a href=\"https://github.com/Takumon/my-gatsby-theme-sample/tree/master/ui-surfaces/blog-component-replacement\">ソース</a>、<a href=\"https://github.com/Takumon/my-gatsby-theme-sample/commit/c9a14eb985ffcbc7c639ae82512c8a507ad149e1\">参考コミット</a></small></p>\n<h4 id=\"5-1-コンポーネント作成\"><a href=\"#5-1-%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5-1. コンポーネント作成</h4>\n<p>src/components/gatsby-blog-component-replacement-theme--component/Bio.jsを作成します。</p>\n<div class=\"gatsby-code-title\">src/components/gatsby-blog-component-replacement-theme--component/Bio.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 上書きするコンポーネントからもテーマ資産は使える</span>\n<span class=\"token keyword\">import</span> profilePic <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-blog-component-replacement-theme/src/components/profile-pic.jpg'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> rhythm <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-blog-component-replacement-theme/src/utils/typography'</span>\n\n<span class=\"token comment\">// テーマ側で指定したフォルダ配下にテーマ資産と同名でコンポーネントを作成して上書きする</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Bio</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// ･･･</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"5-2-動作確認\"><a href=\"#5-2-%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5-2. 動作確認</h4>\n<p>これでブログを立ち上げると、記事一覧ページでBioコンポーネントだけ差し替わっていることが確認できます。</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 92.3172242874845%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACBklEQVQ4y6VT227aQBD1p/Ylgrymr/xUVSG1IgmkKUEgCi1QcYvBdhAmLvjGHXv3ZNZgy45o67QjHc3sePdo5sxYen/x7sfV1YXz8cPnX6ViaX5zcz0vFArzYrEY+FwuN89ms4TM/DJ7eYqTyGSEP36Tqg/lSbv9Har6hOlUh/ZEXp9h9mxgYZp4lGXU63XcFr/iy0MF5VoDjUYTjfsSmneEZhPVagWV8j3lv0E6eJ4KMsd1mGVZ3DRNblk2XyxMbts2D833GfcZ4yxMMF8kOY4HzsSZTPJ9XxOEo9GItVotdDod9Ho9DAYD9Pt9MMbw2ujd0cfi8Cx5nhcQDodDpus6xuMxut0uarUa8vk8VqtVRJIGEaEsy4xIhQ8qE5UK7bbbbaKqv1lEKITY7/fY7XYgGaILIg7bTkMaEdJDJtqjoYCGA9d1A2w2G9CdfyMUFR4OBwj/+vGbW6YVYaqqYjKZQNO0hHZpEN6NCEk7tlwuBXFCs7eQJSokC1g8z0/dXkgUL0AizY57+LPNZEXDer0OqjQMI4C5WMB1HIKNJQ3JsS3yTgCbYrEV8W4kGkBAWL39xBq1Cv3HOhRFIai0k49QpgZGzy6Gug155mA0s6EYbhA7yzX82AYkNAxbFuUnNBI5fh7nNkAQquFi89PvmQT/Lc5ZvML0k/jTHtJQxqdWPYL/v3gBZgFX0n6srxwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"blog-override-page\"\n        title=\"\"\n        src=\"/static/58fc204037ec56de00a4acbd0d2ef3f5/42603/blog-override-page.png\"\n        srcset=\"/static/58fc204037ec56de00a4acbd0d2ef3f5/f931c/blog-override-page.png 200w,\n/static/58fc204037ec56de00a4acbd0d2ef3f5/e8031/blog-override-page.png 400w,\n/static/58fc204037ec56de00a4acbd0d2ef3f5/42603/blog-override-page.png 800w,\n/static/58fc204037ec56de00a4acbd0d2ef3f5/1fe39/blog-override-page.png 807w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>Gatsby themeは発展途上の機能なので、パス設定などは自力でやる必要があります。ただこれらについても積極的に開発が行われているようです。\n将来的にはGatsby Starterのように全テーマ一覧が開設されて、すきなテーマを選べる、かつ気軽に変更できる、かつ気軽にコンテンツ側でカスタマイズできるみたいなことを期待しています🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/blog/2018-11-11-introd%20ucing-gatsby-themes/\">Gatsby theme | Gatsby blog</a></p>\n<ul>\n<li><a href=\"https://github.com/ChristopherBiscardi\">ChristopherBiscardi</a>さんが書いたGastby themeの紹介ブログです。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://github.com/ChristopherBiscardi/gatsby-theme-examples\">gatsby-theme-examples | GitHub</a></p>\n<ul>\n<li><a href=\"https://github.com/gatsbyjs/gatsby-starter-blog\">Gatsby-starter-blog</a>をtheme化したサンプルです。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.npmjs.com/package/gatsby-theme-blog\">gatsby-theme-blog | npm</a></p>\n<ul>\n<li>上記サンプルのthemeがnpmライブラリとして公開されています。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://spectrum.chat/gatsby-themes\">gatsby-themes | spectrum</a></p>\n<ul>\n<li>最新情報はspectrumで入手できます。</li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/2018/11/24/","title":"Gatsby themeを使ってみる","date":"2018-11-24T23:40:00.000+09:00","excerpt":"なにこれ下記の記事を読んで、実験的に追加されたGatsby themeで何ができるのかサンプル作って試してみました。そのときのメモです。Gatsby themeはどんな問題を解決してくれるかGatsbyはスキャフォールド機能があって初期導入...","tags":["Gatsby","Gatsby theme"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2018/gatsby-theme.png"}}}}