{"data":{"site":{"siteMetadata":{"title":"Takumon Blog","author":"Takuto Inoue"}},"markdownRemark":{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Gatsby公式サイトの<a href=\"https://www.gatsbyjs.org/docs/plugins/\">プラグイン</a>の章のまとめ。</p>\n<h2 id=\"プラグイン概要\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E6%A6%82%E8%A6%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグイン概要</h2>\n<p>Gatsbyプラグインは、Gatsbyの全処理を拡張および修正可能です。\n例えば下記のようなことができます。</p>\n<ul>\n<li>外部コンテンツ（CMS、ファイル、REST APIなど）を追加してGraphQLで扱えるようにする</li>\n<li>ファイル（Markdown、YAML、CSVなど）データをJSON形式にフォーマットする</li>\n<li>サードパーティーの機能（Google Analytics, Instagram）をGatsbyで作ったWebサイトに追加する</li>\n</ul>\n<p>またnpmパッケージでモジュール化されているため、巨大で複雑なWebサイトでも簡潔に機能追加･管理が可能です。</p>\n<h3 id=\"公開プラグインを検索する\"><a href=\"#%E5%85%AC%E9%96%8B%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E6%A4%9C%E7%B4%A2%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>公開プラグインを検索する</h3>\n<p>プラグイン一覧と個別仕様は <a href=\"https://www.gatsbyjs.org/plugins/\">GatsbyのPlugins</a>で確認できます。\n<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages\">公式プラグイン</a>とコミュニティ提供のものをあわせると、なんと502個もあるようです。（2018/10/20現在）</p>\n<h2 id=\"プラグインの使い方\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグインの使い方</h2>\n<p>プラグインはnpmパッケージで公開されています。\nまずはnpmインストールしましょう。</p>\n<p><small>下記はgatsby-transformer-jsonの例</small></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save gatsby-transformer-json</code></pre></div>\n<br>\n<p>次に<code class=\"language-text\">gatsby-config.js</code>の<code class=\"language-text\">plugins</code>配列に追加してください。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-json`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>オプションも指定できます。\n下記のように<code class=\"language-text\">gatsby-config.js</code>を書き換えましょう。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// オプションなしで指定する場合は下記のようにプラグイン名を文字列で指定しましょう。</span>\n    <span class=\"token string\">\"gatsby-plugin-react-helmet\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// オプションありの場合は、オブジェクトで指定します。</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// オプションはさらにオブジェクトで指定します。</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/data/`</span></span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// プラグイン自体を拡張するプラグインを指定できます。</span>\n        <span class=\"token comment\">// その場合はオプションのpluginsにプラグインを定義しましょう。</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-smartypants`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-plugin-offline\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// 下記のように空オプションの場合は、プラグイン名を文字列で指定した場合と同じです。</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"ローカルのプラグインを使う場合\"><a href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%AE%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E4%BD%BF%E3%81%86%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ローカルのプラグインを使う場合</h3>\n<p>自作プラグインなどは、npm公開せずとも<code class=\"language-text\">plugins</code>フォルダに配置すると使えます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-local-plugin`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>他フォルダに起きたいならフォルダパスを指定しましょう。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      resolve<span class=\"token punctuation\">:</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`/path/to/gatsby-local-plugin`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"プラグインの作り方\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグインの作り方</h2>\n<ul>\n<li>npmパッケージ、ローカルプラグインどちらの形式もOKです。</li>\n<li><code class=\"language-text\">package.json</code>と<code class=\"language-text\">gatsby-config.js</code>が必要です。</li>\n<li>Gatsby API(<a href=\"https://www.gatsbyjs.org/docs/node-apis/\">Node</a>、<a href=\"https://www.gatsbyjs.org/docs/ssr-apis/\">サーバーサイドレンダリング</a>、<a href=\"https://www.gatsbyjs.org/docs/browser-apis/\">ブラウザ</a>の3種類)を必要に応じて実装しましょう。</li>\n</ul>\n<h3 id=\"作成するファイル\"><a href=\"#%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>作成するファイル</h3>\n<p><small>※[必須]と記載がないものについては任意です。</small></p>\n<ul>\n<li>\n<p><strong>package.json</strong> --- [必須]ローカルプラグインの場合は空オブジェクトでも可。</p>\n<ul>\n<li><strong>name</strong>  GraphQLのデータ構造におけるプラグインの識別子です。未指定の時はプラグインのフォルダ名になります。</li>\n<li><strong>version</strong>  キャッシュ管理用です。これが変わるとキャッシュがクリアされます。未指定の時は、gatsby- *ファイルの内容のMD5ハッシュになります。ローカルプラグインを開発中の場合は、不用意なキャッシュを避けるため指定しないほうが良いでしょう。</li>\n<li><strong>keywords</strong>  検索用に指定してください。ここで<code class=\"language-text\">gatsby</code>と<code class=\"language-text\">gatsby-plugin</code>の2つを指定してnpm公開すると、<a href=\"https://www.gatsbyjs.org/plugins/\">Plugins | Gatsby</a>のリストに追加できます。</li>\n</ul>\n</li>\n<li>\n<p>以下3ファイルはプラグインが拡張･修正したい機能に応じて作成してください。</p>\n<ul>\n<li><strong>gatsby-browser.js</strong> -- <a href=\"https://www.gatsbyjs.org/docs/browser-apis/\">ブラウザAPI</a>の実装を定義します。</li>\n<li><strong>gatsby-node.js</strong> -- <a href=\"https://www.gatsbyjs.org/docs/node-apis/\">ノードAPI</a>の実装を定義します。</li>\n<li><strong>gatsby-ssr.js</strong> -- <a href=\"https://www.gatsbyjs.org/docs/ssr-apis/\">サーバーサイドレンダリングAPI</a>の実装を定義します。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"命名規約\"><a href=\"#%E5%91%BD%E5%90%8D%E8%A6%8F%E7%B4%84\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>命名規約</h3>\n<p>タイプごとに推奨する命名規約があります。</p>\n<ul>\n<li>\n<p><code class=\"language-text\">gatsby-source-*</code> ---  外部コンテンツ（WordPress、MongoDB、ファイル）からデータをロードするタイプの場合</p>\n<ul>\n<li>例： <a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-source-contentful\">gatsby-source-contentful</a></li>\n<li>参考： <a href=\"https://www.gatsbyjs.org/docs/create-source-plugin/\">ソースプラグインを生成する</a></li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">gatsby-transformer-*</code> --- データをJSON形式に変換するタイプの場合</p>\n<ul>\n<li>例：　<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-transformer-yaml\">gatsby-transformer-yaml</a></li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">gatsby-[plugin-name]-*</code> --- 特定のプラグインを拡張する場合</p>\n<ul>\n<li>例：　<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-remark-images\">gatsby-remark-images</a>　※<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-transformer-remark\">gatsby-transformer-remark</a>を拡張するプラグイン</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">gatsby-plugin-*</code> --- 上記以外の場合</p>\n<ul>\n<li>例：　<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-sharp\">gatsby-plugin-sharp</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ローカルプラグイン\"><a href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ローカルプラグイン</h3>\n<p><code class=\"language-text\">plugins</code>配下にプラグイン名のフォルダを作ります。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">plugins\n└── my-own-plugin\n    └── package.json</code></pre></div>\n<p>この状態ではプラグイン用の<code class=\"language-text\">gatsby-config.js</code>を定義していないので、プロジェクトはプラグインを自動認識できません。<br></p>\n<p>プロジェクトの<code class=\"language-text\">gatsby-config.js</code>にプラグイン名（フォルダ名）を指定しましょう。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'my-own-plugin'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>なおプラグインのソースコードはBabelでトランスコンパイルされないので注意してください。\n新しいJavaScript文法を使いたい場合はプラグインフォルダ配下に<code class=\"language-text\">src</code>フォルダを作って配下にコード格納し、Babelでビルドした資産をプラグインフォルダ配下に出力するなどの工夫が必要です。</p>\n<h3 id=\"どういう場合にプラグインを作るか\"><a href=\"#%E3%81%A9%E3%81%86%E3%81%84%E3%81%86%E5%A0%B4%E5%90%88%E3%81%AB%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E4%BD%9C%E3%82%8B%E3%81%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>どういう場合にプラグインを作るか</h3>\n<p>なんでもかんでもプラグイン化するわけではありません。<br>\nJavaScriptやReact.jsの機能（ライブラリ）を追加する場合などはプラグインを作らなくてよいのです。以下に例を示します。</p>\n<ul>\n<li>一般的な機能を提供するJavaScriptパッケージ（<a href=\"https://github.com/lodash/lodash\">lodash</a>や<a href=\"https://github.com/axios/axios\">axios</a>など）を使う場合</li>\n<li>React.jsのUIライブラリ（<a href=\"https://ant.design/\">Ant Design</a>や<a href=\"https://material-ui.com/\">Material UI</a>など）を使う場合</li>\n<li>統合可視化ライブラリ（<a href=\"https://www.highcharts.com/\">Highcharts</a>や<a href=\"https://d3js.org/\">D3.js</a>など）を使う場合</li>\n</ul>\n<p>プラグインはGatsby APIをパッケージ化して最低限の設定で済むようにするのが目的です。\n例えば<code class=\"language-text\">Styled Components</code>を使う場合、自分でGatsby APIを使ってサーバーサイドレンダリング対応を組み込めますが、\nこの対応はプラグイン化すべきです。実際これは<code class=\"language-text\">Gatsby-plugin-styled-components</code>というプラグインがあります。</p>\n<h3 id=\"source-pluginとtransformer-plugin\"><a href=\"#source-plugin%E3%81%A8transformer-plugin\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source PluginとTransformer Plugin</h3>\n<p>主要なプラグインのタイプの2つにSource PluginとTransformer Pluginがあり両者は連携して機能します。\n例えばマークダウンファイルの場合、\nSource Pluginの<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-filesystem/\">gatsby-source-filesystem</a>がファイルからFileノードを供給し、Transformer Pluginの<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-transformer-remark\">gatsby-transformer-remark</a>がFileノードをMarkdownRemarkノードに変換します。<br></p>\n<p>なおFileノードはファイルの生の内容と<strong>メディアタイプ</strong>を含みます。\nメディアタイプは必須項目ではありませんが、Source Pluginで生成したノードが生データ(Transformer Plugin未処理のデータ)であることを示す手段です。\nメディアタイプでSource PluginとTransformer Pluginの橋渡しを行い、データ読み込みと加工を分離することで、各プラグインを小さく保つことができるのです。</p>\n<h3 id=\"source-pluginの作り方\"><a href=\"#source-plugin%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source Pluginの作り方</h3>\n<p>npmパッケージとして作成します。<code class=\"language-text\">package.json</code>と<code class=\"language-text\">gatsby-node.js</code>を作りましょう。\n<code class=\"language-text\">gatsby-node.js</code>は下記のような感じです。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span>sourceNodes <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> actions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNode <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n  <span class=\"token comment\">// データを生成（ここではデータを外部から取得する例を示す）</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token constant\">REMOTE_API</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// データからノードを生成</span>\n  data<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>datum <span class=\"token operator\">=></span> <span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span><span class=\"token function\">processDatum</span><span class=\"token punctuation\">(</span>datum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// 生成したノードをリターン</span>\n  <span class=\"token keyword\">return</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><em>NOTE:</em> Gatby APIの実装詳細は、<a href=\"https://www.gatsbyjs.org/docs/node-apis/#sourceNodes\">sourceNodes</a>、<a href=\"https://www.gatsbyjs.org/docs/actions/#createNode\">createNode</a>を参照してください。\nここでは例示していませんが、<a href=\"https://github.com/angeloashmore/gatsby-node-helpers\">gatsby-node-helpers</a>を使うとAPIの実装が簡単になるので記述量が大きくなるようなら、使ってみることをお勧めします。</p>\n<h4 id=\"ノード間参照を定義する\"><a href=\"#%E3%83%8E%E3%83%BC%E3%83%89%E9%96%93%E5%8F%82%E7%85%A7%E3%82%92%E5%AE%9A%E7%BE%A9%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ノード間参照を定義する</h4>\n<p>プラグインが出力するノートにおいて、ノード間の参照を定義することでより複雑な構造を定義します。\nこれらの実現方法は2つあります。</p>\n<p><strong>(1) Transformation relationships</strong><br>\n<code class=\"language-text\">gatsby-transformer-remark</code>では、Fileノードが親、MarkdownRemarkノードが子という関係を定義し、\n親ノードのマークダウン文字列、子ノードでHTMLに変換しています。\nこれらの関係は<code class=\"language-text\">createParentChildLink</code>を使って定義します。具体的な実装方法については<a href=\"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-transformer-remark/src/on-node-create.js#L65\">gatsby-transformer-remark</a>を参照してください。<br>\nなお子ノードは親ノードからの派生なので、親ノードが削除時は全ての子ノードが削除されます。</p>\n<p><strong>(2) Foreign-key relationships</strong><br>\n別々のオブジェクト(型定義も全く別々)を紐付ける方法です。\nこの場合Transformation relationshipsと異なり、片方のオブジェクトが削除されても関係するオブジェクトは削除されません。</p>\n<h3 id=\"transformer-plugin\"><a href=\"#transformer-plugin\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Transformer Plugin</h3>\n<p>通常のNPMパッケージとして作成します。<code class=\"language-text\">package.json</code>と<code class=\"language-text\">gatsby-node.js</code>を作りましょう。</p>\n<h4 id=\"変換後ノードの型定義\"><a href=\"#%E5%A4%89%E6%8F%9B%E5%BE%8C%E3%83%8E%E3%83%BC%E3%83%89%E3%81%AE%E5%9E%8B%E5%AE%9A%E7%BE%A9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>変換後ノードの型定義</h4>\n<p><code class=\"language-text\">gatsby-node.js</code>で変換後ノードの型定義をsetFieldsOnGraphQLNodeTypeに指定します。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span>setFieldsOnGraphQLNodeType <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`./extend-node-type`</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><em>NOTE:</em> setFieldsOnGraphQLNodeTypeの詳細は<a href=\"https://www.gatsbyjs.org/docs/node-apis/#setFieldsOnGraphQLNodeType\">APIリファレンス</a>参照</p>\n<h4 id=\"キャッシュの取り扱い\"><a href=\"#%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5%E3%81%AE%E5%8F%96%E3%82%8A%E6%89%B1%E3%81%84\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>キャッシュの取り扱い</h4>\n<p>変換処理はコストがかかるため、ビルドするたびに作り直さずにすむようにGatsbyのグローバルキャッシュ機能を使います。\nキャッシュキーには少なくとも関連リソースのcontentDigestが必要です。\nたとえば、gatsby-transformer-remarkは、HTMLノードに下記のようにキャッシュキーを指定しています。</p>\n<div class=\"gatsby-code-title\">extend-node-type.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">htmlCacheKey</span> <span class=\"token operator\">=</span> node <span class=\"token operator\">=></span>\n  <span class=\"token template-string\"><span class=\"token string\">`transformer-remark-markdown-html-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n    node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>contentDigest\n  <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pluginsCacheStr<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pathPrefixCacheStr<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span></code></pre></div>\n<br>\n<p>キャッシュへのアクセスは下記のようにします。</p>\n<div class=\"gatsby-code-title\">extend-node-type.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> cachedHTML <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> cache<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token function\">htmlCacheKey</span><span class=\"token punctuation\">(</span>markdownNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\ncache<span class=\"token punctuation\">.</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span><span class=\"token function\">htmlCacheKey</span><span class=\"token punctuation\">(</span>markdownNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> html<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"プラグインの公開方法\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E5%85%AC%E9%96%8B%E6%96%B9%E6%B3%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグインの公開方法</h2>\n<p>プラグインのpackage.jsonのkeywordに<code class=\"language-text\">gatsby</code>と<code class=\"language-text\">gatsby-plugin</code>をつけてnpm公開すれば、\n最大12時間後にライブラリ一覧のインデックスにいったん追加されます。\nその後<a href=\"https://gatsbyjs.org\">公式サイト</a>のデイリービルドが走ると、ようやくプラグインが一覧に追加され、\n<a href=\"https://www.gatsbyjs.org/plugins/\">GatsbyのPlugins</a>で見れるようになります。</p>\n<p><em>NOTE:</em> せっかく公開するなら検索しやすいように<code class=\"language-text\">gatsby</code>と<code class=\"language-text\">gatsby-plugin</code>以外にもキーワードを指定しましょう。例えばMarkdown MathJax transformerは下記のように指定しています。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"gatsby\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"gatsby-plugin\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"gatsby-transformer-plugin\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"mathjax\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"markdown\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>Gatsbyはプラグイン機構が非常に考えぬかれたスマートな形をしていますね。<br>\n機能追加時もnpmインストールして<code class=\"language-text\">gatsby-config.js</code>に設定を追加するだけなのでコードがとてもスッキリするなぁという印象でした。<br>\nプラグイン公開時も、npmパッケージでkeywordに<code class=\"language-text\">gatsby</code>と<code class=\"language-text\">gatsby-plugin</code>をつけるだけというシンプルさも見逃せません。<br>\nなお今回<a href=\"https://www.gatsbyjs.org/docs/source-plugin-tutorial/\">Source Plugin Tutorial</a>のページは見ていませんが、\n自作プラグインを公開する時はこのページを参考にしたいと思います🍅</p>","headingsDetail":[{"id":"なにこれ","value":"なにこれ","depth":2,"parents":[]},{"id":"プラグイン概要","value":"プラグイン概要","depth":2,"parents":[]},{"id":"公開プラグインを検索する","value":"公開プラグインを検索する","depth":3,"parents":[{"id":"プラグイン概要","value":"プラグイン概要","depth":2}]},{"id":"プラグインの使い方","value":"プラグインの使い方","depth":2,"parents":[]},{"id":"ローカルのプラグインを使う場合","value":"ローカルのプラグインを使う場合","depth":3,"parents":[{"id":"プラグインの使い方","value":"プラグインの使い方","depth":2}]},{"id":"プラグインの作り方","value":"プラグインの作り方","depth":2,"parents":[]},{"id":"作成するファイル","value":"作成するファイル","depth":3,"parents":[{"id":"プラグインの作り方","value":"プラグインの作り方","depth":2}]},{"id":"命名規約","value":"命名規約","depth":3,"parents":[{"id":"プラグインの作り方","value":"プラグインの作り方","depth":2}]},{"id":"ローカルプラグイン","value":"ローカルプラグイン","depth":3,"parents":[{"id":"プラグインの作り方","value":"プラグインの作り方","depth":2}]},{"id":"どういう場合にプラグインを作るか","value":"どういう場合にプラグインを作るか","depth":3,"parents":[{"id":"プラグインの作り方","value":"プラグインの作り方","depth":2}]},{"id":"source-pluginとtransformer-plugin","value":"Source PluginとTransformer Plugin","depth":3,"parents":[{"id":"プラグインの作り方","value":"プラグインの作り方","depth":2}]},{"id":"source-pluginの作り方","value":"Source Pluginの作り方","depth":3,"parents":[{"id":"プラグインの作り方","value":"プラグインの作り方","depth":2}]},{"id":"ノード間参照を定義する","value":"ノード間参照を定義する","depth":4,"parents":[{"id":"source-pluginの作り方","value":"Source Pluginの作り方","depth":3},{"id":"プラグインの作り方","value":"プラグインの作り方","depth":2}]},{"id":"transformer-plugin","value":"Transformer Plugin","depth":3,"parents":[{"id":"プラグインの作り方","value":"プラグインの作り方","depth":2}]},{"id":"変換後ノードの型定義","value":"変換後ノードの型定義","depth":4,"parents":[{"id":"transformer-plugin","value":"Transformer Plugin","depth":3},{"id":"プラグインの作り方","value":"プラグインの作り方","depth":2}]},{"id":"キャッシュの取り扱い","value":"キャッシュの取り扱い","depth":4,"parents":[{"id":"transformer-plugin","value":"Transformer Plugin","depth":3},{"id":"プラグインの作り方","value":"プラグインの作り方","depth":2}]},{"id":"プラグインの公開方法","value":"プラグインの公開方法","depth":2,"parents":[]},{"id":"まとめ","value":"まとめ","depth":2,"parents":[]}],"fields":{"title":"Gatsbyプラグインの使い方･作り方･公開方法","excerpt":"なにこれGatsby公式サイトのプラグインの章のまとめ。プラグイン概要Gatsbyプラグインは、Gatsbyの全処理を拡張および修正可能です。例えば下記のようなことができます。外部コンテンツ（CMS、ファイル、REST APIなど）を追加し...","date":"2018-10-20T21:00:00.000Z","tags":["Gatsby","GatsbyPlugin"],"thumbnail":"thumbnail/2018/gatsby-plugin.png"}}},"pageContext":{"slug":"/2018/10/20/","relatedPosts":[{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>GatsbyにQiitaの記事を取り込めるプラグイン(<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-qiita/\">gatsby-source-qiita</a>)を作りました\nQiitaからGatsbyに乗り換えようと考えている方で、Qiitaの記事を引き継ぎたい場合に便利なプラグインです。サンプル(<a href=\"https://takumon.github.io/gatsby-starter-qiita/\">gatsby-starter-qiita</a>)も用意してます。\n今回はこのプラグインとサンプルについて紹介します。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 700px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 111.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAE2ElEQVQ4y41UW2wUVRgeqCLxTQOC1RiNL5qYGOMlER9MfCHxQXky+AIEFAM8EGKCxAfFEDTxxgMxBhMx0BIIFSiXLu3Slt1u2Uu3Zbfby7bbkW53u5czszszuzsze5k55/PMbEVQYtzky/f/55x8+///d84InWvXjHU+86hy9Oh3xe7uLvLbqZOkq/s06b18iXSf6SKb3nqTrO5YRVatFlwIq+7Hw2seIh0dHUQQBHnjk52icPnC7+mAz498WoGuWNDkOsrFGhSiQ5UMJCbmcdMbdHHLF0VwZBxB/wTHOG75o7jaO4ABrxeePg8uXLykCwBEyV7EYPakfXO5i91cPsOGMqfZcKab8ykWlHpYWLnAxtReFuWIVTwsql1iMc3DUtYIO3R8Hzv6zQ+U6yC9lNEEMIhXCt/iyPRm+lNqJ47NbcXx1DZ8PfMufhH34sjUZhyf24EvE+/gx+RWnEjt4fl27AptwBa/gA+CAl7Z/Tg7duxnzCZnNbfCntxh7Bl7ln4e34RPJ17GF5NvY//4CzgUewMHJl7Cwdir2Bd93uXPYq9xvI4docfwvk/AlhEB226vZQe+2o9DBw+3Ba+R7/Fh6BG6O9qJj6MbsSuyHrvCG7AzvI7zEy5/FHHy9StYh92Rp7A3+hw+iTyNA7dfZKVWFv19g5pgWbYIUGTkOarqEmStCM0oo27r/0DtvtzkuWlVOVehtyrMmWEuy2do8RmibsC3/T0qJWIoyArUsob/9WN34QpK+RwXtJ0KeY2ZNIXdevBpRu/J/g2KFcFlp8JGXcRMDNVoiFaCAWijPlSDfigBH8ocKs8xHgAbvAw2fLUN70WwoStgnvNg538FCw27gnJ+WRNskhfpZBTRnEHjmQrm5QbEUgNThTom8yayFatdx515YIk3k14A/kgCiTEgOAR4e8GunmVoNVEmeS4oFUQk48gqKpXLJeiNBqr1Ouc6GraFimGg2miialGojRZqNkWT/4UT67xXJ6azMQazhlzeEVTLIi8ZS6ERmgv5UYiMQp4IQYlHOcZ5HHZjfSYOM5lAc34aljgLg4+pMZeAvZgCCw4xWC0uyE1pUSpiYRrw9VHcugEEBoCR/jYH/uKV2Fkf9QIh3mp4mLc8CPg9YHOT7gwLjil2WRLt2xGMzeZobDqNUl6CVpQg5QgSySx0SQa0MphaAmoVLsRN8vQA3BRcOwecPQF27RwDtVEoONeGm4K5SeSMJpW1GpqUuTBt5s7I/vtqoEEpLL0GSybgo4LNuVmSYEX8DA0ThWKBC7qmxFBUFJpZXEQ2k0FmaQmFfA61agWaqkJVFChK2d1TK1XXuIphIl8kILqJWtjnChJyVzAOuarTWpU/Je5wuVwGkSRUeK5zl3Wdfxu5sMMGh+k47wjzfadyGg/zlgyUSvwetpyWUwncc+H/851R5ryclXOUtncmI65grpjVBCoXFppTMYQLlr1ADBrL1miKmHRE1OhwSqNTeZ1Oc8i1JtWMFlX0NpxzmZLpFkjjEQpTRyaXVQUm5ZfA71aQmzklW7hjAEluZqIM5BvtQuwH1Hvf2swEYDWxXMgbQqNaGbMCA4p2vaeoeHqIfqOX2IHrxB7xECvQT0zfddIMDLhcG+4jBmdjZa056iWmv5+0Rm8QWJacyaTFPwGTJue8m2czAQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"デモイメージ（コメント付き）\"\n        title=\"\"\n        src=\"/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png\"\n        srcset=\"/static/9293b3eb97aeb22d4a07c16875d1784d/45c00/gatsby-starter-qiita-with-comment.png 200w,\n/static/9293b3eb97aeb22d4a07c16875d1784d/7f762/gatsby-starter-qiita-with-comment.png 400w,\n/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"概要\"><a href=\"#%E6%A6%82%E8%A6%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>概要</h2>\n<ul>\n<li>プラグイン作成の経緯と最近のQiita</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-qiita/\">gatsby-source-qiita</a></p>\n<ul>\n<li>使い方</li>\n<li>\n<p>実装ポイント</p>\n<ul>\n<li>プラグイン公開手順</li>\n<li>gatsby/graphql not found</li>\n<li>目次情報作成</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://takumon.github.io/gatsby-starter-qiita/\">gatsby-starter-qiita</a></p>\n<ul>\n<li>概要</li>\n<li>\n<p>実装ポイント</p>\n<ul>\n<li>シンタックスハイライトのスタイル</li>\n<li>オリジナル記事とQiita記事のスキーマ統一</li>\n<li>Github-rebbons便利</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>まとめ</li>\n</ul>\n<h2 id=\"プラグイン作成の経緯と最近のqiita\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E4%BD%9C%E6%88%90%E3%81%AE%E7%B5%8C%E7%B7%AF%E3%81%A8%E6%9C%80%E8%BF%91%E3%81%AEqiita\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグイン作成の経緯と最近のQiita</h2>\n<p>最近Qiitaが微妙なので、Qiitaとブログを別々に管理するより、ブログにまとめたほうが良さそうと思ったのと、\n1つぐらい<a href=\"https://www.gatsbyjs.org/plugins/\">Gatsby公式サイト</a>で公開してみたいという思いから作りました。\n大枠は<a href=\"https://github.com/mottox2\">mottox2</a>さんの<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-esa/\">gatsby-source-esa</a>を参考にして、\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark\">gatsby-transform-remark</a>\n、<a href=\"https://qiita.com/api/v2/docs\">Qiita APIドキュメント</a>を見ながら実装してます。<br></p>\n<p>余談ですが、最近のQiitaはポエムが乱立していて、変な方向に向かっていますね。<br>\nかつては有用な技術記事がたくさん投稿されているイメージでしたが、トレンド機能を導入してからでしょうか？<br>\n昔に戻ってもらえるとうれしいです。来月のQiita Advent Calendarに期待です！！<br>\nとはいえ、今でも良記事もたくさんあって、<code class=\"language-text\">Angualr</code>とかで絞ると結構見つかります。\n最近、これは！と思った記事は、<a href=\"https://qiita.com/shibukawa/items/6eeaace2a130a0213386\">「Angularで、Angular Materialのテーマに対応するライブラリを作る」</a>などです。このような記事こそQiitaにあるべきだと思います。</p>\n<h2 id=\"gatsby-source-qiita\"><a href=\"#gatsby-source-qiita\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/Takumon/gatsby-source-qiita\">gatsby-source-qiita</a></h2>\n<h3 id=\"使い方\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h3>\n<p>インストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save gatsby-source-qiita</code></pre></div>\n<br>\n<p>アクセストークやユーザ名を設定します。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-qiita`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        accessToken<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`YOUR_PERSONAL_ACCESS_TOKEN`</span></span><span class=\"token punctuation\">,</span>\n        userName<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`YOUR_UAWE_NAME`</span></span><span class=\"token punctuation\">,</span>\n        fetchPrivate<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        excludedPostIds<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'da8347f81a9f021b637f'</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>accessToken</p>\n<ul>\n<li>【必須】API認証用のQiitaアクセストークンです。<code class=\"language-text\">Qiitaの設定ページ &gt;  アプリケーション &gt; 新しくトークンを発行する</code>で発行してください。</li>\n</ul>\n</li>\n<li>\n<p>userName</p>\n<ul>\n<li>【必須】Qiitaアカウント名です。ここで指定したアカウントに紐付く記事を引っ張ってきます。</li>\n</ul>\n</li>\n<li>\n<p>fetchPrivate</p>\n<ul>\n<li>【任意】限定公開記事も取得するかを設定します。デフォルトはfalseです。</li>\n</ul>\n</li>\n<li>\n<p>excludedPostIds</p>\n<ul>\n<li>【任意】除外したい記事をid配列で指定します。デフォルトは何も除外しません。</li>\n</ul>\n</li>\n</ul>\n<br>\n<p>これでQiitaの記事をGraphQLで取得できるようになります。\n取得情報はほぼQiita APIのまんまですが、目次情報(headings)を追加しています。</p>\n<div class=\"gatsby-code-title\">Qiita記事取得用のクエリ</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  allQiitaPost <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        id\n        title\n<span class=\"gatsby-highlight-code-line\">        headings <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          value\n</span><span class=\"gatsby-highlight-code-line\">          id\n</span><span class=\"gatsby-highlight-code-line\">          depth\n</span><span class=\"gatsby-highlight-code-line\">          parents <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">            value\n</span><span class=\"gatsby-highlight-code-line\">            id\n</span><span class=\"gatsby-highlight-code-line\">            depth\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span>\n</span>        rendered_body\n        body\n        comments_count\n        created_at\n        likes_count\n        reactions_count\n        tags <span class=\"token punctuation\">{</span>\n          name\n        <span class=\"token punctuation\">}</span>\n        updated_at\n        url\n        user <span class=\"token punctuation\">{</span>\n          id\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"実装のポイント\"><a href=\"#%E5%AE%9F%E8%A3%85%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装のポイント</h3>\n<h4 id=\"プラグイン公開手順\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E5%85%AC%E9%96%8B%E6%89%8B%E9%A0%86\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグイン公開手順</h4>\n<p>いきなしnpmパッケージで開発を始めるより、下記のように段階を経て動作確認していく方が楽でした。</p>\n<ol>\n<li>(Gatsby APIを使わない処理について)コンポーネントで実装</li>\n<li>アプリケーション自体の<code class=\"language-text\">gatsby-node.js</code>や<code class=\"language-text\">gatsby-browser.js</code>で実装</li>\n<li>ローカルプラグインに切り出して<code class=\"language-text\">gatsby-node.js</code>や<code class=\"language-text\">gatsby-browser.js</code>で実装</li>\n<li>別プロジェクトに切り出してnpmパッケージとして実装、　アプリケーション側からは<code class=\"language-text\">npm install ../gatsby-source-qiita</code>のようにローカルnpmインストール</li>\n<li>npm公開</li>\n<li>アプリケーション側で<code class=\"language-text\">npm install gatsby-source-qiita</code>のようにnpmインストール</li>\n</ol>\n<h4 id=\"プラグインをローカルインストールするとgatsbygraphql-not-found\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B%E3%81%A8gatsbygraphql-not-found\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグインをローカルインストールするとgatsby/graphql not found</h4>\n<blockquote>\n<p>Gatsbyではプラグインで<code class=\"language-text\">gatsby/graphql</code>を使う場合でも依存ライブラリには追加しません。\nビルド時にアプリ側の<code class=\"language-text\">gatsby/graphql</code>を使ってプラグインも含め全体をコントロールするからです。</p>\n</blockquote>\n<p>のはずなんですが、プラグインをnpmでローカルインストールする(<code class=\"language-text\">npm install ../gatsby-source-qiita</code>する)と\nビルド時に「gatsby/graphql not found」と怒られました。\nしょうがないので動作確認時だけローカルプラグインとして扱う(アプリのplugins配下に置く)ことで回避しました。\nnpm公開版だと問題なく動いたのですが... 最後まで謎でした。</p>\n<h3 id=\"目次情報作成\"><a href=\"#%E7%9B%AE%E6%AC%A1%E6%83%85%E5%A0%B1%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>目次情報作成</h3>\n<p>QiitaAPIで取得するHTMLは既にリンクが埋め込まれていたので、HTMLから目次を抽出しています。\nHTML構文解析には<a href=\"https://github.com/unifiedjs/unified\">unified</a>の<a href=\"https://github.com/rehypejs/rehype\">rehype</a>を使いました。</p>\n<div class=\"gatsby-code-title\">HTMLから目次情報抽出する処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> rehype <span class=\"token keyword\">from</span> <span class=\"token string\">'rehype'</span>\n<span class=\"token keyword\">import</span> visit <span class=\"token keyword\">from</span> <span class=\"token string\">'unist-util-visit'</span>\n<span class=\"token keyword\">import</span> hastToString <span class=\"token keyword\">from</span> <span class=\"token string\">'hast-util-to-string'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MIN_HEADER_DEPTH</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">HEADER_TYPE_IN_HAST</span> <span class=\"token operator\">=</span> <span class=\"token string\">'element'</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">HEADER_TAG_NAMES_IN_HAST</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'h1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'h2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'h3'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'h4'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'h5'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'h6'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">_extractHeadingDetails</span><span class=\"token punctuation\">(</span>htmlStr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// HAST形式の抽象構文木に変換</span>\n  <span class=\"token keyword\">const</span> htmlAst <span class=\"token operator\">=</span> rehype<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>htmlStr<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// ヘッダータグ(h1〜h6タグ)を探す</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token function\">visit</span><span class=\"token punctuation\">(</span>htmlAst<span class=\"token punctuation\">,</span> <span class=\"token constant\">HEADER_TYPE_IN_HAST</span><span class=\"token punctuation\">,</span> node <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token constant\">HEADER_TAG_NAMES_IN_HAST</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>tagName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// ヘッダータグから深さとタイトルを抽出</span>\n    <span class=\"token keyword\">const</span> heading <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      depth<span class=\"token punctuation\">:</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>tagName<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> <span class=\"token function\">hastToString</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// aタグのうちhref属性が#始まりのものを探しidを抽出</span>\n    node<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">=></span> <span class=\"token function\">_isHeaderIdLink</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      heading<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token function\">decodeURI</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>heading<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">_isHeaderIdLink</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> node<span class=\"token punctuation\">.</span>tagName <span class=\"token operator\">===</span> <span class=\"token string\">'a'</span>\n          <span class=\"token operator\">&amp;&amp;</span> node<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>href\n          <span class=\"token operator\">&amp;&amp;</span> node<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">.</span><span class=\"token function\">startsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"gatsby-starter-qiita\"><a href=\"#gatsby-starter-qiita\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/docs/create-source-plugin/\">gatsby-starter-qiita</a></h2>\n<h3 id=\"概要-1\"><a href=\"#%E6%A6%82%E8%A6%81-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>概要</h3>\n<p>Gatsbyの一番ベーシックなサンプル(<a href=\"https://github.com/gatsbyjs/gatsby-starter-blog\">gatsby-starter-blog</a>)をベースに、gatsby-source-qiitaを導入し、オリジナルの記事とQiitaの記事を一緒くたに扱えるサンプルです。\n<a href=\"https://takumon.github.io/gatsby-starter-qiita/\">デモ</a>もあります。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 700px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 111.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAE2ElEQVQ4y41UW2wUVRgeqCLxTQOC1RiNL5qYGOMlER9MfCHxQXky+AIEFAM8EGKCxAfFEDTxxgMxBhMx0BIIFSiXLu3Slt1u2Uu3Zbfby7bbkW53u5czszszuzsze5k55/PMbEVQYtzky/f/55x8+///d84InWvXjHU+86hy9Oh3xe7uLvLbqZOkq/s06b18iXSf6SKb3nqTrO5YRVatFlwIq+7Hw2seIh0dHUQQBHnjk52icPnC7+mAz498WoGuWNDkOsrFGhSiQ5UMJCbmcdMbdHHLF0VwZBxB/wTHOG75o7jaO4ABrxeePg8uXLykCwBEyV7EYPakfXO5i91cPsOGMqfZcKab8ykWlHpYWLnAxtReFuWIVTwsql1iMc3DUtYIO3R8Hzv6zQ+U6yC9lNEEMIhXCt/iyPRm+lNqJ47NbcXx1DZ8PfMufhH34sjUZhyf24EvE+/gx+RWnEjt4fl27AptwBa/gA+CAl7Z/Tg7duxnzCZnNbfCntxh7Bl7ln4e34RPJ17GF5NvY//4CzgUewMHJl7Cwdir2Bd93uXPYq9xvI4docfwvk/AlhEB226vZQe+2o9DBw+3Ba+R7/Fh6BG6O9qJj6MbsSuyHrvCG7AzvI7zEy5/FHHy9StYh92Rp7A3+hw+iTyNA7dfZKVWFv19g5pgWbYIUGTkOarqEmStCM0oo27r/0DtvtzkuWlVOVehtyrMmWEuy2do8RmibsC3/T0qJWIoyArUsob/9WN34QpK+RwXtJ0KeY2ZNIXdevBpRu/J/g2KFcFlp8JGXcRMDNVoiFaCAWijPlSDfigBH8ocKs8xHgAbvAw2fLUN70WwoStgnvNg538FCw27gnJ+WRNskhfpZBTRnEHjmQrm5QbEUgNThTom8yayFatdx515YIk3k14A/kgCiTEgOAR4e8GunmVoNVEmeS4oFUQk48gqKpXLJeiNBqr1Ouc6GraFimGg2miialGojRZqNkWT/4UT67xXJ6azMQazhlzeEVTLIi8ZS6ERmgv5UYiMQp4IQYlHOcZ5HHZjfSYOM5lAc34aljgLg4+pMZeAvZgCCw4xWC0uyE1pUSpiYRrw9VHcugEEBoCR/jYH/uKV2Fkf9QIh3mp4mLc8CPg9YHOT7gwLjil2WRLt2xGMzeZobDqNUl6CVpQg5QgSySx0SQa0MphaAmoVLsRN8vQA3BRcOwecPQF27RwDtVEoONeGm4K5SeSMJpW1GpqUuTBt5s7I/vtqoEEpLL0GSybgo4LNuVmSYEX8DA0ThWKBC7qmxFBUFJpZXEQ2k0FmaQmFfA61agWaqkJVFChK2d1TK1XXuIphIl8kILqJWtjnChJyVzAOuarTWpU/Je5wuVwGkSRUeK5zl3Wdfxu5sMMGh+k47wjzfadyGg/zlgyUSvwetpyWUwncc+H/851R5ryclXOUtncmI65grpjVBCoXFppTMYQLlr1ADBrL1miKmHRE1OhwSqNTeZ1Oc8i1JtWMFlX0NpxzmZLpFkjjEQpTRyaXVQUm5ZfA71aQmzklW7hjAEluZqIM5BvtQuwH1Hvf2swEYDWxXMgbQqNaGbMCA4p2vaeoeHqIfqOX2IHrxB7xECvQT0zfddIMDLhcG+4jBmdjZa056iWmv5+0Rm8QWJacyaTFPwGTJue8m2czAQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"デモイメージ（コメント付き）\"\n        title=\"\"\n        src=\"/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png\"\n        srcset=\"/static/9293b3eb97aeb22d4a07c16875d1784d/45c00/gatsby-starter-qiita-with-comment.png 200w,\n/static/9293b3eb97aeb22d4a07c16875d1784d/7f762/gatsby-starter-qiita-with-comment.png 400w,\n/static/9293b3eb97aeb22d4a07c16875d1784d/1b47a/gatsby-starter-qiita-with-comment.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id=\"実装ポイント\"><a href=\"#%E5%AE%9F%E8%A3%85%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装ポイント</h3>\n<h4 id=\"シンタックスハイライトのスタイル\"><a href=\"#%E3%82%B7%E3%83%B3%E3%82%BF%E3%83%83%E3%82%AF%E3%82%B9%E3%83%8F%E3%82%A4%E3%83%A9%E3%82%A4%E3%83%88%E3%81%AE%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>シンタックスハイライトのスタイル</h4>\n<p>Qiita APIで取得するHMTLのソースコードブロックは、Qiitaで想定してるシンタックスハイライト用クラスが付与されています。\nそのためスタイルはQiitaのサイトで開発者ツールで該当のCSS開いてほぼ流用しました。</p>\n<h3 id=\"オリジナル記事とqiita記事のスキーマを統一したい\"><a href=\"#%E3%82%AA%E3%83%AA%E3%82%B8%E3%83%8A%E3%83%AB%E8%A8%98%E4%BA%8B%E3%81%A8qiita%E8%A8%98%E4%BA%8B%E3%81%AE%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E3%82%92%E7%B5%B1%E4%B8%80%E3%81%97%E3%81%9F%E3%81%84\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>オリジナル記事とQiita記事のスキーマを統一したい</h3>\n<p>オリジナル記事とQiita記事でスキーマが違うため、ソースコードで一緒くたに扱おうとするとif文だらけになって扱いづらい状態でした。\n対策として<a href=\"https://github.com/Takumon/blog/tree/master/plugins/gatsby-remark-and-qiita/gatsby-node.js\">スキーマ統一用ローカルプラグイン</a>を作りました。ローカルプラグインなので名前はテキトーですが...<br>\nGatsbyプラグインでは、<a href=\"https://www.gatsbyjs.org/docs/actions/#createNodeField\">createNodeField</a>というAPIでノードのfieldsに自由にプロパティが追加できます。\n今回は<a href=\"https://www.gatsbyjs.org/docs/node-apis/#onCreateNode\">onCreateNode</a>(ノード生成時に呼ばれるAPI)時にcreateNodeFieldを使ってfieldsにタイトルや作成日など共通プロパティを追加することでスキーマの差異を吸収しています。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownRemark`</span></span> <span class=\"token operator\">&amp;&amp;</span> node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token string\">`QiitaPost`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// ここで差異を吸収</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">    slug<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    title<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    date<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    excerpt<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    tags<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span>\n</span><span class=\"gatsby-highlight-code-line\">    node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownRemark`</span></span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">_excerptMarkdown</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>rawMarkdownBody<span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>tags\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token template-string\"><span class=\"token string\">`/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>node<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        node<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        node<span class=\"token punctuation\">.</span>created_at<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">_excerptHtml</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>rendered_body<span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>tag <span class=\"token operator\">=></span> tag<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Qiita'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// Qiitaタグを追加</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span>\n</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// ノードのfieldsにプロパティを追加</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`slug`</span></span><span class=\"token punctuation\">,</span>     node<span class=\"token punctuation\">,</span>   value<span class=\"token punctuation\">:</span> slug     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`title`</span></span><span class=\"token punctuation\">,</span>    node<span class=\"token punctuation\">,</span>   value<span class=\"token punctuation\">:</span> title    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`date`</span></span><span class=\"token punctuation\">,</span>     node<span class=\"token punctuation\">,</span>   value<span class=\"token punctuation\">:</span> date     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`excerpt`</span></span><span class=\"token punctuation\">,</span>  node<span class=\"token punctuation\">,</span>   value<span class=\"token punctuation\">:</span> excerpt  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`tags`</span></span><span class=\"token punctuation\">,</span>     node<span class=\"token punctuation\">,</span>   value<span class=\"token punctuation\">:</span> tags     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"github-ribbons便利\"><a href=\"#github-ribbons%E4%BE%BF%E5%88%A9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github-ribbons便利</h4>\n<p>GitHub Pagesなどでサンプル公開したときに、ソースコードのリンクを貼り付けたくなりますが、\nその時に便利なのが<a href=\"https://blog.github.com/2008-12-19-github-ribbons/\">Github-ribbons</a>です。\nいろんなところで見かけるこのリボン、実はコピペで簡単に実装できたんですね。知らなかった。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/283def24fa1c8479482c9b1b6b377b72/1b47a/github-ribbons.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 700px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAAC/klEQVQ4y3WSSWgTURzGg+ICnlwrngQvCoLgCl4EL4pYBS/qRcUNF3BBsepBhaKIqAWriB4Et4NLW6laaa22brGa1ca2SQ22ySTNMma2TJNJZt7/883EuqEDH9/7/+e9H99bXM2NDwfedL7C0KAEXTKhiEXk0nlIGR1ydhjdvgg62tyO3nV64H7thfuVj8vr1I+bWtHa1oaWlhY0NDblXQC+ZK0BtAs3rI7EbepI3KUX8Vv0Mn6H+01yZx9Ql9RAH+VH5OEKqC3kUZrIzz1ivqaay3vp9NkLjHMQi8VlGxhtTp1D7ecV7Er/VtSFN6C+fxPO9KzC9ege1IZWoD68BSe7l+Ni3wZc69+NS5Et2PmmCuteuLD+rQvzt0+iurqr6OvrUxzgg+Qp7P44kx0PLsUh3zyc+LQM+72zcTSwGAd9c3EksAB7PbMcrwks4lqIbR+q8HDHePQvmYD66xNp17l9OH74VAX4JHMeG9+PYzs9M7DDM51PnoptXVXY2jWF+zTHt3+wa953T8Zm31QcuTUGsTljwUaPwuMDVRRHEs+b2xWXZbEowBAXw0zWsxCVNJThHIqW/pfyFVEBBZ6i7HkHZc50aMf2oBDoIvsMh4Q4B/KEMAro3LyGZbsDSIkS5JyC/37fRL4yCVgWrCEBVCrZXQcoppKKy7SsqF0wIcZglX9bST9FxCqyK78b9PQe6Nl9Dk9XZprlCjAp8ISm6QA1AlMNBqVQhmaYkIZN5IbLkAvmDyhVgGIaJOdAmSTIMCo9+6cdPpVQXIwn5NuGZ0BiwUSeImKJorkShdJF+pQqkqCa9Efcf2gEKKXshD+2LMQGmZhJk57XSFMV0jWVjIJOqiyRpuW5NJJlmfLcS4ZBspQjXdf5EZaIMfbrUnjx1QEKAtKZDDLZLHKSBFVVoWoaJEl2xsViEXwxvwvLOTeDb9c0zT/uK5kQ8i6v17s8GAyuDYfDqyORSDX3av7iq3t7ex3Zte09PT2OQqFQNZ/v9EbGfr/f9jXtba0rvwOmN26/0ndh4wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"GitHub Ribbons\"\n        title=\"\"\n        src=\"/static/283def24fa1c8479482c9b1b6b377b72/1b47a/github-ribbons.png\"\n        srcset=\"/static/283def24fa1c8479482c9b1b6b377b72/45c00/github-ribbons.png 200w,\n/static/283def24fa1c8479482c9b1b6b377b72/7f762/github-ribbons.png 400w,\n/static/283def24fa1c8479482c9b1b6b377b72/1b47a/github-ribbons.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Github-rebbonsで紹介されているコードを少しReactベースに修正して貼り付けました。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://github.com/Takumon/gatsby-starter-qiita<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n    <span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>{{</span>\n      <span class=\"token attr-name\"><span class=\"token namespace\">position:</span></span> <span class=\"token attr-name\">'absolute',</span>\n      <span class=\"token attr-name\"><span class=\"token namespace\">top:</span></span> <span class=\"token attr-name\">0,</span>\n      <span class=\"token attr-name\"><span class=\"token namespace\">right:</span></span> <span class=\"token attr-name\">0,</span>\n      <span class=\"token attr-name\"><span class=\"token namespace\">border:</span></span> <span class=\"token attr-name\">0</span>\n    <span class=\"token attr-name\">}}</span>\n    <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_png<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Fork me on GitHub<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はQiitaから記事を取得するGatsbyプラグインを作りました。\n自分のプラグインが<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-qiita/\">Gatsbyのサイト</a>で検索できるようになったときは少し感動しました。\nまた自分のブログに<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-qiita/\">gatsby-source-qiita</a>を適用したことにより記事数とバリエーションが増えてので、なんとなく満足してます🍅</p>","fields":{"slug":"/2018/11/11/","title":"GatsbyでQiitaから記事を取得する(gatsby-source-qiita)","date":"2018-11-11T21:00:00.000+09:00","excerpt":"なにこれGatsbyにQiitaの記事を取り込めるプラグイン(gatsby-source-qiita)を作りましたQiitaからGatsbyに乗り換えようと考えている方で、Qiitaの記事を引き継ぎたい場合に便利なプラグインです。サンプル(...","tags":["Gatsby","GatsbyPlugin","Qiita"],"keywords":["GatsbyPlugin"],"thumbnail":"thumbnail/2018/gatsby-plugin-qiita.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>前回の<a href=\"../../10/28\">unifiedでMarkdownをHTMLに変換 &#x26; ReactでQiitaっぽい目次を作る</a>で、GraphQLで取得したヘッダー情報をReactコンポーネントで加工していましたが、\nあらかじめGraphQLのデータとして扱えるように、加工処理をPluginに移行しました。\nその結果、ヘッダー情報がMarkdownRemarkスキーマのフィールドとして取得できるようになりました。</p>\n<p><em>※ 下記図でheadingsDetailが加工したヘッダー情報</em></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3ce68002ad652e4ff4a4e4d763b1435d/d9b2c/headings-detail.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 77.33934611048478%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACsklEQVQ4y4WSSXKbQBSGuUFs73KAnCHb5BC+ZbJMOQu7bCm25UFSEKIbEKCJQWig0WhHwu4/D1BkpexUXtVXTRf0xxta+fD+gH3+9HH+/cvX+NvJiTg7OxOlclmcnp6J4+Nj8e7gQBweHuYc7JHtj46OinX7TbZX6rXawLJMeL0++p6PIAwxnsQYDIfo9T1YLXuHuYdlO3DbbZimBVtn0AnGOJRut+f36eBoOHyOooEcDoc5g0EokySR8/lczmaznPm8oNhP5XQ6zVdB340mQlpWSyr0MkifgXj+IMXsAY/LNdaPG6wfiF9rbBaPWM2W6NojOHwM20nQdqfotF9ouwl8b4nLywoU+kvghRGuakyqzETLsuFQOTaV5TouXNp32x1YbIJyOcDpDx9XlQgNNYauJTnNhoDBFiiVSCiECFzXwXW1IVVNh2Fw6ouxwzA5HCeTT6HR4cpdhOZNBH4/AtcTYgrWTNAyF7i4uC6EnU4btzUtF+7LcqFRCB2bhKpAuTJAtTqCrk5yWSbNhJaxwN2dCmU8HpPQhc5NmU3Sde1CsMW2W+h0OnBaCRo/J1AJRkKWrZmwWQhNPqcE2lDiOA7W6zUoJAXeYrPZ5Bk2GwnOr0NUbyOw+rgQbkvOhAZ3oCyXywBFSPwj0jTdZVgnNCqXNWJwGgbTxIvQcF+EsohX2e2EdgKNMixXQqiUJb8MwMs+GK2MxK+Ef0rej7+EWYZ0VW7uh3mWelOAs1nRQ20vw8Vi4W8PP8s3IntFPZQklJoay/vqSOr3I8lLvmQ3kaQ+SipZklCSUCqr1eq/PXx6foJLQ9G1Kc6vAtSrY3DKktM14nyWDya7NvmU6R72fd9Hr9fbeJ6X0nNO9hyGYUo/TKmKtGXFqa6JVFUn6e1tlOrXYQ4re2nzZpAabJZy5qS/AceiJbZOQUOSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"headings-detail\"\n        title=\"\"\n        src=\"/static/3ce68002ad652e4ff4a4e4d763b1435d/42603/headings-detail.png\"\n        srcset=\"/static/3ce68002ad652e4ff4a4e4d763b1435d/f931c/headings-detail.png 200w,\n/static/3ce68002ad652e4ff4a4e4d763b1435d/e8031/headings-detail.png 400w,\n/static/3ce68002ad652e4ff4a4e4d763b1435d/42603/headings-detail.png 800w,\n/static/3ce68002ad652e4ff4a4e4d763b1435d/d9b2c/headings-detail.png 887w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"ポイント\"><a href=\"#%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ポイント</h2>\n<ul>\n<li>Gatsby Pluginの作り方</li>\n<li>Gatsby PluginでのGraphQLデータ追加方法</li>\n<li>Gatsby PluginでのGraphQLスキーマ定義方法</li>\n</ul>\n<p>※ 今回はローカルで作りました。npmパッケージで公開はしていません。</p>\n<h2 id=\"gatsby-pluginの作り方\"><a href=\"#gatsby-plugin%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby Pluginの作り方</h2>\n<p>以前<a href=\"../../10/20\">Gatsbyプラグインの使い方･作り方･公開方法</a>で概要は紹介しました。今回は実例です。</p>\n<h3 id=\"ディレクトリ構成\"><a href=\"#%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E6%A7%8B%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ディレクトリ構成</h3>\n<p>Plugin名は<code class=\"language-text\">gatsby-remark-headings-detail</code>としました。\n構成を以下に示します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">プロジェクトルート\n└── plugins/\n    └── gatsby-remark-headings-detail\n        ├── gatsby-node.js ･･･(1)\n        ├── package.json ･･･ (2)\n        ├── package-lock.json\n        └── node_modules</code></pre></div>\n<br>\n<ol>\n<li>\n<p>gatsby-node.js</p>\n<ul>\n<li>Gatsby Pluginを作る時は<code class=\"language-text\">gatsby-node.js</code>、<code class=\"language-text\">gatsby-ssr.js</code>、<code class=\"language-text\">gatsby-browser.js</code>の3つうち必要なものを定義します。今回はノード加工処理なので<code class=\"language-text\">gatsby-node.js</code>です。</li>\n</ul>\n</li>\n<li>\n<p>package.json</p>\n<ul>\n<li>依存ライブラリを定義します。</li>\n<li>依存ライブラリは、<code class=\"language-text\">plugins/gatsby-remark-headings-detail</code>直下で<code class=\"language-text\">npm install</code>します。プロジェクトの依存ライブラリとは別管理です。</li>\n<li>npm公開する場合は<code class=\"language-text\">name</code>、<code class=\"language-text\">version</code>、<code class=\"language-text\">keyword</code>が必要ですが今回ローカルのPluginなので不要です。</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"設定ファイルでプラグイン使用を宣言\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A7%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E4%BD%BF%E7%94%A8%E3%82%92%E5%AE%A3%E8%A8%80\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定ファイルでプラグイン使用を宣言</h3>\n<p>プロジェクトルート配下の<code class=\"language-text\">gatsby-config.js</code>にて下記のようにプラグインのフォルダ名を指定します。\nまた今回のプラグインはgatsby-transformer-remarkで生成されたMarkdownRemarkノードをインプットとするので、\n下記のように定義しています。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// ･･･</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// gatsby-transformer-remarkよりも後</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-headings-detail`</span></span><span class=\"token punctuation\">,</span>\n</span>    <span class=\"token comment\">// ･･･</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"graphqlデータの追加\"><a href=\"#graphql%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E8%BF%BD%E5%8A%A0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GraphQLデータの追加</h2>\n<p>Gatsby Node APIの<a href=\"https://www.gatsbyjs.org/docs/node-apis/#setFieldsOnGraphQLNodeType\">setFieldsOnGraphQLNodeType</a>を使います。<br>\nこのAPIは、GraphQLスキーマ生成時に呼び出され、スキーマに新しいフィールドを追加できます。\n例えばFileノードに<code class=\"language-text\">newField</code>という名前のフィールドを追加する場合、以下のようになります。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> GraphQLString <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby/graphql\"</span>\n</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">setFieldsOnGraphQLNodeType</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span>name <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token string\">`File`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    newField<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      type<span class=\"token punctuation\">:</span> GraphQLString<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      args<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        myArgument<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          type<span class=\"token punctuation\">:</span> GraphQLString<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      resolve<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">,</span> fieldArgs<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token string\">`Id of this node is </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>source<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">. Field was called with argument: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fieldArgs<span class=\"token punctuation\">.</span>myArgument<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span>\n</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n<ul>\n<li>\n<p>1行目</p>\n<ul>\n<li><code class=\"language-text\">gatsby/graphql</code>はプラグインの依存ライブラリに追加しません。プロジェクト本体がプラグインを含む全スキーマーを統括します。</li>\n</ul>\n</li>\n<li>\n<p>8-20行目</p>\n<ul>\n<li>戻り値は<a href=\"https://graphql.org/graphql-js/type/#graphqlobjecttype\">GraphQLFieldConfigMap</a>型に従います。</li>\n<li><code class=\"language-text\">resolve</code>にて対象スキーマに紐付くノードが引数として渡されます。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"graphqlスキーマの定義\"><a href=\"#graphql%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E3%81%AE%E5%AE%9A%E7%BE%A9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GraphQLスキーマの定義</h2>\n<p>上記の例のように文字列や数値なら簡単に定義できますが、複雑な構造のスキーマは、\nスキーマ定義用の型(GraphQLObjectType、GraphQLEnumTypeなど)を使って\n<a href=\"https://graphql.org/graphql-js/type/#graphqlobjecttype\">GraphQLFieldConfigMap</a>の記法に沿ったオブジェクトを定義しなければなりません。<br>\n今回のプラグインでは下記のようにしました。</p>\n<p><em>NOTE:</em> ほぼ、<a href=\"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-transformer-remark/src/extend-node-type.js#L319-L347\">gatsby-transformer-remark</a>のパクリです<img null=\"\" data-icon=\"emoji-sweat_smile\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAZE0lEQVR4Ae27BXAcufa2/xxJ3cPjMcex49BCsrx7mZmZmZl/zMzMjJeZmZn5LoWZzePBBkl/t91VcaWS7F6+3/f9T9VbkrulM35eQY/GHv7/+H86/v/4/0P4McfvgXrOcxvT2rrLtajLRPxmUX7UiNQdlAEUdFPvl72TWe/liPVur9Vqz+teu3QUcD9WA37vxwMth57euDY0/kGEcu9As1NCqetAArQKvBYtyitRCIB3eO/EifUW6xKb+MTHfjmx7CL2n49T+cTWNy99D/A/0zPgy0+itLU08AhveEpQlLtRUlVTUCUJ1Qq6iBgHAloDIuA9cLZuLeDBpwqfeO9jl6SR69Fz7aTvvyIpbzvUa34I6P3IDFj5pX/oiGYxO6YHHqu0vESqcn1Q1lVquqACjzIrKihUqYSqNqA0CJURJKyBKQBAGuHjFnTmoLeIay/hej1c5HCp4BKBlo2Srm37tv+Os/7fdx9tvhdIf2gDPnNffqiY3Ni4rlrwv2Kq6sFBTddVWQdS9gSBwOAgauwy1Oi1SP0ypDKK6NKKCueZfB5voxX18J1Z/PJe3Oz3cDN7YXGRJPH4ruC6Nkladjltu4+3I/kL4LsAl735OqO3TvyLRf81sOd2G8DWZ/IDxaE3ypFnDbywWJZfC+pmox7QRV0BXRTU+CbU9L1RY3dBlcbACFhAAd5fZF9TIAIO0EDqcb0Z3MzXcEc/jztzDNv32A7Ypu0ny+nJftf/2eY3NP/LbH/1L2Pqv0vS+hzw8NttgNn2Gr6fSA/+vXz1GdSmTf33g7p+jmkEDd1QEhQ8jI9itj8MNXFPVFAB3Bqw+BwcwF9k61l3TwS8rJUoXNLBnfoi6YGPwJlZkkiwS86nS8lSsmxfN/2dP3q6rg6PuV4rTnpHrgb2cjvCpGGZ2x27/1S+97jq6Fio/zFsmEeYYVMxdUGVNGrbHVfgH4cqTwAxuE4O7UG+n33X50Uu1kxQWqGmHogaupL0wHsIDn4THSCqEA7+1+npF+mxqXKwZRJ7Zilkf/OXgBdzO0KCnX/O7Ylk16+uwo8O6dcWG+b+eiQohHWBgRLB5Q9Hpu6Xo7lVifizSOeBFjkH259vffp19wVQq/KAP/4Zkj0fhmaPq97xUlp3ejQf/IUreOm7j3HLm77ajRa+Mg3McxthEn/0doz8P8t7HsvAcMP8a2lQPUCPBqGpKxioEF75eNTodXjfBecgB/c55YVG3ct5B/7cbfFcd8ALohRq8h5IWONd7/8sp4rX8pyHTHPDhpBffvAUL/jiVNk0N78C+IPbNMDozVws0lt+RQB1Q73xB8VB/Qg1HITBgIbBEuGOxyAjV+DTVg5+DqznRx/eg80KQUZ28Dc3VylcNsUzrmlwoAV3nywwecMERw6Nvjr+6vP+CHAXNWAFkIuEAGr/swdfWG7I84MRs7LiAqgrwm33QgYvh6QJOFACCHh+AuHBeb61r8vNy5dxp0dsYHNNsX/Zs60mPOyOI/znVyeGg52//7xk1+/+z8WGwtwW/JeeVLm6VvG/Y4bCimmEUPGYjZfB0LWQLgEeFOCEn2x4/ug9GpnayBNvGGapD/0UTnbh8Zc3eNtlG2ieGv+tBF4LuAuZoC4G/6iNFKbrwe+FA8FEMKhRJcEMNFDjdwTpguuB74PN1PuJ6uhMn88c3Mj01Ru460SRE11PZGFmpRyvKu5y/QbU2Kbp0lW/8picU27/DMgN+Kv7DTyqUJWH6kEtuhZgKqDGL0fCEiQtQED4qcRvva2Cn5jk/lcNYxUsJaARLJ6ZHjxiZ50vbZ9Q8ezUnwIfAHyu2zAgh3/Z1VRrFX4pGAgKqhZAUUG1vqKps+sewPMTj30zwgd376R21xGu3lhipg19C0bAe+FUH6YGAkY3D3L08PQlg1e86smLt/7j285ngrnAstAvuWrwEYWaXGcaGl3VmAKo+hiiBNIuiAel+GnEP3ykih+dYGCojkOxGHtiC0nOFlnAGAYHq8xuGlP26MivA+/M4e3FDJBMl48QNirueapSMFIy6KKGgoHiEKQ9IAF/Gw8YBZQCCBT0LcTpxduf2zc0UNSQOOgl6/vyyd2TFC+pUy4XON4Wtg9AvO5+oOBM36OCgMpgnZnSxI6Mac8cNmf0F9oEBdB/d6/aVeWKuruuKXRJQaiQYhHRBmwHXHxxmRTqitMHZ/n2Fw7TWViGuoBKbruvSrK2WZ+sb5Yjy7WWM28z26kRVkMKxYCDTWgmkDqILCR2rb5rwWNCRVgxEJZXmQANyMVmgMo0XZVHBFVdlLJBFQ1iFEqHIBawF1/3wdps+a9/+gYf/ORh+r2IRqPM859+BQ9+zFZYTMA5zhtKQT3k4+/bw/+8+VaWlroUSwUe+cAtvPAlV4NLVwm994gIgfF0Erhl3jNVg1Ag9TDTWlEPQkAkk5Ax5UdnBbjzzQAB1LZBwkpRP0CKGhNqJFiRzucVEaQXkV1R2fOG136Pd773VgZNwrahANXr8Q///nW+9ulDUAXS5PyqkrXJ2mZ9sr5ZjixXlnM1NzaiEcyTdCNckiLiWE4UB5fhYIfVcq4LHoe1lqSX4OM2GVPGljPLhQyQX75TdVOpwFW6KBAKYgSl8z5pAj6+sEqek3tmee/7D7J9pMClYwHbRhU7N4YMB5r/ef1uWF4G3QXbWq/sWnYva5O1zfpkfbMcWa4s52puSp67bjpM/8wS7VafJLHgHImDTgz9/ATuUkuvG9GbW2Za30jGlLEBcjEDzJayujooqQpFjYQatIDWYGNwEbjkPErBpxCmfOTjxwh8yqZhzVBF0ygqhlfK7eMhc2fafOnzB0HNQ7Sifqa8ruZX72VtsrbDed8sR5Yr8Gu5CVNecKcVA44cYeHULEuLy/TjhNQ6XOpX5IiShOXlHnOn52nvP8lztn6RjCljA8x6A8y5S2C0yE4pKJFAobQgSiATFtI2qMI5Z1gL3oKk0BRu3DXPeN1QDQXxjiTxaC1US0KjpPnGTcvc4/7Vc054gGb1XtYma6txJLFHGclyZTlXc9McZLLW52XXfoB///YAyihsmlKplQi1wTpHtxsxc2qR2RsPcrfSe7jnxByCkowN+OCFDFCZikW5VAIBLZCVRoHk7ZM+qCRv6tbk/FoZCq1FWF5KmKxp2i2LKmgKAwW6c32UwEBJOH4igUiBXvdE1kCkVu9lbZK+Y8FDeaRI1IxxkaVW0pxYSmgtxgxUHU+84gDL0Vt48xceR/fyzdTGBzCFAJs6evMtlvad4o6FD/Krd/gmDQuSChkbOee5BkguVVQyLlrQK0IUCrXulOfA+nOOvnk9FBZOro14t50ytnOEx//8dQyMFzh2S5N3/f23See7RJJC7EEJ2HXWx55WJ6UQWeLhAk94zQ1sunKA5pmId//td5nZNUeSaBaanslJw5nTPZ57zV7uMvWfvO6mK7hl/xUk1Amly6bSPl668xbuvuEUNWImjEYWUzI2QK3j9Yb1AaHRDIoGBAQBckbJ63jw5/kMz0HsoN1JGawXefYvX0VdLaEO9dhxyQBPeuU1/NEvfhXxKRZBsz7AInR7KZ0YXr7S9rJLHOrQYSqN0mqu3375V2gv9okdGC1MjQQcn0u5fnSW7ff4CrH9Fl4U4AhUQjWIKWAZMIaqSkiXIWMDQqB7nk0wd0Z8WSRf+97nAnC5/DnKr6eewSFDKxHu+9jNNIot1Kkl6EYrILNcdjnsuPMEkWh0RSBZlyPx2bXsXtYma5v1yfpmObJcWc4sd/Yaa69VU2wY1GjxDBYjxistNpSbK2oxXOxTUI5GTdjY0KiMZ0UZGyAXWgIAWmnEyzo+ceAVOA8XO1BHCUMDAb/913fkLluAY0t5fyD1qBOLvOhFUxw+MwFxF3wKknf2DmLFL/72VWwZ16ttST0owAPHmjz8Pg2GN9+RoYE+tPooUYw2FJWCYW45pd31WAcIVIrCcM1QL3joWqwHL5CxAfp8S8CT4zinIrzHOw/e5vD5yGvWT/88BeQVVLfLPbZ4gm5/rY8IKA9aoJ8yVl1meFrDUgRGAEce0I24w7RCxxb6EQQqf6ALOE+pu7iSu4hq9shnHgpPpQSlUJM6kNxLESFQgliH9Rafz+RVtrO2+vMehtKEZZ96sA78mlxOjQcFa0BVAesh9pCe3VqCZgscOSCQFxiQXh/TB/T5P5kw7Q54wABYkHX9E0vQTHPj84sBSFHQrKjlcCk5Xk7oPDi7ypIxpY7li30e4AE61s6PuLXnqU4d1qaI0iAAQABxz/G5L/XYNh2y/fIAxgAHxEDfg833DjnHBOHCcZ4HC3AW2ABKoCQQ5jNjzvLtbyR0u4573rmIQuHSs529s3jrsdatlp3Yzp/7CucuAVoJR7CA8zg82now+WgANDT/86Ym//LWBaaHAqYnA7ZfGnDNFQUu3579rGFAQ0nAZ8qHw67fR93ZawB63WFIrbum8tnmgZ4nWUrZv9+yZ2/CLbdGHDiYcPRMj2YL/v1PJrjhziVYdAD566wy5EspZ8vjfEvAAemBZX/oysThU8C5s3NbgQIIoN2FAacYSCzHd0XsvVH48AeEah0aAyFjGwI2TBg2ThomxzUjo4ZGQyiVFaUCGCOYEAhy2tSR9D2pdXRXyk7bs7hoOXPGcfJ0wunTlpOnUuZmEprNhF7bE1hPLYCRUkjHOTqxAu3XnfU8eAepw8fgE0fGtm4oOJ8B9svHowMP32Eik7oCXq/7Gz44AeUdl1xaoKETaivEU3e9nuZyh/mTR2gvdTl2rMOBA31cCloLpiRoDUEByiUIw+xns2qCDgTvWAW3SYpNod/39PqQJmCtJ+2Bsx4TQFjwFCtVxjc3GJ7cTIGI5ZtuZrik2LwlgMSDACrH9ORkjjR2UcYGpBczIH7/3vj4r969drQQcSmJB3t2HSoFxHDljiKpQDwwyDVP/SWUi0m7LdIoprNwmKW5ebrLTVozB2gvtIl6EXHcJe516HZjnLU4l2AtAGhjUKv5NUGpSH2kShgWKZZDaiPD1Ie3UKpXGRjfSLE+RlAsEZQHWTh9mE/e+Es0GprJKQNxsu4NW46aeHwEra46mrEB8YUM8EB8qkvv5HLytaG+ujSNNcrl/B5QQNez9fKQ6miJ/SdmuFdrnomN07hKmSAMKV55FcYEmCBAKQ9OMFqRJD1s0iaN+giCErApAIgGjwMUQamCNlVEB+BSPJ7Egk0T0jimG/WwcUpYGWDfdz7LscWIh1w7gh5ScBzQQAI+3wPSxOP6lowpY8sN8BcyIAH6Hz/kvnjltH26j5xyiUWnQKBBAO8JhhXX3a3Om991hk9+6I0844W/xvDYOOI8kKIUhEYoFkqYwFAoFFfNCQsFAhOizdpz2ufLywPWQ5KkpFFKFPeJ44gkSYiiGLNSj7EYKVIslXEeDh7cz+c+9h5S4F4PqEHiQIRVzx2wuqw8Kwz42LqMCejnjB6ACzyRC8facfqkS0v3KFfViC4qVKiQwopMfjQ2MDxU4tOfaHFm5gjf/tZXOH7k0OrID49uZGxsgoHGEOVyNisCjDYExqAFjBaMUpggRGu9Ku893lpsmiLCmrQiDAtUKlUKhRLahMzOzfDtr3+BD7z7dXzifW+kc+o4WzZU+cVfHcV0YnCAgMvAM3VS7JJl/ozb88ufaf73Yp8ZoH2hGQDggO7BRTrfPJV88CGjakcaaVTqEeuA/GjcTNlx1yp3v3OdW7+3TLJ4iK9/+ghf/txHGRoZZXLTVnZefT1bt13G5TuuZuPUFsrFMpVSAICIsD5MZo7WFAoFvIfl5Q7tXszRA7vYu283B/bezN5dt3DqxGFazSWKvs9YSfCiedRjhygOevySBxFwgPPQd6R9j+taMpaMCegC7rb+WyEEpu4xpXe87QkD/zGwKZwMxgN0QyMDGpW/IWFMc+u+gL/4hUOM1YRYCYuxZz6KWepBzxUQE1AsFajUh2g0GgwPjzIwNEqhWKJUrFAMQ8DT7veJ+l36nTYLi7PMz83Sbi7TaS3S78cYF1M0EUMFw0jRMBgKadeSVkP+4r+3UOp3oO3BepwFv2yxSynJmZTm8fjEU97VfPGXjtvdQL4JXvwPIwnQXukw/+WjydsePKh+QVUVqqCQksfr/GS1mLLjjiXu94RxbvzAaXZMhYiCTqJpxZ7lGNppTCvp02kusriQMrNPk1iFXXck9x6UeMCjlcOIpagttTBgoqSo1jW1gqZqytQLQsko+j3Hvo7jaa+ZolxL8EsORHAeiB2+57DdFbVTMoaMBWjnbNyWAR5oAUu/+8XWp26YMA8ZK9krdUmgLyijEeMBhZrr8uSXD3PycI/5Iy0u2RQwajTeQWQdSaKJvKefemIbEqeQeLBuTQ4A0CIoAaM0gQQUDARGKCpFUYMxQqiyNp5O7Dk8k3DnJ0xw5wcW8EeXQRT4tYQuWtv1bdMyN2tvyRiApZzJ3x4DACJgadcsc6+9Mf7P19TUn6uSKpiiQ0LBhwoxQM9Trnd48e9t5p9/5SBH5/psmxKKgVARhVcCFhwe78Hl8Fnpz/cHScBokHyvFQQExEPiPd2+Z9/phMk7j/LEV4xg5pbACuBwKfi+x3Uc6ZIjWkij7HfPGHIDIs4T+iJHEweY780kyZ0nArWpqq4TI6hQgRYkkxGIHZVhuPTuG1Z26DYLZ/rUahoTKIwWtAZtBLOiIBDCUCiEayYVw1yFtWthIJhMRtCrrwGi1uCbXceeY2vwz/7NScrtJWilAPjIr057n8EvpKSzKV8+GL/p1z7d/lSUchKYA5LvxwAACxClqG8fT888YMpsbBRls9KCV4LoXCIQp9RGHVfdd5L9B2MO7W0TBhAUFEYJrEiJoPO65BKdl+uUt8HLirzQTeDUvOXIvOeqR03xhFeOUWktwHICVvCJx2VrvulwiynJCvzBI8nnX/L+9v+eaPvjkD/6gO/XAIAUUPN9L0ea9sR9JsxlpUBGlfKIVmDyUfICkaVcTth5v3F8pcqem1u05mMIhSBQKAVOCSrT+eBFcDm4c9BPYK6Zcuh0SjpY4uGv2MY9HlGmPL8AbQvJWXi/5HALCcmcZeZkcusvfaLzz187lR7K4RcB+4Ma4HLJ4UXnTrX9obuNqJ1Fo4ZWwXW+RpWAAxJLmEZM31Bh5z02sJwYjh7sMzcbE6UOAZwInkzk+wKkQJpCP3I0O5aTcytasPSrBa599BSPe8kkUxN9wpllyIBToOtwfY9vOuxCSjJvmT0RH/iNT3X/7kN7470OTgHzQP+H/W9xAerAhqJh6vE7Cpf97n3Lr9w4GVxhxgJk0KCqgipppChIKLBS+mpIVK/RWQq45ast9n1vkaXjPWw7QgNGgVLgAWs91gleC2E9ZHRbjUvuOMjO68sUwj7hfAv6KUQen66ou7bTu7bDL1rS2YSTJ5Jbf/+z3X969+5oTz/lBHAaWAb8D2tA3o4hYLxomHjA9mDzH96v8pztU+G9zbBGNwyqppHV9wsCQW5EIFAKSOolYlWi34K505bmXExrMSaJLDihUDU0RkLqo2b1swRdSAnjHma5D/0EEo9PWC1d5PBtj2utvdlJFyz7j8Vf+K3PdN7wmYPJgX7KqXzqLwD+R/l9AQ0MAmMGxq8d1xO//8DKw+6yJXxSedgUGDLomkKVFVLWEIAqKVhd7x5CDQWNCwJcUePE4DUAiPWoNEUnFolTiBPog/cOYnCxhxX52K2Oum1ZWAHvzqfR1w7H7/itT3Q+evOMPZHCmRx+CbC3F+r2hgdiIHXgTnV88vWj6ck4kT2bCn6kYv1YBoIFbz3iBaxfqyce7BqExDG6t6JuD9PqZ1qtq04C3QR6FiK/Krci3197xLmmxS2uaCEhnbGcOBHf/Npvxv/xF5/vfuHWBXvcrYHPAs0cnh+1AQCO3ATALUQ++d6pePEbJ5Ob6krPjMB4YH2dyOESIMqnrgWfurWpHLOivEz8Wj0C33crZQ7bt2vrfNnhm5Z0yeLmE9K5lIWT6fFP7U7e9nufab3jfbuivSc7/nQOPncR+B9iCVx8YxzIl0Vjc5WRa6aCkWdcU77+DpPmPqODcrkuG1FVgYJCFRUSCGTSglKAAQBS8jO8h/wo6/oOMjO6Dtu1fnbR7/nWifRzb7qx+50bjydzR9r5OzxYzMGXAf+T/M6QACWglpvRAGqbBxicHtS1B2wvbb3vZn3N5uHgmoEKk7qgCjoUyKRBjDr76j6fIRaIPTZT5KJmhxNH5pMbP3vE3vipA71DRxdt60iTRaCVwy/n9R7gf1pfmjJAGaitU2mwwMB4TVc3VinunCxuuH5Uj083ZONIWcbKRjWCQFVC5QsAsZMoSVynm7qlua6fObrkT35n1p7ZdaJ/+mSb/pmWbS9GNHPQ1jp1gfRn4VtjAoRACajkKuc/FyuGQr1EqRbosGQICwFiFDrQAOT/2YWNEnwvJW4lNl7u0eukREA/B+8CnVznfLb30zfgXCMKQDFXCQjXSeftzDoAAVLAky+EdeoB/VzRxcF/+gace7oNgSDXKnxeyjojWAfugXidCUmuGHA/01+cvEjI+uM+oHLJ+Y7gudJ1wJ4fY/x//MwCKXB2woUAAAAASUVORK5CYII=\"></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// スキーマ定義に必要な型はGatsbyが用意してくれている</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  GraphQLString<span class=\"token punctuation\">,</span>\n  GraphQLInt<span class=\"token punctuation\">,</span>\n  GraphQLObjectType<span class=\"token punctuation\">,</span>\n  GraphQLEnumType<span class=\"token punctuation\">,</span>\n  GraphQLList<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gatsby/graphql'</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">const</span> HeadingLevels <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GraphQLEnumType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 他プラグインも含めて一意な名前をつける</span>\n  <span class=\"token comment\">// 名前重複するとビルド時にエラーになる</span>\n  name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`LinkHeadingLevels`</span></span><span class=\"token punctuation\">,</span>\n  values<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    h1<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    h2<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    h3<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    h4<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    h5<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    h6<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\">// 親ヘッダー情報</span>\n<span class=\"token keyword\">const</span> ParentHeadingType <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GraphQLObjectType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownParentLinkHeadings`</span></span><span class=\"token punctuation\">,</span>\n  fields<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    value<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token punctuation\">:</span> GraphQLString<span class=\"token punctuation\">,</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> value<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token punctuation\">:</span> GraphQLString<span class=\"token punctuation\">,</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>id<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> id<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    depth<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token punctuation\">:</span> GraphQLInt<span class=\"token punctuation\">,</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>depth<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> depth<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\">// ヘッダー情報（親参照付き）</span>\n<span class=\"token keyword\">const</span> HeadingType <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GraphQLObjectType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownLinkHeading`</span></span><span class=\"token punctuation\">,</span>\n  fields<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    value<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token punctuation\">:</span> GraphQLString<span class=\"token punctuation\">,</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>heading<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> heading<span class=\"token punctuation\">.</span>value\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token punctuation\">:</span> GraphQLString<span class=\"token punctuation\">,</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>heading<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> heading<span class=\"token punctuation\">.</span>id\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    depth<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token punctuation\">:</span> GraphQLInt<span class=\"token punctuation\">,</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>heading<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> heading<span class=\"token punctuation\">.</span>depth\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    parents<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GraphQLList</span><span class=\"token punctuation\">(</span>ParentHeadingType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>heading<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> heading<span class=\"token punctuation\">.</span>parents\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br>\nこれらの型定義を使って下記のようにreturnします。\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    headingsDetail <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GraphQLList</span><span class=\"token punctuation\">(</span>HeadingType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      args<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        depth<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token punctuation\">:</span> HeadingLevels<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>markdownNode<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> depth <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">_attachParents</span><span class=\"token punctuation\">(</span><span class=\"token function\">_getHeaders</span><span class=\"token punctuation\">(</span>markdownNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</span>        <span class=\"token keyword\">return</span> result\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>NOTE:</em> 10行目でMarkdownRemarkノードからヘッダー情報を抽出しています。\n前回記事でReactコンポーネントに定義してあったものの流用です。ここでは説明を省略します。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>データ加工をPluginに寄せたので、Reactコンポーネントとの責務が分かれてコードがスッキリしました。\nnpmパッケージとして公開するには、汎用性を考えロジックを精査する必要がありますが、ローカルPluginなら気軽に作れますね。\nソースコードを分割し、責務の棲み分けをはっきりさせるという点においてローカルのPluginsを活用するのはとても良い手法だと思います🍅</p>","fields":{"slug":"/2018/11/03/","title":"Gatsby PluginでGraphQLデータ追加","date":"2018-11-03T09:00:00.000Z","excerpt":"なにこれ前回のunifiedでMarkdownをHTMLに変換 &#x26; ReactでQiitaっぽい目次を作るで、GraphQLで取得したヘッダー情報をReactコンポーネントで加工していましたが、あらかじめGraphQLのデータとし...","tags":["Gatsby","GatsbyPlugin"],"keywords":["GatsbyPlugin"],"thumbnail":"thumbnail/2018/gatsby-plugin-graphql.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://www.gatsbyjs.org/plugins/\">Gatsbyのプラグイン</a>は、<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages\">公式プラグイン</a>とコミュニティ提供のものをあわせると、なんと502個もあります。（2018/10/21現在）\n今回はその中でもおすすめプラグイン45個をユースケース別にご紹介します。</p>\n<h2 id=\"ユースケース別目次\"><a href=\"#%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E5%88%A5%E7%9B%AE%E6%AC%A1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ユースケース別目次</h2>\n<p><small>※クリックすると説明セクションにとべます。</small></p>\n<p><strong><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E7%B3%BB\">マークダウン系</a></strong></p>\n<ul>\n<li><a href=\"#gatsby-remark-prismjs\">コードブロックでシンタックスハイライトする</a></li>\n<li><a href=\"#gatsby-remark-code-titles\">コードブロックにタイトルを追加する</a></li>\n<li><a href=\"#gatsby-remark-autolink-headers\">見出しにGitHub風ホバーリンクをつける</a></li>\n<li><a href=\"#gatsby-remark-emojis\">絵文字を使う</a></li>\n<li><a href=\"#gatsby-remark-graphviz\">Graphvizでグラフを描画する</a></li>\n<li><a href=\"#gatsby-remark-katex\">数式を使う</a></li>\n<li><a href=\"#gatsby-remark-embed-snippet\">コードブロックにJavaSriptファイルなどを埋め込む</a></li>\n<li><a href=\"#gatsby-remark-copy-linked-files\">リンクされているPDFや動画などをビルド時にpublicフォルダにコピーする</a></li>\n<li><a href=\"#gatsby-remark-images\">画像をスマートに表示する</a></li>\n<li><a href=\"#gatsby-remark-responsive-iframe\">iframeタグを縦横比固定でレスポンシブ化する</a></li>\n<li><a href=\"#gatsby-remark-embed-youtube\">Youtubeを埋め込む</a></li>\n<li><a href=\"#gatsby-plugin-twitter\">Twitterの埋め込む</a></li>\n</ul>\n<p><strong><a href=\"#seo%E7%B3%BB\">SEO系</a></strong></p>\n<ul>\n<li><a href=\"#gatsby-plugin-react-helmet\">React Helmetを使う</a></li>\n<li><a href=\"#gatsby-plugin-offline\">オフライン環境でもWebサイトをスムーズに見れるようにする</a></li>\n<li><a href=\"#gatsby-plugin-manifest\">PWA対応する（manifest.webmanifestを生成する）</a></li>\n<li><a href=\"#gatsby-plugin-sitemap\">サイトマップを生成する</a></li>\n<li><a href=\"#gatsby-plugin-canonical-urls\">canonical linksを追加する</a></li>\n<li><a href=\"#gatsby-plugin-feed\">RSSフィードを生成する</a></li>\n<li><a href=\"#gatsby-plugin-robots-txt\">robots.txtを生成する</a></li>\n</ul>\n<p><strong><a href=\"#%E9%96%8B%E8%A3%9C%E8%A3%9C%E5%8A%A9%E7%B3%BB\">開補補助系</a></strong></p>\n<ul>\n<li><a href=\"#gatsby-plugin-lodash\">ビルド資産（bundle.js）のlodashのサイズ削減する</a></li>\n<li><a href=\"#gatsby-plugin-webpack-bundle-analyzer\">ビルド資産（bundle.js）の中身のサイズを可視化する</a></li>\n<li><a href=\"#gatsby-plugin-google-analytics\">Google Analyticsを使う</a></li>\n<li><a href=\"#gatsby-plugin-facebook-analytics\">Facebook Analyticsを使う</a></li>\n</ul>\n<p><strong><a href=\"#ui%E7%B3%BB\">UI系</a></strong></p>\n<ul>\n<li><a href=\"#gatsby-plugin-nprogress\">ローディング中にプログレスバー表示</a></li>\n<li><a href=\"#gatsby-plugin-catch-links\">aタグでローカル遷移時にリロードではなくヒストリーAPIで遷移</a></li>\n<li><a href=\"#gatsby-plugin-layout\">1系のレイアウト機能を2系で使う</a></li>\n</ul>\n<p><strong><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">ファイル系</a></strong></p>\n<ul>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">JSONファイルをパースする</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">XMLファイルをパースする</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">Yamlファイルをパースする</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">CSVファイルをパースする</a></li>\n<li><a href=\"#gatsby-source-filesystem\">ファイルを読み取んでノードを生成する</a></li>\n<li><a href=\"#gatsby-transformer-remark\">Markdownファイルをパースする</a></li>\n<li><a href=\"#gatsby-image\">画像読み込みを最適化する</a></li>\n<li><a href=\"#gatsby-transformer-sharp\">画像読み込みでImageSharpノードを生成する</a></li>\n<li><a href=\"#gatsby-plugin-sharp\">Sharp(画像圧縮ライブラリ)を使う</a></li>\n</ul>\n<p><strong><a href=\"#css%E7%B3%BB\">CSS系</a></strong></p>\n<ul>\n<li>SASS/SCSSを使う</li>\n<li>Styled Componentsを使う</li>\n<li>Glamorとglamorousを使う</li>\n<li>Emotionを使う</li>\n<li>PostCSSを使う</li>\n<li><a href=\"#gatsby-plugin-typography\">Typography.js(文章のスタイルを設定するライブラリ)を使う</a></li>\n</ul>\n<p><strong><a href=\"#%E5%A4%96%E9%83%A8%E9%80%A3%E6%90%BA%E7%B3%BB\">外部連携系</a></strong></p>\n<ul>\n<li>Mediumのデータを取得する</li>\n<li>WordPressのデータを取得する</li>\n<li>contentfulのデータを取得する</li>\n<li><a href=\"#gatsby-source-esa\">esa.ioのデータを取得する</a></li>\n</ul>\n<h2 id=\"プラグインの使い方\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグインの使い方</h2>\n<p><small>※知ってる人は読み飛ばしてください。</small></p>\n<ul>\n<li>プラグインはnpmパッケージで公開されているのでnpmインストールする</li>\n<li><code class=\"language-text\">gatsby-config.js</code>のpluginsに定義を追加する</li>\n<li>オプションも指定できます。下記のようにします。</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// オプションなしで指定する場合は下記のようにプラグイン名を文字列で指定しましょう。</span>\n    <span class=\"token string\">\"gatsby-plugin-react-helmet\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// オプションありの場合は、オブジェクトで指定します。</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// オプションはさらにオブジェクトで指定します。</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/data/`</span></span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// プラグイン自体を拡張するプラグインを指定できます。</span>\n        <span class=\"token comment\">// その場合はオプションのpluginsにプラグインを定義しましょう。</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-smartypants`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-plugin-offline\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// 下記のように空オプションの場合は、プラグイン名を文字列で指定した場合と同じです。</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>※ 詳細は前回の記事<a href=\"../20/#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\">Gatsbyプラグインの使い方･作り方･公開方法</a>を参照してください。</p>\n<p><br><hr></p>\n<h2 id=\"マークダウン系\"><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>マークダウン系</h2>\n<p>ここで紹介するプラグインは<a href=\"gatsby-transformer-remark\">gatsby-transformer-remark</a>の拡張です。<br>\nそのためプラグインを使う時は、<code class=\"language-text\">gatsby-config.js</code>ではgatsby-transformer-remarkのオプションとして定義します。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">            classPrefix<span class=\"token punctuation\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            inlineCodeMarker<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            aliases<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            showLineNumbers<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            noInlineHighlight<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-prismjs\"><a href=\"#gatsby-remark-prismjs\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-prismjs\">gatsby-remark-prismjs</a></h3>\n<p><strong>マークダウンのコードブロックでシンタックスハイライトできるようにする</strong></p>\n<ul>\n<li><a href=\"https://prismjs.com/\">Prism.js</a>を使ってシンタックスハイライトします。他にも行数表示や指定行強調といった機能が使えます。</li>\n<li>Gatsbyで技術系ブログを作るなら、このプラグインが一番重要でしょう。使い方の詳細も含めてご紹介します。</li>\n</ul>\n<h4 id=\"設定\"><a href=\"#%E8%A8%AD%E5%AE%9A\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p><code class=\"language-text\">gatsby-config.js</code>で下記のように定義します。\nオプションが複数ありあますが重要なのは<code class=\"language-text\">showLineNumbers</code>だけです。<code class=\"language-text\">true</code>だとコードブロックの行数表示機能が使えるようになります。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n          options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            classPrefix<span class=\"token punctuation\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n            inlineCodeMarker<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            aliases<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">            showLineNumbers<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n</span>            noInlineHighlight<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<br>\n<p>若干めんどくさいですが、<code class=\"language-text\">gatsby-config.js</code>以外にもやることがあります。<br>\n<code class=\"language-text\">gatsby-browser.js</code>でPrismJSのテーマを読み込みます。<br>\n<code class=\"language-text\">gatsby-browser.js</code>は、なければプロジェクトのルートフォルダ直下に作成してください。</p>\n<div class=\"gatsby-code-title\">gatsby-browser.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"prismjs/themes/prism-solarizedlight.css\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n行数を表示するには、専用のCSSを読み込みます。<br>\n<div class=\"gatsby-code-title\">src/components/layout.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">'prismjs/plugins/line-numbers/prism-line-numbers.css'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>指定行を強調表示させるにはCSSを定義してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.gatsby-highlight-code-line</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #feb<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-right</span><span class=\"token punctuation\">:</span> -1em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-left</span><span class=\"token punctuation\">:</span> -1em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-right</span><span class=\"token punctuation\">:</span> 1em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-left</span><span class=\"token punctuation\">:</span> 0.75em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-left</span><span class=\"token punctuation\">:</span> 0.25em solid #f99<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.gatsby-highlight</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #fdf6e3<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 0.3em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0.5em 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 1em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.gatsby-highlight pre[class*=\"language-\"]</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> transparent<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> initial<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">float</span><span class=\"token punctuation\">:</span> left<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 1 */</span>\n  <span class=\"token property\">min-width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 2 */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.gatsby-highlight pre[class*=\"language-\"].line-numbers</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">padding-left</span><span class=\"token punctuation\">:</span> 2.8em<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 3 */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h4 id=\"使い方\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>シンタックスハイライトだけなら下記のように記述します。</p>\n<ul>\n<li>記述方法</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>行数表示や指定行強調を使う場合コードブロックの1行目(```の部分)にそれらの情報を記載します。以降に詳細を示します。</p>\n<h5 id=\"行数表示する場合\"><a href=\"#%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>行数表示する場合</h5>\n<ul>\n<li>記述方法</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript{numberLines: true}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h5 id=\"行数表示する場合（開始行数指定あり）\"><a href=\"#%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88%EF%BC%88%E9%96%8B%E5%A7%8B%E8%A1%8C%E6%95%B0%E6%8C%87%E5%AE%9A%E3%81%82%E3%82%8A%EF%BC%89\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>行数表示する場合（開始行数指定あり）</h5>\n<ul>\n<li>記述方法</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript{numberLines: 5}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 4\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h5 id=\"指定行数を強調する場合\"><a href=\"#%E6%8C%87%E5%AE%9A%E8%A1%8C%E6%95%B0%E3%82%92%E5%BC%B7%E8%AA%BF%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>指定行数を強調する場合</h5>\n<ul>\n<li>記述方法</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript{1,5-9}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// In your gatsby-config.js</span>\n</span>plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span>\n</span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h5 id=\"全部の組み合わせ（指定行数を強調かつ行数表示）\"><a href=\"#%E5%85%A8%E9%83%A8%E3%81%AE%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B%EF%BC%88%E6%8C%87%E5%AE%9A%E8%A1%8C%E6%95%B0%E3%82%92%E5%BC%B7%E8%AA%BF%E3%81%8B%E3%81%A4%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA%EF%BC%89\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>全部の組み合わせ（指定行数を強調かつ行数表示）</h5>\n<ul>\n<li>記述方法（2つの括弧を定義します）</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript{numberLines: 5}{1,5-9}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 4\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// In your gatsby-config.js</span>\n</span>plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span>\n</span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-code-titles\"><a href=\"#gatsby-remark-code-titles\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-code-titles/?=gatsby-remark-code-titles\">gatsby-remark-code-titles</a></h3>\n<p><strong>マークダウンでコードブロックにタイトルを表示できるようにする</strong></p>\n<h4 id=\"設定-1\"><a href=\"#%E8%A8%AD%E5%AE%9A-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<ul>\n<li>前述のgatsby-remark-prismjsとあわせて使います。</li>\n</ul>\n<p><code class=\"language-text\">gatsby-config.js</code>で<code class=\"language-text\">gatsby-transformer-remark</code>オプションとして一番最初に定義する必要があります。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-code-titles`</span></span><span class=\"token punctuation\">,</span>\n</span>          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              classPrefix<span class=\"token punctuation\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n              inlineCodeMarker<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n              aliases<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n              showLineNumbers<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\nさらにCSSでスタイルを追加しましょう。\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.gatsby-code-title</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> #f3e3b9<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #b38383<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> -0.65em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0.7rem 1.05rem<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 0.8em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">line-height</span><span class=\"token punctuation\">:</span> 0.2<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> 600<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 8px 8px 0 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> table<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"使い方-1\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<ul>\n<li>マークダウンでコードブロックの一行目に<code class=\"language-text\">:title=タイトル名</code>と記述します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript:title=gatsby-config.js\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h5 id=\"強調行指定との組み合わせ\"><a href=\"#%E5%BC%B7%E8%AA%BF%E8%A1%8C%E6%8C%87%E5%AE%9A%E3%81%A8%E3%81%AE%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>強調行指定との組み合わせ</h5>\n<ul>\n<li>強調行の後にタイトルを記述します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript{1, 5-9}:title=gatsby-config.js\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// In your gatsby-config.js</span>\n</span>plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span>\n</span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h5 id=\"行数表示との組み合わせ\"><a href=\"#%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA%E3%81%A8%E3%81%AE%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>行数表示との組み合わせ</h5>\n<p>なぜかできませんでした...プラグインの相性が悪いのかもしれません。</p>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-autolink-headers\"><a href=\"#gatsby-remark-autolink-headers\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers\">gatsby-remark-autolink-headers</a></h3>\n<p><strong>マークダウンで見出しにGitHub風ホバーリンクをつける</strong></p>\n<p>見出しホバー時に鎖アイコンリンクが表示されます。<br>\nリンクを指定して初期表示すると見出しまでスクロースしてくれるので便利です。</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 158px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 34.810126582278485%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABZElEQVQoz61Qu2oCURC9f5Iy/5C/iCmSKpoiv2GRbJEmWPpCCQHFFaIIGytBUFBXxUYRLKwEQcX3azM7OzdzL0SSkDIDw5yZM8w5jOj3++e73e6J85HTAABDSmkofDgcDETUM8dxdK84ItK867p6tt1uH7g+z2azS9HpdG7kr2DyhD3P+8HxYcki8q9YLBZvot1u+1hJsuIHzyCTyUAqlYKG3QB2D+VyGSqVCgwGA1B8oVAA0zQ1DofDEI/HoVaraQeTyeRFdLvdq+VyKdmpt1qtyHq3KJvNUjqdpuFwSKFQiGzbJt4nFiDeIxXH41Fz1WpV7brq4Hw+fxWtVsunmvV6Dfv9HsfjMSYSCbQsC0ejEbJDLJVK2Ov1kH+EuVwOi8UibjYbrNfrOJ1OMZ/PO+oGG3oRzWbzWv5TsKApgsHgWTKZvIvFYn7+hz8ajQYYByKRyKl+4e9z3j1V/uUt37hn7uITzw3VC1uyymcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"hoverlink\"\n        title=\"\"\n        src=\"/static/5faa8b23b378ebecd88c910e3cf11ae8/e48e9/hoverlink.png\"\n        srcset=\"/static/5faa8b23b378ebecd88c910e3cf11ae8/e48e9/hoverlink.png 158w\"\n        sizes=\"(max-width: 158px) 100vw, 158px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"設定-2\"><a href=\"#%E8%A8%AD%E5%AE%9A-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p>オプションでアイコン、アイコンの位置、アイコンのクラス名を指定できます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-autolink-headers`</span></span><span class=\"token punctuation\">,</span>\n            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">              offsetY<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`100`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              icon<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`&lt;svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">&lt;path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">&lt;/path>&lt;/svg>`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              className<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`custom-class`</span></span><span class=\"token punctuation\">,</span>\n</span>            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h4 id=\"補足\"><a href=\"#%E8%A3%9C%E8%B6%B3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>補足</h4>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers/#how-to-use\">公式サイト</a>には下記記述がありますが<br>\n起因となった<a href=\"https://github.com/gatsbyjs/gatsby/issues/5764\">issue 5764</a>はもう解決済みたいなので、定義順は特に気にする必要ななさそうです。</p>\n<blockquote>\n<p>gatsby-remark-prismjsと一緒に使う場合は必ず後に定義してください。</p>\n</blockquote>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-emojis\"><a href=\"#gatsby-remark-emojis\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-emojis\">gatsby-remark-emojis</a></h3>\n<p><strong>マークダウンで絵文字が使えるようにする</strong><br></p>\n<ul>\n<li>絵文字は画像ファイルではなく、base64形式で埋め込みます。全ての絵文字をドカッとインポートするわけではないのでデプロイ資産のサイズが最小限で済むのがメリットです。</li>\n</ul>\n<div class=\"gatsby-code-title\">HTMLファイル中に埋め込まれる絵文字</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n  <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>emoji-icon<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">data-icon</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>emoji-100<span class=\"token punctuation\">\"</span></span><span class=\"token style-attr language-css\"><span class=\"token attr-name\">\n  <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">display</span><span class=\"token punctuation\">:</span> inline<span class=\"token punctuation\">;</span> <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span> <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 1px<span class=\"token punctuation\">;</span> <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span> <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 5px<span class=\"token punctuation\">;</span> <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 25px</span><span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAMMUlEQVR4Ae3YhXtcx90o4HfOnhVZlpntkMN0nTK3TsrMzPdjZmZmvh8zM5SZuQ04zInMsiVb0kq7e2jmPnBRj11t5HLy/gcz88Px4PaQhwRf5Q6xJQFTViAc9OWV2FVyVc6tq5hEZXlj0zylxxNKzkr0hng7/nMdo6OkQIFkGXnbl95mwn1c1mFvyWWBqxpuq/k13Oz0bOeyeZ5Z8eKaR9a0ARtyPpy4aophfBhdywj7fOGt5ZySrTUziQPoAwyxteDJJc+teXnBUAQEvnML78BQn5M4ArCGUHPhAt9d8LKS9RGBMjCVeMsovz3KD3cZrvkeTFlG3vWFs47xkkfP85zIwxpuj/wWbocxtvV4c8l39NgcgTrQCZzIaNW8MHFRw3vxz7CBrM+mgu/o8uqK1WgCdwf2tbg2510ZWY9rKhb6rDKAvOfMXUS2yLo+T6/4/YK1NVo8OvI23L6D8Q6vKPixPiNIgfnAvowbW3y2zTv7/Ejk+ZE7AXqM1Dx7kVfXrIaMycivXMff30WB9Houx9bIbM3orxKQOL38F52Zv6DVZUfJq0q+q8eaBIj0a9IjCEd4Rs3r+4xAoJPxlgV+LOPoBM0mth/hrJrViVHYSTbPtprvqhhPCFT4pxbveQT9R+AswmHaEYl2ZPhJg1zAk6zcq2iVnNfnG7t8Y8lYIgBSxoEhjvdZt8DVJVcAKuyb4+f6HELTwVb2JM5uCBkjEFnX4qXznJ/IkQKfyXgnDgNEVo9y1QIhUOU0Ocky8twZedI839Fjb814AgAEbsH0LC9oeFpFDoH7Mn43cv8QDUDFeYHNgdkWx6DDpoZXxv8nchr+YIHPIQKsZ0vimQ2txGgiRMvLo5V5Ga+e51t67ImsOsXh+yVvW82JeR5bcw4EOhmf6PG+EUoAmOfKhq2J+cjoYwn72F1wcSJDzHhn4LPj9ACgYSxxViIgS6Sjlpcf9cB8P5fO8aI5XlZyWUNuKZqMzzZcu55Lj3NJTRtwZ+IfRjhpiZK1kTbKRO8+zm7xmooRpECn4V8jBywRyRMTgGw1F7+Bu7Ho9ORvMJh15ImHH+fba66p2BoRaDLm0GpYAyga/jJw/yKvi1yaECgDtxR8whLnsesoayIC7YywwJaKpyWgCdzUsA89S+SUkWlA1mJ3xsiyF5AZTMFQ4vUFL60ZBtyaeG+L4cArGiBmHFvkExez4TiPaVgP2N/i42MsWIoGCTCacW6kU7ARUODtQ0w7hUATKAGpoQgky8gbg6lJiZPYH5hI3Jj4+1V8KOM5JV8PKPCREToFz6w5JwIxcH2bDziFjBMtOhENApdiy/97qTXvi3ScQs3amrMBqeTuPj3LyBcMZoh+4teHmKrZ2OMtuHYdj57juRUtwHzNPyZO9LkmsjWixULgpoK7ndpFGROAAltqzk1AHZhM7A/UlriMsaNcWLELAWWXyf+gbxn5PxhYwkn8LsBP0p7m4Q2PS0ATONjjhnMY6XBBZCwgcGiI+51GyeMj50VkzCXUnA2oA/cPUzmFDmdHri4ZRhOYyum+jGQZ+cusXM1ZFY8omIBAt8W+TfTa7K3ZFAGR2xtudgqbyDs8pWZ7RJteoFfTAnQi/xboOoVFzqt5RgKqFjePM2sA+biVK3gMHhuBhKmGt+Y0NY9NTECgjFzb5SZLnE2G3QXnR4YDArOJuQYQWFzk5i6VJR5Odow1NZsAZeBzgb4B5MHK9djdsDshY7bFuxven9FUXIhRCBxrc7BNbYlIhidENkQE6hbtwASgCUxH5kaIluKynGf1CICy4loUBpCXVuYcdkxxQU07AJMN/4xOzSpsSrQhcKTFcaewQNbieZHNgE7GIoYgULY4PE7hFGa5tOJJCUiBk13umaUygPyIldnOExJXNgjAzAL7YJiAjWj9PxcwY4kNtGseMcMVkREIHMw4FDkPkGE4d2oFGxu2A7oZn8uZ3kg0gHyjlVngUZHdCYF+xtQBClgHDCcCoMgoLFGRJ17YsDEhIPLhjLsjFwJakXEEANhJXvHoWa6pyQHTDX87TNeA8mEP3FlcfJQralYF4N7EO9s0kCylSFQAsJV2j0sWeGZiDAJTkY+1WahpQSJEhgtqAGiz6SQvq9gbESgDdxzlY/PUBpTf6YHbxEsjl0cgJm7t8Y4dVE5tKNACgFlW1XxdlwsTOeBDLfbl7EIDyLBuA/9tHSfaFInRBfYW7K1YCzgWeMduFpAMKL/K4NYQsHmWqyPbINAJ3D3GCQBAAMAliceM089oAqnDI0teWzMMGYcTb9nPPZsZTxwGBOwo+b45ZhKdjLU1j49cCIEC1y/wnwskg5MfM7hxQuA5BefUANyZ8SkAyEiJk9iBVs0VGd/S52osBpqG51WMA8rAf+R8cjfVRm6b5UMZeyMTibGCl9VoEJAAaHBrxr9+gANIBif8oMG9iaHI78zyipq1gSrxW9fzE+gDXM1w4rs7fGvDDgQkJABkgH7GtRXfPcnnkOBRXN7le3u8ODGODAAQUWTcE/jTm/lDFB6g8EcG81Syhp3z/GefPZGQcW2Ln8d/WGIVYxW/1OdlDRuQIwASInotPt3nJ2f5HAqAS2lVnF3yhj6vj2xAQEDKmM74eOLvT/JB9KxAeJvBXMhI4jtn+N6aTYGY+KVZfhWzTmEX6xPPqHh5zSMiGxPtQCfj9sB7Kv5ugftRWuJcWn3GF1nTZ11D3mZrw2xgZoSTLebQt0LhEwazitV4S4fHRYYC70z8/P/gE0hO4ycZX2RjwZqK8chIRtliZojjh5hBtIx9hDHCHoZmqFE7c8LfDRb+4Rg7e3ysYBcWEz+c8RdYNDi/Q0DyFSK83PJ+hXaXR83ynw0bMybxzXinM+c81k5QonuQx7U4F/2aNW3ua3PfOo7NcU6i3Ml9aJw5+T9Z3iRDOZdE8oTAVIt5K7CLbX1297m4oVWz5ijbJkmJ+RaPztiZKBLjOBw5eJSZwI5EdZybRvngBm5C1xnIj1texVDDJWhD5AZMWcZljMyys2BLl2012w9zduBS7Im0IusTrRpQIyEBAhdBCxHQ0K954hy/gfc7A+FTljfBxobfmeWFWEh8W8Vb0QOAKwld1lVsX2RLwzkZD09cUnNpzeYGEQnBaaVAjQBIaLCAk4HhRBH55U/z50hWKP+I5T2bVmIDQotPRG4dpgcAZ5PPsLPi+XhazeNK1tdIlpIySpTI0EGT6GMxcDLQQQCkQA+TQ9ycMVFzuMdnEc7oAgygZihyMVoZ+07zN7+m4SUL/GJFjgCAGiXKQC8wHTja4giG8NkW8wX3d7i7y3Sg2EwEQIJEQkAaJT3ZmcmfbHkZDaaxYYGPTzFtia2kSF3TABrEQDdjMnBTxh2RW6a5bgOziAhokBATsSQhHXBayRdIfq/lXUkv8IEWWWDm72ks8WRmI+8Z5dkl3RY3N0wW3Bo4MMxioApU91HcR/LlJ/y25T2bdsVli7yx4Tew3ykM08bOPrFNt6Y4SQ+VZVzCeEZ7DfOzjGPoLGYOMYYFgMTqnSwiOnNCMpi7GeqwM3AIhRXaQ+sgOyq2VuwNzCVGKi7qsjMxhKGGLKNAnugOcxCrarY0yJka4a5hPrmGT2PeCoQpXzwl2xLbe+zpc2XF+P/u/ZgI7E70kWN9wwQkJAQAZHQxlMgTAiljGpOBD67mb3CTByjc4gvjUlqHuKhmU5eLFtmOsxMbcWHi/EiWEJGQAAkQfH4B6GacwGxiBE3G+0b4A9ziAcoLK7ObdoftfXb12HoDuxJXYWvkipqtEc3nP2AM1IEmsIATWIgcQxMYbzgYqCHQD8zkTGVMR4YTZeSmD3OnFQi/aXAvJU9s6rG54OLEoxJX1VzcsK06zZQXKNELdBIFmsi9gZOBMqPb4jgOtJgpuKumGmPD9dxUUEACyi95F4BnkWNPyTMbHlfyiJJNjaXUgQL9xFxgJnAw52hgMnEiUNzDW2boRaDwZZIbUGQ48S3zvLRmNQAiKvQxnzGZcTjjvsinulw/x5GlX+a7Sbt9+YVPG8wqxvBzc7y2YQIlqoy5wF2BT0c+vMjnxilzYkOzSET0FSq812C2ESLrSn6sZqLPO/vcntPP6QzTayhQ+ioSPuaBGWNLRdZl7pP0EX0VC7/gwS3zIPfQBTx0AQ9yD12AB7mHLsCD3EMX4EHufwJIOEs9kLQJngAAAABJRU5ErkJggg==<span class=\"token punctuation\">\"</span></span>\n</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li>(注意点）コードブロック中の記述も絵文字に変換しようとするので気をつけてください。</li>\n</ul>\n<h4 id=\"設定-3\"><a href=\"#%E8%A8%AD%E5%AE%9A-3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p>オプションで色々指定できます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-remark-emojis'</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token comment\">// falseにすると絵文字機能をオフにできます</span>\n</span><span class=\"gatsby-highlight-code-line\">              active <span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token comment\">// サイズは16, 24, 32, 64から選べます</span>\n</span><span class=\"gatsby-highlight-code-line\">              size   <span class=\"token punctuation\">:</span> <span class=\"token number\">64</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token comment\">// 独自クラスを追加できます</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token keyword\">class</span>  <span class=\"token punctuation\">:</span> <span class=\"token string\">'emoji-icon'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token comment\">// 独自スタイルを追加できます</span>\n</span><span class=\"gatsby-highlight-code-line\">              styles <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">                display      <span class=\"token punctuation\">:</span> <span class=\"token string\">'inline'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">                margin       <span class=\"token punctuation\">:</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">                <span class=\"token string\">'margin-top'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'1px'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">                position     <span class=\"token punctuation\">:</span> <span class=\"token string\">'relative'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">                top          <span class=\"token punctuation\">:</span> <span class=\"token string\">'5px'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">                width        <span class=\"token punctuation\">:</span> <span class=\"token string\">'25px'</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">}</span>\n</span>          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"使い方-2\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>マークダウンにて<code class=\"language-text\">:XXX:</code>のような形式で記述します。<br>\n:100: → <img null=\"\" data-icon=\"emoji-100\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAMMUlEQVR4Ae3YhXtcx90o4HfOnhVZlpntkMN0nTK3TsrMzPdjZmZmvh8zM5SZuQ04zInMsiVb0kq7e2jmPnBRj11t5HLy/gcz88Px4PaQhwRf5Q6xJQFTViAc9OWV2FVyVc6tq5hEZXlj0zylxxNKzkr0hng7/nMdo6OkQIFkGXnbl95mwn1c1mFvyWWBqxpuq/k13Oz0bOeyeZ5Z8eKaR9a0ARtyPpy4aophfBhdywj7fOGt5ZySrTUziQPoAwyxteDJJc+teXnBUAQEvnML78BQn5M4ArCGUHPhAt9d8LKS9RGBMjCVeMsovz3KD3cZrvkeTFlG3vWFs47xkkfP85zIwxpuj/wWbocxtvV4c8l39NgcgTrQCZzIaNW8MHFRw3vxz7CBrM+mgu/o8uqK1WgCdwf2tbg2510ZWY9rKhb6rDKAvOfMXUS2yLo+T6/4/YK1NVo8OvI23L6D8Q6vKPixPiNIgfnAvowbW3y2zTv7/Ejk+ZE7AXqM1Dx7kVfXrIaMycivXMff30WB9Houx9bIbM3orxKQOL38F52Zv6DVZUfJq0q+q8eaBIj0a9IjCEd4Rs3r+4xAoJPxlgV+LOPoBM0mth/hrJrViVHYSTbPtprvqhhPCFT4pxbveQT9R+AswmHaEYl2ZPhJg1zAk6zcq2iVnNfnG7t8Y8lYIgBSxoEhjvdZt8DVJVcAKuyb4+f6HELTwVb2JM5uCBkjEFnX4qXznJ/IkQKfyXgnDgNEVo9y1QIhUOU0Ocky8twZedI839Fjb814AgAEbsH0LC9oeFpFDoH7Mn43cv8QDUDFeYHNgdkWx6DDpoZXxv8nchr+YIHPIQKsZ0vimQ2txGgiRMvLo5V5Ga+e51t67ImsOsXh+yVvW82JeR5bcw4EOhmf6PG+EUoAmOfKhq2J+cjoYwn72F1wcSJDzHhn4LPj9ACgYSxxViIgS6Sjlpcf9cB8P5fO8aI5XlZyWUNuKZqMzzZcu55Lj3NJTRtwZ+IfRjhpiZK1kTbKRO8+zm7xmooRpECn4V8jBywRyRMTgGw1F7+Bu7Ho9ORvMJh15ImHH+fba66p2BoRaDLm0GpYAyga/jJw/yKvi1yaECgDtxR8whLnsesoayIC7YywwJaKpyWgCdzUsA89S+SUkWlA1mJ3xsiyF5AZTMFQ4vUFL60ZBtyaeG+L4cArGiBmHFvkExez4TiPaVgP2N/i42MsWIoGCTCacW6kU7ARUODtQ0w7hUATKAGpoQgky8gbg6lJiZPYH5hI3Jj4+1V8KOM5JV8PKPCREToFz6w5JwIxcH2bDziFjBMtOhENApdiy/97qTXvi3ScQs3amrMBqeTuPj3LyBcMZoh+4teHmKrZ2OMtuHYdj57juRUtwHzNPyZO9LkmsjWixULgpoK7ndpFGROAAltqzk1AHZhM7A/UlriMsaNcWLELAWWXyf+gbxn5PxhYwkn8LsBP0p7m4Q2PS0ATONjjhnMY6XBBZCwgcGiI+51GyeMj50VkzCXUnA2oA/cPUzmFDmdHri4ZRhOYyum+jGQZ+cusXM1ZFY8omIBAt8W+TfTa7K3ZFAGR2xtudgqbyDs8pWZ7RJteoFfTAnQi/xboOoVFzqt5RgKqFjePM2sA+biVK3gMHhuBhKmGt+Y0NY9NTECgjFzb5SZLnE2G3QXnR4YDArOJuQYQWFzk5i6VJR5Odow1NZsAZeBzgb4B5MHK9djdsDshY7bFuxven9FUXIhRCBxrc7BNbYlIhidENkQE6hbtwASgCUxH5kaIluKynGf1CICy4loUBpCXVuYcdkxxQU07AJMN/4xOzSpsSrQhcKTFcaewQNbieZHNgE7GIoYgULY4PE7hFGa5tOJJCUiBk13umaUygPyIldnOExJXNgjAzAL7YJiAjWj9PxcwY4kNtGseMcMVkREIHMw4FDkPkGE4d2oFGxu2A7oZn8uZ3kg0gHyjlVngUZHdCYF+xtQBClgHDCcCoMgoLFGRJ17YsDEhIPLhjLsjFwJakXEEANhJXvHoWa6pyQHTDX87TNeA8mEP3FlcfJQralYF4N7EO9s0kCylSFQAsJV2j0sWeGZiDAJTkY+1WahpQSJEhgtqAGiz6SQvq9gbESgDdxzlY/PUBpTf6YHbxEsjl0cgJm7t8Y4dVE5tKNACgFlW1XxdlwsTOeBDLfbl7EIDyLBuA/9tHSfaFInRBfYW7K1YCzgWeMduFpAMKL/K4NYQsHmWqyPbINAJ3D3GCQBAAMAliceM089oAqnDI0teWzMMGYcTb9nPPZsZTxwGBOwo+b45ZhKdjLU1j49cCIEC1y/wnwskg5MfM7hxQuA5BefUANyZ8SkAyEiJk9iBVs0VGd/S52osBpqG51WMA8rAf+R8cjfVRm6b5UMZeyMTibGCl9VoEJAAaHBrxr9+gANIBif8oMG9iaHI78zyipq1gSrxW9fzE+gDXM1w4rs7fGvDDgQkJABkgH7GtRXfPcnnkOBRXN7le3u8ODGODAAQUWTcE/jTm/lDFB6g8EcG81Syhp3z/GefPZGQcW2Ln8d/WGIVYxW/1OdlDRuQIwASInotPt3nJ2f5HAqAS2lVnF3yhj6vj2xAQEDKmM74eOLvT/JB9KxAeJvBXMhI4jtn+N6aTYGY+KVZfhWzTmEX6xPPqHh5zSMiGxPtQCfj9sB7Kv5ugftRWuJcWn3GF1nTZ11D3mZrw2xgZoSTLebQt0LhEwazitV4S4fHRYYC70z8/P/gE0hO4ycZX2RjwZqK8chIRtliZojjh5hBtIx9hDHCHoZmqFE7c8LfDRb+4Rg7e3ysYBcWEz+c8RdYNDi/Q0DyFSK83PJ+hXaXR83ynw0bMybxzXinM+c81k5QonuQx7U4F/2aNW3ua3PfOo7NcU6i3Ml9aJw5+T9Z3iRDOZdE8oTAVIt5K7CLbX1297m4oVWz5ijbJkmJ+RaPztiZKBLjOBw5eJSZwI5EdZybRvngBm5C1xnIj1texVDDJWhD5AZMWcZljMyys2BLl2012w9zduBS7Im0IusTrRpQIyEBAhdBCxHQ0K954hy/gfc7A+FTljfBxobfmeWFWEh8W8Vb0QOAKwld1lVsX2RLwzkZD09cUnNpzeYGEQnBaaVAjQBIaLCAk4HhRBH55U/z50hWKP+I5T2bVmIDQotPRG4dpgcAZ5PPsLPi+XhazeNK1tdIlpIySpTI0EGT6GMxcDLQQQCkQA+TQ9ycMVFzuMdnEc7oAgygZihyMVoZ+07zN7+m4SUL/GJFjgCAGiXKQC8wHTja4giG8NkW8wX3d7i7y3Sg2EwEQIJEQkAaJT3ZmcmfbHkZDaaxYYGPTzFtia2kSF3TABrEQDdjMnBTxh2RW6a5bgOziAhokBATsSQhHXBayRdIfq/lXUkv8IEWWWDm72ks8WRmI+8Z5dkl3RY3N0wW3Bo4MMxioApU91HcR/LlJ/y25T2bdsVli7yx4Tew3ykM08bOPrFNt6Y4SQ+VZVzCeEZ7DfOzjGPoLGYOMYYFgMTqnSwiOnNCMpi7GeqwM3AIhRXaQ+sgOyq2VuwNzCVGKi7qsjMxhKGGLKNAnugOcxCrarY0yJka4a5hPrmGT2PeCoQpXzwl2xLbe+zpc2XF+P/u/ZgI7E70kWN9wwQkJAQAZHQxlMgTAiljGpOBD67mb3CTByjc4gvjUlqHuKhmU5eLFtmOsxMbcWHi/EiWEJGQAAkQfH4B6GacwGxiBE3G+0b4A9ziAcoLK7ObdoftfXb12HoDuxJXYWvkipqtEc3nP2AM1IEmsIATWIgcQxMYbzgYqCHQD8zkTGVMR4YTZeSmD3OnFQi/aXAvJU9s6rG54OLEoxJX1VzcsK06zZQXKNELdBIFmsi9gZOBMqPb4jgOtJgpuKumGmPD9dxUUEACyi95F4BnkWNPyTMbHlfyiJJNjaXUgQL9xFxgJnAw52hgMnEiUNzDW2boRaDwZZIbUGQ48S3zvLRmNQAiKvQxnzGZcTjjvsinulw/x5GlX+a7Sbt9+YVPG8wqxvBzc7y2YQIlqoy5wF2BT0c+vMjnxilzYkOzSET0FSq812C2ESLrSn6sZqLPO/vcntPP6QzTayhQ+ioSPuaBGWNLRdZl7pP0EX0VC7/gwS3zIPfQBTx0AQ9yD12AB7mHLsCD3EMX4EHufwJIOEs9kLQJngAAAABJRU5ErkJggg==\"></p>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-graphviz\"><a href=\"#gatsby-remark-graphviz\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-graphviz\">gatsby-remark-graphviz</a></h3>\n<p><strong>マークダウンで<a href=\"https://www.graphviz.org/\">Graphviz</a>(dot言語で記述されたグラフ構造を任意のフォーマットの画像ファイルへ出力するツール)を使えるようにする</strong><br></p>\n<ul>\n<li>内部的には<a href=\"https://github.com/mdaines/viz.js/\">viz.js</a>でコードブロックをSVGファイルに変換しています。</li>\n</ul>\n<h4 id=\"設定-4\"><a href=\"#%E8%A8%AD%E5%AE%9A-4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p><code class=\"language-text\">gatsby-remark-prismjs</code>のようなコードブロックを編集するプラグインより先に定義してください。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-transformer-remark'</span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">'gatsby-remark-graphviz'</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h4 id=\"使い方-3\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>マークダウンで下記のように言語を<code class=\"language-text\">dot</code>としてコードブロックを記述します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```dot\ndigraph graphname {\n  a -&gt; b;\n  b -&gt; c;\n  a -&gt; c;\n}\n```</code></pre></div>\n<p>すると下記のように表示されます。</p>\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.40.1 (20161225.0304)\n -->\n<!-- Title: graphname Pages: 1 -->\n<svg width=\"89pt\" height=\"188pt\"\n viewBox=\"0.00 0.00 89.00 188.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 184)\">\n<title>graphname</title>\n<polygon fill=\"#ffffff\" stroke=\"transparent\" points=\"-4,4 -4,-184 85,-184 85,4 -4,4\"/>\n<!-- a -->\n<g id=\"node1\" class=\"node\">\n<title>a</title>\n<ellipse fill=\"none\" stroke=\"#000000\" cx=\"54\" cy=\"-162\" rx=\"27\" ry=\"18\"/>\n<text text-anchor=\"middle\" x=\"54\" y=\"-157.8\" font-family=\"Times,serif\" font-size=\"14.00\" fill=\"#000000\">a</text>\n</g>\n<!-- b -->\n<g id=\"node2\" class=\"node\">\n<title>b</title>\n<ellipse fill=\"none\" stroke=\"#000000\" cx=\"27\" cy=\"-90\" rx=\"27\" ry=\"18\"/>\n<text text-anchor=\"middle\" x=\"27\" y=\"-85.8\" font-family=\"Times,serif\" font-size=\"14.00\" fill=\"#000000\">b</text>\n</g>\n<!-- a&#45;&gt;b -->\n<g id=\"edge1\" class=\"edge\">\n<title>a&#45;&gt;b</title>\n<path fill=\"none\" stroke=\"#000000\" d=\"M47.3258,-144.2022C44.2524,-136.0064 40.5384,-126.1024 37.1305,-117.0145\"/>\n<polygon fill=\"#000000\" stroke=\"#000000\" points=\"40.3858,-115.7274 33.5974,-107.593 33.8315,-118.1853 40.3858,-115.7274\"/>\n</g>\n<!-- c -->\n<g id=\"node3\" class=\"node\">\n<title>c</title>\n<ellipse fill=\"none\" stroke=\"#000000\" cx=\"54\" cy=\"-18\" rx=\"27\" ry=\"18\"/>\n<text text-anchor=\"middle\" x=\"54\" y=\"-13.8\" font-family=\"Times,serif\" font-size=\"14.00\" fill=\"#000000\">c</text>\n</g>\n<!-- a&#45;&gt;c -->\n<g id=\"edge3\" class=\"edge\">\n<title>a&#45;&gt;c</title>\n<path fill=\"none\" stroke=\"#000000\" d=\"M57.7474,-144.0931C59.7466,-133.6241 61.9966,-120.1241 63,-108 64.3197,-92.0545 64.3197,-87.9455 63,-72 62.2945,-63.4753 60.9727,-54.2703 59.5551,-45.917\"/>\n<polygon fill=\"#000000\" stroke=\"#000000\" points=\"62.9689,-45.1258 57.7474,-35.9069 56.0803,-46.3698 62.9689,-45.1258\"/>\n</g>\n<!-- b&#45;&gt;c -->\n<g id=\"edge2\" class=\"edge\">\n<title>b&#45;&gt;c</title>\n<path fill=\"none\" stroke=\"#000000\" d=\"M33.6742,-72.2022C36.7476,-64.0064 40.4616,-54.1024 43.8695,-45.0145\"/>\n<polygon fill=\"#000000\" stroke=\"#000000\" points=\"47.1685,-46.1853 47.4026,-35.593 40.6142,-43.7274 47.1685,-46.1853\"/>\n</g>\n</g>\n</svg>\n\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-katex\"><a href=\"#gatsby-remark-katex\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-katex\">gatsby-remark-katex</a></h3>\n<p><strong>マークダウンで数式が使えるようにする</strong><br></p>\n<h4 id=\"設定-5\"><a href=\"#%E8%A8%AD%E5%AE%9A-5\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-transformer-remark'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-katex`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<br>\n追加でCSSをテンプレートで読み込んでください。\n<div class=\"gatsby-code-title\">テンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token string\">'katex/dist/katex.min.css'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4 id=\"使い方-4\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>方程式を '$'で囲みます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$\nf(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi\n$</code></pre></div>\n<p>すると下記のように表示されます。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant=\"normal\">∞</mi></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mover accent=\"true\"><mi>f</mi><mo>^</mo></mover><mo>(</mo><mi>ξ</mi><mo>)</mo><mspace width=\"0.16667em\"></mspace><msup><mi>e</mi><mrow><mn>2</mn><mi>π</mi><mi>i</mi><mi>ξ</mi><mi>x</mi></mrow></msup><mspace width=\"0.16667em\"></mspace><mi>d</mi><mi>ξ</mi></mrow><annotation encoding=\"application/x-tex\">f(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.9578799999999998em;\"></span><span class=\"strut bottom\" style=\"height:1.3720309999999998em;vertical-align:-0.41415100000000005em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathit\">x</span><span class=\"mclose\">)</span><span class=\"mord rule\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mord rule\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8592920000000001em;\"><span style=\"top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">∞</span></span></span></span><span style=\"top:-3.2579000000000002em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.41415100000000005em;\"></span></span></span></span></span><span class=\"mord rule\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9578799999999998em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathit\" style=\"margin-right:0.10764em;\">f</span></span><span style=\"top:-3.26344em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.08332999999999999em;\">^</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathit\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"mclose\">)</span><span class=\"mspace thinspace\"></span><span class=\"mord\"><span class=\"mord mathit\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathit mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathit mtight\">i</span><span class=\"mord mathit mtight\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"mord mathit mtight\">x</span></span></span></span></span></span></span></span></span><span class=\"mspace thinspace\"></span><span class=\"mord mathit\">d</span><span class=\"mord mathit\" style=\"margin-right:0.04601em;\">ξ</span></span></span></span></p>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-embed-snippet\"><a href=\"#gatsby-remark-embed-snippet\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-embed-snippet\">gatsby-remark-embed-snippet</a></h3>\n<p><strong>マークダウンでJavaSriptファイルなどを読み込んでコードブロックに埋め込む</strong><br></p>\n<h4 id=\"設定-6\"><a href=\"#%E8%A8%AD%E5%AE%9A-6\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p><code class=\"language-text\">directory</code>は読み込み対象資産のフォルダを指定します。<br>\n必ず<code class=\"language-text\">gatsby-remark-prismjs</code>より前に指定してください。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">            resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-remark-embed-snippet\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">              classPrefix<span class=\"token punctuation\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              directory<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/examples/`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>          <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">            resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n</span>            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              classPrefix<span class=\"token punctuation\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n              inlineCodeMarker<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n              aliases<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n              showLineNumbers<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<h4 id=\"使い方-5\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-5\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>マークダウンで`embed:設定で指定したディレクトリからの相対パス`のように指定します。\n指定行を強調したい場合は、読み込み対象ファイルにコメントで記述します。</p>\n<h4 id=\"javascriptファイルの場合\"><a href=\"#javascript%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JavaScriptファイルの場合</h4>\n<h5 id=\"読み込み対象ファイル\"><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>読み込み対象ファイル</h5>\n<div class=\"gatsby-code-title\">examples/2018/10/21/sample.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span>\n\n<span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"Brian\"</span>\n\n<span class=\"token comment\">// highlight-range{2-3}</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hello<span class=\"token punctuation\">,</span> $<span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h5 id=\"マークダウン記述\"><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E8%A8%98%E8%BF%B0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>マークダウン記述</h5>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`embed:2018/10/21/sample.js`</code></pre></div>\n<h5 id=\"表示結果\"><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表示結果</h5>\n<p><div class=\"gatsby-highlight\">\n        <pre class=\"language-jsx\"><code><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\r\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span>\r\n\r\n<span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"Brian\"</span>\r\n\r\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\r\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, $</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\r\n</span><span class=\"gatsby-highlight-code-line\">  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\r\n</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n        </div></p>\n<h4 id=\"cssファイルの場合\"><a href=\"#css%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSSファイルの場合</h4>\n<h5 id=\"読み込み対象ファイル-1\"><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>読み込み対象ファイル</h5>\n<div class=\"gatsby-code-title\">examples/2018/10/21/sample.css</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">html <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* highlight-range{1-2} */</span>\n  height<span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token operator\">%</span><span class=\"token punctuation\">;</span>\n  width<span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token operator\">%</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">*</span> <span class=\"token punctuation\">{</span>\n  box<span class=\"token operator\">-</span>sizing<span class=\"token punctuation\">:</span> border<span class=\"token operator\">-</span>box<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* highlight-line */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h5 id=\"マークダウン記述-1\"><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E8%A8%98%E8%BF%B0-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>マークダウン記述</h5>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`embed:2018/10/21/sample.css`</code></pre></div>\n<h5 id=\"表示結果-1\"><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表示結果</h5>\n<p><div class=\"gatsby-highlight\">\n        <pre class=\"language-css\"><code><span class=\"token selector\">html</span> <span class=\"token punctuation\">{</span>\r\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\r\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\r\n</span><span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token selector\">*</span> <span class=\"token punctuation\">{</span>\r\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token property\">box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span>\r\n</span><span class=\"token punctuation\">}</span></code></pre>\n        </div></p>\n<h4 id=\"htmlファイルの場合\"><a href=\"#html%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTMLファイルの場合</h4>\n<h5 id=\"読み込み対象ファイル-2\"><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>読み込み対象ファイル</h5>\n<div class=\"gatsby-code-title\">examples/2018/10/21/sample.html</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>highlight me<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span> <span class=\"token comment\">&lt;!-- highlight-line --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token comment\">&lt;!-- highlight-next-line --></span>\n      And me\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`embed:2018/10/21/sample.html`</code></pre></div>\n<h5 id=\"表示結果-2\"><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表示結果</h5>\n<p><div class=\"gatsby-highlight\">\n        <pre class=\"language-html\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>highlight me<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\r\n</span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"gatsby-highlight-code-line\">      And me\r\n</span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre>\n        </div></p>\n<h4 id=\"yamlの場合\"><a href=\"#yaml%E3%81%AE%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>YAMLの場合</h4>\n<h5 id=\"読み込み対象ファイル-3\"><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB-3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>読み込み対象ファイル</h5>\n<div class=\"gatsby-code-title\">examples/2018/10/21/sample.yaml</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">foo</span><span class=\"token punctuation\">:</span> \"highlighted\" <span class=\"token comment\"># highlight-line</span>\n<span class=\"token key atrule\">bar</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"not highlighted\"</span>\n<span class=\"token comment\"># highlight-range{1-2}</span>\n<span class=\"token key atrule\">baz</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"highlighted\"</span>\n<span class=\"token key atrule\">quz</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"highlighted\"</span></code></pre></div>\n<h5 id=\"マークダウン記述-2\"><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E8%A8%98%E8%BF%B0-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>マークダウン記述</h5>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`embed:2018/10/21/sample.yaml`</code></pre></div>\n<h5 id=\"表示結果-3\"><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C-3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表示結果</h5>\n<p><div class=\"gatsby-highlight\">\n        <pre class=\"language-yaml\"><code><span class=\"token key atrule\">foo</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"highlighted\"</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token key atrule\">bar</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"not highlighted\"</span>\r\n</span><span class=\"token key atrule\">baz</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"highlighted\"</span>\r\n<span class=\"gatsby-highlight-code-line\"><span class=\"token key atrule\">quz</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"highlighted\"</span>\n</span></code></pre>\n        </div></p>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-copy-linked-files\"><a href=\"#gatsby-remark-copy-linked-files\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-copy-linked-files\">gatsby-remark-copy-linked-files</a></h3>\n<p><strong>マークダウンのリンクや画像で使われているPDFや動画などをビルド時にpublicフォルダにコピーする</strong></p>\n<h4 id=\"設定-7\"><a href=\"#%E8%A8%AD%E5%AE%9A-7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"gatsby-remark-copy-linked-files\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\nコピー先をpublic以外にしたい場合はオプションを指定します。\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-remark-copy-linked-files'</span><span class=\"token punctuation\">,</span>\n            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">              destinationDir<span class=\"token punctuation\">:</span> <span class=\"token string\">'path/to/dir'</span><span class=\"token punctuation\">,</span>\n</span>            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\n<p>コピー対象外ファイル指定することもできます。その場合は<code class=\"language-text\">ignoreFileExtensions</code>を設定します。\nこのプロパティは<code class=\"language-text\">[&quot;png&quot;, &quot;jpg&quot;, &quot;jpeg&quot;, &quot;bmp&quot;, &quot;tiff&quot;]</code>がデフォルトです。\nというのも、これらのファイルはgatsby-remark-imagesを使って自動的にレスポンシブな画像が生成されることを前提にしているからです。\nもしgatsby-remark-imagesを使わずにpublicファイルへの単純コピーにしたい場合は下記のようにします。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-remark-copy-linked-files\"</span><span class=\"token punctuation\">,</span>\n            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">              ignoreFileExtensions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span>            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-images\"><a href=\"#gatsby-remark-images\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-images\">gatsby-remark-images</a></h3>\n<p><strong>マークダウンで画像をスマートに表示できるようにする</strong><br></p>\n<ul>\n<li>画像ロード後にレイアウトがガタっとずれないように、画像の大きさ分の空要素を確保しておく</li>\n<li>ブラウザ幅別に画像を生成し<code class=\"language-text\">img</code>タグの<code class=\"language-text\">srcset</code>属性と<code class=\"language-text\">sizes</code>属性を設定します</li>\n<li>画像を20px幅に小さくしたものを、画像ロード中にプレースホルダーとして表示します。これはMediumとFacebookで使われているテクニックです。</li>\n</ul>\n<h4 id=\"設定・使い方\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p><code class=\"language-text\">gatsby-remark-images</code>、<code class=\"language-text\">gatsby-plugin-sharp</code>とあわせて使いましょう。\nオプションに指定したmaxWidthにあわせて、プラグインがいい感じの色々サイズの画像を複数生成してくれます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-sharp`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-images`</span></span><span class=\"token punctuation\">,</span>\n            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">              maxWidth<span class=\"token punctuation\">:</span> <span class=\"token number\">590</span><span class=\"token punctuation\">,</span>\n</span>            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-responsive-iframe\"><a href=\"#gatsby-remark-responsive-iframe\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-responsive-iframe\">gatsby-remark-responsive-iframe</a></h3>\n<p><strong>マークダウンでiframeタグを縦横比固定でレスポンシブにする</strong></p>\n<h4 id=\"使い方-6\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-6\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p><code class=\"language-text\">gatsby-config.js</code>の設定は特に変わったところはありません。<br>\nただし縦横比を明確にするためマークダウン中のiframeにはwidthとheigth属性を必ず指定してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\">This is a beautiful iframe:\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span> <span class=\"token attr-name\">url</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.example.com/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>600<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>400<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>iframe</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-embed-youtube\"><a href=\"#gatsby-remark-embed-youtube\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-embed-youtube\">gatsby-remark-embed-youtube</a></h3>\n<p><strong>マークダウンでYoutubeを埋め込めるようにする</strong></p>\n<h4 id=\"設定-8\"><a href=\"#%E8%A8%AD%E5%AE%9A-8\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p>オプションに高さと幅を指定できます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-transformer-remark\"</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">            resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-remark-embed-youtube\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">              width<span class=\"token punctuation\">:</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              height<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span>\n</span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span>\n</span>        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\n<p>一注意があって、<code class=\"language-text\">gatsby-remark-responsive-iframe</code>をあわせて使う場合は必ずその前に定義してください。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"gatsby-remark-embed-youtube\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"gatsby-remark-responsive-iframe\"</span>\n</span>        <span class=\"token punctuation\">]</span></code></pre></div>\n<h4 id=\"使い方-7\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>マークダウンで下記のように記載します。URLの最後(embed/2Xc9gXyf2G4)は動画のIDです。</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Look at this Video:</span>\n\n<span class=\"token code keyword\">`youtube:https://www.youtube.com/embed/2Xc9gXyf2G4`</span></code></pre></div>\n<br>\n* 表示結果\n<p><div><iframe src=\"https://www.youtube.com/embed/2Xc9gXyf2G4\" width=\"undefined\" height=\"undefined\"></iframe></div></p>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-twitter\"><a href=\"#gatsby-plugin-twitter\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-twitter\">gatsby-plugin-twitter</a></h3>\n<p><strong>マークダウンでTwitterの埋め込み用スクリプトを記述できるようにする</strong><br></p>\n<p>こちらのプラグインもう少しスマートになってほしいです（ちょっとめんどくさいです）。<br>\n使い方は過去記事<a href=\"2018/10/07/#twitter\">GatsbyでYouTubeとTwitter埋め込み | Takumon Blog</a>を参照してください。</p>\n<h4 id=\"使い方-8\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-8\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>マークダウンには下記のように記載します。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>blockquote</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>twitter-tweet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ja<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ja<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ltr<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>最近忙しかったのでアレですが、ブログ更新しました。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>Reactで構造化データマークアップ（JSON-LD対応） <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://t.co/7V49VqH9WI<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>https://t.co/7V49VqH9WI<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://twitter.com/inouetakumon?ref_src=twsrc%5Etfw<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>@inouetakumon<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>さんから<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token entity\" title=\"&mdash;\">&amp;mdash;</span> takumontakumon (@inouetakumon) <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://twitter.com/inouetakumon/status/1046062825037344770?ref_src=twsrc%5Etfw<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>2018年9月29日<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>blockquote</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"ja\" dir=\"ltr\">最近忙しかったのでアレですが、ブログ更新しました。<br><br>Reactで構造化データマークアップ（JSON-LD対応） <a href=\"https://t.co/7V49VqH9WI\">https://t.co/7V49VqH9WI</a> <a href=\"https://twitter.com/inouetakumon?ref_src=twsrc%5Etfw\">@inouetakumon</a>さんから</p>&mdash; takumontakumon (@inouetakumon) <a href=\"https://twitter.com/inouetakumon/status/1046062825037344770?ref_src=twsrc%5Etfw\">2018年9月29日</a></blockquote>\n<p><br><hr></p>\n<h2 id=\"seo系\"><a href=\"#seo%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SEO系</h2>\n<h3 id=\"gatsby-plugin-react-helmet\"><a href=\"#gatsby-plugin-react-helmet\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet\">gatsby-plugin-react-helmet</a></h3>\n<p><strong>React HelmetをGatsbyビルド時使えるようにする</strong><br></p>\n<ul>\n<li>実用例は<a href=\"../../09/29\">Reactで構造化データマークアップ（JSON-LD対応)</a>を参照してください。</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-offline\"><a href=\"#gatsby-plugin-offline\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-offline\">gatsby-plugin-offline</a></h3>\n<p><strong>低速ネットワーク環境やオフライン環境でもWebサイトをスムーズに見れるようにする</strong><br></p>\n<ul>\n<li>ビルド時にサービスワーカーを生成してくれます。</li>\n<li><code class=\"language-text\">gatsby-plugin-manifest</code>との併用推奨です。</li>\n<li>\n<p>このプラグインは<a href=\"https://developers.google.com/web/tools/workbox/modules/workbox-build\">Workbox</a>の設定を従っており、必要に応じて<code class=\"language-text\">gatsby-config.js</code>で上書くという感じです。Workboxは宣言的な記述だけで最適なServiceWorkerのコードが生成できるライブラリで、下記にわかりやすく書かれていました。</p>\n<ul>\n<li>参考：<a href=\"https://qiita.com/nazonohito51/items/32b61cabdac8b24769bd\">ServiceWorkerを簡単に書けるworkbox-swの使い方 | Qiita</a></li>\n</ul>\n</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-manifest\"><a href=\"#gatsby-plugin-manifest\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-manifest\">gatsby-plugin-manifest</a></h3>\n<p><strong>アプリをPWA対応にする（manifest.webmanifestを生成する）</strong><br></p>\n<ul>\n<li>サイトに<code class=\"language-text\">manifest.webmanifest</code>を配置することで、スマホでブログを見たときに、ネイティブアプリのようなUXを実現できます。</li>\n<li><code class=\"language-text\">gatsby-plugin-offline</code>との併用推奨です。</li>\n<li>詳細は<a href=\"https://takumon.com/2018/10/08/#gatsby-plugin-manifest%E3%81%AE%E8%A8%AD%E5%AE%9A\">GatsbyでPWA対応 |Takumon Blog</a>参照してください。</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-sitemap\"><a href=\"#gatsby-plugin-sitemap\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-sitemap\">gatsby-plugin-sitemap</a></h3>\n<p><strong>サイトマップを生成する</strong><br></p>\n<h4 id=\"設定・使い方-1\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>プラグインで<a href=\"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-plugin-sitemap/src/internals.js#L34\">いい感じの設定</a>があらかじめされているので、最低限設定するならsiteUrlを指定するだけです。個別にオプションを設定する場合は、<a href=\"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-plugin-sitemap/src/internals.js#L34\">いい感じの設定</a>を参考にしましょう。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    siteUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`https://www.example.com`</span></span><span class=\"token punctuation\">,</span>\n</span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-sitemap`</span></span><span class=\"token punctuation\">]</span></code></pre></div>\n<br>\nこれだけで下記のようなサイトマップが生成できます。\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>urlset</span>\n  <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.sitemaps.org/schemas/sitemap/0.9<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>news</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-news/0.9<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xhtml</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/1999/xhtml<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>mobile</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-mobile/1.0<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>image</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-image/1.1<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>video</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-video/1.1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>loc</span><span class=\"token punctuation\">></span></span>https://takumon.com/2018/10/14/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>loc</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>changefreq</span><span class=\"token punctuation\">></span></span>daily<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>changefreq</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>priority</span><span class=\"token punctuation\">></span></span>0.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>priority</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>loc</span><span class=\"token punctuation\">></span></span>https://takumon.com/2018/10/12/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>loc</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>changefreq</span><span class=\"token punctuation\">></span></span>daily<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>changefreq</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>priority</span><span class=\"token punctuation\">></span></span>0.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>priority</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>loc</span><span class=\"token punctuation\">></span></span>https://takumon.com/2018/10/08/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>loc</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>changefreq</span><span class=\"token punctuation\">></span></span>daily<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>changefreq</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>priority</span><span class=\"token punctuation\">></span></span>0.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>priority</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!-- ・・・ --></span>\n  <span class=\"token comment\">&lt;!-- Webサイト上の全てのURL定義 --></span>\n  <span class=\"token comment\">&lt;!-- ・・・ --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>urlset</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-canonical-urls\"><a href=\"#gatsby-plugin-canonical-urls\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-canonical-urls\">gatsby-plugin-canonical-urls</a></h3>\n<p><strong>canonical linksを追加する</strong><br></p>\n<ul>\n<li>canonical linksは検索エンジンに対して、プロコトルが違ったりクエリストリングがついていても同一のサイトのURLだということを宣言するためのリンクです。</li>\n</ul>\n<h4 id=\"設定・使い方-2\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>オプションとしてsiteUrlを指定します。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-canonical-urls`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        siteUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`https://www.example.com`</span></span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\nすると下記リンクタグがHTML内に埋め込まれます。\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>canonical<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.example.com/about-us/<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-feed\"><a href=\"#gatsby-plugin-feed\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-feed\">gatsby-plugin-feed</a></h3>\n<p><strong>RSSフィードを作る</strong></p>\n<h4 id=\"設定-9\"><a href=\"#%E8%A8%AD%E5%AE%9A-9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p><code class=\"language-text\">gatsby-config.js</code>でsiteMetadataを設定しプラグインを定義するだけでOKです。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`GatsbyJS`</span></span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`Blazing fast modern site generator for React`</span></span><span class=\"token punctuation\">,</span>\n    siteUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`https://www.gatsbyjs.org`</span></span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-feed`</span></span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\nこのプラグインを使うと、ビルドでpublic配下にrss.xmlが生成されます。<br>\n自分の場合はFeedlyの登録ボタンと、rss.xmlへのリンクをブログのトップに設けています。\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 468px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 136.53846153846155%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsSAAALEgHS3X78AAAGB0lEQVRIx41TaWxUVRi902k7A1EW2UWWikuhs3cG2jJQKEUxkBADFKMmgPoLISqImAhoMCwKqEEIoQUhIUJZRPYChbK0TNvXR2lp6QavBUq3oduUTpeZd3v87jAFY6Lx5Z189373u+ee89332Fzdm3/O7RNZk9Rn/L3F+ijlE8KXOoOySm9QviKspfH6MKOyJcSkbNeYlB3MpCRrzMoewl7CIY1VSdVY7x7XWOtOaawn2XxdZP6HegOW6KPwhc6AtToTNoWZsZGwPtyEH0LN2KmxIJlZsYdZcEBjxZEQK1IJZ0JsSNPYcIKQxRy4yGyF7CN9VO5yvRGf6aL868IMfE24ga/TGvgmrZGTKr5bY+G/aaw8OcTKU5iZHxKg8TGtjZ+m/BlaPx9i9UuhDlwNteWx5TqDtLqPiZQZ+eYwE74PNWLjwEn4SWfFbmbCAWbAYYoHKf5BSk7pJuIczdOYERe1NlwnlTmh0WqZfhJy9HaZfa6bIK0jm9+FE2G4GVtYFI5NXoT8NTuQvXQjXIvWQV66CfnLNiP7nWUoW7kN9775FUVzV8JFtbnhduRoo9UKXQxydUS4NixK2qKlnpHFX7SiX2Ykh0Xj6LAZODo0AScHT8fpIQm4QPPL/acgc9A0ZI2ahZxXZkEihbLejvw+dvXhwFgUD5wos2/DjNJWIvo5xMx3kY19hP1k7yCbgEOk4ASN0wjplM8gq1fpYrJonEfjAn00br/gQOkAh9owIg6VoybJbIPWKO2kG9vJDDx1mBMpHyfhuDERlwcm4NKImcgcMBk3+iXA1T8RrpFvI2/IdOS/5ETxyJkoHzsDFYPteDh6kto0Og4PxhHhNmaUdtFnQer4Jecs7J0xFtfjndgXkYjUV2fjiGMZLs9ZiKtxc1A0/C3cHhaP4sFToIybgcrXElH1sgM1EQ61PXIymqJjZbadmST6LPA7s/CT/SciO8KMrEF2pOjMSO3nxNExH+D0lHhcs09FMdktftEBZehE1I4hZSPtqH8jBu7IWLXb6kRLLBHuCLFIh7V2HAmN5qnis9DH4LLGgRv0oV5n1HCtCbc00Sjp60DJoBjcGx6LB2PiUPt6LCEGjUTUbHOqmBaPJ4lOmaWwSOk4Nf8gG89T6SLOsfG4QpdwnXIuioVhFtzpa8Hd/hZUDjDj/lAzakdY0DzGiroIK7wWG7yxNhWz7fAlWGSWNv5dyWVIQsaEefxK1DzkRs1HgXEBiiwLUBadBCVmISoJ1VPfQ3X8QnTNSULdvCW4O3cJsPh93Px0LaSvf1RLN2xF4YpVMvO2eiTQo3Z0crWjC5ygBsE7gwjO4evCrdpOzLqgQr/fhxVZKtIfuqE0XlLdDY+xJ6dOZl2+7gAhp7fnafzPp6YTWH0TcKb14EAlkP7Ag7stJWp1c0eQsKtLCtY+5+rpQQ//GzXNVb9fhN5EMKqoagNKWqDe9wMPPVxmNTU1UkFBAfLy8rjL5YJAeXk5SkpKIMsyysrKUFxcjNraWlRVVeFOSSmKiorgdrshyTfR5K7HfaVCDWqSWWtrqyQKiZRXVFQENldWVqK6uhqKogQ2inFDQwPq6+tB9Whra0N3d3cgegQ8bQFCn98vs5aWFqmwsBDnz5/nQmlpaSmuXbuGnJwcZGdn4+zZs0hPT0dGRgYyMzP/rbVPCX0+umWvN9DD9vZ2TmN0dHQEQL1FZ2enyOPJkyeBKHK0CaqqBhSKnKil8XNCki0FN3KPx4O6ujo8evTomTURyQWampoCBCIn6pubmwM9DbbjOSEVBQiJjAslvf0R5IK4sbHxGZEYC6Jetb29paiKOSmXGW2UAs0lQmFZEIkDRE7Mxe0KIpEXEJaFakEsojiUbD9XSFakx48fi5O42CgIxKmiuNd2r2VB0gtRK9YEqE0BQr+4ZVKRK5pMp/tJmbDN273tnCxwss6piNM676A1UhKAyIt1US/W6WB/kDCP0Wn5nP4KmgTs8OAfIg4RvRIQ1v/PQ3sKxJ9ygSSTQE89WXNTdLd7ve7WVo+brFNsdYs8KXKTMncXofsfoLW6bp+PtnnT/wIgYyKKaOtv9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"RSSフィード\"\n        title=\"\"\n        src=\"/static/88f587b2b71e9d4a73cc88a0a11f0c2a/31381/rssfeed.png\"\n        srcset=\"/static/88f587b2b71e9d4a73cc88a0a11f0c2a/7f74b/rssfeed.png 200w,\n/static/88f587b2b71e9d4a73cc88a0a11f0c2a/1ef94/rssfeed.png 400w,\n/static/88f587b2b71e9d4a73cc88a0a11f0c2a/31381/rssfeed.png 468w\"\n        sizes=\"(max-width: 468px) 100vw, 468px\"\n      />\n    </span>\n  </span>\n  </p>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-robots-txt\"><a href=\"#gatsby-plugin-robots-txt\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-robots-txt\">gatsby-plugin-robots-txt</a></h3>\n<p><strong><code class=\"language-text\">robots.txt</code>を生成する</strong><br></p>\n<ul>\n<li>robots.txtは検索エンジンのクロールを最適化するためのテキストファイルです。SEO対策に使われます。</li>\n</ul>\n<h4 id=\"設定・使い方-3\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>オプションでホストURLやサイトマップを指定できます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-plugin-robots-txt'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        host<span class=\"token punctuation\">:</span> <span class=\"token string\">'https://www.example.com'</span><span class=\"token punctuation\">,</span>\n        sitemap<span class=\"token punctuation\">:</span> <span class=\"token string\">'https://www.example.com/sitemap.xml'</span><span class=\"token punctuation\">,</span>\n        policy<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> userAgent<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> allow<span class=\"token punctuation\">:</span> <span class=\"token string\">'/'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>Netlfyで<a href=\"https://www.netlify.com/blog/2016/07/20/introducing-deploy-previews-in-netlify/\">Deploy Preview機能</a>を使うなら下記のような設定にします。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">NODE_ENV</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">URL</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">NETLIFY_SITE_URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">'https://www.example.com'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">DEPLOY_PRIME_URL</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">NETLIFY_DEPLOY_URL</span> <span class=\"token operator\">=</span> <span class=\"token constant\">NETLIFY_SITE_URL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">CONTEXT</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">NETLIFY_ENV</span> <span class=\"token operator\">=</span> <span class=\"token constant\">NODE_ENV</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> isNetlifyProduction <span class=\"token operator\">=</span> <span class=\"token constant\">NETLIFY_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> siteUrl <span class=\"token operator\">=</span> isNetlifyProduction <span class=\"token operator\">?</span> <span class=\"token constant\">NETLIFY_SITE_URL</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">NETLIFY_DEPLOY_URL</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    siteUrl\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-plugin-robots-txt'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        resolveEnv<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">NETLIFY_ENV</span><span class=\"token punctuation\">,</span>\n        env<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          production<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            policy<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> userAgent<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">'branch-deploy'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            policy<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> userAgent<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> disallow<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            sitemap<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            host<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">'deploy-preview'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            policy<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> userAgent<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> disallow<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            sitemap<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            host<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>オプションを指定しない場合は、siteMetadataにsiteUrlを指定します。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    siteUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'https://www.example.com'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'gatsby-plugin-robots-txt'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>ビルドするとpublicフォルダ配下に<code class=\"language-text\">robot.txt</code>が生成されます。</p>\n<div class=\"gatsby-code-title\">robot.txtの例</div>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">User-agent: *\nDisallow:\nSitemap: https://takumon.com/sitemap.xml</code></pre></div>\n<p><br><hr></p>\n<h2 id=\"開補補助系\"><a href=\"#%E9%96%8B%E8%A3%9C%E8%A3%9C%E5%8A%A9%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>開補補助系</h2>\n<h3 id=\"gatsby-plugin-lodash\"><a href=\"#gatsby-plugin-lodash\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-lodash\">gatsby-plugin-lodash</a></h3>\n<p><strong>ビルド時のlodashのサイズを小さくする</strong><br></p>\n<h4 id=\"設定・使い方-4\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>オプションで<a href=\"https://github.com/lodash/lodash-webpack-plugin#feature-sets\">モジュール</a>を削ってさらにサイズを小さくできます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-lodash`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        disabledFeatures<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token template-string\"><span class=\"token string\">`shorthands`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token template-string\"><span class=\"token string\">`cloning`</span></span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-webpack-bundle-analyzer\"><a href=\"#gatsby-plugin-webpack-bundle-analyzer\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-webpack-bundle-analyzer\">gatsby-plugin-webpack-bundle-analyzer</a></h3>\n<p><strong><a href=\"https://github.com/webpack-contrib/webpack-bundle-analyzer\">webpack-bundle-analyzer</a>を使ってbundle.jsの中身のサイズを可視化する</strong><br></p>\n<ul>\n<li>webpack-bundle-analyzerはパフォーマンスチューニングでbundle.jsのサイズを減らそうと思ったときに便利なライブラリです。ライブラリorコンポーネント毎にサイズをグラフィカルに示してくれます。</li>\n</ul>\n<h3 id=\"設定-10\"><a href=\"#%E8%A8%AD%E5%AE%9A-10\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h3>\n<p>このプラグインは内部webpack-bundle-analyzerというライブラリを使っており、\n<a href=\"https://github.com/webpack-contrib/webpack-bundle-analyzer#options-for-plugin\">webpack-bundle-analyzerのオプション</a>なら何でも指定できます。<br></p>\n<p>デフォルトだと<code class=\"language-text\">gatsby develop</code>するたびにブラウザが開くので、\nそれがいやなら下記のようにすると良いでしょう。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-webpack-bundle-analyzer`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        openAnalyzer<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n</span>      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"使い方-9\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h3>\n<p><code class=\"language-text\">gatsby develop</code>して<code class=\"language-text\">http://localhost:8888</code>にアクセスします。\nすると下記のようにコンポーネント毎のサイズをグラフィカルに示してくれます。</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 58.99419729206963%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACvklEQVQoz2WS608aURDF919v+q3pp6ZJmzTaWm3UWjVqqQryEhBBgUX2wT5ZWHB57wVUQOSeDpgY005yMpPs5ObM+a2gKgVdU8URySexhcqLXi6SRJZKhNl5LMhSyTBLnIdY7irFdK34vPNatG/qJSbIN9m2qYlQpStoSg6GmodRLizn60wcsXAAyfgpIqEjnJ0eIJ89h07fyvL1ixa7SimLdDIIQVMKXsWUYBuluSpd82L+gpcKl1yVcvwiEeaZiyjPXsapx/h1JsFrtsptQ+KmdsOrNFdMmTuWzHUlzyPBPS50Oy2v2byFU7G4VlZhmQZsS4dWllF1rKVazTp1HW7NgqHLtKvDNBTa09D0GmCsRy7ziJ/tQZhOJx6ei+NVcT7H09MM8/kc4/EdYtEgfu1s4sfGN3xfW8HW1jrOQscIBA5RKom4KSSxv/0ZAmO+xxhDv9/nvu9jMBhgNBrBMHTYtoVKxUaz2UBZKUDMp5cq5C5AUEBAcZmO0TVFXKVD2F7/AKHTaXtOtQrLsjiJHqhgNpthPBljQrq/v8dw0IdlSFDlAmQpD8dWQTCRTUeQTZ0gkwoiET3El49vIDw+Tv87eTp5QL/XQa/bxnDog/ld/FumLpFbckrZleUcziMH2Fh9D6FRd7xet0nBu7zdasCtLkAYFL4ERRZRsVQ0b6twXReiKELXCY5bg20qyGVjuLoMI06PJaJHONz9CmHA+t7scUqnjfjDwz3u7kY034FggdwTkAdMFppMKN8hOR7RPEWpmMFpYBPpxDHCpztLwvs/CUq32/Fct75wwOv1Omq12jJH27bhOA7NDp3egd9rodNu4LZuU543lGeOMgyTswOk4vTTn2xjY+UdhOGAefP5E+U25tPpeNGXMF46OR0OfNRdi1ylESMnq5/eUmaHiIZ2l6em4r+RJCh/DtbwF2S4TsWiu1WwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"webpack-bundle-analyzerの結果\"\n        title=\"\"\n        src=\"/static/750e0d13a929ecfdba2f3651a4d601c9/42603/bundlesize.png\"\n        srcset=\"/static/750e0d13a929ecfdba2f3651a4d601c9/f931c/bundlesize.png 200w,\n/static/750e0d13a929ecfdba2f3651a4d601c9/e8031/bundlesize.png 400w,\n/static/750e0d13a929ecfdba2f3651a4d601c9/42603/bundlesize.png 800w,\n/static/750e0d13a929ecfdba2f3651a4d601c9/b594a/bundlesize.png 1034w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-google-analytics\"><a href=\"#gatsby-plugin-google-analytics\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-google-analytics\">gatsby-plugin-google-analytics</a></h3>\n<p><strong><a href=\"https://analytics.google.com/analytics/web/\">Google Analytics</a>を使えるようにする</strong><br></p>\n<h4 id=\"設定・使い方-5\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-5\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p><code class=\"language-text\">gatsby-config.js</code>でトラッキングIDを設定するだけです。\ngatsby-starter-blogの時点ではコメントアウトされているので、Google AnalyticsでトラッキングIDを発行して設定しましょう。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-google-analytics`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        trackingId<span class=\"token punctuation\">:</span> <span class=\"token string\">\"YOUR_GOOGLE_ANALYTICS_TRACKING_ID\"</span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-facebook-analytics\"><a href=\"#gatsby-plugin-facebook-analytics\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-facebook-analytics/\">gatsby-plugin-facebook-analytics</a></h3>\n<p><strong><a href=\"https://developers.facebook.com/docs/analytics/?locale=ja_JP\">Facebook Analytics</a>を使えるようにする</strong><br></p>\n<h4 id=\"設定・使い方-6\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-6\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-facebook-analytics`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        appId<span class=\"token punctuation\">:</span> <span class=\"token string\">\"あなたのAPP ID\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 開発時も解析対象とするか</span>\n        <span class=\"token comment\">// デフォルトはfalseでプロダクションのみ解析対象とします</span>\n        includeInDevelopment<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// SDKのデバックバージョンを含めるか</span>\n        <span class=\"token comment\">// デフォルトはfalseでライブラリはsdk.jsをロードします。</span>\n        debug<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 言語を指定。デフォルトはenglish</span>\n        language<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ja-jp\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h2 id=\"ui系\"><a href=\"#ui%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UI系</h2>\n<h3 id=\"gatsby-plugin-nprogress\"><a href=\"#gatsby-plugin-nprogress\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-nprogress\">gatsby-plugin-nprogress</a></h3>\n<p><strong>ローディングに時間がかかっている時にプログレスバーを表示する</strong><br></p>\n<ul>\n<li><a href=\"http://ricostacruz.com/nprogress/\">NProgress</a>を使って、リンククリックから1秒たってもローディング中の場合にプログレスバーを表示します。</li>\n</ul>\n<h4 id=\"設定・使い方-7\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>下記のように設定します。<code class=\"language-text\">color</code>でバーの色が変更可能です。\nまたオプションには<a href=\"https://github.com/rstacruz/nprogress#configuration\">NProgress</a>のオプションが全て指定できるようになっています。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-nprogress`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        color<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`#444`</span></span><span class=\"token punctuation\">,</span>\n        showSpinner<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-catch-links\"><a href=\"#gatsby-plugin-catch-links\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-catch-links\">gatsby-plugin-catch-links</a></h3>\n<p><strong>aタグでローカル遷移する時にリロードを抑止してヒストリーAPIで遷移できるようにする</strong></p>\n<p>Gatsby(React製)はSPAなので、ローカル遷移はブラウザのヒストリーAPIを使うべきで、リロードは避けたいところですが、\n<code class=\"language-text\">&lt;a href=&quot;tags/react&quot; &gt;ローカル遷移のリンク&lt;/a&gt;</code>のような<strong>a</strong>タグの場合、クリック時に（ブラウザのでフォルの挙動により）リロードしてしまいます。<br></p>\n<p>このプラグインを使えば、<strong>a</strong>タグの場合でもローカル遷移であればリロードを抑止し、ヒストリーAPIを使った遷移が可能です。<br>\n<a href=\"https://www.gatsbyjs.org/docs/gatsby-link/#programmatic-navigation\">Gatsby-Link</a>を使っていれば問題ないのですが、どうしても<strong>a</strong>タグしか使えない場合は、このプラグインが役立つでしょう。</p>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-layout\"><a href=\"#gatsby-plugin-layout\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-layout\">gatsby-plugin-layout</a></h3>\n<p><strong>1系のレイアウト機能を2系でも使えるようにする</strong><br></p>\n<ul>\n<li>1系から2系に移行したときに、レイアウト機能(2系では削除された機能)をそのまま使えるようにするために使います。</li>\n</ul>\n<h4 id=\"設定・使い方-8\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-8\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p><code class=\"language-text\">gatsby-config.js</code>の設定は特に変わったところはありません。<br>\nレイアウト用ファイルは<code class=\"language-text\">src/layouts/index.js</code>を作成しましょう。</p>\n<p><br><hr></p>\n<h2 id=\"ファイル系\"><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ファイル系</h2>\n<p>JSON,XML,YAML,CSVのパースは使い方はほぼ一緒なのでまとめて説明します。</p>\n<ul>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-json\">gatsby-transformer-json</a></p>\n<ul>\n<li><strong>JSONファイルをパースする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-xml\">gatsby-transformer-xml</a></p>\n<ul>\n<li><strong>XMLファイルをパースする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-yaml\">gatsby-transformer-yaml</a></p>\n<ul>\n<li><strong>Yamlファイルをパースする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-csv\">gatsby-transformer-csv</a></p>\n<ul>\n<li><strong>CSVファイルをパースする</strong></li>\n</ul>\n</li>\n</ul>\n<p>これらはgatsby-source-filesystemとあわせて使います。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-json`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`./src/data/`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h3 id=\"gatsby-source-filesystem\"><a href=\"#gatsby-source-filesystem\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-filesystem\">gatsby-source-filesystem</a></h3>\n<p><strong>ファイルを読み取りGatsby上で扱えるFileノードを生成する</strong><br></p>\n<ul>\n<li><code class=\"language-text\">transformer</code>プラグイン（ファイルノードをファイル形式毎に最適化したノードに変換するプラグイン）と併用します。例えば<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-json\">gatsby-transformer-json</a>はJSONファイルをJSONノードに変換し、<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/?=gatsby-transformer-remark\">gatsby-transformer-remark</a>はマークダウンファイルをMarkdownRemarkノードに変換します。</li>\n<li>※gatsby-starter-blogインストール済</li>\n</ul>\n<h3 id=\"設定方法・使い方\"><a href=\"#%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定方法・使い方</h3>\n<ul>\n<li><code class=\"language-text\">gatsby-config.js</code>では読み込み対象のフォルダパスを指定します。</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`pages`</span></span><span class=\"token punctuation\">,</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/pages/`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`data`</span></span><span class=\"token punctuation\">,</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/data/`</span></span><span class=\"token punctuation\">,</span>\n        ignore<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`**/\\.*`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ドット始まりのファイルは無視</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>読み取ったファイルノードはGraphQLで取得できます。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  allFile <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        extension\n        dir\n        modifiedTime\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>JavaScriptの関数 <code class=\"language-text\">createFilePath</code> を用意しています。実際<code class=\"language-text\">gatsby-config.js</code>ではマークダウン読み込みで使っています。</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownRemark`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span>    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`slug`</span></span><span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>同じく関数<code class=\"language-text\">createRemoteFileNode</code>を用意しています。こちらは名前の通り、リモートのファイル読み込みで使用します。</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-transformer-remark\"><a href=\"#gatsby-transformer-remark\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark\">gatsby-transformer-remark</a></h3>\n<p><strong>マークダウンファイルをパースする（MarkdownRemarkノードに変換する）</strong><br></p>\n<h4 id=\"使い方-10\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-10\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<ul>\n<li>MarkdownRemarkノードはGraphQLで取得可能です。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  allMarkdownRemark <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        html\n        headings <span class=\"token punctuation\">{</span>\n          depth\n          value\n        <span class=\"token punctuation\">}</span>\n        frontmatter <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\"># Assumes you're using title in your frontmatter.</span>\n          title\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>目次も取得できます。目次のURLは<code class=\"language-text\">slug</code>ですが<code class=\"language-text\">pathToSlugField</code>でカスタム可能です。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  allMarkdownRemark <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        html\n<span class=\"gatsby-highlight-code-line\">        tableOfContents<span class=\"token punctuation\">(</span><span class=\"token attr-name\">pathToSlugField</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"frontmatter.path\"</span><span class=\"token punctuation\">)</span>\n</span>        frontmatter <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\"># Assumes you're using path in your frontmatter.</span>\n          path\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>\n<p>要約も取得できます。デフォルト120文字ですが、<code class=\"language-text\">pruneLength</code>でカスタム可能です。</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\nallMarkdownRemark <span class=\"token punctuation\">{</span>\nedges <span class=\"token punctuation\">{</span>\n  node <span class=\"token punctuation\">{</span>\n    html\n<span class=\"gatsby-highlight-code-line\">    excerpt<span class=\"token punctuation\">(</span><span class=\"token attr-name\">pruneLength</span><span class=\"token punctuation\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span>\n</span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-image\"><a href=\"#gatsby-image\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark\">gatsby-image</a></h3>\n<p><strong>画像読み込みを最適化する</strong></p>\n<ul>\n<li>gatsby-plugin-sharpと併せて使用します</li>\n<li>Webサイトにおいて画像読み込みの最適化はかなり手間がかかりますが、それらをよしなりやってくれるのがこのプラグインです。GraphQLとSharpを使ったGatsbyのネイティブ画像処理機能とシームレスに連携するように設計されています。</li>\n</ul>\n<h4 id=\"設定・使い方-9\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<ul>\n<li><code class=\"language-text\">gatsby-plugin-sharp</code>、<code class=\"language-text\">gatsby-transformer-sharp</code>と一緒に使います。下記のように設定します。</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`path`</span></span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`images`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        path<span class=\"token punctuation\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`src`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`images`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>    <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-sharp`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-sharp`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>実際使う場合はコンポーネント内でHTMLの<code class=\"language-text\">img</code>タグの代わりにgatsby-imageの<code class=\"language-text\">Img</code>タグを使います。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Img <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby-image\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hello gatsby<span class=\"token operator\">-</span>image<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token operator\">&lt;</span>Img fixed<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>file<span class=\"token punctuation\">.</span>childImageSharp<span class=\"token punctuation\">.</span>fixed<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n</span>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> query <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n  query {\n<span class=\"gatsby-highlight-code-line\">    file(relativePath: { eq: \"blog/avatars/kyle-mathews.jpeg\" }) {\n</span><span class=\"gatsby-highlight-code-line\">      childImageSharp {\n</span><span class=\"gatsby-highlight-code-line\">        fixed(width: 125, height: 125) {\n</span><span class=\"gatsby-highlight-code-line\">          ...GatsbyImageSharpFixed\n</span><span class=\"gatsby-highlight-code-line\">        }\n</span><span class=\"gatsby-highlight-code-line\">      }\n</span><span class=\"gatsby-highlight-code-line\">    }\n</span><span class=\"gatsby-highlight-code-line\">  }\n</span>`</span></span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-transformer-sharp\"><a href=\"#gatsby-transformer-sharp\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-sharp\">gatsby-transformer-sharp</a></h3>\n<p><strong>画像読み込みでImageSharpノードを生成する</strong><br></p>\n<ul>\n<li><code class=\"language-text\">gatsby-plugin-sharp</code>と併用します。</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-sharp\"><a href=\"#gatsby-plugin-sharp\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-sharp\">gatsby-plugin-sharp</a></h3>\n<p><strong><a href=\"https://github.com/lovell/sharp\">Sharp</a>(画像圧縮ライブラリ)を使えるようにする</strong><br></p>\n<ul>\n<li>Gatsbyエンドユーザーが使うというよりは、プラグインの一部で使う低レイヤーのプラグイン。</li>\n</ul>\n<p><br><hr></p>\n<h2 id=\"css系\"><a href=\"#css%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS系</h2>\n<p>SASSやCSS in JSのライブラリ用のプラグインは一通り用意されています。\nプラグインを入れるだけで簡単に使えるので設定や使い方は省略します。</p>\n<ul>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-sass\">gatsby-plugin-sass</a></p>\n<ul>\n<li><strong>GatsbyでSASS/SCSSを使えるようにする</strong></li>\n<li><code class=\"language-text\">node-sass</code>をあわせてインストールしてください。</li>\n<li>CSS Moduleを使う場合、拡張子を<code class=\"language-text\">module.scss</code>、<code class=\"language-text\">module.sass</code>などとしてください。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-styled-components\">gatsby-plugin-styled-components</a></p>\n<ul>\n<li><strong><a href=\"https://github.com/styled-components/styled-components\">Styled Components</a>を使えるようにする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-glamor\">gatsby-plugin-glamor</a></p>\n<ul>\n<li><strong><a href=\"https://github.com/threepointone/glamor\">Glamor</a>と<a href=\"https://github.com/paypal/glamorous\">glamorous</a>を使えるようにする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-emotion/\">gatsby-plugin-emotion</a></p>\n<ul>\n<li><strong><a href=\"https://github.com/emotion-js/emotion\">Emotion</a>を使えるようにする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-postcss\">gatsby-plugin-postcss</a></p>\n<ul>\n<li><strong><a href=\"https://postcss.org/\">PostCSS</a>が使えるようにする</strong></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"gatsby-plugin-typography\"><a href=\"#gatsby-plugin-typography\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-typography\">gatsby-plugin-typography</a></h3>\n<p><strong><a href=\"https://kyleamathews.github.io/typography.js/\">Typography.js</a>(文章のスタイルを設定するライブラリ)を使えるようにする</strong><br></p>\n<ul>\n<li>Typography.jsはフォント、フォントサイズ、line-heigth等のパラメータを設定すると、それに従ってCSSを生成してくれるライブラリです。CSSよりも管理が楽になる上、様々なテーマが提供されているので、それを使って簡単にスタイルを設定できます。</li>\n</ul>\n<h4 id=\"設定・使い方-10\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-10\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>スタイル指定用のJavaScriptを作成します。\nテーマを使うと作成が楽です。どんなテーマがあるかは<a href=\"https://kyleamathews.github.io/typography.js/\">Typography.js</a>の右上にある<code class=\"language-text\">Pick theme</code>プルダウンで確認できます。お気に入りのテーマを選んで、npmインストールして使いましょう。</p>\n<div class=\"gatsby-code-title\">src/utils/typography.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Typography <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography\"</span>\n<span class=\"token keyword\">import</span> grandViewTheme <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography-theme-grand-view\"</span>\n\n<span class=\"token keyword\">const</span> typography <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Typography</span><span class=\"token punctuation\">(</span>grandViewTheme<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> rhythm<span class=\"token punctuation\">,</span> scale <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> typography<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> rhythm<span class=\"token punctuation\">,</span> scale<span class=\"token punctuation\">,</span> typography <span class=\"token keyword\">as</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>JavaScriptでテーマの設定を上書くこともできます。</p>\n<div class=\"gatsby-code-title\">src/utils/typography.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Typography <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography\"</span>\n<span class=\"token keyword\">import</span> grandViewTheme <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography-theme-grand-view\"</span>\n\ngrandViewTheme<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">overrideThemeStyles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token string\">'html,body,h1,h2,h3,h4,h5,h6'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    color<span class=\"token punctuation\">:</span> <span class=\"token string\">'#444'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    fontFamily<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'-apple-system'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'BlinkMacSystemFont'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'Segoe UI'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'Helvetica Neue'</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'Hiragino Kaku Gothic ProN'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'\"Yu Gothic\"'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'YuGothic'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'Verdana'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'Meiryo'</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'\"M+ 1p\"'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'sans-serif'</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> typography <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Typography</span><span class=\"token punctuation\">(</span>grandViewTheme<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> rhythm<span class=\"token punctuation\">,</span> scale <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> typography<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> rhythm<span class=\"token punctuation\">,</span> scale<span class=\"token punctuation\">,</span> typography <span class=\"token keyword\">as</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>作ったスタイル指定用のJavaScriptを<code class=\"language-text\">gatsby-config.js</code>で指定します。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの中</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-typography`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        pathToConfigModule<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`src/utils/typography`</span></span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><br><hr></p>\n<h2 id=\"外部連携系\"><a href=\"#%E5%A4%96%E9%83%A8%E9%80%A3%E6%90%BA%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>外部連携系</h2>\n<p>ブログなどからデータをひっぱってきてGraphQLで扱えるようにするプラグイン群です。\n他にも様々ありますが、有名どころとの連携プラグインは下記のようなものがあります。\n各プラグインの使い方は、かなりがっつりしたものになるのでココでは省略します。</p>\n<ul>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-medium\">gatsby-source-medium</a></p>\n<ul>\n<li><a href=\"https://medium.com/\">Medium</a>の記事を引っ張ってきてGraphQLで扱えるようにする</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-wordpres\">gatsby-source-wordpres</a></p>\n<ul>\n<li><a href=\"https://ja.wordpress.org/\">WordPress</a>の記事を引っ張ってきてGraphQLで扱えるようにする</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-contentful\">gatsby-source-contentful</a></p>\n<ul>\n<li><a href=\"https://www.contentful.com/\">contentful</a>からデータを引っ張ってきてGraphQLで扱えるようにする</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"gatsby-source-esa\"><a href=\"#gatsby-source-esa\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-esa\">gatsby-source-esa</a></h3>\n<p><strong><a href=\"https://docs.esa.io/posts/102\">esa API</a>を使って<a href=\"https://esa.io/\">esa.io</a>のデータを引っ張ってきてGraphQLで扱えるようにする</strong><br></p>\n<h4 id=\"設定-11\"><a href=\"#%E8%A8%AD%E5%AE%9A-11\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-esa`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// (必須)トークン</span>\n        <span class=\"token comment\">// https://[YOUR_TEAM_NAME].esa.io/user/applications からトークンを取得できます。</span>\n        <span class=\"token comment\">// なおオーナでないとトークンは取得できません</span>\n        accessToken<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`YOUR_PERSONAL_ACCESS_TOKEN`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// (必須)チーム名</span>\n        teamName<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`YOUR_TEAM_NAME`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// (任意)検索クエリ</span>\n        <span class=\"token comment\">// 詳細は https://docs.esa.io/posts/104 参照</span>\n        <span class=\"token comment\">// 例 : 'in:public' や 'wip:false in:public'　など</span>\n        q<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// (任意)ベースカテゴリ</span>\n        <span class=\"token comment\">// 例 : 'public'</span>\n        baseCategory<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<h4 id=\"使い方-11\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-11\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>GraphQLで下記スキーマにて取得します。</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  allEsaPost <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        number\n        name\n        body_md\n        body_html\n        category\n        relative_category\n        tags\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>もともと自分のブログで使っていたものも多数ありますが、\n調べてみると、いろいろ便利なプラグインを発見できました。<br>\nGatsbyはプラグインの他にも、</p>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/starters/\">Starter一覧</a></li>\n<li><a href=\"https://www.gatsbyjs.org/showcase/\">Gatsby採用事例一覧</a></li>\n</ul>\n<p>など参考になるサイトとソースコードが充実しているのでこれから詳しく見ていこうと思います🍅</p>","fields":{"slug":"/2018/10/21/","title":"Gatsbyプラグイン45選","date":"2018-10-21T15:00:00.000Z","excerpt":"なにこれGatsbyのプラグインは、公式プラグインとコミュニティ提供のものをあわせると、なんと502個もあります。（2018/10/21現在）今回はその中でもおすすめプラグイン45個をユースケース別にご紹介します。ユースケース別目次※クリッ...","tags":["Gatsby","GatsbyPlugin"],"keywords":["GatsbyPlugin"],"thumbnail":"thumbnail/2018/getsby-plugin-best-45.png"}}],"latestPosts":[{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"/wordcloud-with-kuromoji-d3cloud-nodejs\">前回記事</a>ではNode.jsでWordCloudを出力しました。\n今回は、<a href=\"https://github.com/Takumon/playbox2019/blob/master/node-kuromoji-d3cloud-sample/index.js\">前回のサンプル</a>をベースに自分のブログ（Gatsby製のブログ）にWordCloudを取り入れてみたので、その時の実装方法のメモです。</p>\n<p>※ソースコードは以下です。<br/>\n<a href=\"https://github.com/Takumon/blog/blob/master/gatsby-node.js\">https://github.com/Takumon/blog/blob/master/gatsby-node.js</a></p>\n<h2 id=\"wordcloudどんなかんじ？\"><a href=\"#wordcloud%E3%81%A9%E3%82%93%E3%81%AA%E3%81%8B%E3%82%93%E3%81%98%EF%BC%9F\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WordCloudどんなかんじ？</h2>\n<p>(1)記事全文をインプットにしたものと、(2)記事のタグをインプットにしたものの2つを生成しました。<a href=\"./map\">全記事解析ページ</a>で見れます。</p>\n<h3 id=\"1記事全文をインプットにしたもの\"><a href=\"#1%E8%A8%98%E4%BA%8B%E5%85%A8%E6%96%87%E3%82%92%E3%82%A4%E3%83%B3%E3%83%97%E3%83%83%E3%83%88%E3%81%AB%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1)記事全文をインプットにしたもの</h3>\n<p>キーワード以外にも、「登録」「実現」「まとめ」のような何回も使う表現がノイズとして混ざるのであまり満足度は高くありません。それでも「Gatsby」「React」が目立って表示されているので、形だけはWordCloudになっています。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/de4be7280c02fcda494c51d41a9db86e/d9807/wordcloud-from-texts.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.480000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABcRAAAXEQHKJvM/AAACQ0lEQVQozxWSS2/cNhSF5//v8wO6aDYFCnTRJkA3TYHErWOPx/V4NNLoQT1JiSKpx8h208XXmwUhggLOPeeeb3d93Rhnj58mgnf4pce7Qd4Mg+m41h2mbSgGRTOMWFszukBwHVNwhGlkmReuc2C7vrJ7XT3L5HhxI6uzcu/RfUPrRbBqeYtSGvNE3O+p25ReL5R2pGgadJPS2o6xMyzesi0ru//WhS0Yrs4wFyJYlWRNzSlVZFlKXVSk6d+o8o68iriUjkqc38p/VSpsL4J9Id+GdZ2+O1xpp5mqc9iHPdPDX8Sq4v6iqO4/c36856Yt+KwyjkWNKVryPKfSMmjo6Kwm6s4YnYpgYPc2WbHcscmu1n/uMOeYJLMczjX6yz3Nwy2hembMjvjswt3jhcPTmfF4gz9/RdlAYhxdr/Hjd8HR8q2ucGZgH39ijb6gniTeJWLQJ0p1IjvteRSB/JKTHs/YJGFsDrwlN6xFTKVmlraW/Y/s1uuGC4HUaFSb8a9MvT3+wof4N354fMfvya/8fPiJHx/e8zH5kzQe6OsEpQtCpzDlM1pK8UMtkVt203XFeY2Whp1En8qR7vlInP9BlH8lkt095xH78oZPlz2nk+KQtWS1xqlISosJfc3cD0zLzG6TUiY/oSV6PfSUcoK0bJUg0gWqytOpknOTUDeWIIVY1VKOrRiIRajAC0arF/xeBZtvm+M6CjLzzGgHcdpIcxWTYOCsDLEGIw56GRi05sUoZi2sCrdWXG3CqxOO50XAfln4H6dQ3Q7nZ23oAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wordcloud from texts\"\n        title=\"\"\n        src=\"/static/de4be7280c02fcda494c51d41a9db86e/42603/wordcloud-from-texts.png\"\n        srcset=\"/static/de4be7280c02fcda494c51d41a9db86e/f931c/wordcloud-from-texts.png 200w,\n/static/de4be7280c02fcda494c51d41a9db86e/e8031/wordcloud-from-texts.png 400w,\n/static/de4be7280c02fcda494c51d41a9db86e/42603/wordcloud-from-texts.png 800w,\n/static/de4be7280c02fcda494c51d41a9db86e/5b8b9/wordcloud-from-texts.png 1200w,\n/static/de4be7280c02fcda494c51d41a9db86e/c7ea5/wordcloud-from-texts.png 1600w,\n/static/de4be7280c02fcda494c51d41a9db86e/d9807/wordcloud-from-texts.png 1875w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<h3 id=\"2記事のタグをインプットにしたもの\"><a href=\"#2%E8%A8%98%E4%BA%8B%E3%81%AE%E3%82%BF%E3%82%B0%E3%82%92%E3%82%A4%E3%83%B3%E3%83%97%E3%83%83%E3%83%88%E3%81%AB%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2)記事のタグをインプットにしたもの</h3>\n<p>上記を作ってみて満足いかなかったので、試しに記事のタグをインプットにしたものを作ってみたら、思いのほかそれっぽくなりました。自分の直感とも一致していているので、「どんなブログ書いてるの？」という質問の答えとして十分使えそうです。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a2d86827695eec6552e7881612d06b66/d9807/wordcloud-from-tags.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 53.17333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABcRAAAXEQHKJvM/AAACY0lEQVQoz2WTW2/TQBCF8/9/Ak/wwFNBogIkWqBCFERRLylpkzSpE8dx7fjutde32PF+bFqEkBjpaLWzqzNn9swO0KGU4t/Yb/eZSXBLHNtQ1fS1oCk7ml3PRpb0Xfd0V6PftSh/AtuCwXabE1g2tczY1iky9hCBS1kWvF0cchU8YMQxNB6NaCnaHb4+y4RAFBW0LeQhLD6h2ppBVW5wjRW+OWM1vsaYXGGNb1lPPQ6mH3hzsWSkC96sHT7+2vB+5HJmRnybebw8M7mYe5h3c/Lh60fFg6TwSBYLiuwW2eqqurJ0a+y5rwmPNYnF4YXJizObZ19Nju483t04vLpac3Bxz9Ek4PnJiM4Z6f53DMqypDBNZHKNHy6xlnN8K2Rx43Pln3O2vuPSvmPo3DNyZjhhzMR2Md2IteGycAS/ZgYsj+n7joFMM/K5QRYPsTcxG9sh8jyClcR9MLiXBsnskvzbF4Ifp8iTE4rvP6hHQ/rTz/jff+K7gtZd0VWVVpikWpkgycfIqiSVEhGV2JOEWqsplxHV2KK+XpOOXRqtJpkPqYIptTUjWT3gODleICnqrTYlSbClwMumjMuK66xgqg/Pb31ths9yJVhaGZEb09sLemuESLXjuaFdjsjSXHckUc2WXg/RoMky5Ra5CrOxCtNEraJcxXamVhupbFFq+MqVkUr9RHWbWMmlpSoRqb6MVVwIta081clMPbJpWwZ7q5s/g7wPUXWkVg7d04Q3maCL1qg0hazRrUbk+t21oez4P/aE4b+o2l1Y502oyUK1z+lVf5GQbvv3jtrn+APFI55yhL8BmF02pml+TKcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wordcloud from tags\"\n        title=\"\"\n        src=\"/static/a2d86827695eec6552e7881612d06b66/42603/wordcloud-from-tags.png\"\n        srcset=\"/static/a2d86827695eec6552e7881612d06b66/f931c/wordcloud-from-tags.png 200w,\n/static/a2d86827695eec6552e7881612d06b66/e8031/wordcloud-from-tags.png 400w,\n/static/a2d86827695eec6552e7881612d06b66/42603/wordcloud-from-tags.png 800w,\n/static/a2d86827695eec6552e7881612d06b66/5b8b9/wordcloud-from-tags.png 1200w,\n/static/a2d86827695eec6552e7881612d06b66/c7ea5/wordcloud-from-tags.png 1600w,\n/static/a2d86827695eec6552e7881612d06b66/d9807/wordcloud-from-tags.png 1875w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<h2 id=\"処理概要\"><a href=\"#%E5%87%A6%E7%90%86%E6%A6%82%E8%A6%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>処理概要</h2>\n<p>Gatsbyを使う場合、画面に必要なデータはビルド時に生成するのがベーシックなやり方です。\nそのためSVG生成は、表示時のReactコンポーネントではなくビルド時の処理（gatsby-node.js）にて行いました。\nビルドはNode.jsの世界ですから、前回記事の<a href=\"https://github.com/Takumon/playbox2019/blob/master/node-kuromoji-d3cloud-sample/index.js\">Node.jsでWordCloudのSVG画像を出力するサンプル</a>が、ほぼそのまま使えるわけです。サンプルと、Gatsbyビルド処理のお作法（gatsby-node.jsの書き方）を考慮して以下のような手順でSVG画像のデータを生成します。</p>\n<ul>\n<li>\n<p>記事全文のWordCloud生成</p>\n<ul>\n<li>記事全文を取得 ☚Gatsbyビルド処理のお作法</li>\n<li>記事全文をインプットにkuromoji.jsで形態素解析</li>\n<li>解析結果をインプットにD3-Cloudでフォーマット</li>\n<li>解析結果をインプットにd3.jsでSVG文字列生成</li>\n<li>Gatsbyページ生成時にContextのプロパティとして渡す ☚Gatsbyビルド処理のお作法</li>\n</ul>\n</li>\n<li>\n<p>記事全タグのWordCloud生成</p>\n<ul>\n<li>記事全タグを取得 ☚Gatsbyビルド処理のお作法</li>\n<li>記事全タグをインプットにタグ出現回数を算出</li>\n<li>解析結果をインプットにD3-Cloudでフォーマット</li>\n<li>解析結果をインプットにd3.jsでSVG文字列生成</li>\n<li>Gatsbyページ生成時にContextのプロパティとして渡す ☚Gatsbyビルド処理のお作法</li>\n</ul>\n</li>\n</ul>\n<p>そして表示時にコンポーネントでSVGデータを取得し画面に表示します。</p>\n<h2 id=\"処理のチューニングポイント\"><a href=\"#%E5%87%A6%E7%90%86%E3%81%AE%E3%83%81%E3%83%A5%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>処理のチューニングポイント</h2>\n<p>WordCloudの品質を上げるために以下のようなチューニングを実施しました。</p>\n<ul>\n<li>\n<p>「Gatsby」[gatsby」などは同じ単語とみなしてカウントしています。</p>\n<ul>\n<li>文章中で前後文脈によって大文字小文字の差があるものは、同じ単語としてカウントしています。</li>\n<li>最終的にWordCloudに表示する単語は一番大文字の数が多い単語（「Gatsby」[gatsby」なら「Gatsby」）を採用するようにしました。</li>\n</ul>\n</li>\n<li>\n<p>記事全文は、マークダウンではなくHTMLをインプットにして、HTMLタグを除外、さらにpreタグは中身ごと除外してから形態素解析のインプットとして渡しています。</p>\n<ul>\n<li>マークダウンはリンク、スタイルなどメタ情報が多いため、いったんHTMLに変換したものからHTMLタグを抜くことで純粋な文書だけを抽出しています。</li>\n<li>またソースコードには同じような表現が多く含まれ、WordCloudの対象にするにはノイズが大きく、大事な単語であればソースコード外の文章中に出てくるという前提のもと、ソースコードはすべて除外しています</li>\n<li>「時」「場合」など言い回しとして何度も出てくる単語はWordCloudの情報にしても意味がないので除外しています。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"処理詳細（実装）\"><a href=\"#%E5%87%A6%E7%90%86%E8%A9%B3%E7%B4%B0%EF%BC%88%E5%AE%9F%E8%A3%85%EF%BC%89\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>処理詳細（実装）</h2>\n<p>ちょっと長いですが、\nソースコード中のコメントにて詳細を説明します。</p>\n<div class=\"gatsby-code-title\">gatsby-node.jsからWordCloud生成処理抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/** HTML形式の記事本文からHTMLタグを削除するために使う */</span>\n<span class=\"token keyword\">const</span> striptags <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'striptags'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">/** 仮想DOM d3.js D3-CloudはDOMがある前提なのでNode.js実行時でも正常動作するように仮想Canvasを使う */</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createCanvas <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'canvas'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">/** 仮想DOM d3.js D3-CloudはDOMがある前提なのでNode.js実行時でも正常動作するように仮想DOMを使う */</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">JSDOM</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jsdom'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">/** 形態素解析のために使う */</span>\n<span class=\"token keyword\">const</span> kuromoji <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kuromoji'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">/** WordCloudのSVG文字列作成用 */</span>\n<span class=\"token keyword\">const</span> d3 <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d3'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">/** WordCloudのSVG文字列作成用 */</span>\n<span class=\"token keyword\">const</span> cloud <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d3-cloud'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">/** createPageにてWordCloud生成処理を実装する */</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/** (略)ページコンポーネント呼び出し */</span>\n\n    <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/** (略)記事情報呼び出しクエリ */</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>result <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token comment\">/** (略)もろもろのページ作成 */</span>\n\n\n      <span class=\"token comment\">// WordCloud用データ加工処理</span>\n\n      <span class=\"token comment\">/** (略)resultから記事全文の配列(allPostHtmlTexts)を取得する処理 */</span>\n\n      <span class=\"token comment\">// 記事全文文字列取得</span>\n      <span class=\"token keyword\">const</span> allPostTexts <span class=\"token operator\">=</span> allPostHtmlTexts\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>allHtmlTexts <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// HTML文字列からタグを除外</span>\n          <span class=\"token comment\">// ただしpreタグは、中身をWordCloud解析対象外とするためここではあえて残している</span>\n          <span class=\"token keyword\">const</span> stripedAllText <span class=\"token operator\">=</span> <span class=\"token function\">striptags</span><span class=\"token punctuation\">(</span>allHtmlTexts<span class=\"token punctuation\">,</span> <span class=\"token string\">'&lt;pre>'</span><span class=\"token punctuation\">)</span>\n\n          <span class=\"token comment\">// そのためpreタグとその中身を除外する。</span>\n          <span class=\"token comment\">// preタグの中見はソースコード。</span>\n          <span class=\"token comment\">// キーワードはソースコード外の文章中に記述していることを想定して</span>\n          <span class=\"token comment\">// WordCloudの対象から外す。</span>\n          <span class=\"token keyword\">return</span> <span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/&lt;pre[\\s\\S]+?>[\\s\\S]+?&lt;\\/pre>/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// 改行でつなぐ</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span>\n      \n\n      <span class=\"token comment\">/** (略)resultから記事全タグの配列(allPostTags)を取得する処理 */</span>\n\n      <span class=\"token comment\">// 記事タグ取得</span>\n      <span class=\"token keyword\">const</span> tagDatas <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n      <span class=\"token comment\">// 記事全タグ情報からどのタグが何回出現するか算出</span>\n      allPostTags<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>tags <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        tags<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n          <span class=\"token keyword\">const</span> targetData <span class=\"token operator\">=</span> tagDatas<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>data <span class=\"token operator\">=></span> data<span class=\"token punctuation\">.</span>text <span class=\"token operator\">===</span> t<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>targetData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            targetData<span class=\"token punctuation\">.</span>size <span class=\"token operator\">=</span> targetData<span class=\"token punctuation\">.</span>size <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            tagDatas<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              text<span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">,</span>\n              size<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n\n      <span class=\"token comment\">// タグ出現回数をインプットにWordCloud生成</span>\n      <span class=\"token comment\">// タグ情報の場合形態素解析せずとも単語ごとの出現回数が算出できるので</span>\n      <span class=\"token comment\">// 形態素解析はスキップしている</span>\n      <span class=\"token function\">createWordCloud</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        words<span class=\"token punctuation\">:</span> tagDatas<span class=\"token punctuation\">,</span>\n        w<span class=\"token punctuation\">:</span> <span class=\"token number\">1200</span><span class=\"token punctuation\">,</span>\n        h<span class=\"token punctuation\">:</span> <span class=\"token number\">630</span><span class=\"token punctuation\">,</span>\n        fontSizePow<span class=\"token punctuation\">:</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">,</span>\n        fontSizeZoom<span class=\"token punctuation\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n        padding<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>tagSvg <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// タグをインプットにしたSVGが出来上がる</span>\n\n        <span class=\"token comment\">// 記事全文文字列をインプットに単語出現回数を算出</span>\n        <span class=\"token function\">createWordCount</span><span class=\"token punctuation\">(</span>alltext<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>data <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n            <span class=\"token comment\">// 記事全文の単語出現回数をインプットにWordCloud生成</span>\n            <span class=\"token keyword\">return</span> <span class=\"token function\">createWordCloud</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              words<span class=\"token punctuation\">:</span> data<span class=\"token punctuation\">,</span>\n              w<span class=\"token punctuation\">:</span> <span class=\"token number\">1200</span><span class=\"token punctuation\">,</span>\n              h<span class=\"token punctuation\">:</span> <span class=\"token number\">630</span><span class=\"token punctuation\">,</span>\n              fontSizePow<span class=\"token punctuation\">:</span> <span class=\"token number\">0.6</span><span class=\"token punctuation\">,</span>\n              fontSizeZoom<span class=\"token punctuation\">:</span> <span class=\"token number\">3.1</span><span class=\"token punctuation\">,</span>\n              padding<span class=\"token punctuation\">:</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>textSvg <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 記事全文をインプットにしたSVGが出来上がる</span>\n\n            <span class=\"token comment\">// ページ生成時にSVGをContextのプロパティとして渡す</span>\n            <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              path<span class=\"token punctuation\">:</span> <span class=\"token string\">'/map/'</span><span class=\"token punctuation\">,</span>\n              component<span class=\"token punctuation\">:</span> postRelationMapPage<span class=\"token punctuation\">,</span>\n              context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n                allPostRelations<span class=\"token punctuation\">,</span>\n                wordCloudText <span class=\"token punctuation\">:</span> textSvg<span class=\"token punctuation\">,</span>\n                wordCloudTag<span class=\"token punctuation\">:</span> tagSvg<span class=\"token punctuation\">,</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\">// すべてのcreatePageを呼び終わったあとにresolveを呼んで処理終了</span>\n            <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'OK'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * ２つの単語の大文字小文字の違いをカウントする\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">countDiff</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> a\n    <span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>charA<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> charA <span class=\"token operator\">===</span> b<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">/**\n * 指定した文字列を形態素解析して単語ごとの出現回数を返す\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">createWordCount</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// よく出る言い回しでWordCloudから除外したい単語を列挙  </span>\n  <span class=\"token keyword\">const</span> excludeWords <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'指定'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'時'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'追加'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/** (略)除外したい単語 */</span>\n  <span class=\"token punctuation\">]</span>\n\n\n  <span class=\"token comment\">/** kuromoji.jsにバンドルされている辞書の格納場所 */</span>\n  <span class=\"token keyword\">const</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">'node_modules/kuromoji/dict'</span>\n\n  <span class=\"token comment\">/** WordCloudでカウントする品詞（助詞・助動詞などは省く） */</span>\n  <span class=\"token keyword\">const</span> <span class=\"token constant\">TARGET_POS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'名詞'</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token comment\">/** kuromoji.jsで該当プロパティの値が存在しない場合に設定されている値 */</span>\n  <span class=\"token keyword\">const</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">=</span> <span class=\"token string\">'*'</span>\n\n  <span class=\"token comment\">// kuromoji.jsで形態素解析</span>\n  <span class=\"token comment\">// 単語ごとの出現回数を出力</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    kuromoji<span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> dicPath<span class=\"token punctuation\">:</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> tokenizer<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// 単語ごとの出現回数を出力</span>\n      <span class=\"token keyword\">const</span> words <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span><span class=\"token function\">tokenize</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> <span class=\"token constant\">TARGET_POS</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> t<span class=\"token punctuation\">.</span>basic_form <span class=\"token operator\">===</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">?</span> t<span class=\"token punctuation\">.</span>surface_form <span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">.</span>basic_form<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// 大文字と小文字を区別せず出現回数をカウントする</span>\n          <span class=\"token keyword\">const</span> upperText <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>excludeWords<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>upperText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> data\n          <span class=\"token punctuation\">}</span>\n\n          <span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">=></span> c<span class=\"token punctuation\">.</span>text <span class=\"token operator\">===</span> upperText<span class=\"token punctuation\">)</span>\n\n          <span class=\"token comment\">// 出現回数は大文字小文字を区別しないが、実際の生の単語は後の処理で使うためとっておく</span>\n          <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            target<span class=\"token punctuation\">.</span>size <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>size <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>target<span class=\"token punctuation\">.</span>rawTexts<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              target<span class=\"token punctuation\">.</span>rawTexts<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            data<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              text<span class=\"token punctuation\">:</span> upperText<span class=\"token punctuation\">,</span>\n              rawTexts<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> text <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n              size<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n          <span class=\"token keyword\">return</span> data\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>data <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n          <span class=\"token comment\">// 上記処理で保持しておいた生の単語をもとに、一番大文字が多い単語をWordCloudの単語として採用する</span>\n          <span class=\"token comment\">// 例えばGatsbyとgatsbyであればGatsbyを採用</span>\n          <span class=\"token keyword\">const</span> almostSameText <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>rawTexts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>text <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n                text<span class=\"token punctuation\">,</span>\n                diff<span class=\"token punctuation\">:</span> <span class=\"token function\">countDiff</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n              <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a<span class=\"token punctuation\">.</span>diff <span class=\"token operator\">&lt;=</span> b<span class=\"token punctuation\">.</span>diff <span class=\"token operator\">?</span> a <span class=\"token punctuation\">:</span> b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 大文字に近いほうを採用する</span>\n            <span class=\"token punctuation\">.</span>text\n          \n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n            text<span class=\"token punctuation\">:</span> almostSameText<span class=\"token punctuation\">,</span>\n            size<span class=\"token punctuation\">:</span> data<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * 単語出現回数をもとにWordCloudのSVG文字列を返す\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">createWordCloud</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  words<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 単語出現回数</span>\n  w<span class=\"token punctuation\">,</span> <span class=\"token comment\">// SVGの幅(単位px)</span>\n  h<span class=\"token punctuation\">,</span> <span class=\"token comment\">// SVGの高さ(単位px)</span>\n  fontSizePow<span class=\"token punctuation\">,</span> <span class=\"token comment\">// WordCloudの文字の大きさの比率調整用係数</span>\n  fontSizeZoom<span class=\"token punctuation\">,</span> <span class=\"token comment\">// WordCloudの文字の大きさの係数</span>\n  padding<span class=\"token punctuation\">,</span> <span class=\"token comment\">// WordCloudの文字間の隙間</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// D3-Cloudによる解析</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">cloud</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">canvas</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">createCanvas</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">words</span><span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>word <span class=\"token operator\">=></span> word<span class=\"token punctuation\">.</span>size <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 出現回数に応じて縦か横向きに表示</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fontWeight</span><span class=\"token punctuation\">(</span>word <span class=\"token operator\">=></span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">,</span> fontSizePow<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> fontSizeZoom<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fontSize</span><span class=\"token punctuation\">(</span>word <span class=\"token operator\">=></span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">,</span> fontSizePow<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> fontSizeZoom<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">font</span><span class=\"token punctuation\">(</span><span class=\"token string\">'meiryo'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">padding</span><span class=\"token punctuation\">(</span>padding<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> wordsForCloud <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>wordsForCloud<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// d3.jsによる解析</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>wordsForCloud <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">/** 仮想DOM */</span>\n      <span class=\"token keyword\">const</span> document <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JSDOM</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`&lt;body>&lt;/body>`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document\n\n      d3<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'svg'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ui fluid image'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'viewBox'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`0 0 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>w<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>h<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>w<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>h<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>wordsForCloud<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-size'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>size<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px`</span></span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-family'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> d<span class=\"token punctuation\">.</span>font<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token string\">`translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>x<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>y<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)rotate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>rotate<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fill'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> d3<span class=\"token punctuation\">.</span>schemeCategory10<span class=\"token punctuation\">[</span>i <span class=\"token operator\">%</span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text-anchor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'middle'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>d <span class=\"token operator\">=></span> d<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span>\n      \n      <span class=\"token comment\">// 最終的にSVGの文字列を返す</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>自分のブログにWordCloudを導入したいと思い立ち、WordCloudについて3回にわたりブログを書いてきましたが、各種ライブラリのおかげで、すんなりと導入できました。\n人に自分のブログを紹介するときのネタとしてはとても効果的だと思います。<br/>\nなお形態素解析やWordCloud生成は重い処理なので、ビルドに時間がかかるようになってしまいますが、画面表示に関してはパフォーマンスに影響はありません。<br/>\nあと本来であればプラグイン化して配布したいところですが、プラグイン化のためには、まだまだ汎用性を高る必要があって、それは今後の課題です🍅</p>","fields":{"slug":"/wordcloud-in-gatsby-blog","title":"Gatsby製ブログにWordCloudを導入","date":"2019-05-11T17:00:00.000+09:00","excerpt":"なにこれ前回記事ではNode.jsでWordCloudを出力しました。今回は、前回のサンプルをベースに自分のブログ（Gatsby製のブログ）にWordCloudを取り入れてみたので、その時の実装方法のメモです。※ソースコードは以下です。ht...","tags":["Gatsby","kuromoji.js","d3.js","d3Cloud","形態素解析","WordCloud"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2019/05/wordcloud-in-gatsby-blog.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"/wordcloud-with-kuromoji-d3cloud-react\">前回記事</a>ではReactでWordCloudを出力しました。しかし実際は、過去大量データから出力するようなツールとして使えたほうが便利です。\nそこで<a href=\"https://github.com/Takumon/playbox2019/blob/master/react-kuromoji-sample/src/App.js\">前回のサンプル</a>をベースにNode.jsでWordCloudのSVGファイルを出力するサンプルを作成しました。\n今回はサンプルの実装方法をポイントと合わせてご紹介します。</p>\n<p>※サンプルは以下に置いております。\n<a href=\"https://github.com/Takumon/playbox2019/blob/master/node-kuromoji-d3cloud-sample/index.js\">https://github.com/Takumon/playbox2019/blob/master/node-kuromoji-d3cloud-sample/index.js</a></p>\n<p>この記事は、<a href=\"https://gw-advent.9wick.com/calendars/9\">challenge-every-month全員でアウトプット芸人 Advent Calendar</a> 9日目の記事です。前日の記事は、<a href=\"https://twitter.com/kojirock5260\">@kojirock5260</a>さんの記事でした。</p>\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fkojirooooocks.hatenablog.com%2Fentry%2F2019%2F05%2F04%2F163742\" style=\"border: 0; width: 100%; height: 190px;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe>\n<h2 id=\"処理手順\"><a href=\"#%E5%87%A6%E7%90%86%E6%89%8B%E9%A0%86\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>処理手順</h2>\n<p>以下4ステップです。</p>\n<ol>\n<li>kuromoji.jsで文章を解析して単語出現回数をデータ化</li>\n<li>\n<p>D3-Cloudで上記データに以下情報追加</p>\n<ol>\n<li>フォントの大きさ</li>\n<li>フォントの回転位置</li>\n<li>フォントの種類</li>\n<li>表示位置</li>\n</ol>\n</li>\n<li>d3.jsで配色を決定しSVGを<strong>仮想DOM</strong>に描画</li>\n<li>SVGをファイル出力</li>\n</ol>\n<h2 id=\"実装のポイント\"><a href=\"#%E5%AE%9F%E8%A3%85%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装のポイント</h2>\n<h3 id=\"1-d3-cloud--canvasだけでは不十分なのでd3jsを使う\"><a href=\"#1-d3-cloud--canvas%E3%81%A0%E3%81%91%E3%81%A7%E3%81%AF%E4%B8%8D%E5%8D%81%E5%88%86%E3%81%AA%E3%81%AE%E3%81%A7d3js%E3%82%92%E4%BD%BF%E3%81%86\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. D3-Cloud + Canvasだけでは不十分なのでd3.jsを使う</h3>\n<p>最初は、D3-CloudでCanvasを使えるので、<a href=\"https://github.com/Automattic/node-canvas\">node-canvas</a>を使えばNode.jsでも画像を生成できるのでは？と考えたのですが、やってみるとうまくいきません。以下のような画像が出力されます。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5c0dfead862a7dffa4699ce66baf1ba5/feb23/wordcloud-by-canvas.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 68.43455945252353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABcRAAAXEQHKJvM/AAACb0lEQVQ4y2VU7UrjQBTtG+0+wQo+zSLsD0FsBP/5FL6DoIIb8dfuf8FCwdraNknTpq2dpk36ocZM7tk5GdNd2MDlzNy5c+6Zey+pLa6ufs0ajRsVRa66u3PVfO6qiwtXXV66qtt1VRy7Kghc1em46vraVc2m9TF+NLLYat2+9Ho33w8Pv9bQagHDIcrv+dkifb6P3Xd/D2QZEMdAUfz1v75afHgAPA8n5+f7Ne5NSCZZpqUotAD/m4hFrbXkuZY0tZgkWkajXIKgKOL4o352tldjdtluNXo9YDIB3t+B2Qzo94HBAHh5AR4fgU4HaDSA6RRoNoEwLOOk2xWMxxSlnePjvVIhs++esdkA7bYl73axKwmJ/30uv9WKd6V8pVHvOI4hNEGyXGpst4ZW27pQ4ceHrRuRfip7ewOSBFgsgDQtz2SzEYooCU9OPhWuVrq8THVURkKugwB4erI+ElQJ12ubzJDLbCZcF6b+ViGzrNea8stLNF5gLZdLYD63CfLcEvMlVErF5sw0SHi3MKKc09NPQipkE6p6VQ0iGRMxAUeGjWEt+WT6DbkRI0xQmMZaQhHIZKLLuYsiS0YbjSyJUtZYOyahn6VgvEEZDoX3ijDUTr1uCFmHdluL54lEkYjvi5ktYWC5H4/tmhYEIoOBGAEWw7D0l2MznWrn6MgQUnYUZaJUbgJzQ5CbYIscWvrm89wUP5fFIpc4zmU6tZgkpZkS6CJJsnq9/q22mz0Wmh1kM2jVnsaGVD52l1jF8Zw+g0bhfm3jeb8Tz7tJ+323NPMjSD3PrgcDi77vpr2exeqcGIbW5/u3yzD8+ePg4Msfq80DXTye9xsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wordcloud by canvas\"\n        title=\"\"\n        src=\"/static/5c0dfead862a7dffa4699ce66baf1ba5/42603/wordcloud-by-canvas.png\"\n        srcset=\"/static/5c0dfead862a7dffa4699ce66baf1ba5/f931c/wordcloud-by-canvas.png 200w,\n/static/5c0dfead862a7dffa4699ce66baf1ba5/e8031/wordcloud-by-canvas.png 400w,\n/static/5c0dfead862a7dffa4699ce66baf1ba5/42603/wordcloud-by-canvas.png 800w,\n/static/5c0dfead862a7dffa4699ce66baf1ba5/feb23/wordcloud-by-canvas.png 1169w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>そのためD3-Cloud + Canvasだけの組み合わせはあきらめて、\n<a href=\"https://github.com/Yoctol/react-d3-cloud\">react-d3-cloud</a>の内部実装と同じようにd3.jsを使ってSVGを描画して、そこからファイル出力処理するようにしました。</p>\n<h3 id=\"2-domエミュレート用にnode-canvasとjsdomを使う\"><a href=\"#2-dom%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%83%88%E7%94%A8%E3%81%ABnode-canvas%E3%81%A8jsdom%E3%82%92%E4%BD%BF%E3%81%86\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. DOMエミュレート用にnode-canvasとjsdomを使う</h3>\n<p><a href=\"https://github.com/d3/d3\">d3.js</a>は、ブラウザ上での動作を前提としているためDOMが必要です。Node.jsでDOMをエミュレートするために<a href=\"https://github.com/jsdom/jsdom\">jsdom</a>を使いました。<br/>\n<a href=\"https://github.com/jasondavies/d3-cloud\">D3-Cloud</a>も同様にCanvasの指定が必須です。\nそのためCanvasをエミュレートする<a href=\"https://github.com/Automattic/node-canvas\">node-canvas</a>を使いました。</p>\n<h2 id=\"実装\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h2>\n<p>ポイントを踏まえたうえで4ステップごとに実装方法を説明します。</p>\n<h3 id=\"1-kuromojijsで文章を解析して単語出現回数をデータ化\"><a href=\"#1-kuromojijs%E3%81%A7%E6%96%87%E7%AB%A0%E3%82%92%E8%A7%A3%E6%9E%90%E3%81%97%E3%81%A6%E5%8D%98%E8%AA%9E%E5%87%BA%E7%8F%BE%E5%9B%9E%E6%95%B0%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%E5%8C%96\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. kuromoji.jsで文章を解析して単語出現回数をデータ化</h3>\n<p>kuromoji.jsによるデータ加工については<a href=\"/wordcloud-with-kuromoji-d3cloud-react#1-%E6%96%87%E7%AB%A0%E3%82%92%E8%A7%A3%E6%9E%90%E3%81%97%E3%81%A6%E5%8D%98%E8%AA%9E%E5%87%BA%E7%8F%BE%E5%9B%9E%E6%95%B0%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%E5%8C%96-1\">前回記事のReactアプリ</a>と同様です。\n今回はブラウザではなくNode.jsで動かすのでkuromoji.jsの辞書はnode_modules配下から移動する必要はありません。</p>\n<div class=\"gatsby-code-title\">kuromoji.jsによる解析処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> kuromoji <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kuromoji'</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\">// インプットとなる文章(長文につき一部省略)</span>\n<span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`\nそこも場合もうその病気らに対して旨の時がしんませ。\n単に事実に使用方はどうかその応用たないでもが思いてならないがも発展思いうべきて、\nあいにくにもなるだなですた。\n・・・\n`</span></span>\n\n<span class=\"token comment\">// kuromoji.jsにバンドルされている辞書のフォルダパス</span>\n<span class=\"token comment\">// kuromoji.jsは形態素解析用関数を生成する際に辞書を読み込む</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">'node_modules/kuromoji/dict'</span>\n\n<span class=\"token comment\">// WordCloudの情報として抽出する品詞（助詞、助動詞などは意味がないので拾わない）</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TARGET_POS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'名詞'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'動詞'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'形容詞'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">// kuromoji.jsの解析結果の値で特に値がない場合は以下の文字が設定される</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">=</span> <span class=\"token string\">'*'</span>\n\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// kuromoji.jsによる解析処理</span>\n  <span class=\"token keyword\">const</span> words <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 辞書を読み混んでトークナイザー（形態素解析するための関数）を生成</span>\n    kuromoji<span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> dicPath<span class=\"token punctuation\">:</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> tokenizer<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// テキストを引数にして形態素解析</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>tokenizer<span class=\"token punctuation\">.</span><span class=\"token function\">tokenize</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// pos（品詞）を参照し、'名詞', '動詞', '形容詞'のみを抽出</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> <span class=\"token constant\">TARGET_POS</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// 単語を抽出(basic_formかsurface_formに単語が存在する)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> t<span class=\"token punctuation\">.</span>basic_form <span class=\"token operator\">===</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">?</span> t<span class=\"token punctuation\">.</span>surface_form <span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">.</span>basic_form<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// [{text: 単語, size: 出現回数}]の形にReduce</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">=></span> c<span class=\"token punctuation\">.</span>text <span class=\"token operator\">===</span> text<span class=\"token punctuation\">)</span>\n\n          <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            target<span class=\"token punctuation\">.</span>size <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>size <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            data<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              text<span class=\"token punctuation\">,</span>\n              size<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n          <span class=\"token keyword\">return</span> data\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n\n  <span class=\"token comment\">// D3-Cloudによる解析処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// d3.jsによる描画処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// SVGファイル出力処理</span>\n  <span class=\"token comment\">// (略)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br/>\n<p>これで以下のような情報が得られます。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span> \n  <span class=\"token punctuation\">{</span>\n    text<span class=\"token punctuation\">:</span> <span class=\"token string\">'相違'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 単語</span>\n    size<span class=\"token punctuation\">:</span> <span class=\"token number\">19</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 出現回数</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<br/>\n<h3 id=\"2-d3-cloudで上記データに以下情報追加\"><a href=\"#2-d3-cloud%E3%81%A7%E4%B8%8A%E8%A8%98%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AB%E4%BB%A5%E4%B8%8B%E6%83%85%E5%A0%B1%E8%BF%BD%E5%8A%A0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. D3-Cloudで上記データに以下情報追加</h3>\n<p>D3-Cloudでは解析情報に以下を追加するだけです。</p>\n<ul>\n<li>フォントの回転位置 ☚自分で定義</li>\n<li>フォントの重み ☚自分で定義</li>\n<li>フォントの大きさ ☚自分で定義</li>\n<li>フォントの種類 ☚自分で定義</li>\n<li>表示位置 ☚D3-Cloudが定義してくれる</li>\n</ul>\n<p>なおD3-CloudはbodyタグかCanvasが必須なので、今回は<a href=\"https://github.com/Automattic/node-canvas\">node-canvas</a>を使います。</p>\n<div class=\"gatsby-code-title\">D3-Cloudによる解析処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> cloud <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d3-cloud'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// Node.jsでCanvasをエミュレートするためnode-canvasを使う</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createCanvas <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'canvas'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Canvasの幅(px)</span>\n<span class=\"token keyword\">const</span> w <span class=\"token operator\">=</span> <span class=\"token number\">1600</span>\n\n<span class=\"token comment\">// Canvasの高さ(px)</span>\n<span class=\"token keyword\">const</span> h <span class=\"token operator\">=</span> <span class=\"token number\">1000</span>\n\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// kuromoji.jsによる解析処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// D3-Cloudによる解析処理</span>\n  <span class=\"token comment\">// D3-Cloudの解析によってwordsForCloudには</span>\n  <span class=\"token comment\">// 出現回数の他にフォントの回転位置、大きさ、重み、種類が追加された状態になる</span>\n  <span class=\"token keyword\">const</span> wordsForCloud <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span>resolve <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">cloud</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// node-canvasを指定する(エラーを防ぐため)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">canvas</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">createCanvas</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// kuromoji.jsの解析結果を指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">words</span><span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの回転位置を指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>word <span class=\"token operator\">=></span> word<span class=\"token punctuation\">.</span>size <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの重みを指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fontWeight</span><span class=\"token punctuation\">(</span>word <span class=\"token operator\">=></span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">,</span> <span class=\"token number\">1.3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの大きさを指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fontSize</span><span class=\"token punctuation\">(</span>word <span class=\"token operator\">=></span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">,</span> <span class=\"token number\">1.3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの種類を指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">font</span><span class=\"token punctuation\">(</span><span class=\"token string\">'meiryo'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 加工終了時のイベント登録、解析結果をd3.jsでの描画に引き継ぐ</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 解析開始</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// d3.jsによる描画処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// SVGファイル出力処理</span>\n  <span class=\"token comment\">// (略)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br/>\n<p>これで以下のような情報が得られます。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> \n    text<span class=\"token punctuation\">:</span> <span class=\"token string\">'相違'</span><span class=\"token punctuation\">,</span>\n    size<span class=\"token punctuation\">:</span> <span class=\"token number\">19</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// D3-Cloudによって追加された情報</span>\n    font<span class=\"token punctuation\">:</span> <span class=\"token string\">'meiryo'</span><span class=\"token punctuation\">,</span>\n    style<span class=\"token punctuation\">:</span> <span class=\"token string\">'normal'</span><span class=\"token punctuation\">,</span>\n    weight<span class=\"token punctuation\">:</span> <span class=\"token number\">19.952623149688797</span><span class=\"token punctuation\">,</span>\n    rotate<span class=\"token punctuation\">:</span> <span class=\"token number\">90</span><span class=\"token punctuation\">,</span>\n    padding<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    width<span class=\"token punctuation\">:</span> <span class=\"token number\">64</span><span class=\"token punctuation\">,</span>\n    height<span class=\"token punctuation\">:</span> <span class=\"token number\">59</span><span class=\"token punctuation\">,</span>\n    xoff<span class=\"token punctuation\">:</span> <span class=\"token number\">192</span><span class=\"token punctuation\">,</span>\n    yoff<span class=\"token punctuation\">:</span> <span class=\"token number\">957</span><span class=\"token punctuation\">,</span>\n    x1<span class=\"token punctuation\">:</span> <span class=\"token number\">32</span><span class=\"token punctuation\">,</span>\n    y1<span class=\"token punctuation\">:</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span>\n    x0<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span>\n    y0<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">22</span><span class=\"token punctuation\">,</span>\n    hasText<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    x<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">199</span><span class=\"token punctuation\">,</span>\n    y<span class=\"token punctuation\">:</span> <span class=\"token number\">294</span> \n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3 id=\"3-d3jsで配色を決定しsvgを仮想domに描画\"><a href=\"#3-d3js%E3%81%A7%E9%85%8D%E8%89%B2%E3%82%92%E6%B1%BA%E5%AE%9A%E3%81%97svg%E3%82%92%E4%BB%AE%E6%83%B3dom%E3%81%AB%E6%8F%8F%E7%94%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. d3.jsで配色を決定しSVGを<strong>仮想DOM</strong>に描画</h3>\n<p>D3-Cloudの解析情報に文字色や配置情報を追加してSVGを仮想DOM上に描画します。\n仮想DOMは<a href=\"https://github.com/jsdom/jsdom\">jsdom</a>を使って生成します。<br/>\nフォント色のテーマは<code class=\"language-text\">schemeCategory10</code>を使いました。他にもいろいろテーマがあるようです。<br/>\n参考：<a href=\"https://wizardace.com/d3v5-scale-chromatic/\">D3.js v5 カラーテーマまとめ (d3-scale-chromatic) – データビジュアライゼーション・ラボ</a></p>\n<div class=\"gatsby-code-title\">d3.jsによるSVG描画処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> d3 <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d3'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">JSDOM</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jsdom\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 仮想documentオブジェクトを生成</span>\n<span class=\"token keyword\">const</span> document <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JSDOM</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`&lt;body>&lt;/body>`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document\n\n<span class=\"token comment\">// WordCloud描画領域の幅(px) ※Canvasのやつを使いまわし</span>\n<span class=\"token keyword\">const</span> w <span class=\"token operator\">=</span> <span class=\"token number\">1600</span>\n\n<span class=\"token comment\">// WordCloud描画領域の高さ(px) ※Canvasのやつを使いまわし</span>\n<span class=\"token keyword\">const</span> h <span class=\"token operator\">=</span> <span class=\"token number\">1000</span>\n\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// kuromoji.jsによる形態素解析</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// D3-Cloudによる解析処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// d3.jsによるSVG描画処理</span>\n  <span class=\"token comment\">// 仮想DOMのbodyタグを指定</span>\n  d3<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// SVG形式で仮想DOMに描画</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'svg'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// SVGのプロパティもろもろ指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ui fluid image'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'viewBox'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`0 0 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>w<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>h<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// SVGのグループ要素追加して</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// SVGを中央寄せ</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>w<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>h<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// テキスト要素にD3-Cloudによる解析結果を追加</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>wordsForCloud<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 領域を新規作成し、テキスト要素追加</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの大きさは解析結果通りに指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-size'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>size<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの種類は解析結果通りに指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-family'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> d<span class=\"token punctuation\">.</span>font<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの配色は、schemeCategory10を指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fill'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> d3<span class=\"token punctuation\">.</span>schemeCategory10<span class=\"token punctuation\">[</span>i <span class=\"token operator\">%</span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// テキストの真ん中を表示位置のポイントに指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text-anchor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'middle'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 位置と回転位置は解析結果通りに指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token string\">`translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>x<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>y<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)rotate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>rotate<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 単語は解析結果通りに指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>d <span class=\"token operator\">=></span> d<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// SVGファイル出力処理</span>\n    <span class=\"token comment\">// (略)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br/>\n<h3 id=\"4-svgをファイル出力\"><a href=\"#4-svg%E3%82%92%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%87%BA%E5%8A%9B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. SVGをファイル出力</h3>\n<p>仮想DOMに描画したSVGをファイル出力します。</p>\n<div class=\"gatsby-code-title\">d3.jsによるSVG描画処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// kuromoji.jsによる形態素解析</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// D3-Cloudによる解析処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// d3.jsによるSVG描画処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// 仮想DOMに描画されたSVGをファイル出力</span>\n  fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'wordcloud.svg'</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br/>\n<p>すると以下のようなファイルが出力されます。</p>\n<div class=\"gatsby-highlight\" data-language=\"html:svgファイルの中身\"><pre class=\"language-html:svgファイルの中身\"><code class=\"language-html:svgファイルの中身\">&lt;svg class=&quot;ui fluid image&quot; viewBox=&quot;0 0 1600 1000&quot; width=&quot;100%&quot; height=&quot;100%&quot;&gt;\n  &lt;g transform=&quot;translate(800,500)&quot;&gt;\n    &lt;text style=&quot;font-size: 466px; font-family: meiryo; fill: #1f77b4;&quot; transform=&quot;translate(48, 35)rotate(0)&quot; text-anchor=&quot;middle&quot;&gt;ある&lt;/text&gt;\n    &lt;text style=&quot;font-size: 269px; font-family: meiryo; fill: #ff7f0e;&quot; transform=&quot;translate(460, 15)rotate(90)&quot; text-anchor=&quot;middle&quot;&gt;よう&lt;/text&gt;&lt;text style=&quot;font-size: 245px; font-family: meiryo; fill: #2ca02c;&quot; transform=&quot;translate(-263, -290)rotate(0)&quot; text-anchor=&quot;middle&quot;&gt;云う&lt;/text&gt;\n    &lt;text style=&quot;font-size: 191px; font-family: meiryo; fill: #d62728;&quot; transform=&quot;translate(-265, 193)rotate(0)&quot; text-anchor=&quot;middle&quot;&gt;それ&lt;/text&gt;\n   ・\n   ・\n   ・\n  &lt;/g&gt;\n&lt;/svg&gt;</code></pre></div>\n<br/>\n<p>描画すると以下のようになります。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8a36774cbb4d037a3d625981f5f8af21/7781b/wordcloud.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.92315959161742%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACn0lEQVQ4y41Ty27aQBTlm7uousqqldouuqiqquori1ap0rxQWuXZhKAICISJIbYhEBwwNgSDPTbmDZ45HdNGoavmSkcz9/rO8RnNPRFZlj/5vq9SSs9dzyPUcQjtdIjIiUNd4onawO8Sv+uRnoAj6h3bIR2HEtd1F3HhOM55pNlsprAQLJEAy2YBSQIKyrzWHgJTsXpT/DcihmHE5kRBELazfkFlfUVi/UuVST9jbONIYd/zLVaw+kwxPZbTHRYlJtsiBgMHC88IBOEqYhoxTTMeEnLOA1GAYZioynlcX5Xx7iCPx2sJvI+m4WtVlGgXSkXDi+gFllO6YBmjqldhWRYXPBiPx8E/hOKPcLo2rksKqFbGt2QJTzYJXq2dYfOAIN6w8FHUltYy2M7c4KhooG7ouG1ZvGW1MZlO7wmFulA2CnYFA/8Ge5cWnm7n8WglAegKlo+ziOVyeLMvYeVEwWW+itd7GkZa+D3B5xyzyT2hkBiMZwHOvS7oZIgTxcDLXRW/5Ao2Ygre7h+jYXzBsZrBs3WCpdUzJMsU0A4RxJ9zlHbEA9gLVwYP+IwhXbahOz76po5eowVbs6BVOqhr4orqNrJmDOkawVd5HfWyClorYdTJcN5rhq+zoFAk3c4QuUMdRrGFy0QdLc1GIaXBruhQdIIfhV3Eaykk6idYlj9AIqfwKiqGvSLntVOh0Fkk5MGoP4FnTzBqVuBe1dFQhLJyS7ywhXSJIClHkS3u4LbtCKUZjKYMrJEHk1c51C2wAQ3u51DMkCD9M1eexjh1WV/tsFGFskHBZk3FZmPtgo1NldH29G7+GA8xcMVMMjEmmIZOSeIhMXtQFyLCy5+Fl4uhd4UfpTkonYPe5Z5A15Oo9zcXoGHPfE/v9jnhZfIbALe0xkdR0eEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wordcloud\"\n        title=\"\"\n        src=\"/static/8a36774cbb4d037a3d625981f5f8af21/42603/wordcloud.png\"\n        srcset=\"/static/8a36774cbb4d037a3d625981f5f8af21/f931c/wordcloud.png 200w,\n/static/8a36774cbb4d037a3d625981f5f8af21/e8031/wordcloud.png 400w,\n/static/8a36774cbb4d037a3d625981f5f8af21/42603/wordcloud.png 800w,\n/static/8a36774cbb4d037a3d625981f5f8af21/5b8b9/wordcloud.png 1200w,\n/static/8a36774cbb4d037a3d625981f5f8af21/c7ea5/wordcloud.png 1600w,\n/static/8a36774cbb4d037a3d625981f5f8af21/7781b/wordcloud.png 1861w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>Node.jsでWordCloudのSVGファイルを出力する方法についてご紹介しました。\n今回の実装で、ブラウザ処理はnode-canvasとjsdomを使えばNode.jsでも再現できることがわかったので、いろんな場面で応用できそうです。\n次回は、今回の実装をベースにして自分のブログのWordCloudを生成してみようと思います🍅</p>","fields":{"slug":"/wordcloud-with-kuromoji-d3cloud-nodejs","title":"Node.js + kuromoji.js + D3-CloudでWordCloudの画像を出力","date":"2019-05-04T18:00:00.000+09:00","excerpt":"なにこれ前回記事ではReactでWordCloudを出力しました。しかし実際は、過去大量データから出力するようなツールとして使えたほうが便利です。そこで前回のサンプルをベースにNode.jsでWordCloudのSVGファイルを出力するサン...","tags":["Node.js","kuromoji.js","d3.js","d3Cloud","形態素解析","WordCloud"],"keywords":["WordCloud"],"thumbnail":"thumbnail/2019/05/wordcloud-with-kuromoji-d3cloud-nodejs.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>WordCloudをJSだけで生成したい。Pythonとか使わずにフロントエンドだけでやりたい。というモチベーションで、\n<a href=\"https://github.com/takuyaa/kuromoji.js/\">kuromoji.js</a>と<a href=\"https://github.com/jasondavies/d3-cloud\">D3-Cloud</a>を使って文字列をインプットにWordCloudを描画するReactアプリを作ってみました。今回はそのやり方についてご紹介します。</p>\n<p>※サンプルコードは以下に置いております。\n<a href=\"https://github.com/Takumon/playbox2019/blob/master/react-kuromoji-sample/src/App.js\">https://github.com/Takumon/playbox2019/blob/master/react-kuromoji-sample/src/App.js</a></p>\n<h2 id=\"wordcloudの作り方（原理）\"><a href=\"#wordcloud%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9%EF%BC%88%E5%8E%9F%E7%90%86%EF%BC%89\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WordCloudの作り方（原理）</h2>\n<p>WordCloudは文章をインプットにして画像をアウトプットします。\nその過程は2つに分かれます。</p>\n<h3 id=\"1-文章を解析して単語出現回数をデータ化\"><a href=\"#1-%E6%96%87%E7%AB%A0%E3%82%92%E8%A7%A3%E6%9E%90%E3%81%97%E3%81%A6%E5%8D%98%E8%AA%9E%E5%87%BA%E7%8F%BE%E5%9B%9E%E6%95%B0%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%E5%8C%96\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 文章を解析して単語出現回数をデータ化</h3>\n<div class=\"gatsby-code-title\">たとえばこんな文章を...</div>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">そこも場合もうその病気らに対して旨の時がしんませ。単に事実に使用方はどうかその応用たないでもが思いてならないがも発展思いうべきて、あいにくにもなるだなですた。\n差が向いんものは何だか翌日からしきりにんなけれう。もちろんネルソンさんで養成道具一応束縛に致しませ示威この力誰か講演をというご妨害ないますですうば、\n...</code></pre></div>\n<p>↓↓</p>\n<div class=\"gatsby-code-title\">単語と出現回数のデータに加工します</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"そこ\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">14</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"場合\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">11</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"うそ\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"病気\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ら\"</span><span class=\"token punctuation\">,</span>      value<span class=\"token punctuation\">:</span> <span class=\"token number\">17</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"旨\"</span><span class=\"token punctuation\">,</span>      value<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"時\"</span><span class=\"token punctuation\">,</span>      value<span class=\"token punctuation\">:</span> <span class=\"token number\">43</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"しん\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"事実\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"使用\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"方\"</span><span class=\"token punctuation\">,</span>      value<span class=\"token punctuation\">:</span> <span class=\"token number\">41</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"応用\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ない\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">175</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"思う\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">39</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"なる\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">99</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"発展\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">13</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"思い\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"くる\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"差\"</span><span class=\"token punctuation\">,</span>      value<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"向く\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h3 id=\"2-データをもとにイイ感じの画像出力\"><a href=\"#2-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%82%E3%81%A8%E3%81%AB%E3%82%A4%E3%82%A4%E6%84%9F%E3%81%98%E3%81%AE%E7%94%BB%E5%83%8F%E5%87%BA%E5%8A%9B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. データをもとにイイ感じの画像出力</h3>\n<p>単語と出現回数の他に、以下の値を何らかの形で決定します。</p>\n<ul>\n<li>フォントの大きさ</li>\n<li>フォントの回転位置</li>\n<li>フォントの種類</li>\n<li>フォントの色</li>\n<li>表示位置</li>\n</ul>\n<p>大体のWordCloud系ライブラリは出現回数が多い単語を大きく中心に配置し、\nその周りに敷き詰めるように他の単語を配置します。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/704eab6cfb822de63938be47f6ccc745/33c1a/wordcloud-sample.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 86.17511520737328%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEN0lEQVQ4yyWU2ZLaOBiFedh5jKnKzTzAZKlUkqlM1WRykUy2Jkl3oE3T0BCaZnWz2CzeMDYI4xVjVokz6pkLVUkq1dH5z/9JqVqt+ps8UEv67bcsEV4JknQujPWyYNYtYd7VhPPmUPhQuBc+l7vCuKkKYlkXKgVFsHq2oMuGIM0sQTLMS9G08oXr/B8pfaJmElDAk4GggwPtANAA38GBzypagCtljaK+BjYJMDWwnS4Al48dsOCHrpMDsntAnVrDlKKrX2J46FjuPtNzqBN6FPXXdFN6TOP+GUX5Gd1rt9RZULpW7ikdXfO9x5QJjyghEZ30lrQer4/fnBX0yaTFBfX0ihus6z59faOgSxIwuwX88wu2ioyd2Qda72FrBwTOFofOBZB9BDrMwtQXELtLlMOI1dd7qBNTTOnKIL3ZbuG5SzoxfUx9XkP5d5zyjxG5wF6q4zD+jiD2cGp9xKn5N0Iy5Rf1wC6f4qrt4OncZe+5Q8WYiKmBYaaxMQE5TQ9yxEOZAtWXYPWPWBMeYr+AQ+UJ9pEKGHdA8w1Y7S9suzkcf76G2rfQNm023B5h2JaYMq1ZGojBnDlddV3stBjHmQ8ot3B5ST+aI0Did9oq4rmBXeMTWOUVj+EtwvMzxIUbhLkLhukceksRUxPDSD+0a+25lHgBvAmB1mhi1GzAHUn40LDx5X4JlkSg6xAnsQ10qtisXC74FYmi4Z19wfSlBruucoezB4dAqOvU7XXhzWxIlSLk2xLEXAaRYyPdUPHkUsZZ08DFzQjS3U9g3sLJkXA8HaGM79ghjmDoNhdUlTT4wiczSrhtSzOgik1M+h30Sjc4xhZahoVfP/bxtqTiTV2GZi4QnIDVbIYke4koV2TeeIT+fVtMGaqaDuIjnNDnDI7h+3MMK2W0C1ewe1XkJQvP8yr0iCPlVPFO+hOZ8Rl6wQx9R0ZnVMQ+3rLIIZDbXPCBw2H4QHmNRlEFy1kNarOOAS9r1OvgWW6EwF/CUmV8H1zgfe8DvqtZtMZFTDhS91Yf69wVY4MhzAcOp6b5X4Z+4tE4GcI2yxjVb9Et5FC7+AZ7NsdIV7EJYrSsBl7WXnDBDHp6FUG2gFbAX+3XNFvlrtAQRTFlTf8XHIcLmtXSkAyRt7+BXjmPTukaoesiNkwUjDyyhoBz5RxfRmf4oWU4Oh2Qz58QZ/Jst3BQ7Mscm8nk7MgFJ6vloU7qbLQYMF28Z91iiS3sGVsJOeY/f8FUtc9K8k8mKS12J92wxlxmBS9hmqYxz0rTFULkh2Y7Zc/ccyDCet3H1CYgxMRxw2ANtsD2BDoYgIeDcOnxD8bDjrPKfwVsky3SXgL+rhAH19idljxXuZfSFO3NLiFxHM7tuWmTqaIQf7Eg/tIn8dIlG8chh+OO7OKYROuEbOINOUYLkng2WUcrkkQB2SSHubucebe9av5fm6Gzz267ZFMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wordcloud sample\"\n        title=\"\"\n        src=\"/static/704eab6cfb822de63938be47f6ccc745/42603/wordcloud-sample.png\"\n        srcset=\"/static/704eab6cfb822de63938be47f6ccc745/f931c/wordcloud-sample.png 200w,\n/static/704eab6cfb822de63938be47f6ccc745/e8031/wordcloud-sample.png 400w,\n/static/704eab6cfb822de63938be47f6ccc745/42603/wordcloud-sample.png 800w,\n/static/704eab6cfb822de63938be47f6ccc745/33c1a/wordcloud-sample.png 868w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"wordcloudの作り方（実装）\"><a href=\"#wordcloud%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9%EF%BC%88%E5%AE%9F%E8%A3%85%EF%BC%89\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WordCloudの作り方（実装）</h2>\n<p>自前実装の必要はありません。<a href=\"https://github.com/takuyaa/kuromoji.js/\">kuromoji.js</a>と<a href=\"https://github.com/jasondavies/d3-cloud\">D3-Cloud</a>というライブラリを使えば簡単に実装できます。\nさらに<a href=\"https://github.com/Yoctol/react-d3-cloud\">react-d3-cloud</a>というD3-CloudをReactで使うためのライブラリもあったので、それを使ってReactアプリを実装します。</p>\n<h3 id=\"1-文章を解析して単語出現回数をデータ化-1\"><a href=\"#1-%E6%96%87%E7%AB%A0%E3%82%92%E8%A7%A3%E6%9E%90%E3%81%97%E3%81%A6%E5%8D%98%E8%AA%9E%E5%87%BA%E7%8F%BE%E5%9B%9E%E6%95%B0%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%E5%8C%96-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 文章を解析して単語出現回数をデータ化</h3>\n<p>kuromoji.jsは形態素解析で辞書を使います。\nkuromoji.jsをインストールすると辞書がバンドルされています。\nReactで使う場合は以下のように辞書の場所を移動して、辞書をブラウザから読み込めるようにしておく必要があります。</p>\n<div class=\"gatsby-code-title\">辞書をブラウザから読み込める場所にコピー</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cp</span> -a node_modules/kuromoji/dict public/</code></pre></div>\n<br/>\n<p>kuromoji.jsの解析結果は以下のようになります。\n色々ありますが、今回は<code class=\"language-text\">pos（品詞）</code>と<code class=\"language-text\">surface_form（表層形）</code>または<code class=\"language-text\">basic_form（基本形）</code>のみを使います。</p>\n<div class=\"gatsby-code-title\">kuromoji.js解析結果の形式</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n  word_id<span class=\"token punctuation\">:</span> <span class=\"token number\">509800</span><span class=\"token punctuation\">,</span>          <span class=\"token comment\">// 辞書内での単語ID</span>\n  word_type<span class=\"token punctuation\">:</span> <span class=\"token string\">'KNOWN'</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\">// 単語タイプ(辞書に登録されている単語ならKNOWN, 未知語ならUNKNOWN)</span>\n  word_position<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>         <span class=\"token comment\">// 単語の開始位置</span>\n  surface_form<span class=\"token punctuation\">:</span> <span class=\"token string\">'黒文字'</span><span class=\"token punctuation\">,</span>    <span class=\"token comment\">// 表層形</span>\n  pos<span class=\"token punctuation\">:</span> <span class=\"token string\">'名詞'</span><span class=\"token punctuation\">,</span>               <span class=\"token comment\">// 品詞</span>\n  pos_detail_1<span class=\"token punctuation\">:</span> <span class=\"token string\">'一般'</span><span class=\"token punctuation\">,</span>      <span class=\"token comment\">// 品詞細分類1</span>\n  pos_detail_2<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>        <span class=\"token comment\">// 品詞細分類2</span>\n  pos_detail_3<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>        <span class=\"token comment\">// 品詞細分類3</span>\n  conjugated_type<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>     <span class=\"token comment\">// 活用型</span>\n  conjugated_form<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>     <span class=\"token comment\">// 活用形</span>\n  basic_form<span class=\"token punctuation\">:</span> <span class=\"token string\">'黒文字'</span><span class=\"token punctuation\">,</span>      <span class=\"token comment\">// 基本形</span>\n  reading<span class=\"token punctuation\">:</span> <span class=\"token string\">'クロモジ'</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\">// 読み</span>\n  pronunciation<span class=\"token punctuation\">:</span> <span class=\"token string\">'クロモジ'</span>  <span class=\"token comment\">// 発音</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span></code></pre></div>\n<br/>\n<p>Reactコンポーネントでは以下のように実装します。</p>\n<div class=\"gatsby-code-title\">テキスト加工処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> kuromoji <span class=\"token keyword\">from</span> <span class=\"token string\">'kuromoji'</span>\n\n<span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`そこも場合もうその病気らに対して旨の時がしんませ。\n単に事実に使用方はどうかその応用たないでもが思いてならないがも発展思いうべきて、\n...\n`</span></span>\n\n<span class=\"token comment\">// 辞書格納フォルダパス</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">'/dict'</span>\n\n<span class=\"token comment\">// WordCloudの情報として抽出する品詞（助詞、助動詞などは意味がないので拾わない）</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TARGET_POS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'名詞'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'動詞'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'形容詞'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">// kuromoji.jsの解析結果の値で特に値がない場合は以下の文字が設定される</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">=</span> <span class=\"token string\">'*'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// kuromoji.jsによる形態素解析は非同期なので</span>\n  <span class=\"token comment\">// 解析結果はstateのプロパティとしてコンストラクタで初期化しておく</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n      dataForD3Cloud<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 辞書を読み混んでトークナイザー（形態素解析するための関数）を生成</span>\n    kuromoji<span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> dicPath<span class=\"token punctuation\">:</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> tokenizer<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// テキストを引数にして形態素解析</span>\n      <span class=\"token keyword\">const</span> tokens <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span><span class=\"token function\">tokenize</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n\n      <span class=\"token comment\">// 解析結果から単語と出現回数を抽出</span>\n      <span class=\"token keyword\">const</span> dataForD3Cloud <span class=\"token operator\">=</span> tokens\n        <span class=\"token comment\">// pos（品詞）を参照し、'名詞', '動詞', '形容詞'のみを抽出</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> <span class=\"token constant\">TARGET_POS</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// 単語を抽出(basic_formかsurface_formに単語が存在する)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> t<span class=\"token punctuation\">.</span>basic_form <span class=\"token operator\">===</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">?</span> t<span class=\"token punctuation\">.</span>surface_form <span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">.</span>basic_form<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// [{text: 単語, value: 出現回数}]の形にReduce</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">=></span> c<span class=\"token punctuation\">.</span>text <span class=\"token operator\">===</span> text<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            target<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            data<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              text<span class=\"token punctuation\">,</span>\n              value<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n          <span class=\"token keyword\">return</span> data\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      \n      <span class=\"token comment\">// 加工した解析結果をstateにセット</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>dataForD3Cloud<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 略</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"2-データをもとにイイ感じの画像出力-1\"><a href=\"#2-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%82%E3%81%A8%E3%81%AB%E3%82%A4%E3%82%A4%E6%84%9F%E3%81%98%E3%81%AE%E7%94%BB%E5%83%8F%E5%87%BA%E5%8A%9B-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. データをもとにイイ感じの画像出力</h3>\n<p><a href=\"https://github.com/Yoctol/react-d3-cloud\">react-d3-cloud</a>が専用のコンポーネントを提供しているのでそれを使うだけです。</p>\n<div class=\"gatsby-code-title\">WordCloud描画処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> WordCloud <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-d3-cloud\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// フォントの大きさを決める関数</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fontSizeMapper</span> <span class=\"token operator\">=</span> word <span class=\"token operator\">=></span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span>\n\n<span class=\"token comment\">// フォントの回転位置</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">rotate</span> <span class=\"token operator\">=</span> word <span class=\"token operator\">=></span> word<span class=\"token punctuation\">.</span>value <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">90</span>\n\n<span class=\"token comment\">// フォントの種類</span>\n<span class=\"token keyword\">const</span> fontFamily <span class=\"token operator\">=</span> <span class=\"token string\">'meiryo'</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 略</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 略</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>WordCloud\n          data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>dataForD3Cloud<span class=\"token punctuation\">}</span>\n          fontSizeMapper<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>fontSizeMapper<span class=\"token punctuation\">}</span>\n          rotate<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>rotate<span class=\"token punctuation\">}</span>\n          font<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>fontFamily<span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>さて、ここで疑問を持たれる方もいると思います。\n前述の<a href=\"#2-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%82%E3%81%A8%E3%81%AB%E3%82%A4%E3%82%A4%E6%84%9F%E3%81%98%E3%81%AE%E7%94%BB%E5%83%8F%E5%87%BA%E5%8A%9B\">WordCloudの作り方（原理）> 2. データをもとにイイ感じの画像出力</a>で画像出力するには以下を決定する必要があると述べました。</p>\n<ol>\n<li>フォントの大きさ・・・・・☚コンポーネントで定義した👍</li>\n<li>フォントの回転位置・・・・☚コンポーネントで定義した👍</li>\n<li>フォントの種類・・・・・・☚コンポーネントで定義した👍</li>\n<li>フォントの色・・・・・・・☚コンポーネントで定義してない🤔</li>\n<li>表示位置・・・・・・・・・☚コンポーネントで定義してない🤔</li>\n</ol>\n<p><code class=\"language-text\">4</code>,<code class=\"language-text\">5</code>どうやって決めるのでしょうか？\n実は<code class=\"language-text\">4</code>はreact-d3-cloud内部でよしなり定義してくれていて、\n<code class=\"language-text\">5</code>はD3-Cloudがイイ感じに決めてくれています。</p>\n<p><a href=\"https://github.com/Yoctol/react-d3-cloud/blob/master/src/WordCloud.js#L91\"><strong>↓react-d3-cloud内部ロジック 色定義：WordCloud.js#L91</strong></a></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 67\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">   <span class=\"token keyword\">const</span> layout <span class=\"token operator\">=</span> <span class=\"token function\">cloud</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">font</span><span class=\"token punctuation\">(</span>font<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">words</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">padding</span><span class=\"token punctuation\">(</span>padding<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>rotate<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fontSize</span><span class=\"token punctuation\">(</span>fontSizeMapper<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> words <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> texts <span class=\"token operator\">=</span> <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>wordCloud<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'svg'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">,</span> layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">,</span> layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token template-string\"><span class=\"token string\">`translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span>\n          <span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-size'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>size<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px`</span></span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-family'</span><span class=\"token punctuation\">,</span> font<span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fill'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fill</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</span>          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text-anchor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'middle'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token string\">`translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">[</span>d<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)rotate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>rotate<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>d <span class=\"token operator\">=></span> d<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p><a href=\"https://github.com/jasondavies/d3-cloud/blob/master/build/d3.layout.cloud.js#L59-L73\"><strong>↓D3-Cloud内部ロジック 表示位置定義：d3.layout.cloud.js#L59-L73</strong></a></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 56\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">    <span class=\"token keyword\">function</span> <span class=\"token function\">step</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> start <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> start <span class=\"token operator\">&lt;</span> timeInterval <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">++</span>i <span class=\"token operator\">&lt;</span> n <span class=\"token operator\">&amp;&amp;</span> timer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">var</span> d <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">        d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">        d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">cloudSprite</span><span class=\"token punctuation\">(</span>contextAndRatio<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">.</span>hasText <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">place</span><span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> bounds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          tags<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">          event<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"word\"</span><span class=\"token punctuation\">,</span> cloud<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bounds<span class=\"token punctuation\">)</span> <span class=\"token function\">cloudBounds</span><span class=\"token punctuation\">(</span>bounds<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token keyword\">else</span> bounds <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">:</span> d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>x0<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>y0<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">:</span> d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>x1<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>y1<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token comment\">// Temporary hack</span>\n</span><span class=\"gatsby-highlight-code-line\">          d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-=</span> size<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">          d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-=</span> size<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span>\n</span>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">>=</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        cloud<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        event<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"end\"</span><span class=\"token punctuation\">,</span> cloud<span class=\"token punctuation\">,</span> tags<span class=\"token punctuation\">,</span> bounds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>これによって以下のようなイイ感じのWordCloudを出力することができるのですね。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/704eab6cfb822de63938be47f6ccc745/33c1a/wordcloud-sample.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 86.17511520737328%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEN0lEQVQ4yyWU2ZLaOBiFedh5jKnKzTzAZKlUkqlM1WRykUy2Jkl3oE3T0BCaZnWz2CzeMDYI4xVjVokz6pkLVUkq1dH5z/9JqVqt+ps8UEv67bcsEV4JknQujPWyYNYtYd7VhPPmUPhQuBc+l7vCuKkKYlkXKgVFsHq2oMuGIM0sQTLMS9G08oXr/B8pfaJmElDAk4GggwPtANAA38GBzypagCtljaK+BjYJMDWwnS4Al48dsOCHrpMDsntAnVrDlKKrX2J46FjuPtNzqBN6FPXXdFN6TOP+GUX5Gd1rt9RZULpW7ikdXfO9x5QJjyghEZ30lrQer4/fnBX0yaTFBfX0ihus6z59faOgSxIwuwX88wu2ioyd2Qda72FrBwTOFofOBZB9BDrMwtQXELtLlMOI1dd7qBNTTOnKIL3ZbuG5SzoxfUx9XkP5d5zyjxG5wF6q4zD+jiD2cGp9xKn5N0Iy5Rf1wC6f4qrt4OncZe+5Q8WYiKmBYaaxMQE5TQ9yxEOZAtWXYPWPWBMeYr+AQ+UJ9pEKGHdA8w1Y7S9suzkcf76G2rfQNm023B5h2JaYMq1ZGojBnDlddV3stBjHmQ8ot3B5ST+aI0Did9oq4rmBXeMTWOUVj+EtwvMzxIUbhLkLhukceksRUxPDSD+0a+25lHgBvAmB1mhi1GzAHUn40LDx5X4JlkSg6xAnsQ10qtisXC74FYmi4Z19wfSlBruucoezB4dAqOvU7XXhzWxIlSLk2xLEXAaRYyPdUPHkUsZZ08DFzQjS3U9g3sLJkXA8HaGM79ghjmDoNhdUlTT4wiczSrhtSzOgik1M+h30Sjc4xhZahoVfP/bxtqTiTV2GZi4QnIDVbIYke4koV2TeeIT+fVtMGaqaDuIjnNDnDI7h+3MMK2W0C1ewe1XkJQvP8yr0iCPlVPFO+hOZ8Rl6wQx9R0ZnVMQ+3rLIIZDbXPCBw2H4QHmNRlEFy1kNarOOAS9r1OvgWW6EwF/CUmV8H1zgfe8DvqtZtMZFTDhS91Yf69wVY4MhzAcOp6b5X4Z+4tE4GcI2yxjVb9Et5FC7+AZ7NsdIV7EJYrSsBl7WXnDBDHp6FUG2gFbAX+3XNFvlrtAQRTFlTf8XHIcLmtXSkAyRt7+BXjmPTukaoesiNkwUjDyyhoBz5RxfRmf4oWU4Oh2Qz58QZ/Jst3BQ7Mscm8nk7MgFJ6vloU7qbLQYMF28Z91iiS3sGVsJOeY/f8FUtc9K8k8mKS12J92wxlxmBS9hmqYxz0rTFULkh2Y7Zc/ccyDCet3H1CYgxMRxw2ANtsD2BDoYgIeDcOnxD8bDjrPKfwVsky3SXgL+rhAH19idljxXuZfSFO3NLiFxHM7tuWmTqaIQf7Eg/tIn8dIlG8chh+OO7OKYROuEbOINOUYLkng2WUcrkkQB2SSHubucebe9av5fm6Gzz267ZFMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wordcloud sample\"\n        title=\"\"\n        src=\"/static/704eab6cfb822de63938be47f6ccc745/42603/wordcloud-sample.png\"\n        srcset=\"/static/704eab6cfb822de63938be47f6ccc745/f931c/wordcloud-sample.png 200w,\n/static/704eab6cfb822de63938be47f6ccc745/e8031/wordcloud-sample.png 400w,\n/static/704eab6cfb822de63938be47f6ccc745/42603/wordcloud-sample.png 800w,\n/static/704eab6cfb822de63938be47f6ccc745/33c1a/wordcloud-sample.png 868w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"その他：日本語長文サンプルの準備には「すぐに使えるダミーテキスト」が便利\"><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96%EF%BC%9A%E6%97%A5%E6%9C%AC%E8%AA%9E%E9%95%B7%E6%96%87%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%81%AE%E6%BA%96%E5%82%99%E3%81%AB%E3%81%AF%E3%80%8C%E3%81%99%E3%81%90%E3%81%AB%E4%BD%BF%E3%81%88%E3%82%8B%E3%83%80%E3%83%9F%E3%83%BC%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%80%8D%E3%81%8C%E4%BE%BF%E5%88%A9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>その他：日本語長文サンプルの準備には「すぐに使えるダミーテキスト」が便利</h2>\n<p>WordCloudを作るときにテキトーな日本語文章を大量に用意する必要があります。\nそんな時は下記サイトが便利でした。</p>\n<p><a href=\"https://lipsum.sugutsukaeru.jp/index.cgi\">https://lipsum.sugutsukaeru.jp/index.cgi</a></p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>Pythonじゃないと形態素解析とWordCloud生成は無理かなと思っていましたが、JavaScriptでもライブラリが提供されていました。JavaScriptであればブラウザ上で処理を行えるので、たとえば入力フォームに入力した文字列をインプットにWordCloudを生成するなど、インタラクティブな操作が可能です。ただし生成に時間がかかるので、実際使うときはユーザーに生成中の旨をフィードバックするようなUIにする必要があるでしょう🍅</p>","fields":{"slug":"/wordcloud-with-kuromoji-d3cloud-react","title":"React + kuromoji.js + D3-CloudでWordCloudをブラウザに描画","date":"2019-05-04T12:40:00.000+09:00","excerpt":"なにこれWordCloudをJSだけで生成したい。Pythonとか使わずにフロントエンドだけでやりたい。というモチベーションで、kuromoji.jsとD3-Cloudを使って文字列をインプットにWordCloudを描画するReactアプリ...","tags":["React","kuromoji.js","d3.js","d3Cloud","形態素解析","WordCloud"],"keywords":["React"],"thumbnail":"thumbnail/2019/05/wordcloud-with-kuromoji-d3cloud-react.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://takumon.com/gatsby-related-posts-like-hugo\">以前の記事</a>で紹介した<strong>タグとキーワードから関連記事を算出するロジック</strong>と、<a href=\"http://js.cytoscape.org/\"><strong>Cytoscape.js</strong></a>を用いて記事の関連情報を視覚的に確認できるマップを作りました。\n今回はそのマップの紹介とCytoscape.jsを使ってみた感想です。</p>\n<h2 id=\"記事関連マップ\"><a href=\"#%E8%A8%98%E4%BA%8B%E9%96%A2%E9%80%A3%E3%83%9E%E3%83%83%E3%83%97\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>記事関連マップ</h2>\n<h3 id=\"使い方\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h3>\n<p>URL: <a href=\"https://takumon.com/map\">https://takumon.com/map</a> <br/>\n遷移方法: 一覧ページのCytoscapleアイコンから遷移できます。 <br/>\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 94.04666130329848%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABcRAAAXEQHKJvM/AAAE5UlEQVQ4y51Sa0yTVxg+crGi3Ec0UaZz6BBoaaEX2tIPRJA473MzTqYxzjCzMBc3URK8bGLGNmVziS66TaeOMBN0Ix+WIoKIbga5iDgsRRGh5SsWykcpwyjzlGenNdv/7STP97znefM9533PeUlGSMwny8Pj6taFxVW+HRZvzA1NML7PkMfwcUiCsXC61HgoUGYs9pMZjzAuCZAZvw2QG08Gyo2npyiMZUTuxaULRFF9LlBWStaExdXkvqRCXmQSCiNU+DxMjS9CGTMcD1LjtESNs/5qlBMNLgZqYJyqQe1ULS77a/Ebwy3CwLhrhgENoWoX2RwaX7ErUomCGbKJA8GJdF94Mi0OSabHpqvoOYmang1S03OBalrup6G/TNVQnmlVAUm0XqKiN4NTaGuknrZF6Z93ztSjebbGRraFJfDMBF9Gc/RIpBaf+UtxnMjxA0lAGZHiPInHRcaVbF9DZKgPUKIxikNzuA6t0xS4M00Oc4TSI8znYF6gFciHYVK+WJKIs0u30hu7v0JNTgFadh+FiXsXv6/PR0tuEVrfyMcfG/fi7ro9aFu0BvaSM7DuOoz+vCII2/fDkbPDIy7UoDtRL5D8YBn/dZASJ2Zy9OrGAlzftBdNW/ajedM+3F6bj/YVH6FjfQHu5x5E58o83EtcC+u2Qgibd2FoxwGMHj4O96ESjztWib6UVIEUBkn5k+zyvyMKepq1VMrau8Da44nC12IdwzWSiMYAOVolCtxjD3d/pgp90WrY5qowrEmHKy3TM2Hg4MjWCaRomoz/0U+J0kVLaNni11ETmYG6sDRcDzKgeVYWWuZk4u7cJTDPz0JP3FJY5ctgi0vHQFwqRFUaxjkDxvSpHqxMw/BadofFEilfTlJgUnO0OkOF8ujFKF3wDvj0zbiRuQLml7PQ+Vo2HjIzISkbA5plcKqXQEw24M80Dk+zOTxbbvBgE4fhDczwqL+Mr2SGF9loXJmegiq/ZFQHc2iYk462eTp0RWnwMFqLR/N1sC/U43GsDiNqA55kcZhYxeH5ag40h1W41QBxq0og3xM5X8eGs4Ko6OUpKjQy0zY23JaoFNyfpcPDeamwxqTiiVQFV3Kqr6rJTD0mmRneNICuN2DyPZ0Hu1MwsjdeIKf8FPy1AD1qJSlsULVojdDBPFuP7lcMsMZyeJzAYVCbgarVeTiScxgluUchrMlG4+ql6M/JAHZqMblH40GREiOfLxTITySWb2EvetM/kbZK5OgIUcASkYTeOcmwxyjhildiUJOKVdsrIdt5G9wHN3BmwxaUL34VFW9pIRZK0XUs3vPoYAzs34QL5M6J8/xfl29huKKOuvirGLt0FeOmejy9Uo9ndfWgDYwbGtB72wJTrQWV1fcw1GBC/akTMNf8Ck/3FTx5VO3x2Grh7PhZIAOuYR4vFsX/Xx7vxzU2IZCuTovPUBxyUpcowjUsYnRkBN54yOHA2OioD07nMNzuMYjiiC/vdrngeDwAa18vXCOiz1AUnQLp6OiocDqdePDgwQQD7e7upl7u6emhFouF9vb2Upb/V/PmvZogCL59e3s77e/vf/7CULQR9lONd+N2u70C2AEYHBzE+Pj4f+6bebhIU1PTp3a7/VpfX5+RsclqtZrYiSabzeaDN/bqXnhjVpmPvWCV/qNVORyOGrPZXPY3DrvXghXs5/YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"map link\"\n        title=\"\"\n        src=\"/static/406f832b6971112a20ac87e06f027a1e/42603/map-link.png\"\n        srcset=\"/static/406f832b6971112a20ac87e06f027a1e/f931c/map-link.png 200w,\n/static/406f832b6971112a20ac87e06f027a1e/e8031/map-link.png 400w,\n/static/406f832b6971112a20ac87e06f027a1e/42603/map-link.png 800w,\n/static/406f832b6971112a20ac87e06f027a1e/5b8b9/map-link.png 1200w,\n/static/406f832b6971112a20ac87e06f027a1e/97d32/map-link.png 1243w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>記事のサムネイル画像が、タグ・キーワードの関連線でつながっています。\n記事はドラッグ＆ドロップでグリグリ動かせます。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e647bf984a2eb73a989cc699b2236e11/20d20/map.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 67.08520179372198%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC0klEQVQ4y01Ty27bSBDk7+19z2Gwf+BvySWXAIYR+JRFTsnGsUXJUNaxY2dlxbYsSqJMSiTFl6gXn8OZqQyHXiUNNBqcnqmu7i4qlmV9wW9GigpFUaIsS+x2OxBSwPc3CL1if2cTBjJWeYaVaezPPc8zFdOanbEshWdMCAMYKQmLoiVzXYfdXQ/Z09Rls8srtjMGIg22XUZM//yBrZOERZ7H5jdXjFBa1YC2bQ+VueNqNI4w793Q+gU4x2RswHYchGGIIF5hcfIPSuPfpgNKsU5SzB4foH//hoxxcFGozjmOoyvD8UR7ZkwbPC4/fHuBx/8G6F3cIavYvi39+hKD/i3m4xGmtz3YMwujyy/yguu6unL25rVWpikqQugu9FFVkj0iW7AzF9jEGYqsgOm4WO0SRMMHBDMT44d7jIdDkY8RPt5LwIXn6cpdtyMZblcxNc5bKPJ8z6ZuhlKCkhAsk3zPvm4lGNxhLYCfTQIauq4rphtIQMYYfY6i6hasovjWu4XlLJoN+j4s22k6EMCpUEKSZVINtGpm0tfOdKX79pUETJKMxuEK6/Uakx8W8rREvFmLRw3jaBnD9Ru5UFHMDgLMHBu+OPeWYdPyYqEr/YuPEnDpb6hjBgJ4J1nWlgkGhJQwZ3M4bsP04voeo4kpR5MInW6EF/R5y7atK5a9aNUfaZrSvMh5FC75ba/P43jF/37/ngux8qfZnI+MaT1AniSp8ETkYx6EEY+XIXdGpww8E0XFUizrSavxfT9kRVFACBvb3UYuYLvdiqXQ338kmHMPg+EYI8PCTX+EMt8inrwTxWpAf6RMp1PJkBBS64VXtOKiVS6GLxnVnpcFn0yfeCk6cP2Y+2HMaxPF/r/zS9iHh4d/dLvdv9pt7YWI6tHRkXpwcKCenJyomqZJP2211E+np2pLxOurr+rV5YXabrfVTqcjz1pnn9Tz887L4+PjP38COHm56SUtcw8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"map\"\n        title=\"\"\n        src=\"/static/e647bf984a2eb73a989cc699b2236e11/42603/map.png\"\n        srcset=\"/static/e647bf984a2eb73a989cc699b2236e11/f931c/map.png 200w,\n/static/e647bf984a2eb73a989cc699b2236e11/e8031/map.png 400w,\n/static/e647bf984a2eb73a989cc699b2236e11/42603/map.png 800w,\n/static/e647bf984a2eb73a989cc699b2236e11/20d20/map.png 1115w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>関連線はタグよりもキーワードのほうが太くなっています。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/15ce0e664fd8d919af584ecff2b15472/eb283/map-relation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 64.15094339622641%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACcUlEQVQ4y4WTzW7TQBDH94QQEsoBKeVYQcWlPACHCqlBlXiA8h5cOHDlgMQLcOLEhQNHeiiXFKtdpSku0ECiVPlwEjt27DhOYuc7uxlmFhtSJMRKI3t2Z/8z8xubFQqFN7Ztf7cs66zZbOq1alVHX5nv+7rrunqtVlNWKpXUnuM4Osbrnuep8yAIPvf7/a/oZ1mr1cqhA81WCyzThLZtg2E0gHMOGAx/LyEESCl/+yi2fjZhFxcXR0/29+Hhzs4ik8nIx3t78tHurvxwcCAxI928YoPBQKKInM1mEgWUj0uQ4GKx8NlpPq/dSqXgBmOCMQYPUjfh7vVr8DGbVVnH4zFge4Di0Ol0oF6vQ6PRoMvqfLlcUsUyrjBguq5r97e34XY6LdIbG3BvawvubG7CJ02D6XSqBEmoWq0CcgVkCQaKnus6IH+oVCqA2CQlbbfbAcNsGmUvX14KuvSjWKR3mM/nSgxbU4JU1XA4VOag//TZc/hWKMIEY6IoklQxxgcMlbWEaQJ3hpVRKyRKz9VqpYRoeHTmel04yX9RsZZlw2Q6lTHDgJmmqcUsBE0wmVzX95VQskfVJtNN9iaTieIbhqE6QER/BGlSJED2K3isBtHr9aDjOOoisoIiIsEWlRgxJiRTnDglw46uCiYVDMMQXrx8Bcc8h/wcqOEQ6kZdidGU17/DeMm4SyV4FAsu4u9JdFxPvH33XrieL6JoJAqHORHavog5UyciLiCxZcywy3DUZ/CPFYaRetpFA+R4Dv9byHbOyuXya+RxjmCPkQ0nw3duWSY3DIPjf8tN2+Jm2+L4V/DRaMSTuDU7wf1T/AoOfwKLYaonzELSHQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"map relation\"\n        title=\"\"\n        src=\"/static/15ce0e664fd8d919af584ecff2b15472/42603/map-relation.png\"\n        srcset=\"/static/15ce0e664fd8d919af584ecff2b15472/f931c/map-relation.png 200w,\n/static/15ce0e664fd8d919af584ecff2b15472/e8031/map-relation.png 400w,\n/static/15ce0e664fd8d919af584ecff2b15472/42603/map-relation.png 800w,\n/static/15ce0e664fd8d919af584ecff2b15472/eb283/map-relation.png 1166w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>記事にマウスカーソルを合わせると拡大され、関連線が青にハイライトされたり...\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b66fb19bd8083acf7c142c725a9445b5/2cbae/hover-style.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACvklEQVQ4y31TyXLTQBD1h/Ib3Dlx5gA3Ci6hUlBcgEog+BAsx0SExLGz2onj3bI10tja15YeLSWBBFJ0VZdmetQ9r9/rqbTb7eeWZbVM0/wupVQL571q27bquI4axr7q8tdaWarjOKWfn3fUZutAbezsqm9efVS3txq7rdbhj8FgsFOZzWY1/GVxHMPzPVjSQf98CmmskKQJDMMozwo7rB/C0la43OhDzrzrxByojMfjrWKdZVmS5znxknRNkD6fkzYWVP90RKPenAxT0MnxCem6TnEc0YeXNaq9bdHB+glNL8wiL0+TNKpMJpNqWZyLsZcXycUSh7UuLppTDM8WWJkudKGDu8FyucRikUKbBOCLMB4YsJd+mZimafJgwTRJ0NzRcFAbQq2eQnBrt2ZZwOpmm6TxbbhMJKKHCwZBjpX1h9Mw8uH7MXOYQ8qsjHmuh9FoVBQpcv9fsN+PMRnHHMuKA76AsL8vcXwsEUXXqHw/AE8IwjD8jfBeyywKFfE0zXF5GcE00/K/OM4ZGdDr+Tg768C2r6FzMoQQ91pmQHcQZqXCKKZCiLwAxmiKNeC6t1QEvPbYXS5sgxWH7S6xss2c55j5tZJiDqucjsl0QrPZFFdXQ2iajzBgJbWYW6O7IEpzHIvbbaHZbKK+0UJ9s53P53MWa5lUFmJR1YcCZwcdIu46YYWL4Y2SmBMd5ii6FibMGBnxl2lhas/3LjCZDfGi8RgbjfflbRmypGIH9tbm66948uhp3B9P6WfziDrdPvU6Q5JyxZ4QU0DdbkSdTkiaRmTZoIv2iD6vq7T2bo2qXxTKU2QpJWHFkKLuLnxctQewmJ9ub8iCWHCFd+855jn+NbrjN1Y5PTl95rj2Hhf+JoSuLKVUDEMogp2fpSKlqfi+y+4onucoTIPCgigsjOIHnuIFHA/cIl7nV7T9C3DXFXIT1dw5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"hover style\"\n        title=\"\"\n        src=\"/static/b66fb19bd8083acf7c142c725a9445b5/42603/hover-style.png\"\n        srcset=\"/static/b66fb19bd8083acf7c142c725a9445b5/f931c/hover-style.png 200w,\n/static/b66fb19bd8083acf7c142c725a9445b5/e8031/hover-style.png 400w,\n/static/b66fb19bd8083acf7c142c725a9445b5/42603/hover-style.png 800w,\n/static/b66fb19bd8083acf7c142c725a9445b5/2cbae/hover-style.png 1100w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<p>記事関連マップをフルスクリーン表示できたり...\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17d62e7816cad650aef03928e4c91916/b404c/fullscreen-button.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 47.3811833171678%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABcRAAAXEQHKJvM/AAABxUlEQVQoz41Rya4TMRCcT+YjOPEkkLhwCkgIcQFuXLiwJ0AShEZKQgghTCZxJok9+2KPt6Zt8fSegAMltWZst8tV1UEYho+Xy+WP1er7jLF0UZTVoqzqRdM0vuq6/quqqvqz5tj7lRAyCg6EjAEhhIArWLDWgpQSjDHwvyjLsgrG0/B9UXFgaani/ck8ex2bF58ORill+r73X3zA4APmEpxz03Wd0Vr7tTtzhEVRnINX7ybDp89fwp17D/SHyQxu3P0CNx8uwPVUdQ1t3QJaguPpBJRSr+T+YAC3L27BpbOyKG3TtJCmKQ0oPQ+n4RwGj57o65YxE08keuGswOrnHi9k0LStUwKo0Hd2LYfoW2J7oSDPcxpsNpvhbxZN4ikwuoW+V7DbxZBmmWvyxA55xoDEW+CoSggOh+PeP4bqLMe1J4yiyBPiAPR8cmEP25F1Eo3RFjOy+2Ni94T4PQCfpP+vy9qG4czi1C1mamnCICFHTzjyJt1Y/4HrmxmqUfoqGSk0ICE6EtBUHdATS4P1ev3GHfZK8+3HtzJLiFTGyDzLJE5ZokrZcS7btpOEUZmcz3L8eSYxY8k7LuNoJ1Fhj44US1nyC9gLpNpvP95EAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"fullscreen button\"\n        title=\"\"\n        src=\"/static/17d62e7816cad650aef03928e4c91916/42603/fullscreen-button.png\"\n        srcset=\"/static/17d62e7816cad650aef03928e4c91916/f931c/fullscreen-button.png 200w,\n/static/17d62e7816cad650aef03928e4c91916/e8031/fullscreen-button.png 400w,\n/static/17d62e7816cad650aef03928e4c91916/42603/fullscreen-button.png 800w,\n/static/17d62e7816cad650aef03928e4c91916/5b8b9/fullscreen-button.png 1200w,\n/static/17d62e7816cad650aef03928e4c91916/c7ea5/fullscreen-button.png 1600w,\n/static/17d62e7816cad650aef03928e4c91916/b404c/fullscreen-button.png 2062w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<p>記事クリックで記事ページに遷移できたりします。</p>\n<h3 id=\"過去記事を視覚的に俯瞰できるのでとても良い\"><a href=\"#%E9%81%8E%E5%8E%BB%E8%A8%98%E4%BA%8B%E3%82%92%E8%A6%96%E8%A6%9A%E7%9A%84%E3%81%AB%E4%BF%AF%E7%9E%B0%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE%E3%81%A7%E3%81%A8%E3%81%A6%E3%82%82%E8%89%AF%E3%81%84\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>過去記事を視覚的に俯瞰できるのでとても良い</h3>\n<p>以前から関連記事機能は実装していましたが、記事関連マップにすると俯瞰できるので、改めて気付いたことがありました。\n記事関連マップを見る限り自分のブログのメインコンテンツとしては以下ですね。フロントエンド多めです。</p>\n<ul>\n<li>Gatsby(ちょっとReact)</li>\n<li>Vue.js + AppSync</li>\n<li>Angular</li>\n</ul>\n<p>また、まったく関連が存在しない記事も幾つかあることがわかります（Git,Vimあたり）。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5ce63ed33e6b3fe46bb57ad1e4380691/d8eb3/no-relation-posts.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 47.27272727272727%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACCUlEQVQoz12QbYvTQBDH8zFFUfSNIuihvtKioJ9CbBQ5RBAPDqkvxAOh0vTBs2DP3J1nT+hDsnnYPCdNmm0yO27SXgX/MLvLf3Z+zIxkWfYhCvmhiyxPMUlijKIIi6JA4Bw9P0IviDBOUlwsFsgYwyzNhB+i43iYCK/yK2na/FAilq+gt4/+lysFaV+G3GhBmiOIPAxHP+H6rR3YefAQ9vZbsCoK4GUBvzQKrz+N4GXrFHrHAWTLZbEGaopETLeLeQezH4/LYNRAHnSwxLW+Kj28dO0m3rn/CF+8eoMXUkYH+PT5VXzWvI3vP7/FVbmqSwghXak6Nv9K/E9FCVh9rYIVgABQ+1mWInUNpJ6OYUS3tTXQMIwaSD2/DOJE7MWpEpimKSLfkMXNxT5LKOt7K1jn8jz/B6SUKtpcw9+HnXJ+NOTHqsp93+eiG+76lKtnR/z0XOVzMuVhGFU07niU/5mM6zBtg/uimQ1QkTzX6anjMc6e3OXqvRvYHQ63DSSFix8HH3Cv8w4Xhbf1aWjgwaCFw5mC02C8maEG9qqR21EcY3B2spx8/8ZM22Iix0SHLM0TRkOTWYHBsnzBOHAmSlmchmxCzpnmTpiXUAYlLCugruttqd/vN6ht7+qO27TDSDZNU57NZnVoc102iSVbhlW/L3xdIzK1HOHbMtENeTqdNolOdgeDQeMvXzeKnvgQ4tgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"no relation posts\"\n        title=\"\"\n        src=\"/static/5ce63ed33e6b3fe46bb57ad1e4380691/42603/no-relation-posts.png\"\n        srcset=\"/static/5ce63ed33e6b3fe46bb57ad1e4380691/f931c/no-relation-posts.png 200w,\n/static/5ce63ed33e6b3fe46bb57ad1e4380691/e8031/no-relation-posts.png 400w,\n/static/5ce63ed33e6b3fe46bb57ad1e4380691/42603/no-relation-posts.png 800w,\n/static/5ce63ed33e6b3fe46bb57ad1e4380691/5b8b9/no-relation-posts.png 1200w,\n/static/5ce63ed33e6b3fe46bb57ad1e4380691/d8eb3/no-relation-posts.png 1320w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<p>知識は点よりも線にしたほうが強みになるので、今後記事を書く際は、そこらへんの記事の関連線を増やしていく方向で学習を進めようと思います。</p>\n<h3 id=\"今後の予定\"><a href=\"#%E4%BB%8A%E5%BE%8C%E3%81%AE%E4%BA%88%E5%AE%9A\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>今後の予定</h3>\n<p>現在、関連度算出はタグとキーワードの重み付けという非常に簡素なロジックです。\n今後は、記事本文を解析して関連度を詳細に出したり、記事の傾向を解析したり、WordCloudを出したりと色々機能追加できそうです。</p>\n<h2 id=\"cytoscapejsを使ってみた感想\"><a href=\"#cytoscapejs%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F%E6%84%9F%E6%83%B3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cytoscape.jsを使ってみた感想</h2>\n<h3 id=\"概要\"><a href=\"#%E6%A6%82%E8%A6%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>概要</h3>\n<p>公式ドキュメントは充実しているので実装方法に悩むことはありません。\nCanvasで描画するので、オブジェクトのスタイル指定でCSSは使えないのが若干もどかしいですが、CSSに似たプロパティ設定することで非常に細かいレイアウト調整ができます。\nまたオブジェクト毎にイベント発火時（hover, click, mouseover, etc...）の処理を指定できます。こちらはjQueryっぽい実装です。</p>\n<h3 id=\"テーマ\"><a href=\"#%E3%83%86%E3%83%BC%E3%83%9E\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>テーマ</h3>\n<p>公式サイトでは多くのテーマが紹介されています。\nインストールしてuseするだけで簡単に使えます。</p>\n<div class=\"gatsby-code-title\">テーマの使い方</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> cytoscape <span class=\"token keyword\">from</span> <span class=\"token string\">'cytoscape'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> coseBilkent <span class=\"token keyword\">from</span> <span class=\"token string\">'cytoscape-cose-bilkent'</span><span class=\"token punctuation\">;</span>\n\ncytoscape<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span> coseBilkent <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>テーマごとに豊富なオプションが用意されており、以下のように調査できます。</p>\n<div class=\"gatsby-code-title\">テーマの調整</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>CytoscapeComponent</span>\n  <span class=\"token attr-name\">layout</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'cose-bilkent'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Whether to include labels in node dimensions. Useful for avoiding label overlap</span>\n    nodeDimensionsIncludeLabels<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// number of ticks per frame; higher is faster but more jerky</span>\n    refresh<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Whether to fit the network view after when done</span>\n    fit<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Padding on fit</span>\n    padding<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Whether to enable incremental mode</span>\n    randomize<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Node repulsion (non overlapping) multiplier</span>\n    nodeRepulsion<span class=\"token punctuation\">:</span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Ideal (intra-graph) edge length</span>\n    idealEdgeLength<span class=\"token punctuation\">:</span> <span class=\"token number\">700</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Divisor to compute edge forces</span>\n    edgeElasticity<span class=\"token punctuation\">:</span> <span class=\"token number\">0.45</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Nesting factor (multiplier) to compute ideal edge length for inter-graph edges</span>\n    nestingFactor<span class=\"token punctuation\">:</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Gravity force (constant)</span>\n    gravity<span class=\"token punctuation\">:</span> <span class=\"token number\">0.20</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Maximum number of iterations to perform</span>\n    numIter<span class=\"token punctuation\">:</span> <span class=\"token number\">2500</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Whether to tile disconnected nodes</span>\n    tile<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Type of layout animation. The option set is {'during', 'end', false}</span>\n    animate<span class=\"token punctuation\">:</span> <span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Amount of vertical space to put between degree zero nodes during tiling (can also be a function)</span>\n    tilingPaddingVertical<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Amount of horizontal space to put between degree zero nodes during tiling (can also be a function)</span>\n    tilingPaddingHorizontal<span class=\"token punctuation\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Gravity range (constant) for compounds</span>\n    gravityRangeCompound<span class=\"token punctuation\">:</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Gravity force (constant) for compounds</span>\n    gravityCompound<span class=\"token punctuation\">:</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Gravity range (constant)</span>\n    gravityRange<span class=\"token punctuation\">:</span> <span class=\"token number\">3.8</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Initial cooling factor for incremental layout</span>\n    initialEnergyOnIncremental<span class=\"token punctuation\">:</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">/></span></span></code></pre></div>\n<br/>\n<h3 id=\"拡張機能\"><a href=\"#%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BD\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>拡張機能</h3>\n<p>拡張機能も豊富です。ただ一部jQuery依存の拡張機能もあります。たとえば、ズーム機能を提供する<a href=\"https://github.com/cytoscape/cytoscape.js-panzoom\">cytoscape.js-panzoom</a>などです。今回jQueryは使えないので（GatsbyでReactベースなので）、ズーム機能は自前実装しました。スタイルや細かい挙動など設定項目が非常に多く、結構手間なので自前実装はオススメしません。</p>\n<h3 id=\"react-cytoscapejsハマりポイント\"><a href=\"#react-cytoscapejs%E3%83%8F%E3%83%9E%E3%82%8A%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>react-cytoscape.jsハマりポイント</h3>\n<p>GatsbyでCytoscape.jsを使えるようにするため<a href=\"https://github.com/plotly/react-cytoscapejs\">react-cytoscape.js</a>を採用しました。\nただ2点ハマりポイントがあったので紹介します。</p>\n<h4 id=\"1-wheelsensitivityが使えない\"><a href=\"#1-wheelsensitivity%E3%81%8C%E4%BD%BF%E3%81%88%E3%81%AA%E3%81%84\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. wheelsensitivityが使えない</h4>\n<p>Cytoscape.jsは、wheelsensitivityというプロパティを指定すれば、マウスホイールで拡大・縮小する時の拡大率を調整できます。これを設定しないとマウスホイールで拡大したときに、急に拡大されて、自分が今どこにいるのかわからなくなります。wheelsensitivityを使えば拡大率を調整できるので、それを防ぐことができます。\nただコレreact-cytoscapeではサポートしていません。そのため今回は拡大率調整を断念しました。</p>\n<h4 id=\"2-gatsbyビルド時にエラー\"><a href=\"#2-gatsby%E3%83%93%E3%83%AB%E3%83%89%E6%99%82%E3%81%AB%E3%82%A8%E3%83%A9%E3%83%BC\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Gatsbyビルド時にエラー</h4>\n<p><code class=\"language-text\">WebpackError: ReferenceError: window is not defined</code>というエラーが出ます。react-cytoscape.jsではwindowオブジェクトを直参照しており、Gatsbyビルド時に、webpackに怒られます。Gatsbyではwindowオブジェクトを直参照できないようです。</p>\n<p>対策は<a href=\"https://github.com/gatsbyjs/gatsby/issues/309#issuecomment-302043875\">GatsbyのIssue</a>にもあがっており、以下のようにライブラリの中身を直接書き換えました。</p>\n<ul>\n<li><code class=\"language-text\">node_modules\\react-cytoscapejs\\dist\\react-cytoscape.js</code>を書き換えます。</li>\n<li><code class=\"language-text\">window</code>を<code class=\"language-text\">windowGlobal</code>に置換します</li>\n<li>冒頭に<code class=\"language-text\">const windowGlobal = typeof window !== &#39;undefined&#39; &amp;&amp; window;</code>を追記します</li>\n</ul>\n<p>これでビルドが通ります。ただ手動でやるのは無理やり感があるので、npmのpostinstallのスクリプトで書き換える方法を検討中です。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回は、記事関連マップの紹介と<a href=\"http://js.cytoscape.org/\">Cytoscape.js</a>の使用感をご紹介しました。業務でもWebアプリでデータを可視化したいという要件は割とある気がするので、そんなときはCytoscape.jsの導入を検討しようと思います🍅</p>","fields":{"slug":"/posts-relation-map-with-cytoscape-in-gatsby","title":"GatsbyでCytoscape.jsを使って記事関連マップを作った","date":"2019-05-01T18:00:00.000+09:00","excerpt":"なにこれ以前の記事で紹介したタグとキーワードから関連記事を算出するロジックと、Cytoscape.jsを用いて記事の関連情報を視覚的に確認できるマップを作りました。今回はそのマップの紹介とCytoscape.jsを使ってみた感想です。記事関...","tags":["Gatsby","Cytoscape.js"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2019/05/posts-relation-map-with-cytoscape-in-gatsby.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>VuetifyのDataTableとPaginationを使った検索一覧画面でページングの状態を、ルーティングをまたいで保存しておきたい。という要望を満たすため、ページングの状態をVuexで管理する方法をメモします。\nDataTableだけだとすんなりできますが、Paginationもあわせて使う場合は少し雑な実装になってしまいます。</p>\n<h2 id=\"やり方\"><a href=\"#%E3%82%84%E3%82%8A%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>やり方</h2>\n<p>まずはストアに以下のように定義します。\nアクションには「ページングオブジェクト保存」と「ページングオブジェクトのページのみ保存」の2種類を用意します。</p>\n<div class=\"gatsby-code-title\">サンプル実装（Vuex側）</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vuex<span class=\"token punctuation\">.</span>Store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  state<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    pagination<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      page<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rowsPerPage<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n      sortBy<span class=\"token punctuation\">:</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span>\n      descending<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  getter<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    getPagination<span class=\"token punctuation\">:</span> state <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  actions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">SAVE_PAGINATION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> commit <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n        page<span class=\"token punctuation\">,</span>\n        rowsPerPage<span class=\"token punctuation\">,</span>\n        sortBy<span class=\"token punctuation\">,</span>\n        descending<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">;</span>\n\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'savePagination'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        page<span class=\"token punctuation\">,</span>\n        rowsPerPage<span class=\"token punctuation\">,</span>\n        sortBy<span class=\"token punctuation\">,</span>\n        descending<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token constant\">SAVE_PAGINATION_PAGE</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> commit <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> page <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'savePaginationPage'</span><span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  mutations<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">savePagination</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> pagination<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>pagination <span class=\"token operator\">=</span> pagination<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">savePaginationPage</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span>page <span class=\"token operator\">=</span> page<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>次にコンポーネント側です。\n<code class=\"language-text\">v-data-table</code>,<code class=\"language-text\">v-pagination</code>ともにVuexのページングオブジェクトを参照し、UIで変更があればVuexのアクションを呼び出します。それぞれのタグで微妙にやり方が違います。\nもう少しスマートにしたかったのですが、実際動かしてみた感じだとどうしてもスマートにはできませんでした。</p>\n<div class=\"gatsby-code-title\">サンプル実装（コンポーネント側）</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>\n      ページングはpaginationに任せるのでhide<span class=\"token operator\">-</span>actionsを指定している\n      pagination<span class=\"token punctuation\">.</span>syncにはgetterとsetterを持たせたpaginationを指定\n    <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>v<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>table\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">:</span>pagination<span class=\"token punctuation\">.</span>sync<span class=\"token operator\">=</span><span class=\"token string\">\"pagination\"</span>\n</span>      <span class=\"token punctuation\">:</span>items<span class=\"token operator\">=</span><span class=\"token string\">\"items\"</span>\n      hide<span class=\"token operator\">-</span>actions\n    <span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブルの中身 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>v<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>table<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>\n      valueでVuexのページングオブジェクトを参照して\n      <span class=\"token constant\">UI</span>側からの変更は@inputでVuexのアクションを呼び出す\n    <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>v<span class=\"token operator\">-</span>pagination\n      <span class=\"token punctuation\">:</span>length<span class=\"token operator\">=</span><span class=\"token string\">\"pages\"</span>\n      v<span class=\"token operator\">-</span><span class=\"token keyword\">if</span><span class=\"token operator\">=</span><span class=\"token string\">\"pages >= 2\"</span>\n      <span class=\"token punctuation\">:</span>total<span class=\"token operator\">-</span>visible<span class=\"token operator\">=</span><span class=\"token string\">\"7\"</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">:</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"paginationPage\"</span>\n</span><span class=\"gatsby-highlight-code-line\">      @input<span class=\"token operator\">=</span><span class=\"token string\">\"savePaginationPageInStore({ page: $event })\"</span>\n</span>    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> mapActions<span class=\"token punctuation\">,</span> mapGetters <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n\n\n  <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      items<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n\n  computed<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">mapGetters</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      paginationInStore<span class=\"token punctuation\">:</span> <span class=\"token string\">'getPagination'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n<span class=\"gatsby-highlight-code-line\">    pagination<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// Vuexのページングオブジェクトを参照</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>paginationInStore<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// UI側から変更があった場合はSetter経由でVuexのアクションを呼び出す</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>pagination<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">savePaginationInStore</span><span class=\"token punctuation\">(</span>pagination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>\n    <span class=\"token comment\">// ページネーション参照用</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">paginationPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>paginationInStore<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span>    <span class=\"token comment\">// ページネーション用ページ数算出メソッド</span>\n    <span class=\"token function\">pages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span>rowsPerPage <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span>rowsPerPage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">mapActions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      savePaginationInStore<span class=\"token punctuation\">:</span> <span class=\"token string\">'SAVE_PAGINATION'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      savePaginationPageInStore<span class=\"token punctuation\">:</span> <span class=\"token string\">'SAVE_PAGINATION_PAGE'</span><span class=\"token punctuation\">,</span>\n</span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<p>これでルーティングをまたいでページングオブジェクトを保持できるようになりました。\n実用の場面では、検索条件もVuexに持たせて、ページングオブジェクトと連動させて使います。<br/>\n以上です🍅</p>","fields":{"slug":"/vuetify-datatable-and-pagination-with-vuex","title":"VuetifyのDataTableとPaginationの状態をVuexで管理する","date":"2019-04-28T20:30:00.000+09:00","excerpt":"なにこれVuetifyのDataTableとPaginationを使った検索一覧画面でページングの状態を、ルーティングをまたいで保存しておきたい。という要望を満たすため、ページングの状態をVuexで管理する方法をメモします。DataTabl...","tags":["Vue.js","Vuetify","Vuex"],"keywords":["Vue.js"],"thumbnail":"thumbnail/2019/04/vuetify-datatable-and-pagination-with-vuex.png"}}],"previous":{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://www.gatsbyjs.org/\">Gatsby</a>でブログを作っていて、機能拡張とともにテンプレートが肥大化してきたので、下記図の青枠単位でコンポーネント分割しました。\nあわせてCSS Moduleも採用しました。そのときのメモです。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e268a820b4389e53b5daaae36cbe0f2e/f9cd1/page.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 94.99036608863199%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAAELklEQVQ4y22U/VMbRRzG86/5k2IdrANltE6ronWkLeVFnXGY1ulICx2loUAJTilkCARoSdr6wpuA8lKIvJSSlPBuiwcU4fJ+uUvubncfv7kE6nTMzCeb3dt98nxf9myuvA7/aH5zdOi9lsOxwibZe+oH2fP+DXnk7E15sLhe9hQ3yoPnm+WRMof825cOeeQb4opDHv3OIY/VEnUO+fdGx8EfLQ6ls849bRt6o34PJ0thvluKjfyruPf2dXScuIau/OvoL7qMzXMfw6i8CFSVAVcvAbWEnbhNtBIuorcUGK7AdFP9mm34zrr01LmMoHuJN1/bFuUlu+JiqSzOX9gXlysl0VcbEO5av3DfIL73i+46v+i5RTQERHcjjc1Ei5952tfwY/PGsk0A0m4SGF8BfzAFbO6p2AvriKUBWQV2FeBlhgSwT+N2hMw9BNZf0loc2IkSEbBQCuj3IWgDDGlzG1h6FuY9/QYUVYUSj1iYugqmJ5HSFCSTCRg0T9Hz3gGdntM/cA2ASTBGX/AtsYygKW3tAGt/xfj9YQZNSyFOmxMJBaqqQVGSUFImEikGVWdIJHW4+xmiMQ2maRIMnAtLcGqRZwU3JWDrb433Dho4OPgHOzs72N3do40cr3/ovCUYiVE+wDNiECIr+PhYkByubMb5vSGTXKlEEklFsUZN02AYRg4dSZUc/moiElWRTqcsl0cOc4JM2iCHz6WEFXIiEadDGrS0ATWVhkEHyAGROSKgG0D3QCZkyi8z/s8hs3I4vcR53wisvB3G01B0gFIGLiydnCCOBSNRDbqeJoeZsPEqh5wxKbM3FAOfDwqkUwo0XQHj1AcwcphWvkgOnOnoHbJc/SezWYczSyRIVZJyi3x+WWD6KcfiCsfcMxNzywzzxEyAYTrAMUtrPr8J1y/A8hZ1xguB1ecW7MU+MPiYBBl7JTjjpxs0DUw+ASYWqNnnBUHzhSxTtD7qy4QmEE0IikogHAMhGNWKWspyaB4LBtYFDKqsqYWt8LJhGkgnQjBTMWtN6BqC6+ZRqEew7NwqCs8Jgi+tZ4rCwKiyjJKdyTZMEqRboqt074QJnZo8sCZeb8+cIF290GFKCoeAaFjnU7MGRiYNTPgMjM/oGJwSeDAB/DQJPKLRS/w8Th2xoCMcMSCHcoR1lqQ+D0f0oO3+Kbc0V9CAP4vsfO5DO3zEzEd2zH5qR/1pD26ecaDhXCfufuGEs8SF5gsezNfUY7HuJp7csmPRQbTa2WpPI/qauoO2sXcaJRRWwCgq5/oH5TDPEJ+UQ3x+CYHiGviKv4WvtBqrldVY+aoGK1U14HX0bmwi7hAdRE8Zw0AlJm83BW3deS7J+6YL3rfauDevDZ4TRH47vCdpLLiL9oJ2OAtb0XPaia6zTng/a8OjkjY8LCUq6PfXRFUbG6zuRNcVd/BfVZUjbmu0ymkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"分割した結果\"\n        title=\"\"\n        src=\"/static/e268a820b4389e53b5daaae36cbe0f2e/42603/page.png\"\n        srcset=\"/static/e268a820b4389e53b5daaae36cbe0f2e/f931c/page.png 200w,\n/static/e268a820b4389e53b5daaae36cbe0f2e/e8031/page.png 400w,\n/static/e268a820b4389e53b5daaae36cbe0f2e/42603/page.png 800w,\n/static/e268a820b4389e53b5daaae36cbe0f2e/f9cd1/page.png 1038w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"cssをコンポーネントスコープにする方法\"><a href=\"#css%E3%82%92%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%97%E3%81%AB%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSSをコンポーネントスコープにする方法</h2>\n<p>コンポーネントを分割する際、CSSもあわせて分割が必要です。その場合、グローバルスコープだとスタイルがコンポーネントに限定されなくなってしまうので、コンポーネントスコープにする必要があります。Gatsbyはコンポーネントスコープの実現方法が3つ用意されています。</p>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/docs/css-modules/\">CSS Modules</a></li>\n<li><a href=\"https://www.gatsbyjs.org/docs/glamor/\">Using CSS-in-JS library Glamor</a></li>\n<li><a href=\"https://www.gatsbyjs.org/docs/styled-components/\">Using CSS-in-JS library styled components</a></li>\n</ul>\n<p>僕はスタイルをHTMLやJSの中に書くのを躊躇してしまう人（古い時代の人）なので、スタイルをCSSファイルに書けるCSS Moduleを採用しました。\n流行はStyled Componentsなんでしょうか?</p>\n<h3 id=\"css-module\"><a href=\"#css-module\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS Module</h3>\n<p>CSSファイルのクラス名、アニメーション名をローカルスコープで使えるようにする仕組みです。\nCSSファイルは通常のCSSと同じ文法で書くことができて、ICSSまたはInteroperable CSSと呼ばれる形式にコンパイルすることでローカルスコープを実現します。\nJavaScriptファイルでCSS Moduleを使う場合、ローカル変数名をつけてインポートし、DOMのクラス名には<code class=\"language-text\">変数名.クラス名</code>のように指定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"./style.css\"</span><span class=\"token punctuation\">;</span>\n\nelement<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'&lt;div class=\"'</span> <span class=\"token operator\">+</span> styles<span class=\"token punctuation\">.</span>className <span class=\"token operator\">+</span> <span class=\"token string\">'\">'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>参考：<a href=\"https://github.com/css-modules/css-modules\">公式ページ</a></p>\n<h3 id=\"gatsbyでcss-module\"><a href=\"#gatsby%E3%81%A7css-module\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GatsbyでCSS Module</h3>\n<p>CSSファイル名を<code class=\"language-text\">XXX.module.css</code>のようにしてコンポーネントでインポートするだけでCSS Moduleが使えます。<br />\n<br /></p>\n<p>例えば下記のようなCSSがあるとしたら</p>\n<div class=\"gatsby-code-title\">src/components/container.module.css</div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.container</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 3rem auto<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>JavaScriptでこのように読み込みます。</p>\n<div class=\"gatsby-code-title\">src/components/container.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"./container.module.css\"</span>\n</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"コンポーネント分割\"><a href=\"#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E5%88%86%E5%89%B2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>コンポーネント分割</h2>\n<p>CSSがコンポーネントスコープにできたところで、ようやくコンポーネントを分割できるようになります。\n純粋にReactの作法に従って分割します(Gatsbyは特に関係ありません)。<br>\nここでは、テンプレートから記事部分を分割するケースについて説明しましょう。<br></p>\n<p><strong>テンプレート(分割前)</strong></p>\n<div class=\"gatsby-code-title\">src/templates/blog-post.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'blog-post.module.css'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BlogPostTemplate</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>markdownRemark\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>blogTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Takumon Blog<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>article<span class=\"token operator\">></span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>postTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>postContent<span class=\"token punctuation\">}</span> dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token punctuation\">:</span> post<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\n</span>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> BlogPostTemplate\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n  query($slug: String!) {\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      html\n      frontmatter {\n        title\n      }\n    }\n  }\n`</span></span></code></pre></div>\n<div class=\"gatsby-code-title\">src/templates/blog-post.module.css</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">.</span>blogTitle <span class=\"token punctuation\">{</span>\n  color<span class=\"token punctuation\">:</span> red\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">.</span>postTitle <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">  color<span class=\"token punctuation\">:</span> blue<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">.</span>postContent <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">  color<span class=\"token punctuation\">:</span> green<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span>\n</span></code></pre></div>\n<hr>\n<p>分割後は下記のようになります。\nなお分割したコンポーネントに記事情報を渡すための属性を定義します。ここではpostという属性名にしています。<br>\nテンプレートにて記事コンポーネントのpost属性に記事情報を指定すると、\n記事コンポーネントでは<code class=\"language-text\">this.props.post</code>で受け取れるようになります。</p>\n<p><strong>テンプレート(分割後)</strong></p>\n<div class=\"gatsby-code-title\">src/templates/blog-post.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'blog-post.module.css'</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> Post <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/post'</span><span class=\"token punctuation\">;</span>\n</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BlogPostTemplate</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>markdownRemark\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>blogTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Takumon Blog<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>Post post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n</span>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> BlogPostTemplate\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n  query($slug: String!) {\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      html\n      frontmatter {\n        title\n      }\n    }\n  }\n`</span></span></code></pre></div>\n<div class=\"gatsby-code-title\">src/templates/blog-post.module.css</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">.</span>blogTitle <span class=\"token punctuation\">{</span>\n  color<span class=\"token punctuation\">:</span> red\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p><strong>記事コンポーネント</strong></p>\n<div class=\"gatsby-code-title\">src/components/post.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'post.module.css'</span><span class=\"token punctuation\">;</span>\n</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Post</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">;</span>\n</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>article<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>postTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>postContent<span class=\"token punctuation\">}</span> dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token punctuation\">:</span> post<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Post</code></pre></div>\n<div class=\"gatsby-code-title\">src/components/post.module.css</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">.</span>postTitle <span class=\"token punctuation\">{</span>\n  color<span class=\"token punctuation\">:</span> blue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">.</span>postContent <span class=\"token punctuation\">{</span>\n  color<span class=\"token punctuation\">:</span> green<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<p>なお分割したことにより<code class=\"language-text\">src/components/post.module.css</code>が「記事に対するスタイル」ということは自明になるので、クラス名をより簡潔にできます。</p>\n<p><strong>記事コンポーネント(CSSリファクタリング後)</strong></p>\n<div class=\"gatsby-code-title\">src/components/post.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'post.module.css'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Post</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>article<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">}</span> dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token punctuation\">:</span> post<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n</span>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Post</code></pre></div>\n<div class=\"gatsby-code-title\">src/components/post.module.css</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">.</span>title <span class=\"token punctuation\">{</span>\n</span>  color<span class=\"token punctuation\">:</span> blue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">.</span>content <span class=\"token punctuation\">{</span>\n</span>  color<span class=\"token punctuation\">:</span> green<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>以上の手順を繰り返すことで、コンポーネントを細かく分割できます。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>コンポーネントを細かく分割することで、再利用性が向上し、画面レイアウトを組みやすくなりました。\nReactのWebアプリケーションの場合は、Reduxのステート用コールバック関数の受け渡しなどで複雑になりますが、\nGatsbyのような静的Webサイトの場合、単純な分割だけで事足りるかなーと。\n分割設計については<a href=\"https://www.amazon.co.jp/Atomic-Design-%E5%A0%85%E7%89%A2%E3%81%A7%E4%BD%BF%E3%81%84%E3%82%84%E3%81%99%E3%81%84UI%E3%82%92%E5%8A%B9%E7%8E%87%E8%89%AF%E3%81%8F%E8%A8%AD%E8%A8%88%E3%81%99%E3%82%8B-%E4%BA%94%E8%97%A4-%E4%BD%91%E5%85%B8/dp/477419705X\">Atomic Design ~堅牢で使いやすいUIを効率良く設計する</a>を参考にしたいところです。まだ読んでない...🍅</p>","fields":{"slug":"/2018/10/14/","title":"Gatsbyにおけるコンポーネント分割とCSS Module","date":"2018-10-14T07:00:00.000Z","excerpt":"なにこれGatsbyでブログを作っていて、機能拡張とともにテンプレートが肥大化してきたので、下記図の青枠単位でコンポーネント分割しました。あわせてCSS Moduleも採用しました。そのときのメモです。CSSをコンポーネントスコープにする方...","tags":["Gatsby","React","CSSModules"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2018/gatsby-css-modules.png"}},"next":{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://www.gatsbyjs.org/plugins/\">Gatsbyのプラグイン</a>は、<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages\">公式プラグイン</a>とコミュニティ提供のものをあわせると、なんと502個もあります。（2018/10/21現在）\n今回はその中でもおすすめプラグイン45個をユースケース別にご紹介します。</p>\n<h2 id=\"ユースケース別目次\"><a href=\"#%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E5%88%A5%E7%9B%AE%E6%AC%A1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ユースケース別目次</h2>\n<p><small>※クリックすると説明セクションにとべます。</small></p>\n<p><strong><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E7%B3%BB\">マークダウン系</a></strong></p>\n<ul>\n<li><a href=\"#gatsby-remark-prismjs\">コードブロックでシンタックスハイライトする</a></li>\n<li><a href=\"#gatsby-remark-code-titles\">コードブロックにタイトルを追加する</a></li>\n<li><a href=\"#gatsby-remark-autolink-headers\">見出しにGitHub風ホバーリンクをつける</a></li>\n<li><a href=\"#gatsby-remark-emojis\">絵文字を使う</a></li>\n<li><a href=\"#gatsby-remark-graphviz\">Graphvizでグラフを描画する</a></li>\n<li><a href=\"#gatsby-remark-katex\">数式を使う</a></li>\n<li><a href=\"#gatsby-remark-embed-snippet\">コードブロックにJavaSriptファイルなどを埋め込む</a></li>\n<li><a href=\"#gatsby-remark-copy-linked-files\">リンクされているPDFや動画などをビルド時にpublicフォルダにコピーする</a></li>\n<li><a href=\"#gatsby-remark-images\">画像をスマートに表示する</a></li>\n<li><a href=\"#gatsby-remark-responsive-iframe\">iframeタグを縦横比固定でレスポンシブ化する</a></li>\n<li><a href=\"#gatsby-remark-embed-youtube\">Youtubeを埋め込む</a></li>\n<li><a href=\"#gatsby-plugin-twitter\">Twitterの埋め込む</a></li>\n</ul>\n<p><strong><a href=\"#seo%E7%B3%BB\">SEO系</a></strong></p>\n<ul>\n<li><a href=\"#gatsby-plugin-react-helmet\">React Helmetを使う</a></li>\n<li><a href=\"#gatsby-plugin-offline\">オフライン環境でもWebサイトをスムーズに見れるようにする</a></li>\n<li><a href=\"#gatsby-plugin-manifest\">PWA対応する（manifest.webmanifestを生成する）</a></li>\n<li><a href=\"#gatsby-plugin-sitemap\">サイトマップを生成する</a></li>\n<li><a href=\"#gatsby-plugin-canonical-urls\">canonical linksを追加する</a></li>\n<li><a href=\"#gatsby-plugin-feed\">RSSフィードを生成する</a></li>\n<li><a href=\"#gatsby-plugin-robots-txt\">robots.txtを生成する</a></li>\n</ul>\n<p><strong><a href=\"#%E9%96%8B%E8%A3%9C%E8%A3%9C%E5%8A%A9%E7%B3%BB\">開補補助系</a></strong></p>\n<ul>\n<li><a href=\"#gatsby-plugin-lodash\">ビルド資産（bundle.js）のlodashのサイズ削減する</a></li>\n<li><a href=\"#gatsby-plugin-webpack-bundle-analyzer\">ビルド資産（bundle.js）の中身のサイズを可視化する</a></li>\n<li><a href=\"#gatsby-plugin-google-analytics\">Google Analyticsを使う</a></li>\n<li><a href=\"#gatsby-plugin-facebook-analytics\">Facebook Analyticsを使う</a></li>\n</ul>\n<p><strong><a href=\"#ui%E7%B3%BB\">UI系</a></strong></p>\n<ul>\n<li><a href=\"#gatsby-plugin-nprogress\">ローディング中にプログレスバー表示</a></li>\n<li><a href=\"#gatsby-plugin-catch-links\">aタグでローカル遷移時にリロードではなくヒストリーAPIで遷移</a></li>\n<li><a href=\"#gatsby-plugin-layout\">1系のレイアウト機能を2系で使う</a></li>\n</ul>\n<p><strong><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">ファイル系</a></strong></p>\n<ul>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">JSONファイルをパースする</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">XMLファイルをパースする</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">Yamlファイルをパースする</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">CSVファイルをパースする</a></li>\n<li><a href=\"#gatsby-source-filesystem\">ファイルを読み取んでノードを生成する</a></li>\n<li><a href=\"#gatsby-transformer-remark\">Markdownファイルをパースする</a></li>\n<li><a href=\"#gatsby-image\">画像読み込みを最適化する</a></li>\n<li><a href=\"#gatsby-transformer-sharp\">画像読み込みでImageSharpノードを生成する</a></li>\n<li><a href=\"#gatsby-plugin-sharp\">Sharp(画像圧縮ライブラリ)を使う</a></li>\n</ul>\n<p><strong><a href=\"#css%E7%B3%BB\">CSS系</a></strong></p>\n<ul>\n<li>SASS/SCSSを使う</li>\n<li>Styled Componentsを使う</li>\n<li>Glamorとglamorousを使う</li>\n<li>Emotionを使う</li>\n<li>PostCSSを使う</li>\n<li><a href=\"#gatsby-plugin-typography\">Typography.js(文章のスタイルを設定するライブラリ)を使う</a></li>\n</ul>\n<p><strong><a href=\"#%E5%A4%96%E9%83%A8%E9%80%A3%E6%90%BA%E7%B3%BB\">外部連携系</a></strong></p>\n<ul>\n<li>Mediumのデータを取得する</li>\n<li>WordPressのデータを取得する</li>\n<li>contentfulのデータを取得する</li>\n<li><a href=\"#gatsby-source-esa\">esa.ioのデータを取得する</a></li>\n</ul>\n<h2 id=\"プラグインの使い方\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグインの使い方</h2>\n<p><small>※知ってる人は読み飛ばしてください。</small></p>\n<ul>\n<li>プラグインはnpmパッケージで公開されているのでnpmインストールする</li>\n<li><code class=\"language-text\">gatsby-config.js</code>のpluginsに定義を追加する</li>\n<li>オプションも指定できます。下記のようにします。</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// オプションなしで指定する場合は下記のようにプラグイン名を文字列で指定しましょう。</span>\n    <span class=\"token string\">\"gatsby-plugin-react-helmet\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// オプションありの場合は、オブジェクトで指定します。</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// オプションはさらにオブジェクトで指定します。</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/data/`</span></span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// プラグイン自体を拡張するプラグインを指定できます。</span>\n        <span class=\"token comment\">// その場合はオプションのpluginsにプラグインを定義しましょう。</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-smartypants`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-plugin-offline\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// 下記のように空オプションの場合は、プラグイン名を文字列で指定した場合と同じです。</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>※ 詳細は前回の記事<a href=\"../20/#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\">Gatsbyプラグインの使い方･作り方･公開方法</a>を参照してください。</p>\n<p><br><hr></p>\n<h2 id=\"マークダウン系\"><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>マークダウン系</h2>\n<p>ここで紹介するプラグインは<a href=\"gatsby-transformer-remark\">gatsby-transformer-remark</a>の拡張です。<br>\nそのためプラグインを使う時は、<code class=\"language-text\">gatsby-config.js</code>ではgatsby-transformer-remarkのオプションとして定義します。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">            classPrefix<span class=\"token punctuation\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            inlineCodeMarker<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            aliases<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            showLineNumbers<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            noInlineHighlight<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-prismjs\"><a href=\"#gatsby-remark-prismjs\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-prismjs\">gatsby-remark-prismjs</a></h3>\n<p><strong>マークダウンのコードブロックでシンタックスハイライトできるようにする</strong></p>\n<ul>\n<li><a href=\"https://prismjs.com/\">Prism.js</a>を使ってシンタックスハイライトします。他にも行数表示や指定行強調といった機能が使えます。</li>\n<li>Gatsbyで技術系ブログを作るなら、このプラグインが一番重要でしょう。使い方の詳細も含めてご紹介します。</li>\n</ul>\n<h4 id=\"設定\"><a href=\"#%E8%A8%AD%E5%AE%9A\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p><code class=\"language-text\">gatsby-config.js</code>で下記のように定義します。\nオプションが複数ありあますが重要なのは<code class=\"language-text\">showLineNumbers</code>だけです。<code class=\"language-text\">true</code>だとコードブロックの行数表示機能が使えるようになります。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n          options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            classPrefix<span class=\"token punctuation\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n            inlineCodeMarker<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            aliases<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">            showLineNumbers<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n</span>            noInlineHighlight<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<br>\n<p>若干めんどくさいですが、<code class=\"language-text\">gatsby-config.js</code>以外にもやることがあります。<br>\n<code class=\"language-text\">gatsby-browser.js</code>でPrismJSのテーマを読み込みます。<br>\n<code class=\"language-text\">gatsby-browser.js</code>は、なければプロジェクトのルートフォルダ直下に作成してください。</p>\n<div class=\"gatsby-code-title\">gatsby-browser.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"prismjs/themes/prism-solarizedlight.css\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n行数を表示するには、専用のCSSを読み込みます。<br>\n<div class=\"gatsby-code-title\">src/components/layout.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">'prismjs/plugins/line-numbers/prism-line-numbers.css'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>指定行を強調表示させるにはCSSを定義してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.gatsby-highlight-code-line</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #feb<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-right</span><span class=\"token punctuation\">:</span> -1em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-left</span><span class=\"token punctuation\">:</span> -1em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-right</span><span class=\"token punctuation\">:</span> 1em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-left</span><span class=\"token punctuation\">:</span> 0.75em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-left</span><span class=\"token punctuation\">:</span> 0.25em solid #f99<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.gatsby-highlight</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #fdf6e3<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 0.3em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0.5em 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 1em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.gatsby-highlight pre[class*=\"language-\"]</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> transparent<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> initial<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">float</span><span class=\"token punctuation\">:</span> left<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 1 */</span>\n  <span class=\"token property\">min-width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 2 */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.gatsby-highlight pre[class*=\"language-\"].line-numbers</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">padding-left</span><span class=\"token punctuation\">:</span> 2.8em<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 3 */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h4 id=\"使い方\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>シンタックスハイライトだけなら下記のように記述します。</p>\n<ul>\n<li>記述方法</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>行数表示や指定行強調を使う場合コードブロックの1行目(```の部分)にそれらの情報を記載します。以降に詳細を示します。</p>\n<h5 id=\"行数表示する場合\"><a href=\"#%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>行数表示する場合</h5>\n<ul>\n<li>記述方法</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript{numberLines: true}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h5 id=\"行数表示する場合（開始行数指定あり）\"><a href=\"#%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88%EF%BC%88%E9%96%8B%E5%A7%8B%E8%A1%8C%E6%95%B0%E6%8C%87%E5%AE%9A%E3%81%82%E3%82%8A%EF%BC%89\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>行数表示する場合（開始行数指定あり）</h5>\n<ul>\n<li>記述方法</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript{numberLines: 5}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 4\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h5 id=\"指定行数を強調する場合\"><a href=\"#%E6%8C%87%E5%AE%9A%E8%A1%8C%E6%95%B0%E3%82%92%E5%BC%B7%E8%AA%BF%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>指定行数を強調する場合</h5>\n<ul>\n<li>記述方法</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript{1,5-9}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// In your gatsby-config.js</span>\n</span>plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span>\n</span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h5 id=\"全部の組み合わせ（指定行数を強調かつ行数表示）\"><a href=\"#%E5%85%A8%E9%83%A8%E3%81%AE%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B%EF%BC%88%E6%8C%87%E5%AE%9A%E8%A1%8C%E6%95%B0%E3%82%92%E5%BC%B7%E8%AA%BF%E3%81%8B%E3%81%A4%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA%EF%BC%89\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>全部の組み合わせ（指定行数を強調かつ行数表示）</h5>\n<ul>\n<li>記述方法（2つの括弧を定義します）</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript{numberLines: 5}{1,5-9}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 4\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// In your gatsby-config.js</span>\n</span>plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span>\n</span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-code-titles\"><a href=\"#gatsby-remark-code-titles\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-code-titles/?=gatsby-remark-code-titles\">gatsby-remark-code-titles</a></h3>\n<p><strong>マークダウンでコードブロックにタイトルを表示できるようにする</strong></p>\n<h4 id=\"設定-1\"><a href=\"#%E8%A8%AD%E5%AE%9A-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<ul>\n<li>前述のgatsby-remark-prismjsとあわせて使います。</li>\n</ul>\n<p><code class=\"language-text\">gatsby-config.js</code>で<code class=\"language-text\">gatsby-transformer-remark</code>オプションとして一番最初に定義する必要があります。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-code-titles`</span></span><span class=\"token punctuation\">,</span>\n</span>          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              classPrefix<span class=\"token punctuation\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n              inlineCodeMarker<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n              aliases<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n              showLineNumbers<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\nさらにCSSでスタイルを追加しましょう。\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.gatsby-code-title</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> #f3e3b9<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #b38383<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> -0.65em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0.7rem 1.05rem<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 0.8em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">line-height</span><span class=\"token punctuation\">:</span> 0.2<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> 600<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 8px 8px 0 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> table<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"使い方-1\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<ul>\n<li>マークダウンでコードブロックの一行目に<code class=\"language-text\">:title=タイトル名</code>と記述します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript:title=gatsby-config.js\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h5 id=\"強調行指定との組み合わせ\"><a href=\"#%E5%BC%B7%E8%AA%BF%E8%A1%8C%E6%8C%87%E5%AE%9A%E3%81%A8%E3%81%AE%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>強調行指定との組み合わせ</h5>\n<ul>\n<li>強調行の後にタイトルを記述します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```javascript{1, 5-9}:title=gatsby-config.js\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```</code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// In your gatsby-config.js</span>\n</span>plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span>\n</span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h5 id=\"行数表示との組み合わせ\"><a href=\"#%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA%E3%81%A8%E3%81%AE%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>行数表示との組み合わせ</h5>\n<p>なぜかできませんでした...プラグインの相性が悪いのかもしれません。</p>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-autolink-headers\"><a href=\"#gatsby-remark-autolink-headers\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers\">gatsby-remark-autolink-headers</a></h3>\n<p><strong>マークダウンで見出しにGitHub風ホバーリンクをつける</strong></p>\n<p>見出しホバー時に鎖アイコンリンクが表示されます。<br>\nリンクを指定して初期表示すると見出しまでスクロースしてくれるので便利です。</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 158px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 34.810126582278485%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABZElEQVQoz61Qu2oCURC9f5Iy/5C/iCmSKpoiv2GRbJEmWPpCCQHFFaIIGytBUFBXxUYRLKwEQcX3azM7OzdzL0SSkDIDw5yZM8w5jOj3++e73e6J85HTAABDSmkofDgcDETUM8dxdK84ItK867p6tt1uH7g+z2azS9HpdG7kr2DyhD3P+8HxYcki8q9YLBZvot1u+1hJsuIHzyCTyUAqlYKG3QB2D+VyGSqVCgwGA1B8oVAA0zQ1DofDEI/HoVaraQeTyeRFdLvdq+VyKdmpt1qtyHq3KJvNUjqdpuFwSKFQiGzbJt4nFiDeIxXH41Fz1WpV7brq4Hw+fxWtVsunmvV6Dfv9HsfjMSYSCbQsC0ejEbJDLJVK2Ov1kH+EuVwOi8UibjYbrNfrOJ1OMZ/PO+oGG3oRzWbzWv5TsKApgsHgWTKZvIvFYn7+hz8ajQYYByKRyKl+4e9z3j1V/uUt37hn7uITzw3VC1uyymcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"hoverlink\"\n        title=\"\"\n        src=\"/static/5faa8b23b378ebecd88c910e3cf11ae8/e48e9/hoverlink.png\"\n        srcset=\"/static/5faa8b23b378ebecd88c910e3cf11ae8/e48e9/hoverlink.png 158w\"\n        sizes=\"(max-width: 158px) 100vw, 158px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"設定-2\"><a href=\"#%E8%A8%AD%E5%AE%9A-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p>オプションでアイコン、アイコンの位置、アイコンのクラス名を指定できます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-autolink-headers`</span></span><span class=\"token punctuation\">,</span>\n            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">              offsetY<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`100`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              icon<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`&lt;svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">&lt;path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">&lt;/path>&lt;/svg>`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              className<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`custom-class`</span></span><span class=\"token punctuation\">,</span>\n</span>            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h4 id=\"補足\"><a href=\"#%E8%A3%9C%E8%B6%B3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>補足</h4>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers/#how-to-use\">公式サイト</a>には下記記述がありますが<br>\n起因となった<a href=\"https://github.com/gatsbyjs/gatsby/issues/5764\">issue 5764</a>はもう解決済みたいなので、定義順は特に気にする必要ななさそうです。</p>\n<blockquote>\n<p>gatsby-remark-prismjsと一緒に使う場合は必ず後に定義してください。</p>\n</blockquote>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-emojis\"><a href=\"#gatsby-remark-emojis\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-emojis\">gatsby-remark-emojis</a></h3>\n<p><strong>マークダウンで絵文字が使えるようにする</strong><br></p>\n<ul>\n<li>絵文字は画像ファイルではなく、base64形式で埋め込みます。全ての絵文字をドカッとインポートするわけではないのでデプロイ資産のサイズが最小限で済むのがメリットです。</li>\n</ul>\n<div class=\"gatsby-code-title\">HTMLファイル中に埋め込まれる絵文字</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n  <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>emoji-icon<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">data-icon</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>emoji-100<span class=\"token punctuation\">\"</span></span><span class=\"token style-attr language-css\"><span class=\"token attr-name\">\n  <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">display</span><span class=\"token punctuation\">:</span> inline<span class=\"token punctuation\">;</span> <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span> <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 1px<span class=\"token punctuation\">;</span> <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span> <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 5px<span class=\"token punctuation\">;</span> <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 25px</span><span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAMMUlEQVR4Ae3YhXtcx90o4HfOnhVZlpntkMN0nTK3TsrMzPdjZmZmvh8zM5SZuQ04zInMsiVb0kq7e2jmPnBRj11t5HLy/gcz88Px4PaQhwRf5Q6xJQFTViAc9OWV2FVyVc6tq5hEZXlj0zylxxNKzkr0hng7/nMdo6OkQIFkGXnbl95mwn1c1mFvyWWBqxpuq/k13Oz0bOeyeZ5Z8eKaR9a0ARtyPpy4aophfBhdywj7fOGt5ZySrTUziQPoAwyxteDJJc+teXnBUAQEvnML78BQn5M4ArCGUHPhAt9d8LKS9RGBMjCVeMsovz3KD3cZrvkeTFlG3vWFs47xkkfP85zIwxpuj/wWbocxtvV4c8l39NgcgTrQCZzIaNW8MHFRw3vxz7CBrM+mgu/o8uqK1WgCdwf2tbg2510ZWY9rKhb6rDKAvOfMXUS2yLo+T6/4/YK1NVo8OvI23L6D8Q6vKPixPiNIgfnAvowbW3y2zTv7/Ejk+ZE7AXqM1Dx7kVfXrIaMycivXMff30WB9Houx9bIbM3orxKQOL38F52Zv6DVZUfJq0q+q8eaBIj0a9IjCEd4Rs3r+4xAoJPxlgV+LOPoBM0mth/hrJrViVHYSTbPtprvqhhPCFT4pxbveQT9R+AswmHaEYl2ZPhJg1zAk6zcq2iVnNfnG7t8Y8lYIgBSxoEhjvdZt8DVJVcAKuyb4+f6HELTwVb2JM5uCBkjEFnX4qXznJ/IkQKfyXgnDgNEVo9y1QIhUOU0Ocky8twZedI839Fjb814AgAEbsH0LC9oeFpFDoH7Mn43cv8QDUDFeYHNgdkWx6DDpoZXxv8nchr+YIHPIQKsZ0vimQ2txGgiRMvLo5V5Ga+e51t67ImsOsXh+yVvW82JeR5bcw4EOhmf6PG+EUoAmOfKhq2J+cjoYwn72F1wcSJDzHhn4LPj9ACgYSxxViIgS6Sjlpcf9cB8P5fO8aI5XlZyWUNuKZqMzzZcu55Lj3NJTRtwZ+IfRjhpiZK1kTbKRO8+zm7xmooRpECn4V8jBywRyRMTgGw1F7+Bu7Ho9ORvMJh15ImHH+fba66p2BoRaDLm0GpYAyga/jJw/yKvi1yaECgDtxR8whLnsesoayIC7YywwJaKpyWgCdzUsA89S+SUkWlA1mJ3xsiyF5AZTMFQ4vUFL60ZBtyaeG+L4cArGiBmHFvkExez4TiPaVgP2N/i42MsWIoGCTCacW6kU7ARUODtQ0w7hUATKAGpoQgky8gbg6lJiZPYH5hI3Jj4+1V8KOM5JV8PKPCREToFz6w5JwIxcH2bDziFjBMtOhENApdiy/97qTXvi3ScQs3amrMBqeTuPj3LyBcMZoh+4teHmKrZ2OMtuHYdj57juRUtwHzNPyZO9LkmsjWixULgpoK7ndpFGROAAltqzk1AHZhM7A/UlriMsaNcWLELAWWXyf+gbxn5PxhYwkn8LsBP0p7m4Q2PS0ATONjjhnMY6XBBZCwgcGiI+51GyeMj50VkzCXUnA2oA/cPUzmFDmdHri4ZRhOYyum+jGQZ+cusXM1ZFY8omIBAt8W+TfTa7K3ZFAGR2xtudgqbyDs8pWZ7RJteoFfTAnQi/xboOoVFzqt5RgKqFjePM2sA+biVK3gMHhuBhKmGt+Y0NY9NTECgjFzb5SZLnE2G3QXnR4YDArOJuQYQWFzk5i6VJR5Odow1NZsAZeBzgb4B5MHK9djdsDshY7bFuxven9FUXIhRCBxrc7BNbYlIhidENkQE6hbtwASgCUxH5kaIluKynGf1CICy4loUBpCXVuYcdkxxQU07AJMN/4xOzSpsSrQhcKTFcaewQNbieZHNgE7GIoYgULY4PE7hFGa5tOJJCUiBk13umaUygPyIldnOExJXNgjAzAL7YJiAjWj9PxcwY4kNtGseMcMVkREIHMw4FDkPkGE4d2oFGxu2A7oZn8uZ3kg0gHyjlVngUZHdCYF+xtQBClgHDCcCoMgoLFGRJ17YsDEhIPLhjLsjFwJakXEEANhJXvHoWa6pyQHTDX87TNeA8mEP3FlcfJQralYF4N7EO9s0kCylSFQAsJV2j0sWeGZiDAJTkY+1WahpQSJEhgtqAGiz6SQvq9gbESgDdxzlY/PUBpTf6YHbxEsjl0cgJm7t8Y4dVE5tKNACgFlW1XxdlwsTOeBDLfbl7EIDyLBuA/9tHSfaFInRBfYW7K1YCzgWeMduFpAMKL/K4NYQsHmWqyPbINAJ3D3GCQBAAMAliceM089oAqnDI0teWzMMGYcTb9nPPZsZTxwGBOwo+b45ZhKdjLU1j49cCIEC1y/wnwskg5MfM7hxQuA5BefUANyZ8SkAyEiJk9iBVs0VGd/S52osBpqG51WMA8rAf+R8cjfVRm6b5UMZeyMTibGCl9VoEJAAaHBrxr9+gANIBif8oMG9iaHI78zyipq1gSrxW9fzE+gDXM1w4rs7fGvDDgQkJABkgH7GtRXfPcnnkOBRXN7le3u8ODGODAAQUWTcE/jTm/lDFB6g8EcG81Syhp3z/GefPZGQcW2Ln8d/WGIVYxW/1OdlDRuQIwASInotPt3nJ2f5HAqAS2lVnF3yhj6vj2xAQEDKmM74eOLvT/JB9KxAeJvBXMhI4jtn+N6aTYGY+KVZfhWzTmEX6xPPqHh5zSMiGxPtQCfj9sB7Kv5ugftRWuJcWn3GF1nTZ11D3mZrw2xgZoSTLebQt0LhEwazitV4S4fHRYYC70z8/P/gE0hO4ycZX2RjwZqK8chIRtliZojjh5hBtIx9hDHCHoZmqFE7c8LfDRb+4Rg7e3ysYBcWEz+c8RdYNDi/Q0DyFSK83PJ+hXaXR83ynw0bMybxzXinM+c81k5QonuQx7U4F/2aNW3ua3PfOo7NcU6i3Ml9aJw5+T9Z3iRDOZdE8oTAVIt5K7CLbX1297m4oVWz5ijbJkmJ+RaPztiZKBLjOBw5eJSZwI5EdZybRvngBm5C1xnIj1texVDDJWhD5AZMWcZljMyys2BLl2012w9zduBS7Im0IusTrRpQIyEBAhdBCxHQ0K954hy/gfc7A+FTljfBxobfmeWFWEh8W8Vb0QOAKwld1lVsX2RLwzkZD09cUnNpzeYGEQnBaaVAjQBIaLCAk4HhRBH55U/z50hWKP+I5T2bVmIDQotPRG4dpgcAZ5PPsLPi+XhazeNK1tdIlpIySpTI0EGT6GMxcDLQQQCkQA+TQ9ycMVFzuMdnEc7oAgygZihyMVoZ+07zN7+m4SUL/GJFjgCAGiXKQC8wHTja4giG8NkW8wX3d7i7y3Sg2EwEQIJEQkAaJT3ZmcmfbHkZDaaxYYGPTzFtia2kSF3TABrEQDdjMnBTxh2RW6a5bgOziAhokBATsSQhHXBayRdIfq/lXUkv8IEWWWDm72ks8WRmI+8Z5dkl3RY3N0wW3Bo4MMxioApU91HcR/LlJ/y25T2bdsVli7yx4Tew3ykM08bOPrFNt6Y4SQ+VZVzCeEZ7DfOzjGPoLGYOMYYFgMTqnSwiOnNCMpi7GeqwM3AIhRXaQ+sgOyq2VuwNzCVGKi7qsjMxhKGGLKNAnugOcxCrarY0yJka4a5hPrmGT2PeCoQpXzwl2xLbe+zpc2XF+P/u/ZgI7E70kWN9wwQkJAQAZHQxlMgTAiljGpOBD67mb3CTByjc4gvjUlqHuKhmU5eLFtmOsxMbcWHi/EiWEJGQAAkQfH4B6GacwGxiBE3G+0b4A9ziAcoLK7ObdoftfXb12HoDuxJXYWvkipqtEc3nP2AM1IEmsIATWIgcQxMYbzgYqCHQD8zkTGVMR4YTZeSmD3OnFQi/aXAvJU9s6rG54OLEoxJX1VzcsK06zZQXKNELdBIFmsi9gZOBMqPb4jgOtJgpuKumGmPD9dxUUEACyi95F4BnkWNPyTMbHlfyiJJNjaXUgQL9xFxgJnAw52hgMnEiUNzDW2boRaDwZZIbUGQ48S3zvLRmNQAiKvQxnzGZcTjjvsinulw/x5GlX+a7Sbt9+YVPG8wqxvBzc7y2YQIlqoy5wF2BT0c+vMjnxilzYkOzSET0FSq812C2ESLrSn6sZqLPO/vcntPP6QzTayhQ+ioSPuaBGWNLRdZl7pP0EX0VC7/gwS3zIPfQBTx0AQ9yD12AB7mHLsCD3EMX4EHufwJIOEs9kLQJngAAAABJRU5ErkJggg==<span class=\"token punctuation\">\"</span></span>\n</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li>(注意点）コードブロック中の記述も絵文字に変換しようとするので気をつけてください。</li>\n</ul>\n<h4 id=\"設定-3\"><a href=\"#%E8%A8%AD%E5%AE%9A-3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p>オプションで色々指定できます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-remark-emojis'</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token comment\">// falseにすると絵文字機能をオフにできます</span>\n</span><span class=\"gatsby-highlight-code-line\">              active <span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token comment\">// サイズは16, 24, 32, 64から選べます</span>\n</span><span class=\"gatsby-highlight-code-line\">              size   <span class=\"token punctuation\">:</span> <span class=\"token number\">64</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token comment\">// 独自クラスを追加できます</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token keyword\">class</span>  <span class=\"token punctuation\">:</span> <span class=\"token string\">'emoji-icon'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token comment\">// 独自スタイルを追加できます</span>\n</span><span class=\"gatsby-highlight-code-line\">              styles <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">                display      <span class=\"token punctuation\">:</span> <span class=\"token string\">'inline'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">                margin       <span class=\"token punctuation\">:</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">                <span class=\"token string\">'margin-top'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'1px'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">                position     <span class=\"token punctuation\">:</span> <span class=\"token string\">'relative'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">                top          <span class=\"token punctuation\">:</span> <span class=\"token string\">'5px'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">                width        <span class=\"token punctuation\">:</span> <span class=\"token string\">'25px'</span>\n</span><span class=\"gatsby-highlight-code-line\">              <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">}</span>\n</span>          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"使い方-2\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>マークダウンにて<code class=\"language-text\">:XXX:</code>のような形式で記述します。<br>\n:100: → <img null=\"\" data-icon=\"emoji-100\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAMMUlEQVR4Ae3YhXtcx90o4HfOnhVZlpntkMN0nTK3TsrMzPdjZmZmvh8zM5SZuQ04zInMsiVb0kq7e2jmPnBRj11t5HLy/gcz88Px4PaQhwRf5Q6xJQFTViAc9OWV2FVyVc6tq5hEZXlj0zylxxNKzkr0hng7/nMdo6OkQIFkGXnbl95mwn1c1mFvyWWBqxpuq/k13Oz0bOeyeZ5Z8eKaR9a0ARtyPpy4aophfBhdywj7fOGt5ZySrTUziQPoAwyxteDJJc+teXnBUAQEvnML78BQn5M4ArCGUHPhAt9d8LKS9RGBMjCVeMsovz3KD3cZrvkeTFlG3vWFs47xkkfP85zIwxpuj/wWbocxtvV4c8l39NgcgTrQCZzIaNW8MHFRw3vxz7CBrM+mgu/o8uqK1WgCdwf2tbg2510ZWY9rKhb6rDKAvOfMXUS2yLo+T6/4/YK1NVo8OvI23L6D8Q6vKPixPiNIgfnAvowbW3y2zTv7/Ejk+ZE7AXqM1Dx7kVfXrIaMycivXMff30WB9Houx9bIbM3orxKQOL38F52Zv6DVZUfJq0q+q8eaBIj0a9IjCEd4Rs3r+4xAoJPxlgV+LOPoBM0mth/hrJrViVHYSTbPtprvqhhPCFT4pxbveQT9R+AswmHaEYl2ZPhJg1zAk6zcq2iVnNfnG7t8Y8lYIgBSxoEhjvdZt8DVJVcAKuyb4+f6HELTwVb2JM5uCBkjEFnX4qXznJ/IkQKfyXgnDgNEVo9y1QIhUOU0Ocky8twZedI839Fjb814AgAEbsH0LC9oeFpFDoH7Mn43cv8QDUDFeYHNgdkWx6DDpoZXxv8nchr+YIHPIQKsZ0vimQ2txGgiRMvLo5V5Ga+e51t67ImsOsXh+yVvW82JeR5bcw4EOhmf6PG+EUoAmOfKhq2J+cjoYwn72F1wcSJDzHhn4LPj9ACgYSxxViIgS6Sjlpcf9cB8P5fO8aI5XlZyWUNuKZqMzzZcu55Lj3NJTRtwZ+IfRjhpiZK1kTbKRO8+zm7xmooRpECn4V8jBywRyRMTgGw1F7+Bu7Ho9ORvMJh15ImHH+fba66p2BoRaDLm0GpYAyga/jJw/yKvi1yaECgDtxR8whLnsesoayIC7YywwJaKpyWgCdzUsA89S+SUkWlA1mJ3xsiyF5AZTMFQ4vUFL60ZBtyaeG+L4cArGiBmHFvkExez4TiPaVgP2N/i42MsWIoGCTCacW6kU7ARUODtQ0w7hUATKAGpoQgky8gbg6lJiZPYH5hI3Jj4+1V8KOM5JV8PKPCREToFz6w5JwIxcH2bDziFjBMtOhENApdiy/97qTXvi3ScQs3amrMBqeTuPj3LyBcMZoh+4teHmKrZ2OMtuHYdj57juRUtwHzNPyZO9LkmsjWixULgpoK7ndpFGROAAltqzk1AHZhM7A/UlriMsaNcWLELAWWXyf+gbxn5PxhYwkn8LsBP0p7m4Q2PS0ATONjjhnMY6XBBZCwgcGiI+51GyeMj50VkzCXUnA2oA/cPUzmFDmdHri4ZRhOYyum+jGQZ+cusXM1ZFY8omIBAt8W+TfTa7K3ZFAGR2xtudgqbyDs8pWZ7RJteoFfTAnQi/xboOoVFzqt5RgKqFjePM2sA+biVK3gMHhuBhKmGt+Y0NY9NTECgjFzb5SZLnE2G3QXnR4YDArOJuQYQWFzk5i6VJR5Odow1NZsAZeBzgb4B5MHK9djdsDshY7bFuxven9FUXIhRCBxrc7BNbYlIhidENkQE6hbtwASgCUxH5kaIluKynGf1CICy4loUBpCXVuYcdkxxQU07AJMN/4xOzSpsSrQhcKTFcaewQNbieZHNgE7GIoYgULY4PE7hFGa5tOJJCUiBk13umaUygPyIldnOExJXNgjAzAL7YJiAjWj9PxcwY4kNtGseMcMVkREIHMw4FDkPkGE4d2oFGxu2A7oZn8uZ3kg0gHyjlVngUZHdCYF+xtQBClgHDCcCoMgoLFGRJ17YsDEhIPLhjLsjFwJakXEEANhJXvHoWa6pyQHTDX87TNeA8mEP3FlcfJQralYF4N7EO9s0kCylSFQAsJV2j0sWeGZiDAJTkY+1WahpQSJEhgtqAGiz6SQvq9gbESgDdxzlY/PUBpTf6YHbxEsjl0cgJm7t8Y4dVE5tKNACgFlW1XxdlwsTOeBDLfbl7EIDyLBuA/9tHSfaFInRBfYW7K1YCzgWeMduFpAMKL/K4NYQsHmWqyPbINAJ3D3GCQBAAMAliceM089oAqnDI0teWzMMGYcTb9nPPZsZTxwGBOwo+b45ZhKdjLU1j49cCIEC1y/wnwskg5MfM7hxQuA5BefUANyZ8SkAyEiJk9iBVs0VGd/S52osBpqG51WMA8rAf+R8cjfVRm6b5UMZeyMTibGCl9VoEJAAaHBrxr9+gANIBif8oMG9iaHI78zyipq1gSrxW9fzE+gDXM1w4rs7fGvDDgQkJABkgH7GtRXfPcnnkOBRXN7le3u8ODGODAAQUWTcE/jTm/lDFB6g8EcG81Syhp3z/GefPZGQcW2Ln8d/WGIVYxW/1OdlDRuQIwASInotPt3nJ2f5HAqAS2lVnF3yhj6vj2xAQEDKmM74eOLvT/JB9KxAeJvBXMhI4jtn+N6aTYGY+KVZfhWzTmEX6xPPqHh5zSMiGxPtQCfj9sB7Kv5ugftRWuJcWn3GF1nTZ11D3mZrw2xgZoSTLebQt0LhEwazitV4S4fHRYYC70z8/P/gE0hO4ycZX2RjwZqK8chIRtliZojjh5hBtIx9hDHCHoZmqFE7c8LfDRb+4Rg7e3ysYBcWEz+c8RdYNDi/Q0DyFSK83PJ+hXaXR83ynw0bMybxzXinM+c81k5QonuQx7U4F/2aNW3ua3PfOo7NcU6i3Ml9aJw5+T9Z3iRDOZdE8oTAVIt5K7CLbX1297m4oVWz5ijbJkmJ+RaPztiZKBLjOBw5eJSZwI5EdZybRvngBm5C1xnIj1texVDDJWhD5AZMWcZljMyys2BLl2012w9zduBS7Im0IusTrRpQIyEBAhdBCxHQ0K954hy/gfc7A+FTljfBxobfmeWFWEh8W8Vb0QOAKwld1lVsX2RLwzkZD09cUnNpzeYGEQnBaaVAjQBIaLCAk4HhRBH55U/z50hWKP+I5T2bVmIDQotPRG4dpgcAZ5PPsLPi+XhazeNK1tdIlpIySpTI0EGT6GMxcDLQQQCkQA+TQ9ycMVFzuMdnEc7oAgygZihyMVoZ+07zN7+m4SUL/GJFjgCAGiXKQC8wHTja4giG8NkW8wX3d7i7y3Sg2EwEQIJEQkAaJT3ZmcmfbHkZDaaxYYGPTzFtia2kSF3TABrEQDdjMnBTxh2RW6a5bgOziAhokBATsSQhHXBayRdIfq/lXUkv8IEWWWDm72ks8WRmI+8Z5dkl3RY3N0wW3Bo4MMxioApU91HcR/LlJ/y25T2bdsVli7yx4Tew3ykM08bOPrFNt6Y4SQ+VZVzCeEZ7DfOzjGPoLGYOMYYFgMTqnSwiOnNCMpi7GeqwM3AIhRXaQ+sgOyq2VuwNzCVGKi7qsjMxhKGGLKNAnugOcxCrarY0yJka4a5hPrmGT2PeCoQpXzwl2xLbe+zpc2XF+P/u/ZgI7E70kWN9wwQkJAQAZHQxlMgTAiljGpOBD67mb3CTByjc4gvjUlqHuKhmU5eLFtmOsxMbcWHi/EiWEJGQAAkQfH4B6GacwGxiBE3G+0b4A9ziAcoLK7ObdoftfXb12HoDuxJXYWvkipqtEc3nP2AM1IEmsIATWIgcQxMYbzgYqCHQD8zkTGVMR4YTZeSmD3OnFQi/aXAvJU9s6rG54OLEoxJX1VzcsK06zZQXKNELdBIFmsi9gZOBMqPb4jgOtJgpuKumGmPD9dxUUEACyi95F4BnkWNPyTMbHlfyiJJNjaXUgQL9xFxgJnAw52hgMnEiUNzDW2boRaDwZZIbUGQ48S3zvLRmNQAiKvQxnzGZcTjjvsinulw/x5GlX+a7Sbt9+YVPG8wqxvBzc7y2YQIlqoy5wF2BT0c+vMjnxilzYkOzSET0FSq812C2ESLrSn6sZqLPO/vcntPP6QzTayhQ+ioSPuaBGWNLRdZl7pP0EX0VC7/gwS3zIPfQBTx0AQ9yD12AB7mHLsCD3EMX4EHufwJIOEs9kLQJngAAAABJRU5ErkJggg==\"></p>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-graphviz\"><a href=\"#gatsby-remark-graphviz\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-graphviz\">gatsby-remark-graphviz</a></h3>\n<p><strong>マークダウンで<a href=\"https://www.graphviz.org/\">Graphviz</a>(dot言語で記述されたグラフ構造を任意のフォーマットの画像ファイルへ出力するツール)を使えるようにする</strong><br></p>\n<ul>\n<li>内部的には<a href=\"https://github.com/mdaines/viz.js/\">viz.js</a>でコードブロックをSVGファイルに変換しています。</li>\n</ul>\n<h4 id=\"設定-4\"><a href=\"#%E8%A8%AD%E5%AE%9A-4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p><code class=\"language-text\">gatsby-remark-prismjs</code>のようなコードブロックを編集するプラグインより先に定義してください。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-transformer-remark'</span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">'gatsby-remark-graphviz'</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h4 id=\"使い方-3\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>マークダウンで下記のように言語を<code class=\"language-text\">dot</code>としてコードブロックを記述します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">```dot\ndigraph graphname {\n  a -&gt; b;\n  b -&gt; c;\n  a -&gt; c;\n}\n```</code></pre></div>\n<p>すると下記のように表示されます。</p>\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.40.1 (20161225.0304)\n -->\n<!-- Title: graphname Pages: 1 -->\n<svg width=\"89pt\" height=\"188pt\"\n viewBox=\"0.00 0.00 89.00 188.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 184)\">\n<title>graphname</title>\n<polygon fill=\"#ffffff\" stroke=\"transparent\" points=\"-4,4 -4,-184 85,-184 85,4 -4,4\"/>\n<!-- a -->\n<g id=\"node1\" class=\"node\">\n<title>a</title>\n<ellipse fill=\"none\" stroke=\"#000000\" cx=\"54\" cy=\"-162\" rx=\"27\" ry=\"18\"/>\n<text text-anchor=\"middle\" x=\"54\" y=\"-157.8\" font-family=\"Times,serif\" font-size=\"14.00\" fill=\"#000000\">a</text>\n</g>\n<!-- b -->\n<g id=\"node2\" class=\"node\">\n<title>b</title>\n<ellipse fill=\"none\" stroke=\"#000000\" cx=\"27\" cy=\"-90\" rx=\"27\" ry=\"18\"/>\n<text text-anchor=\"middle\" x=\"27\" y=\"-85.8\" font-family=\"Times,serif\" font-size=\"14.00\" fill=\"#000000\">b</text>\n</g>\n<!-- a&#45;&gt;b -->\n<g id=\"edge1\" class=\"edge\">\n<title>a&#45;&gt;b</title>\n<path fill=\"none\" stroke=\"#000000\" d=\"M47.3258,-144.2022C44.2524,-136.0064 40.5384,-126.1024 37.1305,-117.0145\"/>\n<polygon fill=\"#000000\" stroke=\"#000000\" points=\"40.3858,-115.7274 33.5974,-107.593 33.8315,-118.1853 40.3858,-115.7274\"/>\n</g>\n<!-- c -->\n<g id=\"node3\" class=\"node\">\n<title>c</title>\n<ellipse fill=\"none\" stroke=\"#000000\" cx=\"54\" cy=\"-18\" rx=\"27\" ry=\"18\"/>\n<text text-anchor=\"middle\" x=\"54\" y=\"-13.8\" font-family=\"Times,serif\" font-size=\"14.00\" fill=\"#000000\">c</text>\n</g>\n<!-- a&#45;&gt;c -->\n<g id=\"edge3\" class=\"edge\">\n<title>a&#45;&gt;c</title>\n<path fill=\"none\" stroke=\"#000000\" d=\"M57.7474,-144.0931C59.7466,-133.6241 61.9966,-120.1241 63,-108 64.3197,-92.0545 64.3197,-87.9455 63,-72 62.2945,-63.4753 60.9727,-54.2703 59.5551,-45.917\"/>\n<polygon fill=\"#000000\" stroke=\"#000000\" points=\"62.9689,-45.1258 57.7474,-35.9069 56.0803,-46.3698 62.9689,-45.1258\"/>\n</g>\n<!-- b&#45;&gt;c -->\n<g id=\"edge2\" class=\"edge\">\n<title>b&#45;&gt;c</title>\n<path fill=\"none\" stroke=\"#000000\" d=\"M33.6742,-72.2022C36.7476,-64.0064 40.4616,-54.1024 43.8695,-45.0145\"/>\n<polygon fill=\"#000000\" stroke=\"#000000\" points=\"47.1685,-46.1853 47.4026,-35.593 40.6142,-43.7274 47.1685,-46.1853\"/>\n</g>\n</g>\n</svg>\n\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-katex\"><a href=\"#gatsby-remark-katex\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-katex\">gatsby-remark-katex</a></h3>\n<p><strong>マークダウンで数式が使えるようにする</strong><br></p>\n<h4 id=\"設定-5\"><a href=\"#%E8%A8%AD%E5%AE%9A-5\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-transformer-remark'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-katex`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<br>\n追加でCSSをテンプレートで読み込んでください。\n<div class=\"gatsby-code-title\">テンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token string\">'katex/dist/katex.min.css'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4 id=\"使い方-4\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>方程式を '$'で囲みます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$\nf(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi\n$</code></pre></div>\n<p>すると下記のように表示されます。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant=\"normal\">∞</mi></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mover accent=\"true\"><mi>f</mi><mo>^</mo></mover><mo>(</mo><mi>ξ</mi><mo>)</mo><mspace width=\"0.16667em\"></mspace><msup><mi>e</mi><mrow><mn>2</mn><mi>π</mi><mi>i</mi><mi>ξ</mi><mi>x</mi></mrow></msup><mspace width=\"0.16667em\"></mspace><mi>d</mi><mi>ξ</mi></mrow><annotation encoding=\"application/x-tex\">f(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.9578799999999998em;\"></span><span class=\"strut bottom\" style=\"height:1.3720309999999998em;vertical-align:-0.41415100000000005em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathit\">x</span><span class=\"mclose\">)</span><span class=\"mord rule\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mord rule\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8592920000000001em;\"><span style=\"top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">∞</span></span></span></span><span style=\"top:-3.2579000000000002em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.41415100000000005em;\"></span></span></span></span></span><span class=\"mord rule\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9578799999999998em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathit\" style=\"margin-right:0.10764em;\">f</span></span><span style=\"top:-3.26344em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.08332999999999999em;\">^</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathit\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"mclose\">)</span><span class=\"mspace thinspace\"></span><span class=\"mord\"><span class=\"mord mathit\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathit mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathit mtight\">i</span><span class=\"mord mathit mtight\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"mord mathit mtight\">x</span></span></span></span></span></span></span></span></span><span class=\"mspace thinspace\"></span><span class=\"mord mathit\">d</span><span class=\"mord mathit\" style=\"margin-right:0.04601em;\">ξ</span></span></span></span></p>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-embed-snippet\"><a href=\"#gatsby-remark-embed-snippet\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-embed-snippet\">gatsby-remark-embed-snippet</a></h3>\n<p><strong>マークダウンでJavaSriptファイルなどを読み込んでコードブロックに埋め込む</strong><br></p>\n<h4 id=\"設定-6\"><a href=\"#%E8%A8%AD%E5%AE%9A-6\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p><code class=\"language-text\">directory</code>は読み込み対象資産のフォルダを指定します。<br>\n必ず<code class=\"language-text\">gatsby-remark-prismjs</code>より前に指定してください。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">            resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-remark-embed-snippet\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">              classPrefix<span class=\"token punctuation\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              directory<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/examples/`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>          <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">            resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n</span>            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              classPrefix<span class=\"token punctuation\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n              inlineCodeMarker<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n              aliases<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n              showLineNumbers<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<h4 id=\"使い方-5\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-5\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>マークダウンで`embed:設定で指定したディレクトリからの相対パス`のように指定します。\n指定行を強調したい場合は、読み込み対象ファイルにコメントで記述します。</p>\n<h4 id=\"javascriptファイルの場合\"><a href=\"#javascript%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JavaScriptファイルの場合</h4>\n<h5 id=\"読み込み対象ファイル\"><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>読み込み対象ファイル</h5>\n<div class=\"gatsby-code-title\">examples/2018/10/21/sample.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span>\n\n<span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"Brian\"</span>\n\n<span class=\"token comment\">// highlight-range{2-3}</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hello<span class=\"token punctuation\">,</span> $<span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h5 id=\"マークダウン記述\"><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E8%A8%98%E8%BF%B0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>マークダウン記述</h5>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`embed:2018/10/21/sample.js`</code></pre></div>\n<h5 id=\"表示結果\"><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表示結果</h5>\n<p><div class=\"gatsby-highlight\">\n        <pre class=\"language-jsx\"><code><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\r\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span>\r\n\r\n<span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"Brian\"</span>\r\n\r\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\r\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, $</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\r\n</span><span class=\"gatsby-highlight-code-line\">  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\r\n</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n        </div></p>\n<h4 id=\"cssファイルの場合\"><a href=\"#css%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSSファイルの場合</h4>\n<h5 id=\"読み込み対象ファイル-1\"><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>読み込み対象ファイル</h5>\n<div class=\"gatsby-code-title\">examples/2018/10/21/sample.css</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">html <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* highlight-range{1-2} */</span>\n  height<span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token operator\">%</span><span class=\"token punctuation\">;</span>\n  width<span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token operator\">%</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">*</span> <span class=\"token punctuation\">{</span>\n  box<span class=\"token operator\">-</span>sizing<span class=\"token punctuation\">:</span> border<span class=\"token operator\">-</span>box<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* highlight-line */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h5 id=\"マークダウン記述-1\"><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E8%A8%98%E8%BF%B0-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>マークダウン記述</h5>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`embed:2018/10/21/sample.css`</code></pre></div>\n<h5 id=\"表示結果-1\"><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表示結果</h5>\n<p><div class=\"gatsby-highlight\">\n        <pre class=\"language-css\"><code><span class=\"token selector\">html</span> <span class=\"token punctuation\">{</span>\r\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\r\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\r\n</span><span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token selector\">*</span> <span class=\"token punctuation\">{</span>\r\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token property\">box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span>\r\n</span><span class=\"token punctuation\">}</span></code></pre>\n        </div></p>\n<h4 id=\"htmlファイルの場合\"><a href=\"#html%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTMLファイルの場合</h4>\n<h5 id=\"読み込み対象ファイル-2\"><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>読み込み対象ファイル</h5>\n<div class=\"gatsby-code-title\">examples/2018/10/21/sample.html</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>highlight me<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span> <span class=\"token comment\">&lt;!-- highlight-line --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token comment\">&lt;!-- highlight-next-line --></span>\n      And me\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`embed:2018/10/21/sample.html`</code></pre></div>\n<h5 id=\"表示結果-2\"><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表示結果</h5>\n<p><div class=\"gatsby-highlight\">\n        <pre class=\"language-html\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>highlight me<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\r\n</span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"gatsby-highlight-code-line\">      And me\r\n</span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre>\n        </div></p>\n<h4 id=\"yamlの場合\"><a href=\"#yaml%E3%81%AE%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>YAMLの場合</h4>\n<h5 id=\"読み込み対象ファイル-3\"><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB-3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>読み込み対象ファイル</h5>\n<div class=\"gatsby-code-title\">examples/2018/10/21/sample.yaml</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">foo</span><span class=\"token punctuation\">:</span> \"highlighted\" <span class=\"token comment\"># highlight-line</span>\n<span class=\"token key atrule\">bar</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"not highlighted\"</span>\n<span class=\"token comment\"># highlight-range{1-2}</span>\n<span class=\"token key atrule\">baz</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"highlighted\"</span>\n<span class=\"token key atrule\">quz</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"highlighted\"</span></code></pre></div>\n<h5 id=\"マークダウン記述-2\"><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E8%A8%98%E8%BF%B0-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>マークダウン記述</h5>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`embed:2018/10/21/sample.yaml`</code></pre></div>\n<h5 id=\"表示結果-3\"><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C-3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表示結果</h5>\n<p><div class=\"gatsby-highlight\">\n        <pre class=\"language-yaml\"><code><span class=\"token key atrule\">foo</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"highlighted\"</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token key atrule\">bar</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"not highlighted\"</span>\r\n</span><span class=\"token key atrule\">baz</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"highlighted\"</span>\r\n<span class=\"gatsby-highlight-code-line\"><span class=\"token key atrule\">quz</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"highlighted\"</span>\n</span></code></pre>\n        </div></p>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-copy-linked-files\"><a href=\"#gatsby-remark-copy-linked-files\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-copy-linked-files\">gatsby-remark-copy-linked-files</a></h3>\n<p><strong>マークダウンのリンクや画像で使われているPDFや動画などをビルド時にpublicフォルダにコピーする</strong></p>\n<h4 id=\"設定-7\"><a href=\"#%E8%A8%AD%E5%AE%9A-7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"gatsby-remark-copy-linked-files\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\nコピー先をpublic以外にしたい場合はオプションを指定します。\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-remark-copy-linked-files'</span><span class=\"token punctuation\">,</span>\n            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">              destinationDir<span class=\"token punctuation\">:</span> <span class=\"token string\">'path/to/dir'</span><span class=\"token punctuation\">,</span>\n</span>            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\n<p>コピー対象外ファイル指定することもできます。その場合は<code class=\"language-text\">ignoreFileExtensions</code>を設定します。\nこのプロパティは<code class=\"language-text\">[&quot;png&quot;, &quot;jpg&quot;, &quot;jpeg&quot;, &quot;bmp&quot;, &quot;tiff&quot;]</code>がデフォルトです。\nというのも、これらのファイルはgatsby-remark-imagesを使って自動的にレスポンシブな画像が生成されることを前提にしているからです。\nもしgatsby-remark-imagesを使わずにpublicファイルへの単純コピーにしたい場合は下記のようにします。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-remark-copy-linked-files\"</span><span class=\"token punctuation\">,</span>\n            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">              ignoreFileExtensions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span>            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-images\"><a href=\"#gatsby-remark-images\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-images\">gatsby-remark-images</a></h3>\n<p><strong>マークダウンで画像をスマートに表示できるようにする</strong><br></p>\n<ul>\n<li>画像ロード後にレイアウトがガタっとずれないように、画像の大きさ分の空要素を確保しておく</li>\n<li>ブラウザ幅別に画像を生成し<code class=\"language-text\">img</code>タグの<code class=\"language-text\">srcset</code>属性と<code class=\"language-text\">sizes</code>属性を設定します</li>\n<li>画像を20px幅に小さくしたものを、画像ロード中にプレースホルダーとして表示します。これはMediumとFacebookで使われているテクニックです。</li>\n</ul>\n<h4 id=\"設定・使い方\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p><code class=\"language-text\">gatsby-remark-images</code>、<code class=\"language-text\">gatsby-plugin-sharp</code>とあわせて使いましょう。\nオプションに指定したmaxWidthにあわせて、プラグインがいい感じの色々サイズの画像を複数生成してくれます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-sharp`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-images`</span></span><span class=\"token punctuation\">,</span>\n            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">              maxWidth<span class=\"token punctuation\">:</span> <span class=\"token number\">590</span><span class=\"token punctuation\">,</span>\n</span>            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-responsive-iframe\"><a href=\"#gatsby-remark-responsive-iframe\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-responsive-iframe\">gatsby-remark-responsive-iframe</a></h3>\n<p><strong>マークダウンでiframeタグを縦横比固定でレスポンシブにする</strong></p>\n<h4 id=\"使い方-6\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-6\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p><code class=\"language-text\">gatsby-config.js</code>の設定は特に変わったところはありません。<br>\nただし縦横比を明確にするためマークダウン中のiframeにはwidthとheigth属性を必ず指定してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\">This is a beautiful iframe:\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span> <span class=\"token attr-name\">url</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.example.com/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>600<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>400<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>iframe</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-remark-embed-youtube\"><a href=\"#gatsby-remark-embed-youtube\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-embed-youtube\">gatsby-remark-embed-youtube</a></h3>\n<p><strong>マークダウンでYoutubeを埋め込めるようにする</strong></p>\n<h4 id=\"設定-8\"><a href=\"#%E8%A8%AD%E5%AE%9A-8\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p>オプションに高さと幅を指定できます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-transformer-remark\"</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">            resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-remark-embed-youtube\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">              width<span class=\"token punctuation\">:</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">              height<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span>\n</span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span>\n</span>        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\n<p>一注意があって、<code class=\"language-text\">gatsby-remark-responsive-iframe</code>をあわせて使う場合は必ずその前に定義してください。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"gatsby-remark-embed-youtube\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"gatsby-remark-responsive-iframe\"</span>\n</span>        <span class=\"token punctuation\">]</span></code></pre></div>\n<h4 id=\"使い方-7\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>マークダウンで下記のように記載します。URLの最後(embed/2Xc9gXyf2G4)は動画のIDです。</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Look at this Video:</span>\n\n<span class=\"token code keyword\">`youtube:https://www.youtube.com/embed/2Xc9gXyf2G4`</span></code></pre></div>\n<br>\n* 表示結果\n<p><div><iframe src=\"https://www.youtube.com/embed/2Xc9gXyf2G4\" width=\"undefined\" height=\"undefined\"></iframe></div></p>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-twitter\"><a href=\"#gatsby-plugin-twitter\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-twitter\">gatsby-plugin-twitter</a></h3>\n<p><strong>マークダウンでTwitterの埋め込み用スクリプトを記述できるようにする</strong><br></p>\n<p>こちらのプラグインもう少しスマートになってほしいです（ちょっとめんどくさいです）。<br>\n使い方は過去記事<a href=\"2018/10/07/#twitter\">GatsbyでYouTubeとTwitter埋め込み | Takumon Blog</a>を参照してください。</p>\n<h4 id=\"使い方-8\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-8\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>マークダウンには下記のように記載します。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>blockquote</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>twitter-tweet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ja<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ja<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ltr<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>最近忙しかったのでアレですが、ブログ更新しました。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>Reactで構造化データマークアップ（JSON-LD対応） <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://t.co/7V49VqH9WI<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>https://t.co/7V49VqH9WI<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://twitter.com/inouetakumon?ref_src=twsrc%5Etfw<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>@inouetakumon<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>さんから<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token entity\" title=\"&mdash;\">&amp;mdash;</span> takumontakumon (@inouetakumon) <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://twitter.com/inouetakumon/status/1046062825037344770?ref_src=twsrc%5Etfw<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>2018年9月29日<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>blockquote</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<br>\n<ul>\n<li>表示結果</li>\n</ul>\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"ja\" dir=\"ltr\">最近忙しかったのでアレですが、ブログ更新しました。<br><br>Reactで構造化データマークアップ（JSON-LD対応） <a href=\"https://t.co/7V49VqH9WI\">https://t.co/7V49VqH9WI</a> <a href=\"https://twitter.com/inouetakumon?ref_src=twsrc%5Etfw\">@inouetakumon</a>さんから</p>&mdash; takumontakumon (@inouetakumon) <a href=\"https://twitter.com/inouetakumon/status/1046062825037344770?ref_src=twsrc%5Etfw\">2018年9月29日</a></blockquote>\n<p><br><hr></p>\n<h2 id=\"seo系\"><a href=\"#seo%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SEO系</h2>\n<h3 id=\"gatsby-plugin-react-helmet\"><a href=\"#gatsby-plugin-react-helmet\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet\">gatsby-plugin-react-helmet</a></h3>\n<p><strong>React HelmetをGatsbyビルド時使えるようにする</strong><br></p>\n<ul>\n<li>実用例は<a href=\"../../09/29\">Reactで構造化データマークアップ（JSON-LD対応)</a>を参照してください。</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-offline\"><a href=\"#gatsby-plugin-offline\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-offline\">gatsby-plugin-offline</a></h3>\n<p><strong>低速ネットワーク環境やオフライン環境でもWebサイトをスムーズに見れるようにする</strong><br></p>\n<ul>\n<li>ビルド時にサービスワーカーを生成してくれます。</li>\n<li><code class=\"language-text\">gatsby-plugin-manifest</code>との併用推奨です。</li>\n<li>\n<p>このプラグインは<a href=\"https://developers.google.com/web/tools/workbox/modules/workbox-build\">Workbox</a>の設定を従っており、必要に応じて<code class=\"language-text\">gatsby-config.js</code>で上書くという感じです。Workboxは宣言的な記述だけで最適なServiceWorkerのコードが生成できるライブラリで、下記にわかりやすく書かれていました。</p>\n<ul>\n<li>参考：<a href=\"https://qiita.com/nazonohito51/items/32b61cabdac8b24769bd\">ServiceWorkerを簡単に書けるworkbox-swの使い方 | Qiita</a></li>\n</ul>\n</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-manifest\"><a href=\"#gatsby-plugin-manifest\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-manifest\">gatsby-plugin-manifest</a></h3>\n<p><strong>アプリをPWA対応にする（manifest.webmanifestを生成する）</strong><br></p>\n<ul>\n<li>サイトに<code class=\"language-text\">manifest.webmanifest</code>を配置することで、スマホでブログを見たときに、ネイティブアプリのようなUXを実現できます。</li>\n<li><code class=\"language-text\">gatsby-plugin-offline</code>との併用推奨です。</li>\n<li>詳細は<a href=\"https://takumon.com/2018/10/08/#gatsby-plugin-manifest%E3%81%AE%E8%A8%AD%E5%AE%9A\">GatsbyでPWA対応 |Takumon Blog</a>参照してください。</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-sitemap\"><a href=\"#gatsby-plugin-sitemap\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-sitemap\">gatsby-plugin-sitemap</a></h3>\n<p><strong>サイトマップを生成する</strong><br></p>\n<h4 id=\"設定・使い方-1\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>プラグインで<a href=\"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-plugin-sitemap/src/internals.js#L34\">いい感じの設定</a>があらかじめされているので、最低限設定するならsiteUrlを指定するだけです。個別にオプションを設定する場合は、<a href=\"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-plugin-sitemap/src/internals.js#L34\">いい感じの設定</a>を参考にしましょう。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    siteUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`https://www.example.com`</span></span><span class=\"token punctuation\">,</span>\n</span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-sitemap`</span></span><span class=\"token punctuation\">]</span></code></pre></div>\n<br>\nこれだけで下記のようなサイトマップが生成できます。\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>urlset</span>\n  <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.sitemaps.org/schemas/sitemap/0.9<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>news</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-news/0.9<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xhtml</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/1999/xhtml<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>mobile</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-mobile/1.0<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>image</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-image/1.1<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>video</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-video/1.1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>loc</span><span class=\"token punctuation\">></span></span>https://takumon.com/2018/10/14/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>loc</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>changefreq</span><span class=\"token punctuation\">></span></span>daily<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>changefreq</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>priority</span><span class=\"token punctuation\">></span></span>0.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>priority</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>loc</span><span class=\"token punctuation\">></span></span>https://takumon.com/2018/10/12/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>loc</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>changefreq</span><span class=\"token punctuation\">></span></span>daily<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>changefreq</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>priority</span><span class=\"token punctuation\">></span></span>0.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>priority</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>loc</span><span class=\"token punctuation\">></span></span>https://takumon.com/2018/10/08/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>loc</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>changefreq</span><span class=\"token punctuation\">></span></span>daily<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>changefreq</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>priority</span><span class=\"token punctuation\">></span></span>0.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>priority</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!-- ・・・ --></span>\n  <span class=\"token comment\">&lt;!-- Webサイト上の全てのURL定義 --></span>\n  <span class=\"token comment\">&lt;!-- ・・・ --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>urlset</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-canonical-urls\"><a href=\"#gatsby-plugin-canonical-urls\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-canonical-urls\">gatsby-plugin-canonical-urls</a></h3>\n<p><strong>canonical linksを追加する</strong><br></p>\n<ul>\n<li>canonical linksは検索エンジンに対して、プロコトルが違ったりクエリストリングがついていても同一のサイトのURLだということを宣言するためのリンクです。</li>\n</ul>\n<h4 id=\"設定・使い方-2\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>オプションとしてsiteUrlを指定します。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-canonical-urls`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        siteUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`https://www.example.com`</span></span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\nすると下記リンクタグがHTML内に埋め込まれます。\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>canonical<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.example.com/about-us/<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-feed\"><a href=\"#gatsby-plugin-feed\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-feed\">gatsby-plugin-feed</a></h3>\n<p><strong>RSSフィードを作る</strong></p>\n<h4 id=\"設定-9\"><a href=\"#%E8%A8%AD%E5%AE%9A-9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<p><code class=\"language-text\">gatsby-config.js</code>でsiteMetadataを設定しプラグインを定義するだけでOKです。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`GatsbyJS`</span></span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`Blazing fast modern site generator for React`</span></span><span class=\"token punctuation\">,</span>\n    siteUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`https://www.gatsbyjs.org`</span></span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-feed`</span></span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<br>\nこのプラグインを使うと、ビルドでpublic配下にrss.xmlが生成されます。<br>\n自分の場合はFeedlyの登録ボタンと、rss.xmlへのリンクをブログのトップに設けています。\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 468px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 136.53846153846155%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsSAAALEgHS3X78AAAGB0lEQVRIx41TaWxUVRi902k7A1EW2UWWikuhs3cG2jJQKEUxkBADFKMmgPoLISqImAhoMCwKqEEIoQUhIUJZRPYChbK0TNvXR2lp6QavBUq3oduUTpeZd3v87jAFY6Lx5Z189373u+ee89332Fzdm3/O7RNZk9Rn/L3F+ijlE8KXOoOySm9QviKspfH6MKOyJcSkbNeYlB3MpCRrzMoewl7CIY1VSdVY7x7XWOtOaawn2XxdZP6HegOW6KPwhc6AtToTNoWZsZGwPtyEH0LN2KmxIJlZsYdZcEBjxZEQK1IJZ0JsSNPYcIKQxRy4yGyF7CN9VO5yvRGf6aL868IMfE24ga/TGvgmrZGTKr5bY+G/aaw8OcTKU5iZHxKg8TGtjZ+m/BlaPx9i9UuhDlwNteWx5TqDtLqPiZQZ+eYwE74PNWLjwEn4SWfFbmbCAWbAYYoHKf5BSk7pJuIczdOYERe1NlwnlTmh0WqZfhJy9HaZfa6bIK0jm9+FE2G4GVtYFI5NXoT8NTuQvXQjXIvWQV66CfnLNiP7nWUoW7kN9775FUVzV8JFtbnhduRoo9UKXQxydUS4NixK2qKlnpHFX7SiX2Ykh0Xj6LAZODo0AScHT8fpIQm4QPPL/acgc9A0ZI2ahZxXZkEihbLejvw+dvXhwFgUD5wos2/DjNJWIvo5xMx3kY19hP1k7yCbgEOk4ASN0wjplM8gq1fpYrJonEfjAn00br/gQOkAh9owIg6VoybJbIPWKO2kG9vJDDx1mBMpHyfhuDERlwcm4NKImcgcMBk3+iXA1T8RrpFvI2/IdOS/5ETxyJkoHzsDFYPteDh6kto0Og4PxhHhNmaUdtFnQer4Jecs7J0xFtfjndgXkYjUV2fjiGMZLs9ZiKtxc1A0/C3cHhaP4sFToIybgcrXElH1sgM1EQ61PXIymqJjZbadmST6LPA7s/CT/SciO8KMrEF2pOjMSO3nxNExH+D0lHhcs09FMdktftEBZehE1I4hZSPtqH8jBu7IWLXb6kRLLBHuCLFIh7V2HAmN5qnis9DH4LLGgRv0oV5n1HCtCbc00Sjp60DJoBjcGx6LB2PiUPt6LCEGjUTUbHOqmBaPJ4lOmaWwSOk4Nf8gG89T6SLOsfG4QpdwnXIuioVhFtzpa8Hd/hZUDjDj/lAzakdY0DzGiroIK7wWG7yxNhWz7fAlWGSWNv5dyWVIQsaEefxK1DzkRs1HgXEBiiwLUBadBCVmISoJ1VPfQ3X8QnTNSULdvCW4O3cJsPh93Px0LaSvf1RLN2xF4YpVMvO2eiTQo3Z0crWjC5ygBsE7gwjO4evCrdpOzLqgQr/fhxVZKtIfuqE0XlLdDY+xJ6dOZl2+7gAhp7fnafzPp6YTWH0TcKb14EAlkP7Ag7stJWp1c0eQsKtLCtY+5+rpQQ//GzXNVb9fhN5EMKqoagNKWqDe9wMPPVxmNTU1UkFBAfLy8rjL5YJAeXk5SkpKIMsyysrKUFxcjNraWlRVVeFOSSmKiorgdrshyTfR5K7HfaVCDWqSWWtrqyQKiZRXVFQENldWVqK6uhqKogQ2inFDQwPq6+tB9Whra0N3d3cgegQ8bQFCn98vs5aWFqmwsBDnz5/nQmlpaSmuXbuGnJwcZGdn4+zZs0hPT0dGRgYyMzP/rbVPCX0+umWvN9DD9vZ2TmN0dHQEQL1FZ2enyOPJkyeBKHK0CaqqBhSKnKil8XNCki0FN3KPx4O6ujo8evTomTURyQWampoCBCIn6pubmwM9DbbjOSEVBQiJjAslvf0R5IK4sbHxGZEYC6Jetb29paiKOSmXGW2UAs0lQmFZEIkDRE7Mxe0KIpEXEJaFakEsojiUbD9XSFakx48fi5O42CgIxKmiuNd2r2VB0gtRK9YEqE0BQr+4ZVKRK5pMp/tJmbDN273tnCxwss6piNM676A1UhKAyIt1US/W6WB/kDCP0Wn5nP4KmgTs8OAfIg4RvRIQ1v/PQ3sKxJ9ygSSTQE89WXNTdLd7ve7WVo+brFNsdYs8KXKTMncXofsfoLW6bp+PtnnT/wIgYyKKaOtv9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"RSSフィード\"\n        title=\"\"\n        src=\"/static/88f587b2b71e9d4a73cc88a0a11f0c2a/31381/rssfeed.png\"\n        srcset=\"/static/88f587b2b71e9d4a73cc88a0a11f0c2a/7f74b/rssfeed.png 200w,\n/static/88f587b2b71e9d4a73cc88a0a11f0c2a/1ef94/rssfeed.png 400w,\n/static/88f587b2b71e9d4a73cc88a0a11f0c2a/31381/rssfeed.png 468w\"\n        sizes=\"(max-width: 468px) 100vw, 468px\"\n      />\n    </span>\n  </span>\n  </p>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-robots-txt\"><a href=\"#gatsby-plugin-robots-txt\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-robots-txt\">gatsby-plugin-robots-txt</a></h3>\n<p><strong><code class=\"language-text\">robots.txt</code>を生成する</strong><br></p>\n<ul>\n<li>robots.txtは検索エンジンのクロールを最適化するためのテキストファイルです。SEO対策に使われます。</li>\n</ul>\n<h4 id=\"設定・使い方-3\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>オプションでホストURLやサイトマップを指定できます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-plugin-robots-txt'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        host<span class=\"token punctuation\">:</span> <span class=\"token string\">'https://www.example.com'</span><span class=\"token punctuation\">,</span>\n        sitemap<span class=\"token punctuation\">:</span> <span class=\"token string\">'https://www.example.com/sitemap.xml'</span><span class=\"token punctuation\">,</span>\n        policy<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> userAgent<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> allow<span class=\"token punctuation\">:</span> <span class=\"token string\">'/'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>Netlfyで<a href=\"https://www.netlify.com/blog/2016/07/20/introducing-deploy-previews-in-netlify/\">Deploy Preview機能</a>を使うなら下記のような設定にします。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">NODE_ENV</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">URL</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">NETLIFY_SITE_URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">'https://www.example.com'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">DEPLOY_PRIME_URL</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">NETLIFY_DEPLOY_URL</span> <span class=\"token operator\">=</span> <span class=\"token constant\">NETLIFY_SITE_URL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">CONTEXT</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">NETLIFY_ENV</span> <span class=\"token operator\">=</span> <span class=\"token constant\">NODE_ENV</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> isNetlifyProduction <span class=\"token operator\">=</span> <span class=\"token constant\">NETLIFY_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> siteUrl <span class=\"token operator\">=</span> isNetlifyProduction <span class=\"token operator\">?</span> <span class=\"token constant\">NETLIFY_SITE_URL</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">NETLIFY_DEPLOY_URL</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    siteUrl\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-plugin-robots-txt'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        resolveEnv<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">NETLIFY_ENV</span><span class=\"token punctuation\">,</span>\n        env<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          production<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            policy<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> userAgent<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">'branch-deploy'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            policy<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> userAgent<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> disallow<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            sitemap<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            host<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">'deploy-preview'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            policy<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> userAgent<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> disallow<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            sitemap<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            host<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>オプションを指定しない場合は、siteMetadataにsiteUrlを指定します。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    siteUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'https://www.example.com'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'gatsby-plugin-robots-txt'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>ビルドするとpublicフォルダ配下に<code class=\"language-text\">robot.txt</code>が生成されます。</p>\n<div class=\"gatsby-code-title\">robot.txtの例</div>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">User-agent: *\nDisallow:\nSitemap: https://takumon.com/sitemap.xml</code></pre></div>\n<p><br><hr></p>\n<h2 id=\"開補補助系\"><a href=\"#%E9%96%8B%E8%A3%9C%E8%A3%9C%E5%8A%A9%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>開補補助系</h2>\n<h3 id=\"gatsby-plugin-lodash\"><a href=\"#gatsby-plugin-lodash\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-lodash\">gatsby-plugin-lodash</a></h3>\n<p><strong>ビルド時のlodashのサイズを小さくする</strong><br></p>\n<h4 id=\"設定・使い方-4\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>オプションで<a href=\"https://github.com/lodash/lodash-webpack-plugin#feature-sets\">モジュール</a>を削ってさらにサイズを小さくできます。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-lodash`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        disabledFeatures<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token template-string\"><span class=\"token string\">`shorthands`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token template-string\"><span class=\"token string\">`cloning`</span></span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-webpack-bundle-analyzer\"><a href=\"#gatsby-plugin-webpack-bundle-analyzer\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-webpack-bundle-analyzer\">gatsby-plugin-webpack-bundle-analyzer</a></h3>\n<p><strong><a href=\"https://github.com/webpack-contrib/webpack-bundle-analyzer\">webpack-bundle-analyzer</a>を使ってbundle.jsの中身のサイズを可視化する</strong><br></p>\n<ul>\n<li>webpack-bundle-analyzerはパフォーマンスチューニングでbundle.jsのサイズを減らそうと思ったときに便利なライブラリです。ライブラリorコンポーネント毎にサイズをグラフィカルに示してくれます。</li>\n</ul>\n<h3 id=\"設定-10\"><a href=\"#%E8%A8%AD%E5%AE%9A-10\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h3>\n<p>このプラグインは内部webpack-bundle-analyzerというライブラリを使っており、\n<a href=\"https://github.com/webpack-contrib/webpack-bundle-analyzer#options-for-plugin\">webpack-bundle-analyzerのオプション</a>なら何でも指定できます。<br></p>\n<p>デフォルトだと<code class=\"language-text\">gatsby develop</code>するたびにブラウザが開くので、\nそれがいやなら下記のようにすると良いでしょう。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-webpack-bundle-analyzer`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        openAnalyzer<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n</span>      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"使い方-9\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h3>\n<p><code class=\"language-text\">gatsby develop</code>して<code class=\"language-text\">http://localhost:8888</code>にアクセスします。\nすると下記のようにコンポーネント毎のサイズをグラフィカルに示してくれます。</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 58.99419729206963%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACvklEQVQoz2WS608aURDF919v+q3pp6ZJmzTaWm3UWjVqqQryEhBBgUX2wT5ZWHB57wVUQOSeDpgY005yMpPs5ObM+a2gKgVdU8URySexhcqLXi6SRJZKhNl5LMhSyTBLnIdY7irFdK34vPNatG/qJSbIN9m2qYlQpStoSg6GmodRLizn60wcsXAAyfgpIqEjnJ0eIJ89h07fyvL1ixa7SimLdDIIQVMKXsWUYBuluSpd82L+gpcKl1yVcvwiEeaZiyjPXsapx/h1JsFrtsptQ+KmdsOrNFdMmTuWzHUlzyPBPS50Oy2v2byFU7G4VlZhmQZsS4dWllF1rKVazTp1HW7NgqHLtKvDNBTa09D0GmCsRy7ziJ/tQZhOJx6ei+NVcT7H09MM8/kc4/EdYtEgfu1s4sfGN3xfW8HW1jrOQscIBA5RKom4KSSxv/0ZAmO+xxhDv9/nvu9jMBhgNBrBMHTYtoVKxUaz2UBZKUDMp5cq5C5AUEBAcZmO0TVFXKVD2F7/AKHTaXtOtQrLsjiJHqhgNpthPBljQrq/v8dw0IdlSFDlAmQpD8dWQTCRTUeQTZ0gkwoiET3El49vIDw+Tv87eTp5QL/XQa/bxnDog/ld/FumLpFbckrZleUcziMH2Fh9D6FRd7xet0nBu7zdasCtLkAYFL4ERRZRsVQ0b6twXReiKELXCY5bg20qyGVjuLoMI06PJaJHONz9CmHA+t7scUqnjfjDwz3u7kY034FggdwTkAdMFppMKN8hOR7RPEWpmMFpYBPpxDHCpztLwvs/CUq32/Fct75wwOv1Omq12jJH27bhOA7NDp3egd9rodNu4LZuU543lGeOMgyTswOk4vTTn2xjY+UdhOGAefP5E+U25tPpeNGXMF46OR0OfNRdi1ylESMnq5/eUmaHiIZ2l6em4r+RJCh/DtbwF2S4TsWiu1WwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"webpack-bundle-analyzerの結果\"\n        title=\"\"\n        src=\"/static/750e0d13a929ecfdba2f3651a4d601c9/42603/bundlesize.png\"\n        srcset=\"/static/750e0d13a929ecfdba2f3651a4d601c9/f931c/bundlesize.png 200w,\n/static/750e0d13a929ecfdba2f3651a4d601c9/e8031/bundlesize.png 400w,\n/static/750e0d13a929ecfdba2f3651a4d601c9/42603/bundlesize.png 800w,\n/static/750e0d13a929ecfdba2f3651a4d601c9/b594a/bundlesize.png 1034w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-google-analytics\"><a href=\"#gatsby-plugin-google-analytics\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-google-analytics\">gatsby-plugin-google-analytics</a></h3>\n<p><strong><a href=\"https://analytics.google.com/analytics/web/\">Google Analytics</a>を使えるようにする</strong><br></p>\n<h4 id=\"設定・使い方-5\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-5\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p><code class=\"language-text\">gatsby-config.js</code>でトラッキングIDを設定するだけです。\ngatsby-starter-blogの時点ではコメントアウトされているので、Google AnalyticsでトラッキングIDを発行して設定しましょう。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-google-analytics`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        trackingId<span class=\"token punctuation\">:</span> <span class=\"token string\">\"YOUR_GOOGLE_ANALYTICS_TRACKING_ID\"</span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-facebook-analytics\"><a href=\"#gatsby-plugin-facebook-analytics\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-facebook-analytics/\">gatsby-plugin-facebook-analytics</a></h3>\n<p><strong><a href=\"https://developers.facebook.com/docs/analytics/?locale=ja_JP\">Facebook Analytics</a>を使えるようにする</strong><br></p>\n<h4 id=\"設定・使い方-6\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-6\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-facebook-analytics`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        appId<span class=\"token punctuation\">:</span> <span class=\"token string\">\"あなたのAPP ID\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 開発時も解析対象とするか</span>\n        <span class=\"token comment\">// デフォルトはfalseでプロダクションのみ解析対象とします</span>\n        includeInDevelopment<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// SDKのデバックバージョンを含めるか</span>\n        <span class=\"token comment\">// デフォルトはfalseでライブラリはsdk.jsをロードします。</span>\n        debug<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 言語を指定。デフォルトはenglish</span>\n        language<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ja-jp\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h2 id=\"ui系\"><a href=\"#ui%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UI系</h2>\n<h3 id=\"gatsby-plugin-nprogress\"><a href=\"#gatsby-plugin-nprogress\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-nprogress\">gatsby-plugin-nprogress</a></h3>\n<p><strong>ローディングに時間がかかっている時にプログレスバーを表示する</strong><br></p>\n<ul>\n<li><a href=\"http://ricostacruz.com/nprogress/\">NProgress</a>を使って、リンククリックから1秒たってもローディング中の場合にプログレスバーを表示します。</li>\n</ul>\n<h4 id=\"設定・使い方-7\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>下記のように設定します。<code class=\"language-text\">color</code>でバーの色が変更可能です。\nまたオプションには<a href=\"https://github.com/rstacruz/nprogress#configuration\">NProgress</a>のオプションが全て指定できるようになっています。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-nprogress`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        color<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`#444`</span></span><span class=\"token punctuation\">,</span>\n        showSpinner<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-catch-links\"><a href=\"#gatsby-plugin-catch-links\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-catch-links\">gatsby-plugin-catch-links</a></h3>\n<p><strong>aタグでローカル遷移する時にリロードを抑止してヒストリーAPIで遷移できるようにする</strong></p>\n<p>Gatsby(React製)はSPAなので、ローカル遷移はブラウザのヒストリーAPIを使うべきで、リロードは避けたいところですが、\n<code class=\"language-text\">&lt;a href=&quot;tags/react&quot; &gt;ローカル遷移のリンク&lt;/a&gt;</code>のような<strong>a</strong>タグの場合、クリック時に（ブラウザのでフォルの挙動により）リロードしてしまいます。<br></p>\n<p>このプラグインを使えば、<strong>a</strong>タグの場合でもローカル遷移であればリロードを抑止し、ヒストリーAPIを使った遷移が可能です。<br>\n<a href=\"https://www.gatsbyjs.org/docs/gatsby-link/#programmatic-navigation\">Gatsby-Link</a>を使っていれば問題ないのですが、どうしても<strong>a</strong>タグしか使えない場合は、このプラグインが役立つでしょう。</p>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-layout\"><a href=\"#gatsby-plugin-layout\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-layout\">gatsby-plugin-layout</a></h3>\n<p><strong>1系のレイアウト機能を2系でも使えるようにする</strong><br></p>\n<ul>\n<li>1系から2系に移行したときに、レイアウト機能(2系では削除された機能)をそのまま使えるようにするために使います。</li>\n</ul>\n<h4 id=\"設定・使い方-8\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-8\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p><code class=\"language-text\">gatsby-config.js</code>の設定は特に変わったところはありません。<br>\nレイアウト用ファイルは<code class=\"language-text\">src/layouts/index.js</code>を作成しましょう。</p>\n<p><br><hr></p>\n<h2 id=\"ファイル系\"><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ファイル系</h2>\n<p>JSON,XML,YAML,CSVのパースは使い方はほぼ一緒なのでまとめて説明します。</p>\n<ul>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-json\">gatsby-transformer-json</a></p>\n<ul>\n<li><strong>JSONファイルをパースする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-xml\">gatsby-transformer-xml</a></p>\n<ul>\n<li><strong>XMLファイルをパースする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-yaml\">gatsby-transformer-yaml</a></p>\n<ul>\n<li><strong>Yamlファイルをパースする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-csv\">gatsby-transformer-csv</a></p>\n<ul>\n<li><strong>CSVファイルをパースする</strong></li>\n</ul>\n</li>\n</ul>\n<p>これらはgatsby-source-filesystemとあわせて使います。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-json`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`./src/data/`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h3 id=\"gatsby-source-filesystem\"><a href=\"#gatsby-source-filesystem\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-filesystem\">gatsby-source-filesystem</a></h3>\n<p><strong>ファイルを読み取りGatsby上で扱えるFileノードを生成する</strong><br></p>\n<ul>\n<li><code class=\"language-text\">transformer</code>プラグイン（ファイルノードをファイル形式毎に最適化したノードに変換するプラグイン）と併用します。例えば<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-json\">gatsby-transformer-json</a>はJSONファイルをJSONノードに変換し、<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/?=gatsby-transformer-remark\">gatsby-transformer-remark</a>はマークダウンファイルをMarkdownRemarkノードに変換します。</li>\n<li>※gatsby-starter-blogインストール済</li>\n</ul>\n<h3 id=\"設定方法・使い方\"><a href=\"#%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定方法・使い方</h3>\n<ul>\n<li><code class=\"language-text\">gatsby-config.js</code>では読み込み対象のフォルダパスを指定します。</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`pages`</span></span><span class=\"token punctuation\">,</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/pages/`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`data`</span></span><span class=\"token punctuation\">,</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/data/`</span></span><span class=\"token punctuation\">,</span>\n        ignore<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`**/\\.*`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ドット始まりのファイルは無視</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>読み取ったファイルノードはGraphQLで取得できます。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  allFile <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        extension\n        dir\n        modifiedTime\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>JavaScriptの関数 <code class=\"language-text\">createFilePath</code> を用意しています。実際<code class=\"language-text\">gatsby-config.js</code>ではマークダウン読み込みで使っています。</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownRemark`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</span>    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`slug`</span></span><span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>同じく関数<code class=\"language-text\">createRemoteFileNode</code>を用意しています。こちらは名前の通り、リモートのファイル読み込みで使用します。</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-transformer-remark\"><a href=\"#gatsby-transformer-remark\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark\">gatsby-transformer-remark</a></h3>\n<p><strong>マークダウンファイルをパースする（MarkdownRemarkノードに変換する）</strong><br></p>\n<h4 id=\"使い方-10\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-10\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<ul>\n<li>MarkdownRemarkノードはGraphQLで取得可能です。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  allMarkdownRemark <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        html\n        headings <span class=\"token punctuation\">{</span>\n          depth\n          value\n        <span class=\"token punctuation\">}</span>\n        frontmatter <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\"># Assumes you're using title in your frontmatter.</span>\n          title\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>目次も取得できます。目次のURLは<code class=\"language-text\">slug</code>ですが<code class=\"language-text\">pathToSlugField</code>でカスタム可能です。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  allMarkdownRemark <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        html\n<span class=\"gatsby-highlight-code-line\">        tableOfContents<span class=\"token punctuation\">(</span><span class=\"token attr-name\">pathToSlugField</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"frontmatter.path\"</span><span class=\"token punctuation\">)</span>\n</span>        frontmatter <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\"># Assumes you're using path in your frontmatter.</span>\n          path\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>\n<p>要約も取得できます。デフォルト120文字ですが、<code class=\"language-text\">pruneLength</code>でカスタム可能です。</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\nallMarkdownRemark <span class=\"token punctuation\">{</span>\nedges <span class=\"token punctuation\">{</span>\n  node <span class=\"token punctuation\">{</span>\n    html\n<span class=\"gatsby-highlight-code-line\">    excerpt<span class=\"token punctuation\">(</span><span class=\"token attr-name\">pruneLength</span><span class=\"token punctuation\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span>\n</span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-image\"><a href=\"#gatsby-image\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark\">gatsby-image</a></h3>\n<p><strong>画像読み込みを最適化する</strong></p>\n<ul>\n<li>gatsby-plugin-sharpと併せて使用します</li>\n<li>Webサイトにおいて画像読み込みの最適化はかなり手間がかかりますが、それらをよしなりやってくれるのがこのプラグインです。GraphQLとSharpを使ったGatsbyのネイティブ画像処理機能とシームレスに連携するように設計されています。</li>\n</ul>\n<h4 id=\"設定・使い方-9\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<ul>\n<li><code class=\"language-text\">gatsby-plugin-sharp</code>、<code class=\"language-text\">gatsby-transformer-sharp</code>と一緒に使います。下記のように設定します。</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`path`</span></span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`images`</span></span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">        path<span class=\"token punctuation\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`src`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`images`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>    <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-sharp`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-sharp`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>実際使う場合はコンポーネント内でHTMLの<code class=\"language-text\">img</code>タグの代わりにgatsby-imageの<code class=\"language-text\">Img</code>タグを使います。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Img <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby-image\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hello gatsby<span class=\"token operator\">-</span>image<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token operator\">&lt;</span>Img fixed<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>file<span class=\"token punctuation\">.</span>childImageSharp<span class=\"token punctuation\">.</span>fixed<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n</span>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> query <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n  query {\n<span class=\"gatsby-highlight-code-line\">    file(relativePath: { eq: \"blog/avatars/kyle-mathews.jpeg\" }) {\n</span><span class=\"gatsby-highlight-code-line\">      childImageSharp {\n</span><span class=\"gatsby-highlight-code-line\">        fixed(width: 125, height: 125) {\n</span><span class=\"gatsby-highlight-code-line\">          ...GatsbyImageSharpFixed\n</span><span class=\"gatsby-highlight-code-line\">        }\n</span><span class=\"gatsby-highlight-code-line\">      }\n</span><span class=\"gatsby-highlight-code-line\">    }\n</span><span class=\"gatsby-highlight-code-line\">  }\n</span>`</span></span></code></pre></div>\n<p><br><hr></p>\n<h3 id=\"gatsby-transformer-sharp\"><a href=\"#gatsby-transformer-sharp\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-sharp\">gatsby-transformer-sharp</a></h3>\n<p><strong>画像読み込みでImageSharpノードを生成する</strong><br></p>\n<ul>\n<li><code class=\"language-text\">gatsby-plugin-sharp</code>と併用します。</li>\n</ul>\n<p><br><hr></p>\n<h3 id=\"gatsby-plugin-sharp\"><a href=\"#gatsby-plugin-sharp\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-sharp\">gatsby-plugin-sharp</a></h3>\n<p><strong><a href=\"https://github.com/lovell/sharp\">Sharp</a>(画像圧縮ライブラリ)を使えるようにする</strong><br></p>\n<ul>\n<li>Gatsbyエンドユーザーが使うというよりは、プラグインの一部で使う低レイヤーのプラグイン。</li>\n</ul>\n<p><br><hr></p>\n<h2 id=\"css系\"><a href=\"#css%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS系</h2>\n<p>SASSやCSS in JSのライブラリ用のプラグインは一通り用意されています。\nプラグインを入れるだけで簡単に使えるので設定や使い方は省略します。</p>\n<ul>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-sass\">gatsby-plugin-sass</a></p>\n<ul>\n<li><strong>GatsbyでSASS/SCSSを使えるようにする</strong></li>\n<li><code class=\"language-text\">node-sass</code>をあわせてインストールしてください。</li>\n<li>CSS Moduleを使う場合、拡張子を<code class=\"language-text\">module.scss</code>、<code class=\"language-text\">module.sass</code>などとしてください。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-styled-components\">gatsby-plugin-styled-components</a></p>\n<ul>\n<li><strong><a href=\"https://github.com/styled-components/styled-components\">Styled Components</a>を使えるようにする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-glamor\">gatsby-plugin-glamor</a></p>\n<ul>\n<li><strong><a href=\"https://github.com/threepointone/glamor\">Glamor</a>と<a href=\"https://github.com/paypal/glamorous\">glamorous</a>を使えるようにする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-emotion/\">gatsby-plugin-emotion</a></p>\n<ul>\n<li><strong><a href=\"https://github.com/emotion-js/emotion\">Emotion</a>を使えるようにする</strong></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-postcss\">gatsby-plugin-postcss</a></p>\n<ul>\n<li><strong><a href=\"https://postcss.org/\">PostCSS</a>が使えるようにする</strong></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"gatsby-plugin-typography\"><a href=\"#gatsby-plugin-typography\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-typography\">gatsby-plugin-typography</a></h3>\n<p><strong><a href=\"https://kyleamathews.github.io/typography.js/\">Typography.js</a>(文章のスタイルを設定するライブラリ)を使えるようにする</strong><br></p>\n<ul>\n<li>Typography.jsはフォント、フォントサイズ、line-heigth等のパラメータを設定すると、それに従ってCSSを生成してくれるライブラリです。CSSよりも管理が楽になる上、様々なテーマが提供されているので、それを使って簡単にスタイルを設定できます。</li>\n</ul>\n<h4 id=\"設定・使い方-10\"><a href=\"#%E8%A8%AD%E5%AE%9A%E3%83%BB%E4%BD%BF%E3%81%84%E6%96%B9-10\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定・使い方</h4>\n<p>スタイル指定用のJavaScriptを作成します。\nテーマを使うと作成が楽です。どんなテーマがあるかは<a href=\"https://kyleamathews.github.io/typography.js/\">Typography.js</a>の右上にある<code class=\"language-text\">Pick theme</code>プルダウンで確認できます。お気に入りのテーマを選んで、npmインストールして使いましょう。</p>\n<div class=\"gatsby-code-title\">src/utils/typography.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Typography <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography\"</span>\n<span class=\"token keyword\">import</span> grandViewTheme <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography-theme-grand-view\"</span>\n\n<span class=\"token keyword\">const</span> typography <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Typography</span><span class=\"token punctuation\">(</span>grandViewTheme<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> rhythm<span class=\"token punctuation\">,</span> scale <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> typography<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> rhythm<span class=\"token punctuation\">,</span> scale<span class=\"token punctuation\">,</span> typography <span class=\"token keyword\">as</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>JavaScriptでテーマの設定を上書くこともできます。</p>\n<div class=\"gatsby-code-title\">src/utils/typography.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Typography <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography\"</span>\n<span class=\"token keyword\">import</span> grandViewTheme <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography-theme-grand-view\"</span>\n\ngrandViewTheme<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">overrideThemeStyles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token string\">'html,body,h1,h2,h3,h4,h5,h6'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    color<span class=\"token punctuation\">:</span> <span class=\"token string\">'#444'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    fontFamily<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'-apple-system'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'BlinkMacSystemFont'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'Segoe UI'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'Helvetica Neue'</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'Hiragino Kaku Gothic ProN'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'\"Yu Gothic\"'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'YuGothic'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'Verdana'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'Meiryo'</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'\"M+ 1p\"'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'sans-serif'</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> typography <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Typography</span><span class=\"token punctuation\">(</span>grandViewTheme<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> rhythm<span class=\"token punctuation\">,</span> scale <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> typography<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> rhythm<span class=\"token punctuation\">,</span> scale<span class=\"token punctuation\">,</span> typography <span class=\"token keyword\">as</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>作ったスタイル指定用のJavaScriptを<code class=\"language-text\">gatsby-config.js</code>で指定します。</p>\n<div class=\"gatsby-code-title\">gatsby-config.jsの中</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-typography`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        pathToConfigModule<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`src/utils/typography`</span></span><span class=\"token punctuation\">,</span>\n</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><br><hr></p>\n<h2 id=\"外部連携系\"><a href=\"#%E5%A4%96%E9%83%A8%E9%80%A3%E6%90%BA%E7%B3%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>外部連携系</h2>\n<p>ブログなどからデータをひっぱってきてGraphQLで扱えるようにするプラグイン群です。\n他にも様々ありますが、有名どころとの連携プラグインは下記のようなものがあります。\n各プラグインの使い方は、かなりがっつりしたものになるのでココでは省略します。</p>\n<ul>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-medium\">gatsby-source-medium</a></p>\n<ul>\n<li><a href=\"https://medium.com/\">Medium</a>の記事を引っ張ってきてGraphQLで扱えるようにする</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-wordpres\">gatsby-source-wordpres</a></p>\n<ul>\n<li><a href=\"https://ja.wordpress.org/\">WordPress</a>の記事を引っ張ってきてGraphQLで扱えるようにする</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-contentful\">gatsby-source-contentful</a></p>\n<ul>\n<li><a href=\"https://www.contentful.com/\">contentful</a>からデータを引っ張ってきてGraphQLで扱えるようにする</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"gatsby-source-esa\"><a href=\"#gatsby-source-esa\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-esa\">gatsby-source-esa</a></h3>\n<p><strong><a href=\"https://docs.esa.io/posts/102\">esa API</a>を使って<a href=\"https://esa.io/\">esa.io</a>のデータを引っ張ってきてGraphQLで扱えるようにする</strong><br></p>\n<h4 id=\"設定-11\"><a href=\"#%E8%A8%AD%E5%AE%9A-11\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定</h4>\n<div class=\"gatsby-code-title\">gatsby-config.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-esa`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// (必須)トークン</span>\n        <span class=\"token comment\">// https://[YOUR_TEAM_NAME].esa.io/user/applications からトークンを取得できます。</span>\n        <span class=\"token comment\">// なおオーナでないとトークンは取得できません</span>\n        accessToken<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`YOUR_PERSONAL_ACCESS_TOKEN`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// (必須)チーム名</span>\n        teamName<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`YOUR_TEAM_NAME`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// (任意)検索クエリ</span>\n        <span class=\"token comment\">// 詳細は https://docs.esa.io/posts/104 参照</span>\n        <span class=\"token comment\">// 例 : 'in:public' や 'wip:false in:public'　など</span>\n        q<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// (任意)ベースカテゴリ</span>\n        <span class=\"token comment\">// 例 : 'public'</span>\n        baseCategory<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span></code></pre></div>\n<h4 id=\"使い方-11\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-11\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>GraphQLで下記スキーマにて取得します。</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  allEsaPost <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        number\n        name\n        body_md\n        body_html\n        category\n        relative_category\n        tags\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>もともと自分のブログで使っていたものも多数ありますが、\n調べてみると、いろいろ便利なプラグインを発見できました。<br>\nGatsbyはプラグインの他にも、</p>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/starters/\">Starter一覧</a></li>\n<li><a href=\"https://www.gatsbyjs.org/showcase/\">Gatsby採用事例一覧</a></li>\n</ul>\n<p>など参考になるサイトとソースコードが充実しているのでこれから詳しく見ていこうと思います🍅</p>","fields":{"slug":"/2018/10/21/","title":"Gatsbyプラグイン45選","date":"2018-10-21T15:00:00.000Z","excerpt":"なにこれGatsbyのプラグインは、公式プラグインとコミュニティ提供のものをあわせると、なんと502個もあります。（2018/10/21現在）今回はその中でもおすすめプラグイン45個をユースケース別にご紹介します。ユースケース別目次※クリッ...","tags":["Gatsby","GatsbyPlugin"],"keywords":["GatsbyPlugin"],"thumbnail":"thumbnail/2018/getsby-plugin-best-45.png"}}}}