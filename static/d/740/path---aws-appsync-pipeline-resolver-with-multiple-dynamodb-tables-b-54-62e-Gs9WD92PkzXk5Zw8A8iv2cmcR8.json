{"data":{"site":{"siteMetadata":{"title":"Takumon Blog","author":"Takuto Inoue"}},"markdownRemark":{"html":"<p><img src=\"/thumbnail/2019/02/aws-appsync-pipeline-resolver-with-multiple-dynamodb-tables.png\" alt=\"aws-appsync-pipeline-resolver-with-multiple-dynamodb-tables\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>AWSのGraphQLフルマネージドサービス<a href=\"https://aws.amazon.com/jp/appsync/\">「AppSync」</a>で複数のデータリソースを扱う場合は<strong>「Pipeline Resolver」</strong>という機能を使います。\nこれは、1つのデータリソースを扱うファンクションを定義し、それらを組み合わせるという仕組みです。\nファンクションではデータリソースのCRUD操作や操作結果の加工などを<a href=\"http://velocity.apache.org/engine/1.7/vtl-reference.html\"><strong>VTL（Apatch Verocity Template Language）</strong></a>で記述します。\n今回は、<strong>Pipeline Resolverを使って複数のデータリソース（DynamoDBの複数テーブル）から情報を取得する場合のVTLの書き方について以下2パターンをご紹介します。</strong></p>\n<ul>\n<li><a href=\"#1%E5%AF%BE1%E3%81%A7%E7%B4%90%E3%81%A5%E3%81%8F2%E3%81%A4%E3%81%AEdynamodb%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%8B%E3%82%891%E4%BB%B6%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\">🔰 1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合</a></li>\n<li><a href=\"#1%E5%AF%BEn%E3%81%A7%E7%B4%90%E3%81%A5%E3%81%8F2%E3%81%A4%E3%81%AEdynamodb%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%8B%E3%82%89%E8%A4%87%E6%95%B0%E4%BB%B6%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\">💪 1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合</a></li>\n</ul>\n<p><small>※この記事ではあくまでもVTLの書き方に注力して説明します。GraphQLのスキーマ・リゾルバー、AppSyncのリクエストマッピングテンプレート・レスポンスマッピングテンプレートの概要については知っている前提です。</small></p>\n<h2 id=\"pipeline-resolverの概要\"><a href=\"#pipeline-resolver%E3%81%AE%E6%A6%82%E8%A6%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pipeline Resolverの概要</h2>\n<p>少しだけ説明します。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4564cb92bd23969ee7df2b0be2b894f8/66ba8/appsync-resolver.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 116.79558011049724%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABcRAAAXEQHKJvM/AAAECklEQVQ4y4VV/U+TVxTuP7KftuyHZUuGm9vU+cPcolN0xsy46aS1KrqIiHNLjGEOpmK2JcLGsmSBV8AVLOjko3wUaFFACsqXgsjb0tLWVipTka/R2t735dm5l5YJFLzJk/Pe3Hufe855zrmvpr6+/qDT6SyRZTnP4XBIg7IsBUb80vTEmDT57Ik0NfGUMPY/xp8KuFxOSZbtkt1uJyvnE0ex2WxO0fh8vlIsGgNDPkildTBUWFF4tWEBLl1rFIg3iKtGMzw8LPGJqqqhSIQx+mQZF/LZmxv2sISNWvbGR7tZwiYte3vjHF5du5O9sno7cz8YEXsVRWF09jnnIC6jxu12F/LJ7OwsY0wRN537rRB0GO9u1uOtj/di1af7kLBJh1WE19d/gdfW7YTXH0DUEX5WHCSuKwsI+SIf7V39yCuphLGyEX/9XYeC0moUllXDcM2M4vJ6sTY+OYXoueUJuZ2LGnj8ZAy3eu5BdrrReWcAdwccuEPouz80T8QdUAg87mUJo2u4YetGTr4RJeVm8tCES1drkVdcgYvGKvw7E4x5FtPj5YQ8R/U32mG92YnyuuuosdxEjbVNeBnL3UwwRKmogWSsUixtPXC5hpcSxoTp6ZexNzUD2rQfsetwOr46moHEpBPIIsEwqyIcDsPjG8Gabcn45MtURf/tT3AMOZcn7L1nh47IdGlnsPvIaexJ+QE7DpxEVm4RVIoiEongYWAUW3Xf4f2tB5Sk41mg4l4+ZP/IKKncgDKTBcVcXYKBFG+iFFDp0cUMk1PTkC5XIfdimWKydlDIrqWEMeVeHNNTk7SBzc9jCr8whBcejyc+IT/g8vjQ3N6Nts67qCUxLC230dTWJcpGXEqRcFFqm2wwNbQqvfddvFNWyCEXhYTQHiNRvp4TZUtMFMzOi/Je4n5s2JWi6E6cJ1GGVlZZeywT+m/OktqZSKLvz5NP4fzvRcI7Icqjf8QlqxP3K0lp51YWJTD6GFdIEGNFg2i9Iqo33n684FVVEaKMT0whJ8+Is78WKCWV1viixAh7+u24TGSNlLsKczPl0SasqbEVwdBzEfZiUeJ2Cov2stPtEyVjvt6OauqSOrIV5hbqno55pXk1RAWKTxjrTU7W0tEr2ox72nqrF7auPlHs3X0ymmlthvr5pa8Ni4b78x8GvLN5Hz7YdnDuXdyip7leWD6nxxcPHj5a9j0siC6EKVxereqZnAJ1zWfJ6rrth1QiUdfvOKyupe8PyRKhSq+26vEFxF4Km49IlLBM4/V6DYv/DSaLDYdO/oLjmblISc/GkfQL8zj6fTZST+dgcjq45J9CXOWawcHBbKqpiWAw6AmFQn6y/kg47FcYI0T8qsIWQOGgtdjeqPUSxzPi+vM/v3UMeAWNUVMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync-resolver\"\n        title=\"\"\n        src=\"/static/4564cb92bd23969ee7df2b0be2b894f8/fb8a0/appsync-resolver.png\"\n        srcset=\"/static/4564cb92bd23969ee7df2b0be2b894f8/1a291/appsync-resolver.png 148w,\n/static/4564cb92bd23969ee7df2b0be2b894f8/2bc4a/appsync-resolver.png 295w,\n/static/4564cb92bd23969ee7df2b0be2b894f8/fb8a0/appsync-resolver.png 590w,\n/static/4564cb92bd23969ee7df2b0be2b894f8/526de/appsync-resolver.png 885w,\n/static/4564cb92bd23969ee7df2b0be2b894f8/66ba8/appsync-resolver.png 905w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>Pileline Resolverの中で、どのファンクションをどの順番で呼び出すか指定します。</li>\n<li>ファンクションは「データリソース、リクエストマッピングテンプレート、レスポンスマッピングテンプレート」のセットです。</li>\n<li>柔軟性が高く、処理の共通化なども可能です。</li>\n</ul>\n<h2 id=\"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合\"><a href=\"#1%E5%AF%BE1%E3%81%A7%E7%B4%90%E3%81%A5%E3%81%8F2%E3%81%A4%E3%81%AEdynamodb%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%8B%E3%82%891%E4%BB%B6%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合</h2>\n<h3 id=\"apiとデータリソースの仕様\"><a href=\"#api%E3%81%A8%E3%83%87%E3%83%BC%E3%82%BF%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E4%BB%95%E6%A7%98\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>APIとデータリソースの仕様</h3>\n<details><summary>コチラをクリックしたら見れます。リゾルバーとあわせてご覧ください。</summary><div>\n<br/>\n<p><code class=\"language-text\">{&quot;id&quot;:&quot;1000&quot;}</code>を引数にAPIを呼び出すと以下レスポンスが返ってくる想定です。</p>\n<div class=\"gatsby-code-title\">APIのレスポンス</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1000\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ギャッツビー太郎\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"departmentId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"9001\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"departmentName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"総務部\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"queryのスキーマ\"><a href=\"#query%E3%81%AE%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Queryのスキーマ</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">type Sample1 {\n    id: ID!\n    name: String!\n    departmentId: String!\n    departmentName: String\n}\n\nquery {\n    sample1(id: ID!): Sample1\n}</code></pre></div>\n<h4 id=\"取得対象データ\"><a href=\"#%E5%8F%96%E5%BE%97%E5%AF%BE%E8%B1%A1%E3%83%87%E3%83%BC%E3%82%BF\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>取得対象データ</h4>\n<div class=\"gatsby-code-title\">従業員テーブル（Employeeテーブル） ※簡単のため１件のみ</div>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token list punctuation\">*</span> id: 100\n<span class=\"token list punctuation\">*</span> name: ギャッツビー太郎\n<span class=\"token list punctuation\">*</span> departmentId: 9001</code></pre></div>\n<div class=\"gatsby-code-title\">部署テーブル（Departmentテーブル） ※簡単のため１件のみ</div>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token list punctuation\">*</span> id: 9001\n<span class=\"token list punctuation\">*</span> name: 総務部</code></pre></div>\n</div></details>\n<br/>\n<h3 id=\"リゾルバーの書き方\"><a href=\"#%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リゾルバーの書き方</h3>\n<p>「従業員情報 + 従業員に紐づく部署情報」を1件取得する場合、以下のようなVTLを作成します。</p>\n<h4 id=\"1-従業員テーブルに対するファンクション\"><a href=\"#1-%E5%BE%93%E6%A5%AD%E5%93%A1%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AB%E5%AF%BE%E3%81%99%E3%82%8B%E3%83%95%E3%82%A1%E3%83%B3%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 従業員テーブルに対するファンクション</h4>\n<div class=\"gatsby-code-title\">リクエストマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\"># 従業員IDを指定してDynamoDBから1件情報を取得します。\n{\n    &quot;version&quot;: &quot;2017-02-28&quot;,\n    &quot;operation&quot;: &quot;GetItem&quot;,\n    &quot;key&quot;: {\n        &quot;id&quot;: $util.dynamodb.toDynamoDBJson($ctx.args.id),\n    },\n}</code></pre></div>\n<div class=\"gatsby-code-title\">レスポンスマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\"># 従業員情報をレスポンスに設定します。\n$util.toJson($context.result)</code></pre></div>\n<h4 id=\"2-部署テーブルに対するファンクション\"><a href=\"#2-%E9%83%A8%E7%BD%B2%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AB%E5%AF%BE%E3%81%99%E3%82%8B%E3%83%95%E3%82%A1%E3%83%B3%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 部署テーブルに対するファンクション</h4>\n<div class=\"gatsby-code-title\">リクエストマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\"># 前ファンクションの結果（従業員情報）に紐づく部署情報を取得します。\n{\n    &quot;operation&quot;: &quot;GetItem&quot;,\n    &quot;key&quot;: {\n        # 前ファンクションの結果は $ctx.prev.resultで参照できます。\n        # 部署IDを指定してDynamoDBから1件情報を取得します。\n        &quot;id&quot;: $util.dynamodb.toDynamoDBJson($ctx.prev.result.departmentId),\n    }\n}</code></pre></div>\n<div class=\"gatsby-code-title\">レスポンスマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\">#if($ctx.error)\n        $util.error($ctx.error.message, $ctx.error.type)\n#end\n\n# 前ファンクションの結果（従業員情報）と今回の結果（部署情報）をマージします。\n# オブジェクトに新しくプロパティを追加する場合は putメソッドを使います。\n# putメソッドを使う場合は $util.qr で囲む必要があります。\n$util.qr($ctx.prev.result.put(&quot;departmentName&quot;, $ctx.result.name))\n\n# マージ結果をレスポンスに設定します。\n$util.toJson($ctx.prev.result)</code></pre></div>\n<h2 id=\"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合\"><a href=\"#1%E5%AF%BEn%E3%81%A7%E7%B4%90%E3%81%A5%E3%81%8F2%E3%81%A4%E3%81%AEdynamodb%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%8B%E3%82%89%E8%A4%87%E6%95%B0%E4%BB%B6%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合</h2>\n<h3 id=\"apiとデータリソースの仕様-1\"><a href=\"#api%E3%81%A8%E3%83%87%E3%83%BC%E3%82%BF%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E4%BB%95%E6%A7%98-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>APIとデータリソースの仕様</h3>\n<details><summary>コチラをクリックしたら見れます。リゾルバーとあわせてご覧ください。</summary><div>\n<br/>\n<p><code class=\"language-text\">{ &quot;contractor&quot;:&quot;ギャッツビー太郎&quot;}</code>を引数にAPIを呼び出すと以下のレスポンスが返ってくる想定です。</p>\n<div class=\"gatsby-code-title\">APIのレスポンス</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"contracts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"items\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span>\n            \t<span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1000\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"〇〇〇案件\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"contractor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ギャッツビー太郎\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"productIds\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token string\">\"2001\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"2002\"</span>\n                <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"products\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2001\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"トマト\"</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2002\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ナス\"</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span>\n            \t<span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1001\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"△△△案件\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"contractor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ギャッツビー太郎\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"productIds\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token string\">\"2002\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"2003\"</span>\n                <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"products\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2002\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ナス\"</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2003\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"キュウリ\"</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"queryのスキーマ-1\"><a href=\"#query%E3%81%AE%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Queryのスキーマ</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">type Contracts {\n    items: [Contract]\n}\n\ntype Contract {\n    id: ID!\n    name: String!\n    contractor: String!\n    productIds: [ID]\n    products: [Product]\n}\n\ntype Product {\n    id: ID!\n    name: String\n}\n\nquery {\n    getContracts(contractor: String!): Contracts\n}</code></pre></div>\n<h4 id=\"取得対象データ-1\"><a href=\"#%E5%8F%96%E5%BE%97%E5%AF%BE%E8%B1%A1%E3%83%87%E3%83%BC%E3%82%BF-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>取得対象データ</h4>\n<div class=\"gatsby-code-title\">契約テーブル（Contractテーブル） 2件</div>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token list punctuation\">*</span> id: 1000\n<span class=\"token list punctuation\">*</span> name: 〇〇〇案件\n<span class=\"token list punctuation\">*</span> contractor: ギャッツビー太郎\n<span class=\"token list punctuation\">*</span> productIds: [2001,2002]\n\n<span class=\"token list punctuation\">*</span> id: 1001\n<span class=\"token list punctuation\">*</span> name: △△△案件\n<span class=\"token list punctuation\">*</span> contractor: ギャッツビー太郎\n<span class=\"token list punctuation\">*</span> productIds: [2002,2003]</code></pre></div>\n<div class=\"gatsby-code-title\">商品テーブル（Productテーブル） 3件</div>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token list punctuation\">*</span> id: 2001\n<span class=\"token list punctuation\">*</span> name: トマト\n\n<span class=\"token list punctuation\">*</span> id: 2002\n<span class=\"token list punctuation\">*</span> name: ナス\n\n<span class=\"token list punctuation\">*</span> id: 2003\n<span class=\"token list punctuation\">*</span> name: キュウリ</code></pre></div>\n</div></details>\n<br/>\n<h3 id=\"リゾルバーの書き方-1\"><a href=\"#%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リゾルバーの書き方</h3>\n<p>「契約情報 + 契約に紐づく商品情報」を複数件取得する場合、以下のようなVTLを作成します。</p>\n<h3 id=\"1-契約テーブルに対するファンクション\"><a href=\"#1-%E5%A5%91%E7%B4%84%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AB%E5%AF%BE%E3%81%99%E3%82%8B%E3%83%95%E3%82%A1%E3%83%B3%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 契約テーブルに対するファンクション</h3>\n<div class=\"gatsby-code-title\">リクエストマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\">{\n    &quot;operation&quot; : &quot;Scan&quot;,\n    # 複数件検索ではfilterで検索条件を指定します。\n    &quot;filter&quot; : {\n        # 具体的な検索条件はexpressionで定義します。\n        # 今回は契約者名が一致することが条件です。\n        &quot;expression&quot;: &quot;contractor = :contractor&quot;,\n        # 検索条件で使う変数はあらかじめexpressionValuesで初期化します。\n        &quot;expressionValues&quot; : {\n            &quot;:contractor&quot; : $util.dynamodb.toDynamoDBJson($ctx.args.contractor)\n        }\n    }\n}</code></pre></div>\n<div class=\"gatsby-code-title\">レスポンスマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\"># 契約情報をレスポンスに設定します。\n$util.toJson($context.result)</code></pre></div>\n<h3 id=\"2-商品テーブルに対するファンクション\"><a href=\"#2-%E5%95%86%E5%93%81%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AB%E5%AF%BE%E3%81%99%E3%82%8B%E3%83%95%E3%82%A1%E3%83%B3%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 商品テーブルに対するファンクション</h3>\n<div class=\"gatsby-code-title\">リクエストマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\"># 前ファンクションで取得した契約情報から商品IDを抽出します。\n#set($productIds = [])\n#set($contracts = $ctx.prev.result.items)\n#foreach($c in $contracts)\n    #foreach( $id in $c.productIds )\n        #if(!$productIds.contains($id))\n            $util.qr($productIds.add($id))\n        #end\n    #end\n#end\n\n{\n    &quot;version&quot; : &quot;2017-02-28&quot;,\n    &quot;operation&quot; : &quot;Scan&quot;,\n    &quot;filter&quot; : {\n        # 「複数の値のどれかに一致する」という条件はcontains関数で実現します。\n        &quot;expression&quot;: &quot;contains(:ids, id)&quot;,\n        &quot;expressionValues&quot; : {\n            &quot;:ids&quot; : $util.dynamodb.toDynamoDBJson($productIds)\n        }\n    }\n}</code></pre></div>\n<div class=\"gatsby-code-title\">レスポンスマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\">#if($ctx.error)\n        $util.error($ctx.error.message, $ctx.error.type)\n#end\n\n# 前ファンクションの結果（契約情報）と今回の結果（商品情報）をマージします。\n#foreach($c in $ctx.prev.result.items)\n    #set($products = [])    \n    # 商品情報をイテレート\n    #foreach( $p in $ctx.result.items )\n        # 契約情報に含まれる商品が見つかったら\n        #if($c.productIds.contains($p.id))\n            # $productsにaddします。\n            $util.qr($products.add($p))\n        #end\n    #end\n        \n    # 商品情報を契約情報に追加します。\n    #set($temp = { &quot;items&quot;: $products })\n    $util.qr($contract.put(&quot;products&quot;, $temp))\n#end\n\n# マージした情報をレスポンスに設定します。\n$util.toJson($ctx.prev.result)</code></pre></div>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回、AppSyncで複数のデータリソースから情報を取得する場合のVTLの書き方についてを紹介しました。\nここで紹介した方法さえ覚えておけば、データリソースが3つ以上になった場合もファンクションを追加していけば良いだけです。\nまたデータリソースがDynamoDBではなくRDB、Lambdaの場合もデータ取得APIを置き換えれば良いだけです。</p>\n<p>それにしてもAppSyncのリゾルバー定義は、なぜVTL縛りなのでしょうか。Lambdaのように好きな言語で実装させてくれてもいいのに... いずれは、そうなることを期待しています🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://dev.classmethod.jp/cloud/aws/appsync-updates-11-21/\">AWS AppSyncの新機能！Pipeline Resolver、Aurora Serverless Data Source、Delta Syncがサポートされました！ ｜ DevelopersIO</a></li>\n<li><a href=\"https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/tutorial-pipeline-resolvers.html\">チュートリアル: パイプラインリゾルバー - AWS AppSync</a></li>\n</ul>","headingsDetail":[{"id":"なにこれ","value":"なにこれ","depth":2,"parents":[]},{"id":"pipeline-resolverの概要","value":"Pipeline Resolverの概要","depth":2,"parents":[]},{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2,"parents":[]},{"id":"apiとデータリソースの仕様","value":"APIとデータリソースの仕様","depth":3,"parents":[{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"queryのスキーマ","value":"Queryのスキーマ","depth":4,"parents":[{"id":"apiとデータリソースの仕様","value":"APIとデータリソースの仕様","depth":3},{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"取得対象データ","value":"取得対象データ","depth":4,"parents":[{"id":"apiとデータリソースの仕様","value":"APIとデータリソースの仕様","depth":3},{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"リゾルバーの書き方","value":"リゾルバーの書き方","depth":3,"parents":[{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"1-従業員テーブルに対するファンクション","value":"1. 従業員テーブルに対するファンクション","depth":4,"parents":[{"id":"リゾルバーの書き方","value":"リゾルバーの書き方","depth":3},{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"2-部署テーブルに対するファンクション","value":"2. 部署テーブルに対するファンクション","depth":4,"parents":[{"id":"リゾルバーの書き方","value":"リゾルバーの書き方","depth":3},{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2,"parents":[]},{"id":"apiとデータリソースの仕様-1","value":"APIとデータリソースの仕様","depth":3,"parents":[{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"queryのスキーマ-1","value":"Queryのスキーマ","depth":4,"parents":[{"id":"apiとデータリソースの仕様-1","value":"APIとデータリソースの仕様","depth":3},{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"取得対象データ-1","value":"取得対象データ","depth":4,"parents":[{"id":"apiとデータリソースの仕様-1","value":"APIとデータリソースの仕様","depth":3},{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"リゾルバーの書き方-1","value":"リゾルバーの書き方","depth":3,"parents":[{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"1-契約テーブルに対するファンクション","value":"1. 契約テーブルに対するファンクション","depth":3,"parents":[{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"2-商品テーブルに対するファンクション","value":"2. 商品テーブルに対するファンクション","depth":3,"parents":[{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"まとめ","value":"まとめ","depth":2,"parents":[]},{"id":"参考","value":"参考","depth":2,"parents":[]}],"fields":{"title":"AWS AppSyncのPipeline Resolverで複数データリソースを扱う場合のVTLの書き方","excerpt":"なにこれAWSのGraphQLフルマネージドサービス「AppSync」で複数のデータリソースを扱う場合は「Pipeline Resolver」という機能を使います。これは、1つのデータリソースを扱うファンクションを定義し、それらを組み合わせ...","date":"2019-02-19T07:30:00.000+09:00","tags":["AppSync","AWS","GraphQL","DynamoDB"],"thumbnail":"/thumbnail/2019/02/aws-appsync-pipeline-resolver-with-multiple-dynamodb-tables.png"}}},"pageContext":{"slug":"/aws-appsync-pipeline-resolver-with-multiple-dynamodb-tables","relatedPosts":[{"html":"<p><img src=\"/thumbnail/2019/02/nuxt-apollo-with-graphpack.png\" alt=\"nuxt-apollo-with-graphpack\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>以前の記事<a href=\"graphpack-graphql-zero-config-server\">設定いらずのNode製GraphQLサーバー「Graphpack」の使い方</a>でGraphQLのサーバー側を実装を紹介しました。\nGraphpackは備え付けの<a href=\"https://github.com/prisma/graphql-playground\">GraphQL Playground IDE</a>で動作確認できますが、せっかくなので今回はクライアント側も作成してみました。\n本記事では<strong><a href=\"https://ja.nuxtjs.org/\">Nuxt.js</a>と<a href=\"https://www.apollographql.com/docs/react/api/apollo-client.html\">Apollo Client</a>を使って簡単なユーザー管理画面を作成する方法をチュートリアル形式でご紹介します。</strong><br/>\n最終的にはQuery, Mutation, Subscription全てを実装しますが、\n以下のようにステップを分けて、少しずつ実装していきましょう✨</p>\n<ul>\n<li><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\">🔰 プロジェクトのひな型を作成する</a></li>\n<li><a href=\"#query%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💪 Queryを実装する</a> → ユーザー情報が一覧で表示できる</li>\n<li><a href=\"#mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💖 Mutationを実装する</a> → ユーザーの登録・更新・削除ができる</li>\n<li><a href=\"#subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💎 Subscriptionを実装する</a> → 他ブラウザとリアルタイムでユーザー情報が同期する</li>\n</ul>\n<p>完成イメージ\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 534px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.28089887640449%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACo0lEQVQ4y52T204acRDGV+2tN76CT1BvjCY+ju1FL3rVpzGEEKMX0kbDRbGmbcqpKTaiAVrksMAe2TOgnOS/8HX+a1AwTdt0ki9kJrs/Zr6ZFdbW1nY3NzejOzs74e3t7ci8tra2IlSPrK+vRwRB+JPCpCPSK2H35YvDfKWEfD4PUayj2WyQmoHq9TparRbC4TA2Np5jdXUVS0tLeLaygpXfaXn5WDg7O9uzHRuapg1LpRJTNT2QompMUhTWMqwg/3b+naUzX1kylWapdIalMo9KpjOj3OUVom/f7QvJRCJUrVRRKBSZbVlwXJfkwXZcuPTbvblBfzDAeMzAfB88JtMpxuw+D8R8xus1UTwQ4vH3IcMwCZhnzaaE+ZhMJrjpdjAcDYN8SqBatYrb295DzsP3WQAUOTCRTIR44tgWKxZ/wCfI3WiEwXCATqeDuliDYZoYUW08HuO6VIKu63AcB57nod1uc3AAbDQaB4Io1kJTgmiqyjhgOBzCNAzIsgTLtoKXNVWDQTXPa+PubgxFlpHJZPCzdL9MikdgsVAI8Y5lRWV8dFVVYVk2ySJAB7ymGzr44trkL/dUVRVcXFygWquhXC4vAsvX18HIrusy0zTQlGS4NIqiyWjpGiTqRtEVAuvw2h76vR6/CFxdXXLPUKlUFoGJL59DPXqIWmfcq2j0CKfx04elcOPnNav7tN2ZFjxMJZMhRiOTR0ysVWl0OVgGr/EXn8YM+qT2CEwmkiHPc7kX7Pw8S19HI/Cw3+8H/z6DzHf4tOsF4IfT+N4tjUxnMKJFkI8mcxyXDQYDulmf8Yf/JppkxIH0qe4L6VTqkCcEIsP7wbn8b0iSdCxks9nXtm1/ons7IR9jpmHGHNuJ0cHG6HD/SXQhJ91u92Mul3vzC1hCARcadoS1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-4\"\n        title=\"\"\n        src=\"/static/5454a20a76b75a63cafbfdaec4944a08/18433/project-image-4.png\"\n        srcset=\"/static/5454a20a76b75a63cafbfdaec4944a08/653a0/project-image-4.png 148w,\n/static/5454a20a76b75a63cafbfdaec4944a08/fd081/project-image-4.png 295w,\n/static/5454a20a76b75a63cafbfdaec4944a08/18433/project-image-4.png 534w\"\n        sizes=\"(max-width: 534px) 100vw, 534px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>完成品はGitHubに置いております。躓いたときは参考にしてください。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"\" data-iframely-url=\"//cdn.iframe.ly/HQ2E77R\"></a></div></div>\n<h2 id=\"プロジェクトのひな型を作成する\"><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プロジェクトのひな型を作成する</h2>\n<ul>\n<li>create-nuxt-appで雛形を作成します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx create-nuxt-app client</code></pre></div>\n<br/>\n<ul>\n<li>何個か質問されるので以下のように答えます。<code class=\"language-text\">Author name</code>は読み替えてください。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">? Project name client\n? Project description My amazing Nuxt.js project\n? Use a custom server framework none\n? Choose features to install\n? Use a custom UI framework none\n? Use a custom test framework none\n? Choose rendering mode Single Page App\n? Author name Takumon\n? Choose a package manager npm</code></pre></div>\n<br/>\n<ul>\n<li>アプリを起動しましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd client\nnpm run dev</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">http://localhost:3000</code>にアクセスして以下の画面が表示されればOKです。</li>\n</ul>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.74336283185842%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACTUlEQVQ4y61TzWsTQRTfPyD/gVcPIoR6kFjwrkfBsyB6ELR6zE0bCQhaCBW6FUqhFhHSUg+KiSal3eDBgl78QNDShpoSs7W2+djvzc7Ozze7m7BEYiP44Ddv5r03v3lv3ox0e/LORiaTWSMo2WxWSafTSiKRUCRJGgnJZHJ9fPxMJZVKlY+PnZqQDNOEqqpottqEFg4Om8gvLWNGliHPzg7FjCz0I8zNz0Om2Fwuh8s3b01LIDEMw7Vtm1mWxRzXZWT6V3CC9ay8+iAgjIx98RkDI3ieF4Ry5qNLcxbZByDIhN/JFwpTAaHv+4xzjjh87gfk1c5PaJ6NKA6DcVwMJB5jzlKhGBKSLciQh/M+hNx4v4DrpTl8qm6HpfjhQT1/j5AJwuIAYU96m0r1jzhbuouxq1dwaeoeeOTvkR1JGJYaBu+ZLZyr3MeJyWs4efoijp2/AHn1Rf/AkTKME251VCxW3+DpqzKeLBewuPISz9+97d/tyISI3Z+nueA+jxrCwVyvTzbYlD8I4/cipK3p2Nyp4fPXLXzb/o4PXzax29jDoPw1Qy94e+Jt+XC7XZiWTdoL5l3SAsInYgSGZijeYfBjTAuttgZNN0nrATodAzqtD5saaSvw/TpoB+uI6+iSRRdt14Xp2DBsytLrwrYd6IYJ+prxhgzN0BWkfkjMqHSm079uahpr6TqzXYdR+YyyZ0RM54VxsT2crsDKF4r9v/xfZOV1aVr6sb+/UWs01nYbqhJAVZVaQ6ARQ9wWxUWg9TrtqezU6+WHC48nfgNALr8PAswu2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-1\"\n        title=\"\"\n        src=\"/static/8683d513dabb23a5d6a660ace450aff3/fb8a0/project-image-1.png\"\n        srcset=\"/static/8683d513dabb23a5d6a660ace450aff3/1a291/project-image-1.png 148w,\n/static/8683d513dabb23a5d6a660ace450aff3/2bc4a/project-image-1.png 295w,\n/static/8683d513dabb23a5d6a660ace450aff3/fb8a0/project-image-1.png 590w,\n/static/8683d513dabb23a5d6a660ace450aff3/526de/project-image-1.png 885w,\n/static/8683d513dabb23a5d6a660ace450aff3/ab356/project-image-1.png 904w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  </p>\n<ul>\n<li>次にApollo Clientを導入します。<a href=\"https://www.npmjs.com/package/@nuxtjs/apollo\">@nuxtjs/apollo</a>をインストールしましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i @nuxtjs/apollo</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">nuxt.config.js</code>に以下設定を追加します。</li>\n</ul>\n<div class=\"gatsby-code-title\">nuxt.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n  modules<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'@nuxtjs/apollo'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    clientConfigs<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Graphpack側のエンドポイントを指定します。</span>\n        httpEndpoint<span class=\"token punctuation\">:</span> <span class=\"token string\">'http://localhost:4000/graphql'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Subscription用にWebSocketの設定も追加します。</span>\n        wsEndpoint<span class=\"token punctuation\">:</span> <span class=\"token string\">'ws://localhost:4000/graphql'</span><span class=\"token punctuation\">,</span>\n        websocketsOnly<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> \n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>これで準備は整いました。\n次からは本格的な実装に入っていきます。</p>\n<h2 id=\"queryを実装する\"><a href=\"#query%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Queryを実装する</h2>\n<h3 id=\"実装\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー情報取得用のクエリ<code class=\"language-text\">apollo/queries/getUsers.gql</code>を作成します。今回は<code class=\"language-text\">apollo/queries</code>配下にgqlファイルを作成することにします。</li>\n</ul>\n<div class=\"gatsby-code-title\">apollo/queries/getUsers.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> GetUsers <span class=\"token punctuation\">{</span>\n    users <span class=\"token punctuation\">{</span>\n        id\n        name\n        email\n        age\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<ul>\n<li>次に<code class=\"language-text\">pages/index.vue</code>を修正します。ここでは<a href=\"https://github.com/Akryum/vue-apollo/blob/master/docs/api/smart-query.md\">SmartQuery</a>を使い、コンポーネントにapolloオブジェクトを定義してApollo Clientを呼び出す方法を使います。 <small>※今回デザインは一切気にしないので<code class=\"language-text\">&lt;style&gt;～&lt;/style&gt;</code>の部分を削除しています。</small></li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vue</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>table<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token constant\">ID</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>名前<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>メール<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>年齢<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>tr v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"item in users\"</span> <span class=\"token punctuation\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.id\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> getUsersGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/queries/getUsers.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<h3 id=\"動作確認\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<h4 id=\"サーバー側起動\"><a href=\"#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E5%81%B4%E8%B5%B7%E5%8B%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>サーバー側起動</h4>\n<ul>\n<li>\n<p>GraphQLサーバを起動します。以下2通り、お好きなほうで起動してください。</p>\n<ul>\n<li>\n<p>サーバー側を作成する</p>\n<ul>\n<li><a href=\"graphpack-graphql-zero-config-server\">以前のGraphpackの記事</a>にしたがって作成</li>\n<li>作成したアプリに移動</li>\n<li><code class=\"language-text\">npm run dev</code></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://github.com/Takumon/nuxt-graphpack-sample\">本記事のサンプルコード</a>を使う</p>\n<ul>\n<li><code class=\"language-text\">git clone https://github.com/Takumon/nuxt-graphpack-sample.git</code></li>\n<li><code class=\"language-text\">cd nuxt-graphpack-sample/server</code></li>\n<li><code class=\"language-text\">npm i</code></li>\n<li><code class=\"language-text\">npm run dev</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>GraphQLサーバーの起動確認をします。<code class=\"language-text\">http://localhost:4000/</code>にアクセスして以下のクエリを発行しユーザー情報が返ってくればOKです。</li>\n</ul>\n<div class=\"gatsby-code-title\">サーバー動作確認用クエリ</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  users <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 78.40670859538784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACh0lEQVQ4y52Uy27TQBSG/QoxSezUl1ycm2PHThw3iZukqahXREjs2bJFbFmiVrBCqNC0pa4Ej0EbqU1dFlWFxLuAugFGPpyx09SNUhYsfp0ZT86X/5/jhHn+9Nm7o4OPV+O98dTzPH97a9svKorPsqyfSqX8VDJ5v/CcTST8arV6PhqNLlzXPWE877N/9e07TM4u4OziEk5Ofdj3PsHO+BA+7Hv/1Pu9w1C7B0ews3sAW6/fBEyu+/hYabuQLpq/WblMEmKRrJTrKIPwRQ2lE17RSLpQm+21cJ8p6USsmOFnhYpBhLIRyJr1kxFVe6JY65Bv9AgKJL0DWcMBSWtDutQIxVes8DlXac0l4HmhOQDZWKM1KLbWIWf0rplUXpusaF3IVFuELzchg81UdE2VyGmwuvEIXrx8BVnTgQI2SmYfJKMPgtEDMVIg6GsgO8NrJp3XJxm9DbzWIlzRpNHn4tBdSjEAU0DNcUFu9CFrY8VEEq4jcI+uA0F1QH0yihxmNBt4wyZpJYLcKA7l1XbU3HIh23GpG5C7Q5DsEB5Qx6LVR2ABHVZt2kzisDmUVgSLdQcd4p1ZGwgY4j6KS13SyGGt4x0m87UJvfQb4I2rRaeCjoMyeyC3NkFuPwS5g+5W0R0OBmHBDHwXuAx2C+yGbkKgvYnRB1FcWhv3AJfB4kAaedYYRa7fTvk/gM4cFk43JtGMA3MxII288OqkS+adyOLtuxdX3KF2zJctOs1fKELFLYh+GTokUmNAsHGZ/tDBoNMf6FD9Sl8bGi36dVjAYeVKM4Xrxp3Iy0TPaAoG/xDeciXjki/VTwW1Oc3VV6d4r1M2W52yubjU6QMUu6DZs7NkQTtHzpe/Ik/mSq0GcCYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"server-image-1\"\n        title=\"\"\n        src=\"/static/45799f178c13308357e838cda5402668/fb8a0/server-image-1.png\"\n        srcset=\"/static/45799f178c13308357e838cda5402668/1a291/server-image-1.png 148w,\n/static/45799f178c13308357e838cda5402668/2bc4a/server-image-1.png 295w,\n/static/45799f178c13308357e838cda5402668/fb8a0/server-image-1.png 590w,\n/static/45799f178c13308357e838cda5402668/526de/server-image-1.png 885w,\n/static/45799f178c13308357e838cda5402668/cc4aa/server-image-1.png 954w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"クライアント側起動\"><a href=\"#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E5%81%B4%E8%B5%B7%E5%8B%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>クライアント側起動</h4>\n<ul>\n<li>サーバーの準備が整ったら、クライアント側を<code class=\"language-text\">npm run dev</code>で起動します。</li>\n<li>ブラウザで<a href=\"http://localhost:3000\">http://localhost:3000</a> にアクセスして以下の画面が表示されればOKです。</li>\n</ul>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.35942668136714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABRUlEQVQ4y+2TsU6DUBSGLy/Ak7joUHkF9UV4AhcVWRh8AoWKTnbXKi6WxaTRdihtsM6UlGJLqEWsqVw4XipENI00bCb+yZ97znC//wznoI2tzYM9jqvzPH+zz3GqIAgqy7IqRVEqQijXNE2rDMPU1kul25XVNRGdV6u11+kUbNuG8fMEJt4LWAMbzioVODwSQZTKIJUXW5QkkE9OSX0MsizD9s5uB+m6fum6LvT71owIO46Dn4ZDDADY9/35u4TfiUHrdu/QY/dB8TwPRiMCIlMSMBiGAQPLAtcdA8Y410EQhDHwvtVqILPXU+ImDEMcRRGkiutlTf7OgQ1NI0DTVBIATlCQVRqSDfupL2D7O3BReh7sVyAU1D/wDwCvEmAQFVR8FNnFvk6AYdEJ0z1ttjtNRO72Im7ITU5J0qyIyd+3z1vW6h/G6pf3C+eMuQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-2\"\n        title=\"\"\n        src=\"/static/aadd25baed54bb3fdc5f7088b257ad92/fb8a0/project-image-2.png\"\n        srcset=\"/static/aadd25baed54bb3fdc5f7088b257ad92/1a291/project-image-2.png 148w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/2bc4a/project-image-2.png 295w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/fb8a0/project-image-2.png 590w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/526de/project-image-2.png 885w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/eaf84/project-image-2.png 907w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  </p>\n<h2 id=\"mutationを実装する\"><a href=\"#mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mutationを実装する</h2>\n<h3 id=\"実装-1\"><a href=\"#%E5%AE%9F%E8%A3%85-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー一覧ができたので、登録、更新、削除処理を追加します。</li>\n</ul>\n<div class=\"gatsby-code-title\">apollo/mutations/createUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($name: String!, $email: String!, $age: Int) {\n  createUser(name: $name, email: $email, age: $age) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/mutations/updateUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($id: ID!, $name: String!, $email: String!, $age: Int) {\n  updateUser(id: $id,name: $name,email: $email,age: $age) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/mutations/deleteUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($id: ID!) {\n  deleteUser(id: $id) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<ul>\n<li>次にユーザー一覧で、登録、更新、削除ができるようにします。index.vueを修正しましょう。</li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vueの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブル上部に登録ボタンを設置します。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"isShowEditArea = true\"</span><span class=\"token operator\">></span>\n      新規登録\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブルに編集ボタンと削除ボタンの列を追加します。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>table<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token constant\">ID</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>名前<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>メール<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>年齢<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token operator\">-</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>tr v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"item in users\"</span> <span class=\"token punctuation\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.id\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"editItem(item)\"</span><span class=\"token operator\">></span>\n            編集\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"deleteItem(item)\"</span><span class=\"token operator\">></span>\n            削除\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 登録と更新の両方で使う編集エリアです。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 登録か更新かの判定はeditedIndexを見ます。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div v<span class=\"token operator\">-</span><span class=\"token keyword\">if</span><span class=\"token operator\">=</span><span class=\"token string\">\"isShowEditArea\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> formTitle <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.name\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"名前\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.email\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"email\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"メール\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.age\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"number\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"年齢\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"close\"</span><span class=\"token operator\">></span>\n          キャンセル\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"save\"</span><span class=\"token operator\">></span>\n          保存\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> getUsersGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/queries/getUsers.gql'</span>\n<span class=\"token comment\">// 今回定義したgqlファイルをインポートします。</span>\n<span class=\"token keyword\">import</span> createUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/createUser.gql'</span>\n<span class=\"token keyword\">import</span> updateUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/updateUser.gql'</span>\n<span class=\"token keyword\">import</span> deleteUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/deleteUser.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 登録・更新用の編集エリア表示非表示のためのフラグです</span>\n      isShowEditArea<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 登録か更新かを判定するための値です。</span>\n      <span class=\"token comment\">// -1の場合は登録</span>\n      <span class=\"token comment\">// それ以外の場合は更新　と判定します。</span>\n      editedIndex<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 編集エリア用のモデルです。</span>\n      editedItem<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        id<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 編集エリア用のモデルを初期化用モデルです。</span>\n      <span class=\"token comment\">// 初期化時に</span>\n      <span class=\"token comment\">// this.editedItem = Object.asigne({}, this.defaultEditedItem)</span>\n      <span class=\"token comment\">// のように使います。</span>\n      defaultEditedItem<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        id<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 更新の場合、更新対象が何番目かをeditedIndexにセットしているので</span>\n  <span class=\"token comment\">// editedIndexの値によって、更新か登録かを判断し</span>\n  <span class=\"token comment\">// 編集エリアのタイトルを出しわけます。</span>\n  computed<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">formTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n        <span class=\"token operator\">?</span> <span class=\"token string\">'ユーザー新規登録'</span>\n        <span class=\"token punctuation\">:</span> <span class=\"token string\">'ユーザー更新'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//登録処理です。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// mutationを発行する場合は、Smart Queryではなく</span>\n      <span class=\"token comment\">// $apolloを使って処理します。</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> createUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// refetchQueriesは処理完了後に発行するGraphQLの操作を指定できます。</span>\n        <span class=\"token comment\">// ここでは登録後に、データを再取得してユーザー一覧をリフレッシュしています。</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// 編集エリアを非表示にします。</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 更新処理です。</span>\n    <span class=\"token comment\">// 登録処理とほぼ同様の処理なので説明は割愛します。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> updateUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 削除処理です。</span>\n    <span class=\"token comment\">// 登録処理とほぼ同様の処理なので説明は割愛します。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">deleteItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`ユーザー(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)を削除しますか?`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> deleteUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>id\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 一覧の編集ボタンクリック時の処理です</span>\n    <span class=\"token comment\">// 編集エリアの変数に値を代入して、編集エリアを表示します。</span>\n    <span class=\"token function\">editItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isShowEditArea <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 編集エリアを非表示にする処理です。</span>\n    <span class=\"token comment\">// 編集エリアのモデルの初期化もあわせて実施します。</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isShowEditArea <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>defaultEditedItem<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 編集エリアで保存ボタンをクリックした場合の処理です。</span>\n    <span class=\"token comment\">// editedIndexをみて登録か更新かを判断します。</span>\n    <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-1\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>ブラウザを開いてみてください。\nそれぞれの以下のようにして操作ができます。</p>\n<h4 id=\"登録\"><a href=\"#%E7%99%BB%E9%8C%B2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>登録</h4>\n<ol>\n<li>右上の新規登録ボタンをクリック</li>\n<li>名前、メール、年齢を入力</li>\n<li>保存ボタンをクリック</li>\n</ol>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.86618876941458%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAAC3UlEQVQ4y5WTS0sbURTHx426cmW/g5/BTV2oxS8hiFgpLS26E6Qb7cpFu2iJD0o1oYggSoVa4wOhraiNxkYTm4eaySTzMIlJMJOZSe7M/HsmWtrQKvbAb+4993L+99xzz3D3mpt729ruzz/o7JzuaG93V+noqNJO866uLndLS4u7rq7OzXHcTUwT88Qjrv/JY09Q4BGMRMHzPIRkEoIgIEljIsEjm81iamoKra2taGpqQn19PRobG9HQ0FCDs0Z789zq4oIrHwpCDgT0cCTCUqLIUso5SwgC45MpJsoKEyWZHXwPMN/ePtv17bFvNPr+gHwj9COM5ZWVGS44PPz+9OMyQosLTO1/CK2jEzlJQjZfQC6fx2WxCE03UK5UwEwTjpmWRT5DhVWxCeasUxIebn9gYFbZ2UFkaYnxT58Bo6MABVQDSaRQKKCkla58kyEaiUBV1aoP265+LWeDLJVKebjdtdUJUCaFUIiFz+JwctANA6VSCRe5C6prHOfn5zBoTdN0nJycQJZkKIqCTCaDfCHvqFYFRVH0cNGT2KQjIqXTrJDLQafTMyQgiWI1QBRTkGWFkOncAhgzISQS+Lq1hcOjI4Qj4VrBYDg84ThxegApnXWEEYvzOKUgSVQouzRkRUImm8EFvbiTuaLIOD4+Rjwed7qhVnDT4357SXUJrW8wnmr5YXwcsy9fYXpsDDt7+7iD2WS/BWNDQ7vFgwOkvF4z+/kLyjTXAwGo6+uo9PQA3d2wr6JuolYw7HL5k9QCMUmygtTQiQxdu1xBiZrcGhkBKFP7+kXtq1e9XTA6MLCt7eyiuLlpXq6tIrexAd1/gIrXC4tq9kvgukX+ed8awe1Py5M5Ku5pMFhOz82Z0TevzXJvr4nBQdM2DNO2rCts+zbK14Iz3JkgvPvrWJcL6OvD/5okSXPc0eHhc13XY2qx6FNLJb9qGH7VsvyqafpVXffTX3EXfJqmxche/ARiYvUEkG7PUgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-create-1\"\n        title=\"\"\n        src=\"/static/219f2e622c366462cb616927adf04e8a/fb8a0/project-image-create-1.png\"\n        srcset=\"/static/219f2e622c366462cb616927adf04e8a/1a291/project-image-create-1.png 148w,\n/static/219f2e622c366462cb616927adf04e8a/2bc4a/project-image-create-1.png 295w,\n/static/219f2e622c366462cb616927adf04e8a/fb8a0/project-image-create-1.png 590w,\n/static/219f2e622c366462cb616927adf04e8a/851ad/project-image-create-1.png 837w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧に登録したユーザが追加されます。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.35885167464114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACk0lEQVQ4y62Ty07bQBSGvWCDYMeOt+AJeAC6ABa8QDe9rLrqktegkVrAEpvCDlJuAQJJCVIWhARsCL40dpzEjp0YciMZe/7OpBEEtZUq1CN9OufMGf9zfDwWJicnX8+8mtmYn59fnp2dFefm5h7h+cLCgjg1NSWOjIyIgiD8jRXGOuON8Pb9O1HWVciyDMMwYFnWI6ZpolarQRRFTE9PY2JiAqOjoxgbG/uN8fFxXtsQYgexJdd1uUBHkiRiGCYxLYvohQLDYHGJlG2HXEoyyeYuyUU2Ry6Yzz7nQdF0HBwerQjxo6NI/uYGmUyG8G5q9Trqvt/3vn+HRrOJdqeDbreHXo+AWxCGj3m316PM9wsFwxCFrc3NiOt6kKQrks8rGLYgILhj4s1Wq59TJsQPv7+/H97GlsO+YLFYFIXkyXGEJ67jEPlKQsAO6zCBVqOBmluFrqmolMpot9psvQ1dVVHiMy4W4dg2PLdK6UCQjU0UbormEuVJtUr8dgvtIIRd82BUbNh+na+j7Hmo8HE0W+jyvY6NZDqNy3wekqZS9vyToLK2JgbyNQoHh8SKH8OKx1FOJFBJfkc1dYbSSQJWIg7nNAk3lULj/JzVEjhfX4eytwstGqWUNdMX5K98t7i4RzIZ+PF44MT2YWxtoRqLwdqOorKzAysaRZHFzv4u6uyw1ukpbCaUZVdJZ3t/fPlMaersl6BpioK5vb3MLhugqgSaBug6jxks5nk/Vp/F9FYBVRSEnOtrSn3/qUPFND/xJGRz4LP8FzDkefhshurtbWTw7QnYteDQAX+Kh9cGUGZDgqq61O8wDB9YIXgh3YHgqqBp2ir+k5VKpa9COp3+4Pt+kv3PUc/zdl7IN/bbJnK53Mef7IQBrxTsBPQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-create-2\"\n        title=\"\"\n        src=\"/static/ddded17ee5f77eae7cceb841d2b22ab2/fb8a0/project-image-create-2.png\"\n        srcset=\"/static/ddded17ee5f77eae7cceb841d2b22ab2/1a291/project-image-create-2.png 148w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/2bc4a/project-image-create-2.png 295w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/fb8a0/project-image-create-2.png 590w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/db147/project-image-create-2.png 836w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"更新\"><a href=\"#%E6%9B%B4%E6%96%B0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更新</h4>\n<ol>\n<li>更新したい行の編集ボタンをクリック</li>\n<li>名前、メール、年齢を入力</li>\n<li>保存ボタンをクリック</li>\n</ol>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.95693779904306%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADCElEQVQ4y5WTTU8TURSGJ8CShexd8Q/cEEjgR/gbFOPGhXEnezEu3JloSQTGhVGLWpooaCSBtkZCqVDSUlvo18ydmc4HzDBKp70z83qmYKxGTTzJm5NzJ/c5X3eEkZGRK2NjY/HJycn5iYkJsV/j4+Pi1NSUODo6KgqC8C8tkF6QrgtXr02L+XIJe3t7qFaraNTrqJMiH8WtVgtzc3MgOIaHhzEwMIChoaHfNNjzg4ODcWFlZeWhYZpgjLVLpRKXZMYVVeNN8k1Z5orW4hJT+OZWlqczH/lGKs1T6QxPZfqUznjbuc94lVheEDbW12OHBwdRhdwksGlasKwj6IYBk7ztnOC03Uany8H9AJGFpC73Ke4pJPHovClJorCcSMQYU7CXz/NarYF+8zmH49j4+u1bLw4IUD08xMmJewYOewlC/xwoRcBUOhWLAtMw+O5uHkEQwPM8tKmq4+MjNBp1aDTHTqcL77SNUqEAhTEYdGZRR7Zth2Q9II1NFCqVcgyUiYbPXdeF1+lEcERVm5YJVVWh6wZ0AjhtDz5dVAwdmVwOxfIX7O/v/wqkVmM+D1Cr1bksMcquQJYkMJlBU1ugJaHRrEO1DLSyWbiJBFrbWew+e4by1hYqtSp13gcsFItnLR8fc1XXUW02YRwdQdYYVIVBplgioNb14M7eAS5ehHn/PnZu3sQBQb8wOYQf/AS+f/vmUZtaLGxucp3eXnxhHu9evgKt7+d2wvDMOw7CSgWhbSOQZQS0rCD62t9yfmbmSXttDSyR4MXFRTSW4nDX19FdXUVAGwUli3AhLSvEHywMfwWW7t57odIzKDPGs/tFHNAM9a6Pr9RqMD0NXLqEkCrDORQRmCoOf/jfgYWZ20+9RhNu9bBjVyq+Xa35rqr6XqnkB6urPpaWfLrsU3U+XfybvHPgovBp/vET7OxA39gAF0Vo84+BBw+Ay5dBbwL/Y4qiPBdSudwNxXHWGrbzmhUKSSmZTGrx+HL3woVte3b2nXF6mjA1LUm/5V9lGMZry7I+5PP5W98BuHvqiqfu8OAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-update-1\"\n        title=\"\"\n        src=\"/static/b0c9d01a7a765f2ad8726624b95eff41/fb8a0/project-image-update-1.png\"\n        srcset=\"/static/b0c9d01a7a765f2ad8726624b95eff41/1a291/project-image-update-1.png 148w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/2bc4a/project-image-update-1.png 295w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/fb8a0/project-image-update-1.png 590w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/db147/project-image-update-1.png 836w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧のユーザー情報が更新されています。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 74.94033412887828%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACrElEQVQ4y61TTU8aURSdhRujS/0j/gO3dqM0cds2XfYfdNtF+xNaFtWMVhY20QRTPxAlFUythspARWRgmIH5AEYGKSDDgzm9M47apDZpmt7k5N5337z7zrvnDjc5Ofl85tHMx8DjwMLc3BwfCAR417uYnZ3l5+fn+ampKX5kZITnOO5PWCCsEl5wT549XfpeyCObPYeiKFBV9Q7lchmNRgPLy8uYnp7GxMQERkdHMTY29hvGx8fdvXUuEom8rZsmNFW7zmazrCTLrKJqTCJfUsqsTLFerbHM2RkT0hkPKSHNUn7srdOZXlEqIbof+8DtRaPB/EUexycnzGXTarVgNZuwrCYaloWrqxauezYGgwHsfh/9PoNrg+EQPdt2145t3yTphSFuIxwO1mo1GIbORFGEeXmJX21IBy0q7F7kmePgIpfzLvTNIXgFqU0hLpGIB90FIzvPnaPuF+x0u2h32sTWgqzI0HQd3e61x1ai52maDlXTQO1yavW6V1DTtBCXl4pB4g1ZFJlFTHutHy4t1EkURSygSl6jgjoJZihlmLoBu92GUVaQiMWQFVKOcHp6XzATWgni6zGU8AbTPm2itL6Oy+gerP0YjK1t1CJR6JtbMHa2UN3ZhhmJoPX5APXdCIQlHvJG2CnwPAP1UzNNYvjmdRDpDCxBYObJMfK7u8ht70A/+gL18AC1oyOoiTgqh3FUKWd9S6KdyXj507U1SPG4k19cZKCWaM1miCukUkF0OgCNCckEVCrU3Qq8+CHIsgenVLr1jlMs3jzZMEKcKEmeKEPSxfEl+xvg3pPuNyprrsoFUfQKOsMh87Z8OD4eiu9yJB7B8c7eikKz986fN5s+Gv4LyPr+HK5wkiS9x38ywzBWabATL+lPEYjuga7rh/8C92y1WhWSyeSrn8H5AJ/EVXCaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-update-2\"\n        title=\"\"\n        src=\"/static/836e31067505db3d284f49bb4ea425b5/fb8a0/project-image-update-2.png\"\n        srcset=\"/static/836e31067505db3d284f49bb4ea425b5/1a291/project-image-update-2.png 148w,\n/static/836e31067505db3d284f49bb4ea425b5/2bc4a/project-image-update-2.png 295w,\n/static/836e31067505db3d284f49bb4ea425b5/fb8a0/project-image-update-2.png 590w,\n/static/836e31067505db3d284f49bb4ea425b5/b97a1/project-image-update-2.png 838w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"削除\"><a href=\"#%E5%89%8A%E9%99%A4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>削除</h4>\n<p>削除したい行の削除ボタンをクリック</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.14934289127837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAAClUlEQVQ4y61TS08TURQeXBtc+agrgjuNEYwLQlF/jBvxR7gC3bPSJkadRlnIgpgALSaAQMKigUILKTPMtLTzHvrAPtLH7cznmdsSSHzEEE/y5dx759zvfPecM8LNoaFno+PhuYcTj9/fHxsTH4yPiyPhCXGUMBIOi4+ePBWH7t4Tr4VucwzeComDoVDPn+MD4cvV6zcmhecvJqM7BynsbG9DkiQcyTJkuecPMxnomobpqSncGR7GlYEBCILwN8wJsXj8TalSgWVZTSJkpmUx03aYYdnMMC3mFktMyebYyuoaiy1/Y0vxZbYYi3Mf64PWre8bm/g0O/tRWFtdjWRVFal0mp2cnKBcrsAlb7suHEKQrNXuwPOBrueBHLfAB/uu5/vkWXCm6UZU+Do/H8nnC8jlckzXNTQaDVy0TruNCpGenbdbLaiKQr7dI+5Zj1DTosL6xnok2LBOh+2ldklhmQc2m0206HKwLxQKKBaLoBBOfLC/D8dx+Lei6/q1apUT6gYplGQp4pN0w9BZrVZDt+txQtu2YZoGiqUSLFq7DpWAUK83eIxyJGM7mcTuYcbPUt05YaAwtbcXYZSZns0Mw0L+OM9VmIYJXTeoWQ7VRsdxIUdJLDhEXq1WoWap7okEpKVF39jc7BGaZlRIp1L8yfQk5rgO0vSczKEEyyGFlk6ENoLamrZJSi2c/jhFvVaHUshjf2EB8utXvjYzw0C11svlqKBms5F+/Rn+YFT0X86oufA71H3b8buOw+8agUJVVTmhR60PLv4rcJ4kWPUIg6acEQat/+3FvsKLa1yM8Uhrfw45oaIob/sK2xTgXRId3hRdFwUa6Hf4T0a/72dha2vrJXX4iOYuQcO6c0kk6LeVk8nk9E+KvwmFDR1ScwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-delete-1\"\n        title=\"\"\n        src=\"/static/b1607176351ad84514e6c52fec749066/fb8a0/project-image-delete-1.png\"\n        srcset=\"/static/b1607176351ad84514e6c52fec749066/1a291/project-image-delete-1.png 148w,\n/static/b1607176351ad84514e6c52fec749066/2bc4a/project-image-delete-1.png 295w,\n/static/b1607176351ad84514e6c52fec749066/fb8a0/project-image-delete-1.png 590w,\n/static/b1607176351ad84514e6c52fec749066/851ad/project-image-delete-1.png 837w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧から削除したユーザーがなくなっています。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 535px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.14018691588784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACFElEQVQ4y62SzW7aQBDHVxyAG3eegBfgBVIB4kF6qnrpx9NEVsslkZse2hL1SA5waQ2KGuwaAgaMMbbxFy0GDAtMxxtKW0W9IEb6eTVrzX/+u7MknU4/PXtydlUoFN7k87lSPp8/kMvlSsVisZTJZEqxWKxECPkfbxEeeU5evH51IfcVkCQJVFUFTRsiGmOI+WQyAY7jIJvNQiqVgng8DolE4hHJZDL6VyaVSuXccV0YjUZLWZapNtKpputUHWq0r2p0bJhUHxu0cXtLhXqDfhHq9Gs9ovEHoR6K32X48PHTJbmp3HDtdhuazSZ1XQc8zwPP98HF1fen8HMWwGKxhNV6DWtKIYrNdos5ZfmeTbR/3+nw5Lpc5mzbwSOLVFU1+Du2WDid+hCG4cPGbgf32DwIgkPOGmBEa7fb5Um1VuWixDLGVJJkJrJYLGA+D5hbRemCaVrMZRiuoNVqgWkYYNv2wymw4W63Y4KKovCk0+lwG7SNQ6CRQDCbYYHJBmThQHRdj+4XDBRxXQ9WqzX0egrUalVoiiJ8u7tjJg+CkigyhxPLptGdRaKO44DtuNj9B07ZBtNCMQ9zJAjm6NhkTtXhkPGPYL/f5/ZXRuHI+H3kXq/HE/xw+wFQ/AFH8lgQN0/r8JSC5/sjLyPRY8DacD+US4LP4wJOFIPBoEwEQXjm+/5nfKg8Ppf3x4C171DjGrVe/gIh5xJ+ikFGNwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-delete-2\"\n        title=\"\"\n        src=\"/static/f05fb2933584ab5973f6a98536edbbe1/0e065/project-image-delete-2.png\"\n        srcset=\"/static/f05fb2933584ab5973f6a98536edbbe1/8485e/project-image-delete-2.png 148w,\n/static/f05fb2933584ab5973f6a98536edbbe1/b3455/project-image-delete-2.png 295w,\n/static/f05fb2933584ab5973f6a98536edbbe1/0e065/project-image-delete-2.png 535w\"\n        sizes=\"(max-width: 535px) 100vw, 535px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>これでユーザ一覧でCRUD操作ができるようになりました。</p>\n<h2 id=\"subscriptionを実装する\"><a href=\"#subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Subscriptionを実装する</h2>\n<p>Subscriptionを使って、ユーザー情報を他の人が編集したときにリアルタイムで同期するようにしてみましょう。</p>\n<h3 id=\"実装-2\"><a href=\"#%E5%AE%9F%E8%A3%85-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userCreated.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userCreated {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userUpdated.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userUpdated {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userDeleted.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userDeleted {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<ul>\n<li>index.vueでSubscriptionを実装します。templateには一切手をいれません。scriptタグのみ修正します。</li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vueの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/* (中略) */</span>\n<span class=\"token comment\">// 今回定義したgqlファイルをインポートします。</span>\n<span class=\"token keyword\">import</span> userCreatedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userCreated.gql'</span>\n<span class=\"token keyword\">import</span> userUpdatedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userUpdated.gql'</span>\n<span class=\"token keyword\">import</span> userDeletedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userDeleted.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql<span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// SubscriptionはSmart QueryのsubscribeToMoreで指定します。</span>\n      subscribeToMore<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\">// 登録時の処理です</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userCreatedGql<span class=\"token punctuation\">,</span>\n          <span class=\"token comment\">// Subscription発生時の処理をupdateQueryに定義します。</span>\n          <span class=\"token comment\">// 第一引数は前回のusers</span>\n          <span class=\"token comment\">// 第二引数はサーバーからのレスポンス情報　です。</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> newUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userCreated\n            <span class=\"token comment\">// ここで返した値がusersに代入されます。</span>\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// 更新時の処理です。</span>\n        <span class=\"token comment\">// 登録時とほぼ同様の処理なので説明は割愛します。</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userUpdatedGql<span class=\"token punctuation\">,</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userUpdated\n            <span class=\"token keyword\">const</span> targetUser <span class=\"token operator\">=</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span> <span class=\"token operator\">===</span> updatedUser<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n            targetUser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>name\n            targetUser<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>email\n            targetUser<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>age\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// 削除時の処理です。</span>\n        <span class=\"token comment\">// 登録時とほぼ同様の処理なので説明は割愛します。</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userDeletedGql<span class=\"token punctuation\">,</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> deletedUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userDeleted\n            <span class=\"token keyword\">const</span> userIndex <span class=\"token operator\">=</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span> <span class=\"token operator\">===</span> deletedUser<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User not found'</span><span class=\"token punctuation\">)</span>\n\n            prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>userIndex<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> createUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> updateUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">deleteItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`ユーザー(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)を削除しますか?`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> deleteUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>id\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/* (中略) */</span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-2\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>2つブラウザを開いてみて、片方で操作してみてください。\nリアルタイムでもう一方のブラウザにユーザー情報の変更が反映されていればOKです。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>簡単ではありますが、Nuxt.js+Apollo Clientで簡単なアプリの作り方をご紹介しました。\nせっかくのクライアントアプリなので、UIフレームワークを使ってリッチにしてみるのも良いかもしれません。\n一応Vue.jsのマテリアルデザインのUIフレームワーク<a href=\"https://vuetifyjs.com/ja/\">「Vuetify」</a>を使った版も以下においておりますので、参考にしてみてください🍅</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://github.com/Takumon/nuxt-graphpack-sample/tree/master/client_vuetify\" data-iframely-url=\"//cdn.iframe.ly/9B6aV8g\"></a></div></div>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://medium.freecodecamp.org/how-to-build-a-real-time-editable-data-table-in-vue-js-46b7f0b11684\">How to build a real-time editable data table in Vue.js</a></li>\n<li><a href=\"https://www.aintek.xyz/posts/graphql-nuxt-chat\">GraphQL と Nuxt.js でチャットを作る</a></li>\n<li><a href=\"https://github.com/the-road-to-graphql/fullstack-apollo-subscription-example\">the-road-to-graphql/fullstack-apollo-subscription-example: A minimal Apollo Server 2 with Apollo Client 2 with Subscriptions application.</a></li>\n<li><a href=\"https://github.com/bmsantos/apollo-graphql-subscriptions-example\">bmsantos/apollo-graphql-subscriptions-example: Apollo GraphQL Subscriptions issue</a></li>\n<li><a href=\"https://www.levvel.io/our-ideas/A-Guide-to-Subscriptions-in-GraphQL-with-Apollo\">Levvel Blog - A Guide to Subscriptions in GraphQL with Apollo</a></li>\n</ul>","fields":{"slug":"/nuxt-apollo-with-graphpack","title":"Nuxt.js＋Apollo ClientでCRUD操作 / ユーザー管理画面でQuery, Mutation, Subscriptionを実装","date":"2019-02-12T07:00:00.000+09:00","excerpt":"なにこれ以前の記事設定いらずのNode製GraphQLサーバー「Graphpack」の使い方でGraphQLのサーバー側を実装を紹介しました。Graphpackは備え付けのGraphQL Playground IDEで動作確認できますが、せ...","tags":["GraphQL","Nuxt.js","Apollo Client","Vue.js"],"keywords":["GraphQL"],"thumbnail":"/thumbnail/2019/02/nuxt-apollo-with-graphpack.png"}},{"html":"<p><img src=\"/thumbnail/2019/01/graphpack-graphql-zero-config-server.png\" alt=\"Graphpack\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><strong>「とりあえずクライアント側と同じJavaScriptで手っ取り早くGraphQLサーバー立てたい！」</strong><br/></p>\n<p>このようなユースケースに<a href=\"https://github.com/glennreyes/graphpack\">Graphpack</a>はピッタリです。\n設定いらずのNode製GraphQLサーバーで <strong>「GraphQLのスキーマとリゾルバーを定義するだけでOK」</strong>、さらに <strong>「<a href=\"https://github.com/prisma/graphql-playground\">GraphQL Playground IDE</a>が標準搭載」</strong>なのでクライアント側を自前で実装せずとも動作確認できます。<br/>\n今回は、この<a href=\"https://github.com/glennreyes/graphpack\">Graphpack</a>の使い方について以下の5ステップでご紹介します。<br/>\n※ここで紹介するソースコードはGitHub(<a href=\"https://github.com/Takumon/nuxt-graphpack-sample\">Takumon/nuxt-graphpack-sample</a>)にもあるので参考にしてみてください。</p>\n<ul>\n<li><a href=\"#1-graphpack%E3%81%A8%E3%81%AF\">🔰 Graphpackとは</a></li>\n<li><a href=\"#2-graphpack%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\">💪 Graphpackを使ってみる</a></li>\n<li><a href=\"#3-graphpack%E3%81%A7query%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">💖 GraphpackでQueryを実装・動作確認する</a></li>\n<li><a href=\"#4-graphpack%E3%81%A7mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">✨️ GraphpackでMutationを実装・動作確認する</a></li>\n<li><a href=\"#5-graphpack%E3%81%A7subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">💎 GraphpackでSubscriptionを実装・動作確認する</a></li>\n</ul>\n<h2 id=\"1-graphpackとは\"><a href=\"#1-graphpack%E3%81%A8%E3%81%AF\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Graphpackとは</h2>\n<p>Node.js製のゼロコンフィグなミニマルGraphQLサーバーで<a href=\"https://github.com/webpack/webpack\">Webpack</a>、<a href=\"https://github.com/remy/nodemon\">Nodemon</a>、<a href=\"https://github.com/apollographql/apollo-server\">Apollo Server</a> をイイ感じにまとめたライブラリです。感触を掴むだけなら<a href=\"https://codesandbox.io/s/k3qrkl8qlv\">CodeSandboxのお試し環境</a>が用意されているので、そちらを触ってみるとよいでしょう。\n<a href=\"https://github.com/glennreyes/graphpack/README.md\">README</a>では以下8つの特徴をうたっています。</p>\n<ul>\n<li>📦 <strong>設定いらず</strong>（<strong>ZERO-CONFIG</strong>）！</li>\n<li>🚦 ライブリロード機能組み込み済！</li>\n<li>🚨 わかりやすいエラーメッセージ！</li>\n<li>🎮 <a href=\"https://github.com/prisma/graphql-playground\">GraphQL Playground IDE</a> 標準装備！</li>\n<li>⭐️ SDLでスキーマ定義可能（<a href=\"https://github.com/prisma/graphql-import\">GraphQL imports</a>）</li>\n<li>💖 TypeScriptをサポート</li>\n<li>🔥 爆速ビルド</li>\n<li>⚡️ ES module importsとdynamic importをサポート</li>\n</ul>\n<h2 id=\"2-graphpackを使ってみる\"><a href=\"#2-graphpack%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Graphpackを使ってみる</h2>\n<h3 id=\"実装してみる\"><a href=\"#%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装してみる</h3>\n<ul>\n<li>プロジェクト雛形を作成し、<code class=\"language-text\">graphpack</code> を開発環境用ライブラリとしてインストールします。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mkdir graphpack-sample\ncd graphpack-sample\nnpm init\nnpm i -D graphpack</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">src/schema.graphql</code>と<code class=\"language-text\">src/resolver.js</code>を作成します。</li>\n</ul>\n<div class=\"gatsby-code-title\">プロジェクト構成</div>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">graphpack-sample\n└── src\n     ├── resolvers.js\n     └── schema.graphql</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">src/scheme.graphql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\">type Query <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">hello</span><span class=\"token punctuation\">:</span> String\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">src/resolvers.graphql</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  Query<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    hello<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'world!'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> resolvers<span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">package.json</code>に以下のスクリプトを追記します。</li>\n</ul>\n<div class=\"gatsby-code-title\">package.jsonの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"graphpack\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"graphpack build\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認してみる\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認してみる</h3>\n<ul>\n<li>サーバーを<code class=\"language-text\">npm run dev</code>で起動して、ブラウザで <code class=\"language-text\">http://localhost:4000/</code> を開くとGraphQL Playground IDEが表示されます。</li>\n</ul>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17cbf1d9923125e72bcc7c16bd61eec3/84430/hello-world.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.67763157894737%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACKklEQVQoz3WSy27TQBSG/QaUxE6ci52bnZg0GY+dkubSXIpaVMGKBZtKsELd8QbskBCrqmqUkpAI1Fdgwa5VrYZ2VSxWiHcAeYsaJ4czuSkNyeLTsT0+n/8zY+5g/+DTh+OTn0fHjZtGo2kfHh7ZRKf22n2P7fEKCL8aD2/zgs+uVOs3e3tPftUf7Xa4Tvf0+rv9Ay4uv8Hl1TVYvSvofj6FZqsNJ+2Pc3Tu3DdbY8bXbWh1uvD23fseF9+oXSTz2yAmjVs+qg3WQvFBUM0MJE0fhLAGV8DWpRQZ1XCK3MYyOZDT5hknkZKlbtQhqpfduLEF4fVNkLMFkDKb4E+a4FMp8IoOgkLBlzRGiKkcvl+CCCmyPsA+V324DeF04ZwTVGoFtRwEUqaLsAqTe2w04Z6chqfPX8D+q9fgT+PHaAUkHT9MyjNCpOxKtApyoXbOYQKLNftV6iKwiDeWAVLagcLjZxDIFEeyJbgRswaFNy8xoUItPxtF0V0EFmFSD0p9D/L/JZvDlY0axHd3xkKRCVckZFK2LrHGSaKIUYGoUYWoWYUIbsFUGNSKc0KFusvSTWs4W5qNyPaRiZhYplszIdY7CfvYOByjD1GE0FFlz1A4RNkQm5bRZ8JQtnTGTrknTn6PEcp0XGMCXrORWTp2wstg22DWcYqyxQmJ7NeAqv8VVf1PWDOdWDbviApxvNG0w8fWHX5SfQniYFqELKA7QoL8DmpmP5A0v/wDjn13J8/rnr8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"hello-world\"\n        title=\"\"\n        src=\"/static/17cbf1d9923125e72bcc7c16bd61eec3/fb8a0/hello-world.png\"\n        srcset=\"/static/17cbf1d9923125e72bcc7c16bd61eec3/1a291/hello-world.png 148w,\n/static/17cbf1d9923125e72bcc7c16bd61eec3/2bc4a/hello-world.png 295w,\n/static/17cbf1d9923125e72bcc7c16bd61eec3/fb8a0/hello-world.png 590w,\n/static/17cbf1d9923125e72bcc7c16bd61eec3/526de/hello-world.png 885w,\n/static/17cbf1d9923125e72bcc7c16bd61eec3/fa2eb/hello-world.png 1180w,\n/static/17cbf1d9923125e72bcc7c16bd61eec3/84430/hello-world.png 1216w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>試しに以下のQueryを実行してみましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">query {\n  hello\n}</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">world!</code>がレスポンスとして返ってきます。</li>\n</ul>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/64ee442f811af0c8c03bf5f21d729ca1/fb12d/hello-world-result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.012526096033405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcRAAAXEQHKJvM/AAACkklEQVQoz3WSy27TQBSG/QIgpLSxYydOnDiOZ3yL44SEXEqrUimhVAEJAUIIWMEOsanEG3DZ0gVtU5LSSogVT9As2kDVRWWxQWIH2SLxAK2tw7GThlLB4tM/tme+OTPHzLPHT3vdtc7X1dU3h531dXdl5bVbq9VcVc25lBCX/IeTb5RSt9VqHV5vt7+1ms11Znvr/cGh+wV2P32Gwf4B5j50321D520PNnqbsNHdHOXJeEyn2wsJxmsbXehubsGLl6/2mHStvZstL0BUNo4jScW/IEh+TKa+kNXD5DJ0klF5BCtrfkwxfC6YgxnL6kdxakOSWDtMQq8MssVZkKyal7brkNDLkDQqIOoV4JQCRLM2RDIWsIgo5yEhW5BSbFDNS6DgvCBpvurpzmUQSanPTEvagCcliKmOx+JENlcI4XAcyM6LBBZvP4An9x+BTQrg5KtgosjUyhM0rexVMWmh0meiaX0g4C6CVvKSqgMScXDnMggolUgReKzImWlCe34JYlYdBGcOeGcGeLsRPvNI1Gp4Jr67snyrz5wT1UGt2IDlVtt7ONeCewtL8Lx9E+7MNuFqdR7uzi/CDYnAtbgCMXsGRKMKCbM2QUR4s+5ZKLZmG31mSqIDPudAQrE9LpsHFuGwKl7JY6MsCN4JePwSLYWCOC5MjImPpVipZ2IqGTsQagMWL39atrxAcJpAHuQ0Cm28Z/FUZX9VOBaqpBgK94JusrJ1jAJ/hIW/hjVJbI6PQl+w6j5W4/NnwDs80gOh6uwEwgMOm8GGx7VHKH8Iu41XUqIXQcNF5Aw0OCpSGVW4x0SSuY+cbP7kZOOHkLOHIi0O2YwxjKTIcCpFQyISHSbT+jCHqfyLFP1OZPOXIBsffgOyq4DRTTBReQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"hello-world-result\"\n        title=\"\"\n        src=\"/static/64ee442f811af0c8c03bf5f21d729ca1/fb8a0/hello-world-result.png\"\n        srcset=\"/static/64ee442f811af0c8c03bf5f21d729ca1/1a291/hello-world-result.png 148w,\n/static/64ee442f811af0c8c03bf5f21d729ca1/2bc4a/hello-world-result.png 295w,\n/static/64ee442f811af0c8c03bf5f21d729ca1/fb8a0/hello-world-result.png 590w,\n/static/64ee442f811af0c8c03bf5f21d729ca1/526de/hello-world-result.png 885w,\n/static/64ee442f811af0c8c03bf5f21d729ca1/fa2eb/hello-world-result.png 1180w,\n/static/64ee442f811af0c8c03bf5f21d729ca1/08f6a/hello-world-result.png 1770w,\n/static/64ee442f811af0c8c03bf5f21d729ca1/fb12d/hello-world-result.png 1916w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>こんな感じで、とても簡単にGraphQLサーバーが立てられます。</p>\n<h2 id=\"3-graphpackでqueryを実装・動作確認する\"><a href=\"#3-graphpack%E3%81%A7query%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. GraphpackでQueryを実装・動作確認する</h2>\n<p>ユーザー情報（ID、名前、メール、年齢）を扱う処理を例に実装方法を説明します。</p>\n<h3 id=\"実装\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー情報のスキーマ定義します。</li>\n</ul>\n<div class=\"gatsby-code-title\">src/schema.graphql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\">type Query <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">users</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>User<span class=\"token operator\">!</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span>\n  user<span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span>\n\ntype User <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> Int\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<ul>\n<li>仮のユーザー情報を用意しましょう。</li>\n</ul>\n<div class=\"gatsby-code-title\">src/db.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby taro'</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span> <span class=\"token number\">32</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'gridsome taro'</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token string\">'gridsom.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span> <span class=\"token number\">55</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<ul>\n<li>最後にリゾルバーを定義します。データは前手順で作成したものを使います。</li>\n</ul>\n<div class=\"gatsby-code-title\">src/resolvers.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> users <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./db'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  Query<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 1件検索</span>\n    user<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 複数件検索（簡単のため全件検索としている）</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> users\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<ul>\n<li>実装できたら<code class=\"language-text\">npm run dev</code>でサーバー起動して <code class=\"language-text\">http://localhost:4000/</code> を開いて\n以下のクエリを発行します。するとユーザー一覧が取得できます。</li>\n</ul>\n<div class=\"gatsby-code-title\">ユーザー一覧取得用Query</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  users <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2e9a53c6d98d2444c40ee1f8a777b552/2f365/get-users.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 76.40522875816994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADdUlEQVQ4y3WSS4zbVBiFDQwDohlP3nacd+K3E8d5J86kTjLtTKcjBEVCIMSSBZXYICEkBBJiRSUeUxixLDNTlnTFDiJUtWTBggVkURWhVkAXkA0bdtTW4bczrUZCLD79N9fOueeca+b1l1/95LPL+z98tPfxzct7e7P9/U9n29tbs5WVldkTq6uz1f/Bf+a/w7LszHGc78aj0ffdweAL5qsvr9289/s93Lp9G7/cuYu7v/6Gb6/fwJWDQxwcXQ34/JiDw6sP905y5eAIh4dHeO/9Sz8z+eELX5e6W4iXzX/Ws6p7Kplz43nFFaTqQzKKGZCSl3C058P7U6y6saJ2X5BNCKr1IyPUxlOpfw683nWz5gAJqY5oyaQDagFrWQ2ryTIe58qI8CISgoy8ZCFXNpEuVlCQ6yjJdS9vdBCRrTkTzmnTpNpBUmm7vNYBp7aRJPzp/46JdYidCezOGDU6wJQaqNMzy0dpBWvC6yttMtCcM6cEaZqtO1CH267UHuEkSneCtN7Ba2+9iw/eeBu82oLQdBCvbCCq24gaNmLEujHwalobyjNn5kworUyztQG08ZYr9yZQyI0v9ACZhAXTRsfoIqP1wNccpMzT4Ct9cHqfquojofU9y+xg/OErvkN5mqttQJ+cc9X+JlQS8dF6m8dMqJsmKiUrEEyaDoQWdd4i0Z5DB2yQ44HnV1BwhnNmLaMEHcaVprtOfYWJGPXE0mRFC3FaR8oWLJoZvQeuOiSRMTiKzZFzvjpYCsot8OXGMnJCbEAQLdes9GBUurSuo2v20KlvIE1rpkiXQS6zFC8QNIc0bXDUH6f1ETdsz6JLEdTWnHksJU2fd3Zw4fS2e/Hs03hptIMhRb608yz2nnsRMl3EbrIAh1zyQWTqtLWzjNynyBZFri4dCgoJPkIO36E/v3n+grtrb+K8fQYXN3dh0O2uZHSwOQMjQYJNgsKxQ4565IwBxV66XDr0BemzCWXUb+LlOnjRuh8tml6E4ETLixarHluoemHi0ZLlUWQvX7E9jvqi2/VIKIDXbS9h2O5x5J+YtbRynS2aCJETNl8JeLBeL1Sx7u8VTDSo5xQ5jBCxE8SJMFGjyCm5eYsJpcrXwnn970he/yNaMBacZC0EtbFgM8riqZS4CAnS4kkilyovqlxxofGlhf5f/mwK4l/hvHbjXz/X08DUq3RBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"get-users\"\n        title=\"\"\n        src=\"/static/2e9a53c6d98d2444c40ee1f8a777b552/fb8a0/get-users.png\"\n        srcset=\"/static/2e9a53c6d98d2444c40ee1f8a777b552/1a291/get-users.png 148w,\n/static/2e9a53c6d98d2444c40ee1f8a777b552/2bc4a/get-users.png 295w,\n/static/2e9a53c6d98d2444c40ee1f8a777b552/fb8a0/get-users.png 590w,\n/static/2e9a53c6d98d2444c40ee1f8a777b552/526de/get-users.png 885w,\n/static/2e9a53c6d98d2444c40ee1f8a777b552/fa2eb/get-users.png 1180w,\n/static/2e9a53c6d98d2444c40ee1f8a777b552/2f365/get-users.png 1530w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>1件検索の場合は以下のようなクエリを発行しましょう。指定したIDのユーザー情報が取得できます。</li>\n</ul>\n<div class=\"gatsby-code-title\">ユーザー情報1件検索用Query</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  user<span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f5bb7db9af2113a5374565973d0413ab/cf391/get-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.65611814345991%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcRAAAXEQHKJvM/AAACr0lEQVQoz3WSTWsTURSGsxcxZpJ2Jt+ZZJLM151MJpk0aZo20ppitRAoFHWhbkQQoT/AjQsFcVebWFtB/Re6kEobBfEjCOJaCy5caMCV0GRez6QN1KKLhzP3zj3vfc8513P1/JUnm631z2uttfftdru7urrazRlG1+v1djmO63I+37/hfF0fxYDf363Vah/m5xsfp+v1555We/PN23ddvHi5ja2dV9ja7uDR46dorW/gwcbmf2k//Jv7rTZu3b7z3ROvLG6n7FmMS2zPH88OvCFxIKTUQTijD+MInhg/RDDDDqH3I4qJkGx88YS1UkcqzCBuVPqiWUVMtRHTJxAl+EweY1IOgVQOgmQiQtElljaRYWWk6UyaomJOOmp+igSLux5/Qu0ISglC1uqPU7LLWMoYIpCgNyrjzPIlrFy+Bks2UTDKMOg8k20wxaZvG5piO8VsAbpd3vUERK0TVIsIsmJfoJt5EhwhuO4SGrTKLM7WzyDMJhG25xCyagiaUwjmCKMK3qw5SWUCCzcv7gsKsgVes/qcyOAVdXDk7mSS4TjhJY4RGSpZpORoaQGxiTqi5WlEbcKiUo2qk9HKsE7VSDBJDsmuL8n6uVwFDTrcrJ3GUnUWdxeauNFYxHyaoSlqCJs1RMhVhFWHbiN0gQu5dLJ6BYqUpx6KaodP592e0aQKWGmcw3USuTAzj3vNZSxNzUEksRnqZ9Q4EDrCSFBT3KGI2o4rSMPY45LMUTXbUfWSE5ctR5QLDp8ynBOS6ejU+CibdARKDh7CLZc3qoM0Capy4asr+Hr4PFL7E3Z7R+UPn4r/YG+M/heUIhRWgUSO0kdIEjnqoSYXvnm4ePYZL7HffIr9CGXMXkIr9gSJ9bi43AsklJ4/rvR8FBOEQntZWmeHccRw/VNP6r+iKf3TH35igAJgECn4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"get-user\"\n        title=\"\"\n        src=\"/static/f5bb7db9af2113a5374565973d0413ab/fb8a0/get-user.png\"\n        srcset=\"/static/f5bb7db9af2113a5374565973d0413ab/1a291/get-user.png 148w,\n/static/f5bb7db9af2113a5374565973d0413ab/2bc4a/get-user.png 295w,\n/static/f5bb7db9af2113a5374565973d0413ab/fb8a0/get-user.png 590w,\n/static/f5bb7db9af2113a5374565973d0413ab/526de/get-user.png 885w,\n/static/f5bb7db9af2113a5374565973d0413ab/fa2eb/get-user.png 1180w,\n/static/f5bb7db9af2113a5374565973d0413ab/08f6a/get-user.png 1770w,\n/static/f5bb7db9af2113a5374565973d0413ab/cf391/get-user.png 1896w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"4-graphpackでmutationを実装・動作確認する\"><a href=\"#4-graphpack%E3%81%A7mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. GraphpackでMutationを実装・動作確認する</h2>\n<p>ユーザー情報が取得できたので、次はユーザー情報の登録・更新・削除を実装します。</p>\n<h3 id=\"実装-1\"><a href=\"#%E5%AE%9F%E8%A3%85-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<p>スキーマ定義にMutationを追記します。</p>\n<div class=\"gatsby-code-title\">src/schema.graphqlの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\">type Mutation <span class=\"token punctuation\">{</span>\n  // 登録\n  createUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> Int\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n  \n  // 更新\n  updateUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> Int\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n  \n  // 削除\n  deleteUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>これはGraphQLとは関係ありませんが、ユーザー情報登録時のID採番用ロジックを<code class=\"language-text\">db.js</code>に追記します。\n初期状態でユーザー情報が2件なので、採番用IDは3から始まるようにします。</p>\n<div class=\"gatsby-code-title\">src/db.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby taro'</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span> <span class=\"token number\">32</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'gridsome taro'</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token string\">'gridsome.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span> <span class=\"token number\">55</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// 採番用ID(3から始まるようにする)</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">let</span> idSequence <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// 採番処理</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateId</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">++</span>idSequence<span class=\"token punctuation\">;</span>\n</span></code></pre></div>\n<br/>\n<p>リゾルバーにMutationを追記します。</p>\n<div class=\"gatsby-code-title\">src/resolvers.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> users<span class=\"token punctuation\">,</span> generateId <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./db'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  Query<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ・・・</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  Mutation<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    createUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> newUser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token function\">generateId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      users<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> newUser<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    updateUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      updatedUser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      updatedUser<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      updatedUser<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> updatedUser<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    deleteUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> userIndex <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User not found'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>deletedUser<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>userIndex<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> deletedUser<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>  <span class=\"token comment\">// ・・・</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-1\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>実装できたら<code class=\"language-text\">npm run dev</code>でサーバー起動して <code class=\"language-text\">http://localhost:4000/</code> を開きます。</p>\n<h4 id=\"登録の動作確認\"><a href=\"#%E7%99%BB%E9%8C%B2%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>登録の動作確認</h4>\n<p>以下のようなMutationを発行すると、登録したユーザー情報が返ってきます。<br/>\n<small>※登録後にユーザー一覧を取得すると、<code class=\"language-text\">nuxt taro</code>が取得できます。</small></p>\n<div class=\"gatsby-code-title\">登録用Muatation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  createUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"nuxt taro\"</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"nuxt.taro@gmail.com\"</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> <span class=\"token number\">43</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9c4b0f6957283d51fb598eb253db3645/25fe2/create-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 77.1108179419525%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADRklEQVQ4y4WTWW8bVRiGJxCVoOAk9ZoZYs9iezybZ2yPdzuNx1tjR0rBgIQKQqAKIcpyiwRI3MAf4I4lKYoQXHENbgBV/Al6RS9Y+h/ao/PyjeNUgCJx8ej9dM6cZ75zzozw9Tff3bn/x338evcufrt3D7//+Rdun/6Ezz7/AkfHt/Dl0fGFHC3z+NZXOKbnTk5O8NHHn/wi7I8r3/tX+tD84EFKL7OobLCUZjHF9pni+Ex1qkwr1hbIVGcoM5Rpmk8vUzRKD2gONH5bkL36XKsGkJw2k+wWotkSYllvwUbGxpqoYzWhYSWu4rKYRzyVhZQ2odD8jmxDzrrQch6TzTq28qVTIaJ685Tdhuh1mVRsYttukLy54GmnhYTuo351hmeuXYevuXANH26hCs+oU107S7POmiat06unwnrGnGdKu6gOp6zUHqPUGMNpDGE2+jCadBSVXUyv38DNV99ELl9Gsj5C3OshZrURJcKMWG1W9tpovn6NhLI1V7wO6t0xsxojuCRzKa3GAHo9gNkc0FZ8KIqHAnWT8Pch+T2IfhdimSgupKxSaqP11izs0KIOuzC6I5YnwTn6EoM6jdP56CQ1KROVEbbdPaSoiVSlS3UHMafDwq3L2cqp8JRszxV6U3E0YWE3FhGmsaAPqzVE8pGwgRidd8pq0dgZYR212yRsQDXoDDdVZx6jBZtOg8XMGuJGFRJdjEwXlHbOWKVL0PQqDOriXBheZGpZPxIWSLhCW36lM8S3h8+x1zoDzHavQjOrELZ1rEgGnkxb6Is5tOlzytKi+P8JH98x5od7U7w/fZa9N53hJnGjf4AP+xO83Z+iQJ0Okiqu/Ff4D/7dYdqcv9Sb4oXdMXuxN+GTZp9/cDDjnx4+z98ZHHDV8LmgejxXqHG6ZU6LOUl4kjK5rEOhey4U0tYPb/QmeHd8+DCo9Xivtsdf3tvnObPGads8krH5hupyQ69ym6QJkkgkEZeENY09rND5aqFwQ7F+XJMdrGVMRBQHMb2MCP0R6zsGNjMWIvSbrRMx2YK1oxOFC9Bhq0VsacWfhUtxsXJZlIdRSQ62JCVIKvkgkc4Ga3EpuBQTFzxBPBbdDgRKIcyLSKaHq3HR/xsjlMuiDlHQ6gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"create-user\"\n        title=\"\"\n        src=\"/static/9c4b0f6957283d51fb598eb253db3645/fb8a0/create-user.png\"\n        srcset=\"/static/9c4b0f6957283d51fb598eb253db3645/1a291/create-user.png 148w,\n/static/9c4b0f6957283d51fb598eb253db3645/2bc4a/create-user.png 295w,\n/static/9c4b0f6957283d51fb598eb253db3645/fb8a0/create-user.png 590w,\n/static/9c4b0f6957283d51fb598eb253db3645/526de/create-user.png 885w,\n/static/9c4b0f6957283d51fb598eb253db3645/fa2eb/create-user.png 1180w,\n/static/9c4b0f6957283d51fb598eb253db3645/25fe2/create-user.png 1516w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h4 id=\"更新の動作確認\"><a href=\"#%E6%9B%B4%E6%96%B0%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更新の動作確認</h4>\n<p>今度は<code class=\"language-text\">nuxt taro</code>を更新してみましょう。\n以下のようなMutationを発行すると、更新されたユーザー情報が返ってきます。<br/>\n<small>※更新後にユーザー一覧を取得すると<code class=\"language-text\">nuxt taro</code>が<code class=\"language-text\">nuxt updatedtaro</code>になっていることを確認できます。</small></p>\n<div class=\"gatsby-code-title\">更新用Muatation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  updateUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"nuxt updatedtaro\"</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"nuxt.updatedtaro@gmail.com\"</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> <span class=\"token number\">44</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dfd6b940da1fa35dfaaf387dd2441f07/9c578/update-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 77.21268163804493%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADb0lEQVQ4y3WTW28bRRTHN1XVIFE7rS9Zx469Xi/enb04a+/F60scO74kdiHIJlyEkCiqEA9IIMQjEhISDyA+AbekKALeeG5XEKnfgj7RBy79DNBZ/zl2rFZC5eGnOTuj/c2Zc2aE73/86d7DPx7i1/v38duDB/j9z7/w8y/n+Orrb3Byehvfnpw+ndOL8fT2dzghzs7O8Olnn98TJgfuHa87gOL1/xE1hycknYslgxdNd4lsebxU8blClCyX8Li8WDOci9F0eF6z/5ZND1LFuyNIth+W3C6yZotnzSYSShVJxV4SL5h4ZkvF5XQJaykZV3IMV7IarhYtJFUH8ZKNRNlBSnO5aDZwvVwNhZi8E4pmC1v2Ls9VmtgyA2StBnJWc0ladeGNpphN30BQqsDRHDg05zIfruYtR4/5vK4HyKh+KDyb10Op1oE9eJ7rzSGMYACdUOv7YI0+5NouDl+7ifdvvQujXIPkDZHf2UNObyDLaGMizRrcp2Ra70xJKBmhtNNCq3PA7eAQfjBGPZigFhzACoZgQR9xKoMs23iOBUh5E2TcHkSvA7HeRcbp4HqlzWu1NnbfOyZhwQiL1V1U2ge8XL/IbIFW76/YR4KOppZdaHSsTWeEjN2FWG1DpOwzRLLa4TatyYoTClclM5RIaA7GXKds9MZgmZW2YhEnNHcpZEYDSaq3aDSxqV8gEgmjxXcoe4V5obBRtMIMHTnT3Oc5qmWekN09ML8HdcWioxp1U2X1x8JFIy8godnmO5ShopFwjZpyRMf68sWX+eu9CYbUCEYbCNsGLtO1iUkW1pQaSqoH7WlCYyFsPRFe2mbhvtfFF0fH/KPJFB8cvYK3+jfwdquPN/cOwew2+qKMfbqXMv2UJklmIVyxiGkTbrOVUMhp4WxvjFd7Ez7rjuez9nD+4Xg6/+HopfknLxzPTbs174ryvKfY87zemF+z2nMSPCZFxK02t/Qnwru3Ogf4+MbsUT/oRwO/G93sTSLbakSCqEaxvBEJSi0qq17UKDtRmQWRzuoRW7GIy6z+qEklkZl/V4hJ+nl88czoFWwQaebSc6oiVtCxUTCWYyyvIyWZKOYZChT/F4nmi+S4plTOhfV0zo+J+XEsUxhtZIujzWJ5lNgujdaTW6P1VG5FdnSJvoV0biSk/odMYbyezvr/AilzzRyQ4ePbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"update-user\"\n        title=\"\"\n        src=\"/static/dfd6b940da1fa35dfaaf387dd2441f07/fb8a0/update-user.png\"\n        srcset=\"/static/dfd6b940da1fa35dfaaf387dd2441f07/1a291/update-user.png 148w,\n/static/dfd6b940da1fa35dfaaf387dd2441f07/2bc4a/update-user.png 295w,\n/static/dfd6b940da1fa35dfaaf387dd2441f07/fb8a0/update-user.png 590w,\n/static/dfd6b940da1fa35dfaaf387dd2441f07/526de/update-user.png 885w,\n/static/dfd6b940da1fa35dfaaf387dd2441f07/fa2eb/update-user.png 1180w,\n/static/dfd6b940da1fa35dfaaf387dd2441f07/9c578/update-user.png 1514w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h4 id=\"削除の動作確認\"><a href=\"#%E5%89%8A%E9%99%A4%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>削除の動作確認</h4>\n<p>最後に<code class=\"language-text\">nuxt updatedtaro</code>を削除してみましょう。\n以下のようなMutationを発行すると削除されたユーザー情報が返ってきます。<br/>\n<small>※削除後にユーザー一覧を取得すると<code class=\"language-text\">nuxt updatedtaro</code>がなくなっていることが確認できます。</small></p>\n<div class=\"gatsby-code-title\">削除用Mutation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  deleteUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5cb85f5c669161188e9dd7ad4d2598ff/9c961/delete-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.204188481675395%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcRAAAXEQHKJvM/AAACrUlEQVQoz3XSz0/TYBgH8B7xpJO167Z23ca69fcvWDfoOjaFhUEAiTEYDprgQU1MMPFiPHjQvwEicywjevXileAMzAhRs5sHz5odPXiDNo9PNzlI9PDJ07fP22+ftynx6M6DdrvZ+tpoNL7sNHd6W5ubPVVVe+HR0R5FUT2SJP+JIoc9mqZ71Wr18/x8/VulWm0Su6328dHxJ9jrdGH/4CPsvf8AL9uv4UWzDds7u/8V9M/2bDVasN1swdNnz7uE62gHpjsDrOacUhnNDzEZnx6T/Biv+JG0hMQBCpG4HsB+NKv6NO6hh/WElS2ICdo+kZDz3cz4NKT0KS9tloBVCsCpRUggOmcBxZtA8gbEsiYksAaSeF/UpyCHewSssuF46kQFGDHfIcIpuUtLBYgqtkfxOlAZA+kDdM6ESwkRltbW4eHtu2CJFowbDuhyEVTRBk0akiXbK8oFUOzJDkGllW5ctoFR8l4ka0AEgyI4xZnRlAKqMwvzlTrEtBIwxTrEcZqY6Q7pJaB011OsMtQe3xwGRgQLSMn0zodRf2oorYISHNVwgSvUgbMrkJiqAOegfBniluupGGxMu8NAVrFxc8EjMTAwOqZBGAXHHrwEv58l2YNA1igDq7vAaA7W0kBUL3kqTi/wVocYYYXuWrkGu9dXvfXZRVh0ZoDDiVNSHmgMCgIvZy0wcJ3UnWHQObEgEHuSNNEhLjDZw7pbg3tzy6f369f8DfRq5Yb/ZGHFTwjj/kXe8JdY3l/I6D5luD4+/Jc4iujuiYSTiuLEO2KEyR2tTs/BxtwyzE5egVtXF6BWrOKvYkI0mBAxqIhHlnAa4RwR8cjWggnzh0SYy72N8trPGK/9iAlmP6nk+9SY0g9xQj+clJDYD6WkfiIl9wW8zv4LJ36XM+ovJqO++Q0HeYHa08D96QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"delete-user\"\n        title=\"\"\n        src=\"/static/5cb85f5c669161188e9dd7ad4d2598ff/fb8a0/delete-user.png\"\n        srcset=\"/static/5cb85f5c669161188e9dd7ad4d2598ff/1a291/delete-user.png 148w,\n/static/5cb85f5c669161188e9dd7ad4d2598ff/2bc4a/delete-user.png 295w,\n/static/5cb85f5c669161188e9dd7ad4d2598ff/fb8a0/delete-user.png 590w,\n/static/5cb85f5c669161188e9dd7ad4d2598ff/526de/delete-user.png 885w,\n/static/5cb85f5c669161188e9dd7ad4d2598ff/fa2eb/delete-user.png 1180w,\n/static/5cb85f5c669161188e9dd7ad4d2598ff/08f6a/delete-user.png 1770w,\n/static/5cb85f5c669161188e9dd7ad4d2598ff/9c961/delete-user.png 1910w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"5-graphpackでsubscriptionを実装・動作確認する\"><a href=\"#5-graphpack%E3%81%A7subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. GraphpackでSubscriptionを実装・動作確認する</h2>\n<h3 id=\"実装-2\"><a href=\"#%E5%AE%9F%E8%A3%85-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<p>GraphpackではSubscriptionはデフォルトoffになっています。\nそのためココだけは設定ファイルを作成する必要があります。\nプロジェクトのルートフォルダ直下に<code class=\"language-text\">graphpack.config.js</code>を作成しましょう。</p>\n<div class=\"gatsby-code-title\">graphpack.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  server<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    subscriptions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Subscriptionのエンドポイントとして</span>\n      <span class=\"token comment\">// QueryとMutationと同じパスを設定します。</span>\n      path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`/graphql`</span></span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>スキーマ定義にSubscriptionを追記します。</p>\n<div class=\"gatsby-code-title\">src/schema.graphqlの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\">type Subscription <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">userCreated</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n    <span class=\"token attr-name\">userUpdated</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n    <span class=\"token attr-name\">userDeleted</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>リゾルバーでSubscriptionを定義し、Mutationも修正します。\nMutationも修正するのは、登録・更新・削除完了後にSubscriptionを発行できるようにするためです。</p>\n<div class=\"gatsby-code-title\">src/resolvers.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// Subscriptionのやりとりには`apollo-server`のPubSubを使る</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// `graphpack`の場合、`apollo-server`は入っている</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PubSub <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'apollo-server'</span><span class=\"token punctuation\">;</span>\n</span><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> users<span class=\"token punctuation\">,</span> generateId <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./db'</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> pubsub <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PubSub</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token constant\">EVENT</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'userCreated'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'userUpdated'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'userDeleted'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>    \n  <span class=\"token comment\">// ・・・</span>\n  Mutation<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    createUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> newUser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token function\">generateId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      users<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \n<span class=\"gatsby-highlight-code-line\">      pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> newUser<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>      <span class=\"token keyword\">return</span> newUser<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    updateUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      updatedUser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n      updatedUser<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email<span class=\"token punctuation\">;</span>\n      updatedUser<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">      pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> updatedUser<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>      <span class=\"token keyword\">return</span> updatedUser<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    deleteUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> userIndex <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User not found'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>deletedUser<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>userIndex<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n<span class=\"gatsby-highlight-code-line\">      pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> deletedUser<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>      <span class=\"token keyword\">return</span> deletedUser<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  Subscription<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      subscribe<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">asyncIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      subscribe<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">asyncIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      subscribe<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">asyncIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>  <span class=\"token comment\">// ・・・</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-2\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>実装できたら<code class=\"language-text\">npm run dev</code>でサーバー起動して <code class=\"language-text\">http://localhost:4000/</code> を開きます。</p>\n<p><code class=\"language-text\">userCreated</code>の動作確認をしましょう。\n以下のようなSubscriptionを発行します。</p>\n<div class=\"gatsby-highlight\" data-language=\":title=登録用muatation\"><pre class=\"language-:title=登録用muatation\"><code class=\"language-:title=登録用muatation\">subscription {\n  userCreated {\n    id\n    name\n    email\n    age    \n  }\n}</code></pre></div>\n<br/>\n<p>すると実行結果（画面右半分）にローディングアイコンが表示され、監視状態となります。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/46a5dd71ec73c93bd1b38799d7463245/67a86/subscription-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 63.56715606307777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACzUlEQVQ4y32SW08TQRSA911baCvd3V6Wlm67t+6l2/tVIa0FgiUaEKvQoPHBF33XJ18NRq0YEdBIYoyJf8A/AFXr6gvG/yJOezxbawRCfPhydmZ2vjkz51DP2uvfHz5+1H3SblsP1tYswzSt006nNeJyWSOjo5bzBOx5e/2Uw2HFBOHL9OyMNVWtdkVJalD7+z9g79Nn6H79Bh+7Fuy8eQvPN7fgxdbL/7A9YAPZ3H4FG/h/++k6XGk2VynTrEE0N3ngl1I9T0jqMRG5FxC0nj+mIvFeYIDaYw/hs9dFfRg1gnN9Tk4cuJnACiWmpyCSKJGIWYZgPAecisSzQMdM8PIGuCM6OMMqjPM6cEN4KQWSloeYkgFFL/QRELQCcTLhFsXKuFnOEkZMAR01gIklBrDICMrKZgF2GvOgosTAAw0lC/ohcNzXMOaVNImEJlqUT0kDY2YIIyQwIx2lyCDa2Wkgy0m4k6sArRWB1ctI6Qg+o9w/Ey9BujpJ6remUIgnM2qSeDEbBiW2dCDm/4xtaRTXxnFzEKXH4fRi36eVwEwWiJlSWhQtJO1siH1FD25mBRMYZAzfz4MiL2ackZIQRGEABTb2Nzcco7TPGmXQpQyJuf0t6mqlDgvnpsni5AzUi1W4WZuDZuU8LNng3Gq9AUUtB/6hyJaEzAqEzbP/hPgU+J5EZMdb1OtmC+5fXiZ35xchmSgOMgyKSYjIqUG15yJxuIAwmAV30pVR6MODdDlDRJprUR+WrsG7les/3y8tk3uNBXJ79iK5VKyS0QmVuHiD6JxIarxG6ESF+PQywSIcRS//8hqVHlb6QKK5FSqBPaTpedARFdHs/pLT4P3bOtiPBvZbqVADA3tVxhZRsH0OI6p5yGJxIzR3g3KFlW+ukLw7FtU6ASXVcYXljiMQ7Xg4oeNG7MggsQDf4ZHoMXg/vycEox1hQt51eNjZ30AamZ9KzuyAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"subscription-1\"\n        title=\"\"\n        src=\"/static/46a5dd71ec73c93bd1b38799d7463245/fb8a0/subscription-1.png\"\n        srcset=\"/static/46a5dd71ec73c93bd1b38799d7463245/1a291/subscription-1.png 148w,\n/static/46a5dd71ec73c93bd1b38799d7463245/2bc4a/subscription-1.png 295w,\n/static/46a5dd71ec73c93bd1b38799d7463245/fb8a0/subscription-1.png 590w,\n/static/46a5dd71ec73c93bd1b38799d7463245/526de/subscription-1.png 885w,\n/static/46a5dd71ec73c93bd1b38799d7463245/fa2eb/subscription-1.png 1180w,\n/static/46a5dd71ec73c93bd1b38799d7463245/08f6a/subscription-1.png 1770w,\n/static/46a5dd71ec73c93bd1b38799d7463245/67a86/subscription-1.png 1839w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>この状態で別タブを開き...</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/23165bbbf16f9be0be54b90121b38021/67a86/subscription-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 63.56715606307777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACeUlEQVQ4y22SXU/TYBTHey9sbMvWlnV1s+3alb6s2xjMbRAIRFnURFFQEhZjvPBLeGm8wIgTE4SBoDfyQWAxo3KD8buIT3s87TqBZRe/nKfPy6//87TUp9bWr3eb77ubrZb9dmPDNizLHgmF7HAkYt8Ih31GxsbsUSSMhILqr4+O2llZPr3bWLLnFxa6Si73gDo//w0nP7pg22fws3sKR9+PYHunDTvtPfh2cAhfkcP9L9De24fPu21kD7ax9tlp7+P+XfjwcQuePlt7ThULiyBMz1/okuk0eMlpLa84q4sN5+Wde84r5M2jFedgdc1ZqMw6tKg6XFZzOFl3UorRq7JBklndTavWRZTl1illch5uWXWSs2qg50rgVSlfhbRaBkbKA5stAIOwchESkuXDTZQhg3tS+jSerbkIZMwqCdPpJsWqU0CrU4RGWTxrQRwlCYRGQoIBNasC28uPgdUqkDJrw3BTRg34Qp3ERLlJjU9MAlMoE0a2gBZNFJl+9dJFBRNUtQjN2UVIGtWeoF8Rzhvna+64UgH1yX1Sfv0QE2IyRi+ShGD6qfokxF6NYsqQMomCek8QiLhLsctpVcjU5gg/U8KESgkPm8QXiZft0v3WMW0qaPeqiL98dv017TYJxzNNyrvwhNQTJsTrKftzSW36f7ueJF2YgUxhti93g6QkykuBEBN6BwcZFPYTDuAGayTCiZ7Q8g7+QcgwvJcltQrBOyReiiH8RRzkAoXrFIP/l9+eJx6Cd4+8WQWtvgRCae7qx7iGNz+WFF5QjKifMYJ2zMn5jmCUOzjuRFLZToyXO9GA2E2lE0vnsA5DOYln1A4rGccjMbbxD91rkLBOE2s4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"subscription-2\"\n        title=\"\"\n        src=\"/static/23165bbbf16f9be0be54b90121b38021/fb8a0/subscription-2.png\"\n        srcset=\"/static/23165bbbf16f9be0be54b90121b38021/1a291/subscription-2.png 148w,\n/static/23165bbbf16f9be0be54b90121b38021/2bc4a/subscription-2.png 295w,\n/static/23165bbbf16f9be0be54b90121b38021/fb8a0/subscription-2.png 590w,\n/static/23165bbbf16f9be0be54b90121b38021/526de/subscription-2.png 885w,\n/static/23165bbbf16f9be0be54b90121b38021/fa2eb/subscription-2.png 1180w,\n/static/23165bbbf16f9be0be54b90121b38021/08f6a/subscription-2.png 1770w,\n/static/23165bbbf16f9be0be54b90121b38021/67a86/subscription-2.png 1839w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>登録用のMutaitonを発行してみましょう。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/89891b4bc902fbc41f02ec590c8873ea/4d726/subscription-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.849162011173185%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACpUlEQVQ4y4WSy08TURTGZykqxLa0TN/Tx8x02s7ceXWmpaUFlKIR6iuigol7E/cuXJCYiOjCIBEogpGEBaxF+PM+zx0G0p2LX849d+Z8957vXOHi7C/Ozv7g/PwCJyenmJ+fg67rME3zvzDG4LouVldX8XptLUDY3T/E3uERhoe/cHR8jJ2D39geHmB77ye+7w4Dtnf3ieE1wf7OHjHEFsUv37bwcWMTnza/QkjJFqIlhpyiwm26kOw5JGQTExkFNxO5gLF4FmMUb4SMTeVxO1XAraREsYjxdBHRvBoglKwOOEV7Bpl6EwU2jaLZRrraQLLiBqS0BvKai0KF40Cu+9DdHjSq051usGbeHAp6G4JY85GsNyDSrRIyQ7x8iahYiBV1VLxZrK9v4B5rwjM8OPUWrKoHkw4xw2hQ9BQbVqsDQao6UI0mSqqPsupR6w6SZEMgXjKQrjXwcHkFlt6E6C0g4/eRtrtIsRkkWYdiByLlhbKHwec3ELKqhTSJcN+4EGeK1lfEuCh5bJIF6UYfktdHzu8i35pFzu0iZ3aQJlFF8+Ev3YUwVbXBEctXItRuOYTyOFGmlizyN2WTiNlDlgSyZkh4S1VvQZddCMmag3jVQkSqYzL0L0LcoQOidLsoCebJJ5sEeYtZox2QCeHrQJC8ZTQsgYtouo/Z1jye9hYx6C7ifX8ZP5ae4MXMAkQajKnaYDQ8XpgLRUa5FqR/hAkqeOB1cfr8FTYer+Dd/Uf4sPwMbxcHqFtttHIqXkoaKtSSyC79So3Ac5EGJNN3gwty0xXNwcDvoWm30aCJO+Y0YtRqpGgEUSIPfaKoT0OhQnkEnpdonz8dRggphSFRpkLFDJ5IpFDDeFbFJN0qXqgiJlWRoD01X4FGVEbQRvaMUh150vkHDjOsMRmNmOsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"subscription-3\"\n        title=\"\"\n        src=\"/static/89891b4bc902fbc41f02ec590c8873ea/fb8a0/subscription-3.png\"\n        srcset=\"/static/89891b4bc902fbc41f02ec590c8873ea/1a291/subscription-3.png 148w,\n/static/89891b4bc902fbc41f02ec590c8873ea/2bc4a/subscription-3.png 295w,\n/static/89891b4bc902fbc41f02ec590c8873ea/fb8a0/subscription-3.png 590w,\n/static/89891b4bc902fbc41f02ec590c8873ea/526de/subscription-3.png 885w,\n/static/89891b4bc902fbc41f02ec590c8873ea/fa2eb/subscription-3.png 1180w,\n/static/89891b4bc902fbc41f02ec590c8873ea/08f6a/subscription-3.png 1770w,\n/static/89891b4bc902fbc41f02ec590c8873ea/4d726/subscription-3.png 1790w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>これで、元のタブに戻ると、登録された情報がレスポンスで返ってきていれば成功です。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5602d4585c77e98c3841e166f915cdd2/4d726/subscription-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.849162011173185%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACp0lEQVQ4y4WSy08TURTGZydETXj1MW1npq9pO9N2Xp0Hw6MVpNQINIqAINC6c+HKxI2sNCpqfIABC0RJ+AdYCzH92z7PHSvpxrj45bvn5sw353G5X5eXuLy4QLfbxfn5ORqNBiqWBddx4PwH27bh+z5arW202y20Wy1wnZNTHJ2e4fD4O45/nGK/c4L9byf4yvTw6J/sHXSwd9gJ9N2nPbx8s4vXu+/ByXoVCX0S0awKIacglDUxJCq4GZcxMJbAYEjAAHEtlCCEgIGwiOt8EoMRKdAbsRSGxVwAlzankGFY0xDLPtLGJNhdXHUQU2zwBRuxvIUkxSmKGbnyODS7BpXyyqTsbHgzSGlT4KJFD1FKiORMhLP6FVHZwHBGg617+Ln5CPWSDYfOlZIPU/VgKA4M1Q1UI3VzFswJMuQpkdfswCDSB4tDZCzlTWz5NZgl+rFbR8KbR7xSQ0yfAk8wjVpVpLIumh/a4EKKiQCqZqxXHdNRitl5iBjJ21SNg7jTQNKdh+hVIfm3INpViAaNh0xzigdv4Ta4TNGBQDOKUcvJQiWYV5qqklUbcZqXQMYzWY0qHEfMIhOjBoEMBKNHr8o8zb8s2+B2mit4e28NO81VfFnZwKvldZyRfiQ26ksoZcrYpu3pZMhaFLTJgEQPdg4MabY6jYXbmr2LjVoDzxbu48XSA3S3H+NgbROKRgasddkET4sziX7Dfq4MKYf7vPwQq2T4ZH4JT+uLWJ9bxPM7TWSo3RFqly1GpqdTpk2G9T/zivXB4qg+DZla1pihRDNL0Px4tl36mG1YpDu+t222oCwlzrkzKLqzkKkSuTwRGDByRIZi9nR0govI7M1pENQK0pqHcKaEYUnBaFLFGME0nC5BTRehJhUUpAIUotDj71mj7yRa3m8xB7JpIy+UbAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"subscription-4\"\n        title=\"\"\n        src=\"/static/5602d4585c77e98c3841e166f915cdd2/fb8a0/subscription-4.png\"\n        srcset=\"/static/5602d4585c77e98c3841e166f915cdd2/1a291/subscription-4.png 148w,\n/static/5602d4585c77e98c3841e166f915cdd2/2bc4a/subscription-4.png 295w,\n/static/5602d4585c77e98c3841e166f915cdd2/fb8a0/subscription-4.png 590w,\n/static/5602d4585c77e98c3841e166f915cdd2/526de/subscription-4.png 885w,\n/static/5602d4585c77e98c3841e166f915cdd2/fa2eb/subscription-4.png 1180w,\n/static/5602d4585c77e98c3841e166f915cdd2/08f6a/subscription-4.png 1770w,\n/static/5602d4585c77e98c3841e166f915cdd2/4d726/subscription-4.png 1790w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<br/>\n<p>以上でSubscriptionの動作確認は終了です。\n今回は紹介しませんが、<strong>userUpdated</strong>と<strong>userDeleted</strong>も同様の方法で動作確認できるのでやってみてください。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はNode製GraphQLサーバー「Graphpack」の使い方について紹介しました。\n上記で紹介した通り非常に簡単ですので、「とりあえずGraphQLサーバーを立ててみたい！」という方はGraphpackを検討してみてはいかがでしょうか🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li>\n<p><a href=\"https://dev.to/leonardomso/a-beginners-guide-to-graphql-3kjj\">A Beginner’s Guide to GraphQL - DEV Community 👩‍💻👨‍💻</a></p>\n<ul>\n<li>GraphpackでQuery、Mutationの実装方法を紹介している記事です。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://steemit.com/utopian-io/@richardbmx/logo-design-for-graphpack-approved-and-used-in-the-project\">Logo design for Graphpack | Steemit</a></p>\n<ul>\n<li>Gpraphpackロゴ作成の舞台裏です。</li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/graphpack-graphql-zero-config-server","title":"設定いらずのNode製GraphQLサーバー「Graphpack」の使い方 / Query, Mutation, Subscriptionを試す","date":"2019-01-23T19:50:00.000+09:00","excerpt":"なにこれ「とりあえずクライアント側と同じJavaScriptで手っ取り早くGraphQLサーバー立てたい！」このようなユースケースにGraphpackはピッタリです。設定いらずのNode製GraphQLサーバーで 「GraphQLのスキーマ...","tags":["GraphQL","Graphpack"],"keywords":["GraphQL"],"thumbnail":"/thumbnail/2019/01/graphpack-graphql-zero-config-server.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Nuxt.js＋GraphQLの知識がこれから必要になるので<strong><a href=\"https://booth.pm/ja/items/1045830\">「Hello, GraphQL for client-side!」</a></strong>を読んだところ、非常にサクっと学ぶことができたので感想を書きます。\nGraphQLでサーバーと通信するには<strong><a href=\"https://www.apollographql.com/client\">「Apollo Client」</a></strong>というライブラリを使用します。\nNuxt.jsではApollo Clientを使いやすくしたライブラリである\n<strong><a href=\"https://github.com/nuxt-community/apollo-module\">「apollo-module」</a></strong>が用意されており、本書は主に<strong>「apollo-moduleの設定方法・実装方法についてチュートリアル形式で学べる一冊」</strong>になっていました。ボリュームも46ページとそんなに多くないので、<strong>「1日～2日で読める」</strong>内容です。\nただNuxt.jsの説明は端折っていたり、VuexのStoreのdispatchも知っている前提なので<strong>「Nuxt.js触ったことある人向け」</strong>かなと感じました。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://booth.pm/ja/items/1045830\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fbooth.pm%2Fja%2Fitems%2F1045830&key=0658bf78be97cafcf2b0b9f96c1270ee\"></a></div></div>\n<br/>\n<h2 id=\"目次\"><a href=\"#%E7%9B%AE%E6%AC%A1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>目次</h2>\n<p>第1章は冒頭6ページまでで、第2章がメインです。</p>\n<ul>\n<li>\n<p>&#x3C;第1章> GraphQLとは？</p>\n<ul>\n<li>1.1. 概要</li>\n<li>1.2. Apollo Client</li>\n</ul>\n</li>\n<li>\n<p>&#x3C;第2章> GraphQL with Nuxt.js</p>\n<ul>\n<li>2.1. 概要</li>\n<li>2.2. Nuxt.js</li>\n<li>2.3. apollo-module</li>\n<li>2.4. クエリの書き方</li>\n<li>2.5. 取得（Queries）</li>\n<li>2.6. 更新（Mutation）</li>\n<li>2.7. エラーハンドリングについて</li>\n<li>2.8. オフライン対応について</li>\n<li>2.9. テスト</li>\n<li>2.10. 良い使い方</li>\n<li>2.11. 周辺ライブラリ・エコシステム</li>\n<li>2.12. まとめ</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"本の感想\"><a href=\"#%E6%9C%AC%E3%81%AE%E6%84%9F%E6%83%B3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>本の感想</h2>\n<h3 id=\"公式ドキュメントや他サイトを多く紹介してくれているimg-null-data-iconemoji-blush-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaat80leqvr4aeyvu4assrpgzx8riwib1xzbtm175nvf1rbnlzxgwtvgttxxdru6ujijyrtqnwxcrk6zx0nkpyf2nz8r9jpvanx33uw1nmnqhcxcdif2pauetxyaoess7sw1xtw4liccgsfeytvggmiuap6vlzt2c6ovra82lkpajdacyklsoubaloawejv453gv6s1he1dyivswh4qnu9oezgzgp3nggzrihbvmtsvnggkuzdeypldwoqfrci8oh2inaqasejd4w70j3ilcrxaddley2h7nkmx3b2f5yq5ongjk7cnkmpre09odmtybu00grw0z6mhdmkicqsceftgkclgzenrxlorakww7euyrfqlgxqvf6cwxtklfdmz3zlxj36ggksutiy4poftsan0u0vp4jdgopacl7ifzqfpakswm5nq74qjzxf5k6gylqjlko2gdqj6dat0c1nytkpynxi5gsiayb8acagae8hbselg967ebzun2zqxthmdrpzibzrptyxtsin32lue94czgavkov3skcc9hiyi5ee2fl3wfdknp1asbrufmdatsgpelsvmupkgkedgucoa9aajgeznnaigqawl078btmifd91psbqtxpzs0plcdczwopk9c8uciifapyb2gnk1i0uwzj8li7ou4pmefon0rmlat0upf0mvovpyglwffawecwe4l0d0sahpgxc9j9jvz5lun0ftltdlmsnrxkpfarhf286usn6qb8hqgc65ltgmjj2brzplbw4gpccyfyqzdhpp8exlvgysjacj7djtehn4abxjbzpxawclrpojawftmetbktq6kpvxs3d534xbamrokmtnxzi9om4jtopyixqdt0ia54g5u2zngewqhivv2hoofl0kbblhtvyndjhprwe2bwz2dfdelczcuzvrrypbmdlkx5frmfj8vr59mp5iwhowhz1enjwbgk7aaebppthacaeoirqpzugkcclvwx6f5goae5pjnl8mosnledsdvcwecqmpbuzcym6nwin0ure01goouadvnaxjb4h6fvn9jgaad2l7kejkzjh3wnkvg3qsuqicpdwn34gua9wgn8baqkofxfzmkxr3xw0hph6jsmemklxifkjkhackpb7xxj0qtjylum1cyueqajgxegm9xetunvopqrpjgcbbmub9v4atjdfllefycc1sitbhmhlnr4y4guhbbaiqdiwcp4d1gcjttrrh96tduknub5vkfws7ivnps3sossyocrf00y8rsbho6ygfzqemlxcn7sjmk8a1wd4radkoagqpn4dsc2t7l0nbisdfblmxuxvj462ohkh7drfp6ekqt468xclsnrc01dgm4hqixcnr0nwoetiqkicdar3cj2qcajsgxdqbtwtrymn323ldebg97feebvxibqig3nwqxvwkb6ivlwtowfd5zitbdryxeqqi8edpbczjtq2xuyq5ciahjypw6n7z5vpdd86g63kshhsgah3hdg6kivowuzsojeffcsmpagikx3ekr9ijoipzvslxbxm1exrmt3sjunptymcvg54wa4lqaa5rzgoemtdpqhroyoofrjfsfyhuh7agta8gqktihfghanckwguwaejgfmsccuq2xvyqauz6h2khtbh05r9e8ztcwemapjub6fxozgtlzj03qfijqoweguqzsp0gnifrakzyv7ql7ttltj5qplk9dwowerfpdm7tze2gblqbs0ycxaepbczeiimrwskkxq2asdmtnk5ad6084nv8cxbdcvcabsura4o8viqr0afgjaitgubjwyjfpyfrz2hb8dcxlckj9fzz7bz2ksyzplyespptnzzhn55atgdnitgouors6dx325eoaaxnakswvyyqzbdztbvlw55rwc0alobetoaaamodqsb2f0hwo5exrsglafbbtyqxyywpp7kcr73ewmazlejshdpqg8lxzflkem84ca2xhyxirvsh9ypfnuntvhgznqscumhwkqohxfddigkkxigqnwyoi217luowu0mtiodlvdqqoi4f9wwdtpymouy2e61kiouyfclp5r9xybizmwphh8f8zxdu0paxhxjg5wt7v6jizmzmzmzmz95izmxgzhxmau6uqqyoz7rd3vlnqvou6j8nsp3da4xd8v5emblkjm5avceacagvfqee8od8qcbrxg7tfqmgg6ujixptx7h17xrrctwvkousr8xk2xfsl1ovesh6sojiymalvg8jj0nv4pgddf0a00q6qbf7etpe089q8sm33zmwnhzhxn8xa5pr1t0xwijlzbeoo6aegrpluw1u55sojiqpvhlwhdsja2uhiawukikw6mphb028tefp8xpxevyxlffssrzvrziltn142sr4urg1djai4fxbw13b9tdfr1ov3uxcrlogz9cw90zxr9q7cg7jgixbguty9wqgxclgkeajmmomzzgagcqrzksr3ence9jh1ybi6ogprzn0rtlc6wt8rr7j170nfweunuretztxao62irfrr9nx1p5anconockykaigbhvcnxmia8mo9ew9gvxl2ra0eon8qyyl70naxlkosbtfnapzydv0bhjkjzetjsbrf0lywe3s7g2tnljgs2ju7pztbpyphv0ps5coexuvwrtzztoqjhvrl63ypj012zpzwghnnlqnt88cxm9pd8laqzqiskvljfhiksiey7hyhlu3gtjnosegnenwmsyoirqslwbbnnmdsrvlzorjyzszbl04czz1hts71ww3hcbxx0hlltmen3278ahlhsz2dru7qwag9mv6dx1on9tv02b1hr9tv1nx4fdme0mcs77v4vu7t7vu2twdaicyusnkfnqzphe4hynyea9he3hm3mumboqllpsuybaue2qwtnwr1uve58outm9nizdm3xzfqnfyot825febtxnwvktwwsazkqf66adhw844oq1hb6wb3pox7hhj2qxtcqtt7iijqqbu0ycios9tb1bbhf9bxqrpyibbb0swzkjvm5ndmfdso4cbqoy413vkddtu3ezbtu8bbyxtuumrng75ya91aalzuwrajwl5uzzgxnj5x100hky1siju3yd6dra3rxtzzlwgphpxsmibmqzbomeieldp0tscg8i8zeiassangv2mrrmksxwwvapmefiyclsohii44mvcvihjuywekhicpv93v2a429zqmkdshiwpoctpsah1dw7cwftrj7te66zclv1z78kkjm51s0sydkemfxkex1ktkhkosugafmshhya6na1qya4h7qsrabtlnm5e2oorqmggo3qtqxkmsobcccctou7w9zxclstjfmjtnpdwrjtzxzeiagpoxrwbqtfbszklbmkq567vaddcjksdl1pqstprskevkvpgu01yzaatsxcxoyitazyvohaxboekejwvl4jgu0gsbqgkloibnkbe4iz07oddwzv9zkntmygvzmk26kbdikir5fubb6lnuqme72ocbayvehav2jshrj7bcbb13akxeozmg4qioagghtgaypalmjcdapee5lllnalokxydieswh6xqoqusrc1dj9uqz7vq02aosjgjh6a5r5oduphryjqkr2qtgskrkichagdfmpmgo8vfzggiudueutkuvogzuy9beu55xmqiarspeberzsbc6bbltw2fqbe2jvpt5p72gjksxlzikhtkgisdaakkmhtvgmkhrlmzajjuc9gyskmziookeeoovghgag1ys7vxi09g7olpq5xth7hafe8qa6a1awapdkkwtrx1fsk5kksrcsfsorzxtkohfeiqwmbujbcmxfdcg5qepcsi6wqp3xsnvtmy4lsmbpiialgqcjasnhtvv0qzuund7nsxql2ta7efv9tinpcv9s7n8rlbd25gimjiblmvjuyifagefn3voz87fnwhsn4iatahksgxghcefabqsibfhn49x8daapyo59uxfbkhmarsjc2pxfzko7sqlo0tevnu18a8p5luzozsyono2y92uw2gljle4p2vicutk4frbel3k372tjmrmv4ycyrxjoathwpo3qakwg3szpifxezvozx3b07mokxx1d7cvbs3sxh9fgkldh0lmc3yq69kwudahkjhh5w8erx91yxxli0ztpfagduauwagtbeguziqtpvl9w9enemkfpw7xn7l3i7d0hv9ixwdihmlmjhhkdggztov4kf1xnhvh0cejgd80mehu940ucffmtmihhqehj4t2viroagdzo2zsipzhqyaiu1vfak3vp9tzordadds0fmiayv9osbirheelw3zgfxxf3vt3un64ohwvd8vdlznnfnevozup469h8iqyummsh1gvtnoxms7jnai7tefs6fcyohlvtobf0d4opcp7ktwghm6ursfiroyqnbudjj5tdojjxxnz4rtvliyatsbmzuvopqdtml9c5mvjqzfhi8pfpmbyo554oofzpq07ynkftk43tzitnjeolfhr9c5qftlappwvka7qto1uc3cisli04smlbq3sftzq4p3ecqncdhhrnsyv2quqkulkzpl3xbvsrm9lq4atkkbxzb3jzz19thzq0r15fvknbnivruokcp8vh8asgkstb1ud9zvirzxd9qtpxihd1bgtdvmw9odakwwegf1kv29thpmpkxmxpom3vzdwu03jy8meswh7tndzvd3lenolgn8m5s1id6fmxg59yxuilzfvp2pzbrmn3n5djmx1fxqkkdrhmqa3zjxkzbsfsiu7jj2eelf87df5m2jrbqwvminjqiugvqotqoghplbdz55ugnn5pg0spplfffsphqpyiuqadtjhrw7qd1g1wpuppqi8txnwaels4ql6s7or6sivxujen5vcwu1kslbdjpmk5eixqyign2l9uvdw7hhe9fxjsyr69hxnpsh2g2yqifpzzprguu5zrbxqq1n0yclkgowh2eqz5rtbdq8m2rhzqpun7wbnsph68t6bpzg1rny9ejtpztf8hxphf83n7uuj1blumzbermq4uihxmjpnybggdhocdwtjrjpem66dyu6o21drbqnifhsysceeiccrjoreoqaxqz1isujoq1mkx62j3z7fa9n9m1gdmdk3rayknnpj2l7vzaph7lrtfukzinuhslglyuaeufbg0cbqfksmdnia4bs0kikufedaepndhkias7b556ys6dpvxdtpvn1pzp0j8ylepohcwwgz0gwbqnsfluv1prx45abx3bgo8orwlcavcijkgujgiat0ccf3mamuy509z4offcooa35jt6i51k81ov9pjrfsfq3w7rav47ja8mur0gjlagassf8lv5g72xvwyy0fdgwvgddguhl5gihggaubg5jkhxerxvherawko5052pif3ut2spbzz0c7rjorl5xcicvdowdnc4jto4vqn5xtgveesr8unlxavgiqqcmmwkic4hwjzivayxzcndssyychwoctyfnvgu6fuv3uzzu5vsym9fpf6j7dlqxhfe4npwffoadciwimb4hvhvpzndenqywvhm7iiihiufocuem3mz8zb0gv5schzfpwxaelor2u89vkvtwesw0p2triufqyzmdlroxjmphmdzm8aafmdximb8gv99k3vnybfze3rzjj1csjdjlzxksq5qdnia3k81t3gnwgb41dxapz1nu7mf3j6rzu537hqpd6nt5iioemima9vbsaefxlyin7wlv75nmnx5vkmu6o0rnvqboakwwdkhhaezpvp84xo9zr8gy8n9o71lboelt2x7vtp9rdv7zbd73nzvpn9xxhedwdkfhv9oamkbdrfmf1djs4mx3lqcl6uvdkhndkzrtcqhbkbh2hkg0swnqdlqxuzty2x74ztwdqwynqvzi54lh68uwymz7rtifcgkah0zerfwhzrugtqwexgve8vre8q3xngcolxuauwzxpsvemuhwcbcideaoqdeezfflinhocmkddnh5ldtt7vnwonj9ceezb5znz9sddzxcicgbslp4ys4b9oigd2hf1mrwvfnppev418xaxhiw7rmslehoalsiwqywq43ppequadqcx5ctldc9227wh127vpheyx23jxvfgfecnjw7yy7va4htpyt4z9ai1repb4b5nywvluekdbyrnuojjpwlt3cjywsylwtjeidkafwdq25qtzqlo0nsntry2pftgqxjjb99bxltleg2gf0c4dfgoyn5tmipyxvqcvrckxybylre67k5rxh3bjewawyt51cryocwrtxfjewadyas1tt1z8vh2phh3ifroxzzq8d8x9googcexty257sd6vinbrgr8bnuappwv14a7wj3gxvjnffeddbr3hsozdh5x3hla5a6hxb24aaq9j5pwnmiqlshvublpxxspmmhcwe4eb1wwpeciffpw7zxd7vwmfr9mrwpg8jyy4wiiq4vm7rdnff9zt5pzcn0bf8hibrb3xu8f2pwgcvgykfzefkaaaaabjru5erkjggg\"><a href=\"#%E5%85%AC%E5%BC%8F%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%84%E4%BB%96%E3%82%B5%E3%82%A4%E3%83%88%E3%82%92%E5%A4%9A%E3%81%8F%E7%B4%B9%E4%BB%8B%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8Bimg-null-data-iconemoji-blush-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaat80leqvr4aeyvu4assrpgzx8riwib1xzbtm175nvf1rbnlzxgwtvgttxxdru6ujijyrtqnwxcrk6zx0nkpyf2nz8r9jpvanx33uw1nmnqhcxcdif2pauetxyaoess7sw1xtw4liccgsfeytvggmiuap6vlzt2c6ovra82lkpajdacyklsoubaloawejv453gv6s1he1dyivswh4qnu9oezgzgp3nggzrihbvmtsvnggkuzdeypldwoqfrci8oh2inaqasejd4w70j3ilcrxaddley2h7nkmx3b2f5yq5ongjk7cnkmpre09odmtybu00grw0z6mhdmkicqsceftgkclgzenrxlorakww7euyrfqlgxqvf6cwxtklfdmz3zlxj36ggksutiy4poftsan0u0vp4jdgopacl7ifzqfpakswm5nq74qjzxf5k6gylqjlko2gdqj6dat0c1nytkpynxi5gsiayb8acagae8hbselg967ebzun2zqxthmdrpzibzrptyxtsin32lue94czgavkov3skcc9hiyi5ee2fl3wfdknp1asbrufmdatsgpelsvmupkgkedgucoa9aajgeznnaigqawl078btmifd91psbqtxpzs0plcdczwopk9c8uciifapyb2gnk1i0uwzj8li7ou4pmefon0rmlat0upf0mvovpyglwffawecwe4l0d0sahpgxc9j9jvz5lun0ftltdlmsnrxkpfarhf286usn6qb8hqgc65ltgmjj2brzplbw4gpccyfyqzdhpp8exlvgysjacj7djtehn4abxjbzpxawclrpojawftmetbktq6kpvxs3d534xbamrokmtnxzi9om4jtopyixqdt0ia54g5u2zngewqhivv2hoofl0kbblhtvyndjhprwe2bwz2dfdelczcuzvrrypbmdlkx5frmfj8vr59mp5iwhowhz1enjwbgk7aaebppthacaeoirqpzugkcclvwx6f5goae5pjnl8mosnledsdvcwecqmpbuzcym6nwin0ure01goouadvnaxjb4h6fvn9jgaad2l7kejkzjh3wnkvg3qsuqicpdwn34gua9wgn8baqkofxfzmkxr3xw0hph6jsmemklxifkjkhackpb7xxj0qtjylum1cyueqajgxegm9xetunvopqrpjgcbbmub9v4atjdfllefycc1sitbhmhlnr4y4guhbbaiqdiwcp4d1gcjttrrh96tduknub5vkfws7ivnps3sossyocrf00y8rsbho6ygfzqemlxcn7sjmk8a1wd4radkoagqpn4dsc2t7l0nbisdfblmxuxvj462ohkh7drfp6ekqt468xclsnrc01dgm4hqixcnr0nwoetiqkicdar3cj2qcajsgxdqbtwtrymn323ldebg97feebvxibqig3nwqxvwkb6ivlwtowfd5zitbdryxeqqi8edpbczjtq2xuyq5ciahjypw6n7z5vpdd86g63kshhsgah3hdg6kivowuzsojeffcsmpagikx3ekr9ijoipzvslxbxm1exrmt3sjunptymcvg54wa4lqaa5rzgoemtdpqhroyoofrjfsfyhuh7agta8gqktihfghanckwguwaejgfmsccuq2xvyqauz6h2khtbh05r9e8ztcwemapjub6fxozgtlzj03qfijqoweguqzsp0gnifrakzyv7ql7ttltj5qplk9dwowerfpdm7tze2gblqbs0ycxaepbczeiimrwskkxq2asdmtnk5ad6084nv8cxbdcvcabsura4o8viqr0afgjaitgubjwyjfpyfrz2hb8dcxlckj9fzz7bz2ksyzplyespptnzzhn55atgdnitgouors6dx325eoaaxnakswvyyqzbdztbvlw55rwc0alobetoaaamodqsb2f0hwo5exrsglafbbtyqxyywpp7kcr73ewmazlejshdpqg8lxzflkem84ca2xhyxirvsh9ypfnuntvhgznqscumhwkqohxfddigkkxigqnwyoi217luowu0mtiodlvdqqoi4f9wwdtpymouy2e61kiouyfclp5r9xybizmwphh8f8zxdu0paxhxjg5wt7v6jizmzmzmzmz95izmxgzhxmau6uqqyoz7rd3vlnqvou6j8nsp3da4xd8v5emblkjm5avceacagvfqee8od8qcbrxg7tfqmgg6ujixptx7h17xrrctwvkousr8xk2xfsl1ovesh6sojiymalvg8jj0nv4pgddf0a00q6qbf7etpe089q8sm33zmwnhzhxn8xa5pr1t0xwijlzbeoo6aegrpluw1u55sojiqpvhlwhdsja2uhiawukikw6mphb028tefp8xpxevyxlffssrzvrziltn142sr4urg1djai4fxbw13b9tdfr1ov3uxcrlogz9cw90zxr9q7cg7jgixbguty9wqgxclgkeajmmomzzgagcqrzksr3ence9jh1ybi6ogprzn0rtlc6wt8rr7j170nfweunuretztxao62irfrr9nx1p5anconockykaigbhvcnxmia8mo9ew9gvxl2ra0eon8qyyl70naxlkosbtfnapzydv0bhjkjzetjsbrf0lywe3s7g2tnljgs2ju7pztbpyphv0ps5coexuvwrtzztoqjhvrl63ypj012zpzwghnnlqnt88cxm9pd8laqzqiskvljfhiksiey7hyhlu3gtjnosegnenwmsyoirqslwbbnnmdsrvlzorjyzszbl04czz1hts71ww3hcbxx0hlltmen3278ahlhsz2dru7qwag9mv6dx1on9tv02b1hr9tv1nx4fdme0mcs77v4vu7t7vu2twdaicyusnkfnqzphe4hynyea9he3hm3mumboqllpsuybaue2qwtnwr1uve58outm9nizdm3xzfqnfyot825febtxnwvktwwsazkqf66adhw844oq1hb6wb3pox7hhj2qxtcqtt7iijqqbu0ycios9tb1bbhf9bxqrpyibbb0swzkjvm5ndmfdso4cbqoy413vkddtu3ezbtu8bbyxtuumrng75ya91aalzuwrajwl5uzzgxnj5x100hky1siju3yd6dra3rxtzzlwgphpxsmibmqzbomeieldp0tscg8i8zeiassangv2mrrmksxwwvapmefiyclsohii44mvcvihjuywekhicpv93v2a429zqmkdshiwpoctpsah1dw7cwftrj7te66zclv1z78kkjm51s0sydkemfxkex1ktkhkosugafmshhya6na1qya4h7qsrabtlnm5e2oorqmggo3qtqxkmsobcccctou7w9zxclstjfmjtnpdwrjtzxzeiagpoxrwbqtfbszklbmkq567vaddcjksdl1pqstprskevkvpgu01yzaatsxcxoyitazyvohaxboekejwvl4jgu0gsbqgkloibnkbe4iz07oddwzv9zkntmygvzmk26kbdikir5fubb6lnuqme72ocbayvehav2jshrj7bcbb13akxeozmg4qioagghtgaypalmjcdapee5lllnalokxydieswh6xqoqusrc1dj9uqz7vq02aosjgjh6a5r5oduphryjqkr2qtgskrkichagdfmpmgo8vfzggiudueutkuvogzuy9beu55xmqiarspeberzsbc6bbltw2fqbe2jvpt5p72gjksxlzikhtkgisdaakkmhtvgmkhrlmzajjuc9gyskmziookeeoovghgag1ys7vxi09g7olpq5xth7hafe8qa6a1awapdkkwtrx1fsk5kksrcsfsorzxtkohfeiqwmbujbcmxfdcg5qepcsi6wqp3xsnvtmy4lsmbpiialgqcjasnhtvv0qzuund7nsxql2ta7efv9tinpcv9s7n8rlbd25gimjiblmvjuyifagefn3voz87fnwhsn4iatahksgxghcefabqsibfhn49x8daapyo59uxfbkhmarsjc2pxfzko7sqlo0tevnu18a8p5luzozsyono2y92uw2gljle4p2vicutk4frbel3k372tjmrmv4ycyrxjoathwpo3qakwg3szpifxezvozx3b07mokxx1d7cvbs3sxh9fgkldh0lmc3yq69kwudahkjhh5w8erx91yxxli0ztpfagduauwagtbeguziqtpvl9w9enemkfpw7xn7l3i7d0hv9ixwdihmlmjhhkdggztov4kf1xnhvh0cejgd80mehu940ucffmtmihhqehj4t2viroagdzo2zsipzhqyaiu1vfak3vp9tzordadds0fmiayv9osbirheelw3zgfxxf3vt3un64ohwvd8vdlznnfnevozup469h8iqyummsh1gvtnoxms7jnai7tefs6fcyohlvtobf0d4opcp7ktwghm6ursfiroyqnbudjj5tdojjxxnz4rtvliyatsbmzuvopqdtml9c5mvjqzfhi8pfpmbyo554oofzpq07ynkftk43tzitnjeolfhr9c5qftlappwvka7qto1uc3cisli04smlbq3sftzq4p3ecqncdhhrnsyv2quqkulkzpl3xbvsrm9lq4atkkbxzb3jzz19thzq0r15fvknbnivruokcp8vh8asgkstb1ud9zvirzxd9qtpxihd1bgtdvmw9odakwwegf1kv29thpmpkxmxpom3vzdwu03jy8meswh7tndzvd3lenolgn8m5s1id6fmxg59yxuilzfvp2pzbrmn3n5djmx1fxqkkdrhmqa3zjxkzbsfsiu7jj2eelf87df5m2jrbqwvminjqiugvqotqoghplbdz55ugnn5pg0spplfffsphqpyiuqadtjhrw7qd1g1wpuppqi8txnwaels4ql6s7or6sivxujen5vcwu1kslbdjpmk5eixqyign2l9uvdw7hhe9fxjsyr69hxnpsh2g2yqifpzzprguu5zrbxqq1n0yclkgowh2eqz5rtbdq8m2rhzqpun7wbnsph68t6bpzg1rny9ejtpztf8hxphf83n7uuj1blumzbermq4uihxmjpnybggdhocdwtjrjpem66dyu6o21drbqnifhsysceeiccrjoreoqaxqz1isujoq1mkx62j3z7fa9n9m1gdmdk3rayknnpj2l7vzaph7lrtfukzinuhslglyuaeufbg0cbqfksmdnia4bs0kikufedaepndhkias7b556ys6dpvxdtpvn1pzp0j8ylepohcwwgz0gwbqnsfluv1prx45abx3bgo8orwlcavcijkgujgiat0ccf3mamuy509z4offcooa35jt6i51k81ov9pjrfsfq3w7rav47ja8mur0gjlagassf8lv5g72xvwyy0fdgwvgddguhl5gihggaubg5jkhxerxvherawko5052pif3ut2spbzz0c7rjorl5xcicvdowdnc4jto4vqn5xtgveesr8unlxavgiqqcmmwkic4hwjzivayxzcndssyychwoctyfnvgu6fuv3uzzu5vsym9fpf6j7dlqxhfe4npwffoadciwimb4hvhvpzndenqywvhm7iiihiufocuem3mz8zb0gv5schzfpwxaelor2u89vkvtwesw0p2triufqyzmdlroxjmphmdzm8aafmdximb8gv99k3vnybfze3rzjj1csjdjlzxksq5qdnia3k81t3gnwgb41dxapz1nu7mf3j6rzu537hqpd6nt5iioemima9vbsaefxlyin7wlv75nmnx5vkmu6o0rnvqboakwwdkhhaezpvp84xo9zr8gy8n9o71lboelt2x7vtp9rdv7zbd73nzvpn9xxhedwdkfhv9oamkbdrfmf1djs4mx3lqcl6uvdkhndkzrtcqhbkbh2hkg0swnqdlqxuzty2x74ztwdqwynqvzi54lh68uwymz7rtifcgkah0zerfwhzrugtqwexgve8vre8q3xngcolxuauwzxpsvemuhwcbcideaoqdeezfflinhocmkddnh5ldtt7vnwonj9ceezb5znz9sddzxcicgbslp4ys4b9oigd2hf1mrwvfnppev418xaxhiw7rmslehoalsiwqywq43ppequadqcx5ctldc9227wh127vpheyx23jxvfgfecnjw7yy7va4htpyt4z9ai1repb4b5nywvluekdbyrnuojjpwlt3cjywsylwtjeidkafwdq25qtzqlo0nsntry2pftgqxjjb99bxltleg2gf0c4dfgoyn5tmipyxvqcvrckxybylre67k5rxh3bjewawyt51cryocwrtxfjewadyas1tt1z8vh2phh3ifroxzzq8d8x9googcexty257sd6vinbrgr8bnuappwv14a7wj3gxvjnffeddbr3hsozdh5x3hla5a6hxb24aaq9j5pwnmiqlshvublpxxspmmhcwe4eb1wwpeciffpw7zxd7vwmfr9mrwpg8jyy4wiiq4vm7rdnff9zt5pzcn0bf8hibrb3xu8f2pwgcvgykfzefkaaaaabjru5erkjggg\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>公式ドキュメントや他サイトを多く紹介してくれている<img null=\"\" data-icon=\"emoji-blush\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAT80lEQVR4AeyVU4AsSRpGzx8RiWIb1xzbtm175nVf1rbNlzXGWtvGtTXXdru6ujIjYrtqNWxcrk6Z+X0nkPyf/2n+z/8R9jPvAnX33Uw1nmNQHCXCdIF2paUeTxYAoeSs7/Sw1XtW4licCgsfeYTVgGM/Iu/aP6VlzT2c6oVrA82lKpAjdaCyKlSoUBAloAWej/V453GV6s1hE1dyiV+SWH4qnu9OeZgZgP+3ngGzriHbVM+tSvNgGKuzdEYpldWoqFrcI8oh2iNaQASej/d4W70J3ilcRXADDley2H7nKmX3B2f5yq5OngJK7CNkMPRe09ODmTyBu00grw0z6mhdMKicQsceFTgkClGZenRxLORakWw7EuYRFQLgXQVf6cWXtkLfdmz3Zlx/J36ggksUtiy4PoftSan0u0Vp4j++dgOPACl7ifzqfPaKsWM5NQ74QJzXF5k6gylqJLKo2GDqJ6DaT0C1nYTkpyNxI5gsiAYB8ACAgAe8hbSEL+/G967EbZuN2zqXtHMDrpziBzRptyXtSin32l+UE94CzGAvkOV3skcc9hiy+i5eE2fl3WFDkNP1ASbrUFmDaTsGPelSVMupkGkED/gUcOA9AAjgeZnnAigQAwL078btmIFd91PSbQtxpZS0pLCdCZWOpK9c8u+c+iifAPyB2gNk1i0UWzJ8Li7ou4PmEFOn0RmLaT0UPf0mVOvpYGLwFfAWEcWe4L0D0SAhpGXc9j9jVz5Lun0Ftl+TdlmSnRXKPfaRHf286uSn6Qb8/hQgc65lTGMjj2brzPlBW4gpCCYfYqZdhpp8ExLVgysjACJ7djT/EhN4ABXjBzpxawclrPoJaW+FtMeTbKtQ6kp/vXs3d534XbaMRoKMtnxzI9+Om4JTopYIXQDT0IA54g5U2zngEwQHIvv2HOOfL0KBBLhtvyNd+jhpRwe2BwZ2DFDelczcuZvrRyPBMDLkx5fRMFj+8Vr59mp5IWhowhz1ENJwBGK7AAEBPPtHACAeoIRqPZUgKCCLvwx6F5GOAE5pJnl8MOsNl/+EDsDvCwECqMPb+UzcYM6NWiN0URE01GOOuAdVnAxJB4h6fvn9JgAAD2L7keJkzJH3wNKvg3QSuQicP/dwn34GuA9wgN8bAQKoFXfzmkxR3xW0hph6jSmEmKlXIfkJkHaCKPB7XXj0QtJyLUM1CyueQajgXEgm9XetuNvOP/QRPjGcBBmu/B9v4aTJDfLLeFycC1siTBHMhLNR4y4GUhBBAIQDiwcP4D1gcJt+Trrh96TdUKnuB5vKfWs7/IVnPs3soSSYocrf00Y8rsBHo6YgFzQEmLxCN7Sjmk8A1wd4RADkoAgQPN4DSC2T7l0Nbis+DfBlmxuXVj462OHKh7dRfp6EkQt468Xclsnrc01DgM4HqIxCNR0NWoEtIQKIcDAR/3cJ2qCajsGXdqBTwTRYMn323LdebG97+FEeBvxIBQig3nwqxVwkb6iVLwToWFD5ZiTbDrYXEQ/+QI/8EDPBCZJtq2XUyQ5cIahJyPW6N7z5VP+dD86g63kShhSgAH3HdG6KivowUzSojEFFCsmPA/GIKx3EkR9iJoipZVSlXbXM1exRMT3sjunpTYMCvg54wA4lQAA5rZGoEMtDpqhROYOOFRJFSFyHuH7AgTA8gQKtIHFgHaNCKwgUWAeJG+FMSCCuq2XVyQAuZ6h2KHTbh05r9E/8ZTcWEMAPJUB/6FxOzGTlZJ03qFijQoWEGUQZsP0gniFRAkZYv7qL7TtLTJ5QpLk9DwOWERFpdm7tZe2Gblqbs0ycXAepB+cZEi+IMrWsKkxq2asdMtnk5A+d60+84Nv8CXBDCVCAbsura4O8Viqr0aFGjAITgU/BJwyJFpyFrz+2hB/8dCXlckJ9fZZ7bz2KSy+ZPLyESPPTnzzHN55aTGdniTgOuOrS6dx325EoAaxnaKSWVYyqZbdZTbVLW55rwc0ALOBeToAAamoDQSb2F0hWo/5eXrSglAFbBtyQxyYwPP7kCr73/eWMazLEjSHdpQG+8LXZFLKeM84cA2XHyxIr/vSH9YPfnUNTVhgzNqScuMH/WkqoHXfddigkKXiGQNWyOi217LUOWU0mTi+odlvdQQoI4F9WwDtPYmoUy2E61kioUYFClP5r9XYBIzmWpHH8F8+ZxdU0PaxhXJg5Wt7V6JiZmZmZmZmZ95iZmXGZhxmau6uqqyoz7Rd3VlnqVOu6j8nSp3Da4XD8v5emBLKjm5AVCEACAgvFQ/ee8od/8qCbrxg7tFqMGg6ujIxPtX7h1+7xRrctWVkOusr8xk2xfSL1OVesh6sOjiyMaLvG8jj0NV/4pgddf/0a00q6QB+F7ETpe089Q8/SM33Zm+WNH/ZHXn8xA5pr1t0xWijLZbEoo6AEgrpLuw1U55sOjIq//PvHLWhdsja2uhiawuKIKw6MPHB028tefp8XPXeVyXlFFss/rzvrzIltN142sr4URg1dJaI4fXbW13b9tdfR1ov3UXcRlOgZ9Cw90zXr9Q7cg7jgIXBguTy9WQgxClGKEAJmM+omZZGagCQrZkSr3ence/9Jh1Ybi6OgprZN0RTLC6wt8rr7J170nFWE+Unuretz+txAO62iRF+rr9nX1p5aNCoNOcKYKAigBHVCNxMIA8Mo9Ew9G/VXL2RA0eON8qYYl70NAxlkoSbtFnapZYDv0BHJKJzeTJsbrf0LYWe3s7g2tnLJgs2ju7pZtbpYPHV0ps5COe+xuV/Wr+tzZtOqjhvrl63YPj012ZpZWghnNlqnT88cXm9pd8lAQzQISkVLJFHIKsIey7hYHLU3GTjnoSEGNeNwmSYoIRQSLWbBNNmdsrvLzoRJyzSZBl04czZ1HTs71WW3H/CBX/x0H/llT/Men3278aHlHsz2drU7QwAg9Mv6dX1On9tv02/b1+hr9TV1nX4fdME0mCS77V4vu7t7vU2TWdAiCYUSNKFnQzPHe/4hYNyEA9HE3HM3mUmboqLLPSUYbAuE2qWtnWr/1Uve58Outm9nizdM3XzFqnf/yOt825febTxNwvkTwWSaZkqf66aDHW844oq1hb6Wb3pox7HHJ2qXTCqT+T7IIJqQBU0yCioS9tb1bBhf9BxQRpYiB/BB0SWzKjvM5ndMFDSo4cBqoy413vKdDtu3eZbTU8bBYxtuumrNG7/5Ya9/1aalZUwrAJWl5UZZGXnj5x100+HKY1sIju3Yd6Dra3rxTzzlwGphpxsMIBMQZBOMeiELDP0TSc+G8i8ZEIASSANgV2mrrMksxWwvapMEFIyClsOHii/44mvcvIhjuywEkhIcP+v93v2A429zQMkdshIwpOCTP/sah1dw7CwFtRJ7te66ZclV/1z78KkJm51s0SYdkEMfxkEX1KTkHkOSUgAFMShHYA6na+1qya4H7+QsRAbTlNM5E2oOrqMGgo3qtqXKmSobCCCCTOu7W9ZXClstjfmJtnPDWrJTZXZEIAGpOXrWbQtFbszkLBmkQ567/VaDDCJkSdl1PQstPRsKEvkvPgu01YZaaTsxCxoyiTaZYVoHAxBoEkEJWvL4jGU0gSBQgkLOiBnKBe4iz07OddWZv9zKNtmYG/VZMk26kBDIkIr5fUbb6lnUqme72OcBaY/veHaV2jsHRJ7bcbb13AkxEoZmg4qIOagghtgAYpALmJCDApEE5LllNalokxYdIeSwH6XQoQuSrC1dJ9uqZ7vQ02AOsjGJh6+a5R5oDUpHRyJqkr2qTGSKRKIChAgDfMpmgO8VFzGgIudUEUTkuVogz+Uy9BEU5+5XMqiArspeberZSBc6BBLtw2fq/be2jVpT5p72gJKSxLzIkhTKGIsDaAkKmhT/VgMKhrLmzajJUC9GySKmZIOOKEEOOVGHGAg1yS7VXi09G7oLPQ5XtH/7hAfe8qa6a1aWapdKkwTRx1FSK5KKsrcsFsORzXTkOHfeiQWMBujBCMXFDcg5QePcSI6wQp3xsnvTMy4LS+MBPIIalGQcjAsNhtVV0qZuUnd7NsxQL2TA7Efv9tinPcv9S7N8RlbD25gIMJiBLmVJUYiFagef+n3VOz87fNwHsn4IaTAhKSgXgHcefABqsIBFHn49X/8DaaPyo59UxFbKHMArSjC2pxFZko7sqLO0tev+nu18A8p5LUzOzsyOno2/y92Uw2gLjLE4p2ViCUtk4frbeL/3K372t/jMr+Mv/4YcYRXjoAThwpo3qAkWg/3szPiFX+EzvoZX3B0+7mOKxX1D7cVBS3sxh9fGKLDH0LMc3Yq/69kwudAhkJhh5w8erX91yxXlI0ZTpfagDUaUwAgtBEGUZIQtPvL9w9EneMkfpW/7Xn7/L3i7d0hv9ixWDiHmLm+JhHkDggZtOv4kf/1X/NHvh0ceJGd80meHu940uCfFMtmihhQEhj4T2VIrOaGdZO2ZsIPZhQyAiu1vfak3vP9t+ZorD+addS0FmiaYv9OSBIrheE+LW3zGFxXf3VT3/UN64oHwvd8VDl+ZnnFnevozuP469h8IqyuMmsH1GVtnOXmS++7jNa/i7teFs6fCyohLVtObf0D4oPcP7ktWghm6uRsfIRoyQnbUdjj5TdOJjXxNz4RtVLiYATsbMzuvOpq/dtml9c5mVjQZFHI8PFpmBYo554OOfZPq07+y+NkfTK/+43TZItNJeOlfhr/9c5qFtLaPpWVKA7QtO1uc3cIsLI04sMLBQ3SFt/zQ4p3eCQ/ncDhhRnSYv2qUQkUlkzpL3XbVs/RM9Lq4ATkkbXzB3/jzZ19THzq0r15fVkNBNIVRUoKcP8vH8ASGKStb1Ud9ZvirZxd/9Qtp+xiHD1BGtDVMW9odakWwEGF1KV29ThPMpkxmXPoM3vZDwu03JY8mESwH7TnDZVD3lEnO+lgN8M5s1Id6Fmxg59/yxUiLzfvP2PzbR/Mn3n5//dJmX1FXQkkDrHMqA3zjXKzBsfSiu7jj2eElf87df5M2jrBQWVmiNJQIUGvqOtqOGHPlbdz55uGNn5PG0+SpPLffFsPhqPYiuqAdTJhRW7qd1G1WPUPPQi8tXNwAEls4/Ql/6s//7or6sivXujeN5VCWU1kslBDjpMk5eIxQYIgn2L9UvdW7hhe9fXjsYR69hxNPsH2G2YQIFpZZPRguu5Zrb+Xqq1N0yclkGowH2EQZ5rtBdQ8+M2RHzqpuN7WbnSPH68t6BpzG1r/ny9EJTp/Ztf8HXpHf83n7uu+J1bLUmzBerMq4UIhxMJp/NyBgGDHocDwtjrjpem66DYU6o21DRBqNiFHSYsceeIccRjoREOQAXQZ1ISuJOq1mkx6+2j3Z7fa9n9m1gdMDk3+rAYkNnPj2l7v/za+PH7lrtfukZinUhSLGlYUAEUFBg0CBQFKSmDNiA4BS0kIkUFEDAEPNDHKIAs7B556ys6dpVXdTPVN1pzp//0j8yLe/PO/HCWwg/z0GwBQnsfLuv1p//R/X45abx+3bGo8oRWlCaVCIJkgUJGIAT0CcF3MAmU+Y509z4OfFCOoA35JT6i51K81OV9Pjrfsfq3/w7r+av47jA8MU/r0GJLaGAssf8lv5g7/2XvWyy0fdGwvGDdGUHl5GihggAubg5jkhXeRXVHERAwKo5052piF3Ut2sPbzZ0c7RJ+or+l5xCicvdOwDNC4+JTo4vqN5xTGveesr8unLxaVGIQqCMMwkIc4HwjzIvAyxzC+nDssyyCHWoCtyFnvgu6FuV3UzzU5VsyM9fPf6j/7d/LqXHfE4npwf/f+oAdCiwiMb4hVHvPzND+eNqyWvHM7IIiHIufOCueM3MZ8zb0gv5sCHZfPwXaELOR2u89vkVtWeSW0P/2TriUfqyz/md/Lr/+oxj+MpHMdZ+M8aAFMDxiMb8g/v99K3vNyBfZE3RZJJ1CSJDJlzxkSQ5qDnIA3K81T3gNWgB+41DXapZ1Nu7MF3J6rZU537Hqp/+D6/nt/5iiOemIM/A/9VBsAEFXlyIn7wlV75nMNx5vKmu6O0RnvQBoAkwWDKHHAEzpvP84xo9zR8Gy8n9o71Lboe/lT2x7vtp9rdv7zbD73Nz+VPn9xxHEdwDKfhv9oAmKBDRfmF1+djs4mX3Lqcl6/UvDKHNdkZRtCQHbKbH2Hk/G0sWnQD+LQXuZty2x74ZtWdqWYnqvZI54lH68u+/W/ymz7rT/IfcGKAH0Ze/rf+WhzruGTQweXG+ve8vRe8+Q3xngcOlxua/UWzXpSVEMuhWcBCiDEaoqDEeZfFlINhOcMkddNh5LdTt7VnwOnj9cE/ezB/5ZN+z9/sdDZxCicGbSL/p/4ys4b9OIgD2Hf1mrWvfnPPev418XaXHIw7RmslehOalSIWQywQ43PPEqUAdQCX5CTldC9227WH127VPHEyX/23j+Xvf/GfecnjW7YY7vA4hTPY+t/4z9Ai1rEPB4b5NYw+/VlueKdbyrNuOJjPWlt3/cJyWSyLwTjEiDKafwdQ25QtZqlO0nSnTrY2PfTgqXjJb99bX/LtL/Eg2gF0c4DfGOYn/5t/mipYxvqcVrCKxYbyLre67K5rXH3bJeWawyt51crYocWRtXFjEWadyaS1tT1z8vh2PHH3ifroXzzq8d+8x9GOOgCexTY257SD6v/INBrgr8BNuAPPwV14a7wj3gXvjnfFe+DdBr3HsOzdh5x3HLa5a6hxB24aaq9j5P/wNMIqLsHVuBlPxxsPMM/HCwe4eb1wWPecIffpw7ZXD7VWMfr/9M/RwPg8jYY4//wIiQ4VM7RDnFf+9zT5PzcN0Bf8hiBRB3X/U8f2PwGcVgYKFzeFKAAAAABJRU5ErkJggg==\"></h3>\n<p>文章中にNuxt.js+GraphQLを学んでいくうえで参考になるサイトを多く紹介してくれています。\nそのため<strong>「読了後も紹介先を見ながら理解を深めていける」</strong>のが良い点です。\n本書に紹介されているものと、それに付随して自分で調べたものを以下にまとめました。</p>\n<ul>\n<li><a href=\"https://www.apollographql.com/docs/react/api/apollo-client.html#apollo-client\">Apollo ClientのAPIリファレンス</a></li>\n<li>\n<p><a href=\"https://github.com/apollographql/apollo-client-devtools\">apollo-devtools</a></p>\n<ul>\n<li><a href=\"https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm\">Chromeの拡張機能</a>です。開発者ツールでアプリのGraphQLサーバーに対してクエリの送信・取得ができます。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://developer.github.com/v4/explorer/\">GitHub GraphQL API explorer</a></p>\n<ul>\n<li>GitHubが提供しているGraphQLのAPIを叩けるオンラインエディターです。</li>\n<li>とりあえずGraphQLを試したいならココがオススメです。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://github.com/graphql/graphiql\">GraphiQL</a></p>\n<ul>\n<li>ブラウザ上でGraphQLのIEDを実現するライブラリです。GraphQLを調べているとよく出てきます。</li>\n<li>機能がシンプル過ぎて、HTTPヘッダーを追加できない（つまり認証情報が乗せられない）などのデメリットがあります。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://github.com/imolorhe/altair\">Altair</a></p>\n<ul>\n<li>GraphiQLよりリッチなGraphQLのIEDです。Chrome拡張機能、Electronアプリ、Webサイトなどのさまざまな形式で提供されています。</li>\n<li>HTTPヘッダー情報などを追加できるので認証が必要なAPIも叩けます。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"テストについてもチュートリアルがあるのは助かるimg-null-data-iconemoji-blush-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaat80leqvr4aeyvu4assrpgzx8riwib1xzbtm175nvf1rbnlzxgwtvgttxxdru6ujijyrtqnwxcrk6zx0nkpyf2nz8r9jpvanx33uw1nmnqhcxcdif2pauetxyaoess7sw1xtw4liccgsfeytvggmiuap6vlzt2c6ovra82lkpajdacyklsoubaloawejv453gv6s1he1dyivswh4qnu9oezgzgp3nggzrihbvmtsvnggkuzdeypldwoqfrci8oh2inaqasejd4w70j3ilcrxaddley2h7nkmx3b2f5yq5ongjk7cnkmpre09odmtybu00grw0z6mhdmkicqsceftgkclgzenrxlorakww7euyrfqlgxqvf6cwxtklfdmz3zlxj36ggksutiy4poftsan0u0vp4jdgopacl7ifzqfpakswm5nq74qjzxf5k6gylqjlko2gdqj6dat0c1nytkpynxi5gsiayb8acagae8hbselg967ebzun2zqxthmdrpzibzrptyxtsin32lue94czgavkov3skcc9hiyi5ee2fl3wfdknp1asbrufmdatsgpelsvmupkgkedgucoa9aajgeznnaigqawl078btmifd91psbqtxpzs0plcdczwopk9c8uciifapyb2gnk1i0uwzj8li7ou4pmefon0rmlat0upf0mvovpyglwffawecwe4l0d0sahpgxc9j9jvz5lun0ftltdlmsnrxkpfarhf286usn6qb8hqgc65ltgmjj2brzplbw4gpccyfyqzdhpp8exlvgysjacj7djtehn4abxjbzpxawclrpojawftmetbktq6kpvxs3d534xbamrokmtnxzi9om4jtopyixqdt0ia54g5u2zngewqhivv2hoofl0kbblhtvyndjhprwe2bwz2dfdelczcuzvrrypbmdlkx5frmfj8vr59mp5iwhowhz1enjwbgk7aaebppthacaeoirqpzugkcclvwx6f5goae5pjnl8mosnledsdvcwecqmpbuzcym6nwin0ure01goouadvnaxjb4h6fvn9jgaad2l7kejkzjh3wnkvg3qsuqicpdwn34gua9wgn8baqkofxfzmkxr3xw0hph6jsmemklxifkjkhackpb7xxj0qtjylum1cyueqajgxegm9xetunvopqrpjgcbbmub9v4atjdfllefycc1sitbhmhlnr4y4guhbbaiqdiwcp4d1gcjttrrh96tduknub5vkfws7ivnps3sossyocrf00y8rsbho6ygfzqemlxcn7sjmk8a1wd4radkoagqpn4dsc2t7l0nbisdfblmxuxvj462ohkh7drfp6ekqt468xclsnrc01dgm4hqixcnr0nwoetiqkicdar3cj2qcajsgxdqbtwtrymn323ldebg97feebvxibqig3nwqxvwkb6ivlwtowfd5zitbdryxeqqi8edpbczjtq2xuyq5ciahjypw6n7z5vpdd86g63kshhsgah3hdg6kivowuzsojeffcsmpagikx3ekr9ijoipzvslxbxm1exrmt3sjunptymcvg54wa4lqaa5rzgoemtdpqhroyoofrjfsfyhuh7agta8gqktihfghanckwguwaejgfmsccuq2xvyqauz6h2khtbh05r9e8ztcwemapjub6fxozgtlzj03qfijqoweguqzsp0gnifrakzyv7ql7ttltj5qplk9dwowerfpdm7tze2gblqbs0ycxaepbczeiimrwskkxq2asdmtnk5ad6084nv8cxbdcvcabsura4o8viqr0afgjaitgubjwyjfpyfrz2hb8dcxlckj9fzz7bz2ksyzplyespptnzzhn55atgdnitgouors6dx325eoaaxnakswvyyqzbdztbvlw55rwc0alobetoaaamodqsb2f0hwo5exrsglafbbtyqxyywpp7kcr73ewmazlejshdpqg8lxzflkem84ca2xhyxirvsh9ypfnuntvhgznqscumhwkqohxfddigkkxigqnwyoi217luowu0mtiodlvdqqoi4f9wwdtpymouy2e61kiouyfclp5r9xybizmwphh8f8zxdu0paxhxjg5wt7v6jizmzmzmzmz95izmxgzhxmau6uqqyoz7rd3vlnqvou6j8nsp3da4xd8v5emblkjm5avceacagvfqee8od8qcbrxg7tfqmgg6ujixptx7h17xrrctwvkousr8xk2xfsl1ovesh6sojiymalvg8jj0nv4pgddf0a00q6qbf7etpe089q8sm33zmwnhzhxn8xa5pr1t0xwijlzbeoo6aegrpluw1u55sojiqpvhlwhdsja2uhiawukikw6mphb028tefp8xpxevyxlffssrzvrziltn142sr4urg1djai4fxbw13b9tdfr1ov3uxcrlogz9cw90zxr9q7cg7jgixbguty9wqgxclgkeajmmomzzgagcqrzksr3ence9jh1ybi6ogprzn0rtlc6wt8rr7j170nfweunuretztxao62irfrr9nx1p5anconockykaigbhvcnxmia8mo9ew9gvxl2ra0eon8qyyl70naxlkosbtfnapzydv0bhjkjzetjsbrf0lywe3s7g2tnljgs2ju7pztbpyphv0ps5coexuvwrtzztoqjhvrl63ypj012zpzwghnnlqnt88cxm9pd8laqzqiskvljfhiksiey7hyhlu3gtjnosegnenwmsyoirqslwbbnnmdsrvlzorjyzszbl04czz1hts71ww3hcbxx0hlltmen3278ahlhsz2dru7qwag9mv6dx1on9tv02b1hr9tv1nx4fdme0mcs77v4vu7t7vu2twdaicyusnkfnqzphe4hynyea9he3hm3mumboqllpsuybaue2qwtnwr1uve58outm9nizdm3xzfqnfyot825febtxnwvktwwsazkqf66adhw844oq1hb6wb3pox7hhj2qxtcqtt7iijqqbu0ycios9tb1bbhf9bxqrpyibbb0swzkjvm5ndmfdso4cbqoy413vkddtu3ezbtu8bbyxtuumrng75ya91aalzuwrajwl5uzzgxnj5x100hky1siju3yd6dra3rxtzzlwgphpxsmibmqzbomeieldp0tscg8i8zeiassangv2mrrmksxwwvapmefiyclsohii44mvcvihjuywekhicpv93v2a429zqmkdshiwpoctpsah1dw7cwftrj7te66zclv1z78kkjm51s0sydkemfxkex1ktkhkosugafmshhya6na1qya4h7qsrabtlnm5e2oorqmggo3qtqxkmsobcccctou7w9zxclstjfmjtnpdwrjtzxzeiagpoxrwbqtfbszklbmkq567vaddcjksdl1pqstprskevkvpgu01yzaatsxcxoyitazyvohaxboekejwvl4jgu0gsbqgkloibnkbe4iz07oddwzv9zkntmygvzmk26kbdikir5fubb6lnuqme72ocbayvehav2jshrj7bcbb13akxeozmg4qioagghtgaypalmjcdapee5lllnalokxydieswh6xqoqusrc1dj9uqz7vq02aosjgjh6a5r5oduphryjqkr2qtgskrkichagdfmpmgo8vfzggiudueutkuvogzuy9beu55xmqiarspeberzsbc6bbltw2fqbe2jvpt5p72gjksxlzikhtkgisdaakkmhtvgmkhrlmzajjuc9gyskmziookeeoovghgag1ys7vxi09g7olpq5xth7hafe8qa6a1awapdkkwtrx1fsk5kksrcsfsorzxtkohfeiqwmbujbcmxfdcg5qepcsi6wqp3xsnvtmy4lsmbpiialgqcjasnhtvv0qzuund7nsxql2ta7efv9tinpcv9s7n8rlbd25gimjiblmvjuyifagefn3voz87fnwhsn4iatahksgxghcefabqsibfhn49x8daapyo59uxfbkhmarsjc2pxfzko7sqlo0tevnu18a8p5luzozsyono2y92uw2gljle4p2vicutk4frbel3k372tjmrmv4ycyrxjoathwpo3qakwg3szpifxezvozx3b07mokxx1d7cvbs3sxh9fgkldh0lmc3yq69kwudahkjhh5w8erx91yxxli0ztpfagduauwagtbeguziqtpvl9w9enemkfpw7xn7l3i7d0hv9ixwdihmlmjhhkdggztov4kf1xnhvh0cejgd80mehu940ucffmtmihhqehj4t2viroagdzo2zsipzhqyaiu1vfak3vp9tzordadds0fmiayv9osbirheelw3zgfxxf3vt3un64ohwvd8vdlznnfnevozup469h8iqyummsh1gvtnoxms7jnai7tefs6fcyohlvtobf0d4opcp7ktwghm6ursfiroyqnbudjj5tdojjxxnz4rtvliyatsbmzuvopqdtml9c5mvjqzfhi8pfpmbyo554oofzpq07ynkftk43tzitnjeolfhr9c5qftlappwvka7qto1uc3cisli04smlbq3sftzq4p3ecqncdhhrnsyv2quqkulkzpl3xbvsrm9lq4atkkbxzb3jzz19thzq0r15fvknbnivruokcp8vh8asgkstb1ud9zvirzxd9qtpxihd1bgtdvmw9odakwwegf1kv29thpmpkxmxpom3vzdwu03jy8meswh7tndzvd3lenolgn8m5s1id6fmxg59yxuilzfvp2pzbrmn3n5djmx1fxqkkdrhmqa3zjxkzbsfsiu7jj2eelf87df5m2jrbqwvminjqiugvqotqoghplbdz55ugnn5pg0spplfffsphqpyiuqadtjhrw7qd1g1wpuppqi8txnwaels4ql6s7or6sivxujen5vcwu1kslbdjpmk5eixqyign2l9uvdw7hhe9fxjsyr69hxnpsh2g2yqifpzzprguu5zrbxqq1n0yclkgowh2eqz5rtbdq8m2rhzqpun7wbnsph68t6bpzg1rny9ejtpztf8hxphf83n7uuj1blumzbermq4uihxmjpnybggdhocdwtjrjpem66dyu6o21drbqnifhsysceeiccrjoreoqaxqz1isujoq1mkx62j3z7fa9n9m1gdmdk3rayknnpj2l7vzaph7lrtfukzinuhslglyuaeufbg0cbqfksmdnia4bs0kikufedaepndhkias7b556ys6dpvxdtpvn1pzp0j8ylepohcwwgz0gwbqnsfluv1prx45abx3bgo8orwlcavcijkgujgiat0ccf3mamuy509z4offcooa35jt6i51k81ov9pjrfsfq3w7rav47ja8mur0gjlagassf8lv5g72xvwyy0fdgwvgddguhl5gihggaubg5jkhxerxvherawko5052pif3ut2spbzz0c7rjorl5xcicvdowdnc4jto4vqn5xtgveesr8unlxavgiqqcmmwkic4hwjzivayxzcndssyychwoctyfnvgu6fuv3uzzu5vsym9fpf6j7dlqxhfe4npwffoadciwimb4hvhvpzndenqywvhm7iiihiufocuem3mz8zb0gv5schzfpwxaelor2u89vkvtwesw0p2triufqyzmdlroxjmphmdzm8aafmdximb8gv99k3vnybfze3rzjj1csjdjlzxksq5qdnia3k81t3gnwgb41dxapz1nu7mf3j6rzu537hqpd6nt5iioemima9vbsaefxlyin7wlv75nmnx5vkmu6o0rnvqboakwwdkhhaezpvp84xo9zr8gy8n9o71lboelt2x7vtp9rdv7zbd73nzvpn9xxhedwdkfhv9oamkbdrfmf1djs4mx3lqcl6uvdkhndkzrtcqhbkbh2hkg0swnqdlqxuzty2x74ztwdqwynqvzi54lh68uwymz7rtifcgkah0zerfwhzrugtqwexgve8vre8q3xngcolxuauwzxpsvemuhwcbcideaoqdeezfflinhocmkddnh5ldtt7vnwonj9ceezb5znz9sddzxcicgbslp4ys4b9oigd2hf1mrwvfnppev418xaxhiw7rmslehoalsiwqywq43ppequadqcx5ctldc9227wh127vpheyx23jxvfgfecnjw7yy7va4htpyt4z9ai1repb4b5nywvluekdbyrnuojjpwlt3cjywsylwtjeidkafwdq25qtzqlo0nsntry2pftgqxjjb99bxltleg2gf0c4dfgoyn5tmipyxvqcvrckxybylre67k5rxh3bjewawyt51cryocwrtxfjewadyas1tt1z8vh2phh3ifroxzzq8d8x9googcexty257sd6vinbrgr8bnuappwv14a7wj3gxvjnffeddbr3hsozdh5x3hla5a6hxb24aaq9j5pwnmiqlshvublpxxspmmhcwe4eb1wwpeciffpw7zxd7vwmfr9mrwpg8jyy4wiiq4vm7rdnff9zt5pzcn0bf8hibrb3xu8f2pwgcvgykfzefkaaaaabjru5erkjggg\"><a href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%82%82%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB%E3%81%8C%E3%81%82%E3%82%8B%E3%81%AE%E3%81%AF%E5%8A%A9%E3%81%8B%E3%82%8Bimg-null-data-iconemoji-blush-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaat80leqvr4aeyvu4assrpgzx8riwib1xzbtm175nvf1rbnlzxgwtvgttxxdru6ujijyrtqnwxcrk6zx0nkpyf2nz8r9jpvanx33uw1nmnqhcxcdif2pauetxyaoess7sw1xtw4liccgsfeytvggmiuap6vlzt2c6ovra82lkpajdacyklsoubaloawejv453gv6s1he1dyivswh4qnu9oezgzgp3nggzrihbvmtsvnggkuzdeypldwoqfrci8oh2inaqasejd4w70j3ilcrxaddley2h7nkmx3b2f5yq5ongjk7cnkmpre09odmtybu00grw0z6mhdmkicqsceftgkclgzenrxlorakww7euyrfqlgxqvf6cwxtklfdmz3zlxj36ggksutiy4poftsan0u0vp4jdgopacl7ifzqfpakswm5nq74qjzxf5k6gylqjlko2gdqj6dat0c1nytkpynxi5gsiayb8acagae8hbselg967ebzun2zqxthmdrpzibzrptyxtsin32lue94czgavkov3skcc9hiyi5ee2fl3wfdknp1asbrufmdatsgpelsvmupkgkedgucoa9aajgeznnaigqawl078btmifd91psbqtxpzs0plcdczwopk9c8uciifapyb2gnk1i0uwzj8li7ou4pmefon0rmlat0upf0mvovpyglwffawecwe4l0d0sahpgxc9j9jvz5lun0ftltdlmsnrxkpfarhf286usn6qb8hqgc65ltgmjj2brzplbw4gpccyfyqzdhpp8exlvgysjacj7djtehn4abxjbzpxawclrpojawftmetbktq6kpvxs3d534xbamrokmtnxzi9om4jtopyixqdt0ia54g5u2zngewqhivv2hoofl0kbblhtvyndjhprwe2bwz2dfdelczcuzvrrypbmdlkx5frmfj8vr59mp5iwhowhz1enjwbgk7aaebppthacaeoirqpzugkcclvwx6f5goae5pjnl8mosnledsdvcwecqmpbuzcym6nwin0ure01goouadvnaxjb4h6fvn9jgaad2l7kejkzjh3wnkvg3qsuqicpdwn34gua9wgn8baqkofxfzmkxr3xw0hph6jsmemklxifkjkhackpb7xxj0qtjylum1cyueqajgxegm9xetunvopqrpjgcbbmub9v4atjdfllefycc1sitbhmhlnr4y4guhbbaiqdiwcp4d1gcjttrrh96tduknub5vkfws7ivnps3sossyocrf00y8rsbho6ygfzqemlxcn7sjmk8a1wd4radkoagqpn4dsc2t7l0nbisdfblmxuxvj462ohkh7drfp6ekqt468xclsnrc01dgm4hqixcnr0nwoetiqkicdar3cj2qcajsgxdqbtwtrymn323ldebg97feebvxibqig3nwqxvwkb6ivlwtowfd5zitbdryxeqqi8edpbczjtq2xuyq5ciahjypw6n7z5vpdd86g63kshhsgah3hdg6kivowuzsojeffcsmpagikx3ekr9ijoipzvslxbxm1exrmt3sjunptymcvg54wa4lqaa5rzgoemtdpqhroyoofrjfsfyhuh7agta8gqktihfghanckwguwaejgfmsccuq2xvyqauz6h2khtbh05r9e8ztcwemapjub6fxozgtlzj03qfijqoweguqzsp0gnifrakzyv7ql7ttltj5qplk9dwowerfpdm7tze2gblqbs0ycxaepbczeiimrwskkxq2asdmtnk5ad6084nv8cxbdcvcabsura4o8viqr0afgjaitgubjwyjfpyfrz2hb8dcxlckj9fzz7bz2ksyzplyespptnzzhn55atgdnitgouors6dx325eoaaxnakswvyyqzbdztbvlw55rwc0alobetoaaamodqsb2f0hwo5exrsglafbbtyqxyywpp7kcr73ewmazlejshdpqg8lxzflkem84ca2xhyxirvsh9ypfnuntvhgznqscumhwkqohxfddigkkxigqnwyoi217luowu0mtiodlvdqqoi4f9wwdtpymouy2e61kiouyfclp5r9xybizmwphh8f8zxdu0paxhxjg5wt7v6jizmzmzmzmz95izmxgzhxmau6uqqyoz7rd3vlnqvou6j8nsp3da4xd8v5emblkjm5avceacagvfqee8od8qcbrxg7tfqmgg6ujixptx7h17xrrctwvkousr8xk2xfsl1ovesh6sojiymalvg8jj0nv4pgddf0a00q6qbf7etpe089q8sm33zmwnhzhxn8xa5pr1t0xwijlzbeoo6aegrpluw1u55sojiqpvhlwhdsja2uhiawukikw6mphb028tefp8xpxevyxlffssrzvrziltn142sr4urg1djai4fxbw13b9tdfr1ov3uxcrlogz9cw90zxr9q7cg7jgixbguty9wqgxclgkeajmmomzzgagcqrzksr3ence9jh1ybi6ogprzn0rtlc6wt8rr7j170nfweunuretztxao62irfrr9nx1p5anconockykaigbhvcnxmia8mo9ew9gvxl2ra0eon8qyyl70naxlkosbtfnapzydv0bhjkjzetjsbrf0lywe3s7g2tnljgs2ju7pztbpyphv0ps5coexuvwrtzztoqjhvrl63ypj012zpzwghnnlqnt88cxm9pd8laqzqiskvljfhiksiey7hyhlu3gtjnosegnenwmsyoirqslwbbnnmdsrvlzorjyzszbl04czz1hts71ww3hcbxx0hlltmen3278ahlhsz2dru7qwag9mv6dx1on9tv02b1hr9tv1nx4fdme0mcs77v4vu7t7vu2twdaicyusnkfnqzphe4hynyea9he3hm3mumboqllpsuybaue2qwtnwr1uve58outm9nizdm3xzfqnfyot825febtxnwvktwwsazkqf66adhw844oq1hb6wb3pox7hhj2qxtcqtt7iijqqbu0ycios9tb1bbhf9bxqrpyibbb0swzkjvm5ndmfdso4cbqoy413vkddtu3ezbtu8bbyxtuumrng75ya91aalzuwrajwl5uzzgxnj5x100hky1siju3yd6dra3rxtzzlwgphpxsmibmqzbomeieldp0tscg8i8zeiassangv2mrrmksxwwvapmefiyclsohii44mvcvihjuywekhicpv93v2a429zqmkdshiwpoctpsah1dw7cwftrj7te66zclv1z78kkjm51s0sydkemfxkex1ktkhkosugafmshhya6na1qya4h7qsrabtlnm5e2oorqmggo3qtqxkmsobcccctou7w9zxclstjfmjtnpdwrjtzxzeiagpoxrwbqtfbszklbmkq567vaddcjksdl1pqstprskevkvpgu01yzaatsxcxoyitazyvohaxboekejwvl4jgu0gsbqgkloibnkbe4iz07oddwzv9zkntmygvzmk26kbdikir5fubb6lnuqme72ocbayvehav2jshrj7bcbb13akxeozmg4qioagghtgaypalmjcdapee5lllnalokxydieswh6xqoqusrc1dj9uqz7vq02aosjgjh6a5r5oduphryjqkr2qtgskrkichagdfmpmgo8vfzggiudueutkuvogzuy9beu55xmqiarspeberzsbc6bbltw2fqbe2jvpt5p72gjksxlzikhtkgisdaakkmhtvgmkhrlmzajjuc9gyskmziookeeoovghgag1ys7vxi09g7olpq5xth7hafe8qa6a1awapdkkwtrx1fsk5kksrcsfsorzxtkohfeiqwmbujbcmxfdcg5qepcsi6wqp3xsnvtmy4lsmbpiialgqcjasnhtvv0qzuund7nsxql2ta7efv9tinpcv9s7n8rlbd25gimjiblmvjuyifagefn3voz87fnwhsn4iatahksgxghcefabqsibfhn49x8daapyo59uxfbkhmarsjc2pxfzko7sqlo0tevnu18a8p5luzozsyono2y92uw2gljle4p2vicutk4frbel3k372tjmrmv4ycyrxjoathwpo3qakwg3szpifxezvozx3b07mokxx1d7cvbs3sxh9fgkldh0lmc3yq69kwudahkjhh5w8erx91yxxli0ztpfagduauwagtbeguziqtpvl9w9enemkfpw7xn7l3i7d0hv9ixwdihmlmjhhkdggztov4kf1xnhvh0cejgd80mehu940ucffmtmihhqehj4t2viroagdzo2zsipzhqyaiu1vfak3vp9tzordadds0fmiayv9osbirheelw3zgfxxf3vt3un64ohwvd8vdlznnfnevozup469h8iqyummsh1gvtnoxms7jnai7tefs6fcyohlvtobf0d4opcp7ktwghm6ursfiroyqnbudjj5tdojjxxnz4rtvliyatsbmzuvopqdtml9c5mvjqzfhi8pfpmbyo554oofzpq07ynkftk43tzitnjeolfhr9c5qftlappwvka7qto1uc3cisli04smlbq3sftzq4p3ecqncdhhrnsyv2quqkulkzpl3xbvsrm9lq4atkkbxzb3jzz19thzq0r15fvknbnivruokcp8vh8asgkstb1ud9zvirzxd9qtpxihd1bgtdvmw9odakwwegf1kv29thpmpkxmxpom3vzdwu03jy8meswh7tndzvd3lenolgn8m5s1id6fmxg59yxuilzfvp2pzbrmn3n5djmx1fxqkkdrhmqa3zjxkzbsfsiu7jj2eelf87df5m2jrbqwvminjqiugvqotqoghplbdz55ugnn5pg0spplfffsphqpyiuqadtjhrw7qd1g1wpuppqi8txnwaels4ql6s7or6sivxujen5vcwu1kslbdjpmk5eixqyign2l9uvdw7hhe9fxjsyr69hxnpsh2g2yqifpzzprguu5zrbxqq1n0yclkgowh2eqz5rtbdq8m2rhzqpun7wbnsph68t6bpzg1rny9ejtpztf8hxphf83n7uuj1blumzbermq4uihxmjpnybggdhocdwtjrjpem66dyu6o21drbqnifhsysceeiccrjoreoqaxqz1isujoq1mkx62j3z7fa9n9m1gdmdk3rayknnpj2l7vzaph7lrtfukzinuhslglyuaeufbg0cbqfksmdnia4bs0kikufedaepndhkias7b556ys6dpvxdtpvn1pzp0j8ylepohcwwgz0gwbqnsfluv1prx45abx3bgo8orwlcavcijkgujgiat0ccf3mamuy509z4offcooa35jt6i51k81ov9pjrfsfq3w7rav47ja8mur0gjlagassf8lv5g72xvwyy0fdgwvgddguhl5gihggaubg5jkhxerxvherawko5052pif3ut2spbzz0c7rjorl5xcicvdowdnc4jto4vqn5xtgveesr8unlxavgiqqcmmwkic4hwjzivayxzcndssyychwoctyfnvgu6fuv3uzzu5vsym9fpf6j7dlqxhfe4npwffoadciwimb4hvhvpzndenqywvhm7iiihiufocuem3mz8zb0gv5schzfpwxaelor2u89vkvtwesw0p2triufqyzmdlroxjmphmdzm8aafmdximb8gv99k3vnybfze3rzjj1csjdjlzxksq5qdnia3k81t3gnwgb41dxapz1nu7mf3j6rzu537hqpd6nt5iioemima9vbsaefxlyin7wlv75nmnx5vkmu6o0rnvqboakwwdkhhaezpvp84xo9zr8gy8n9o71lboelt2x7vtp9rdv7zbd73nzvpn9xxhedwdkfhv9oamkbdrfmf1djs4mx3lqcl6uvdkhndkzrtcqhbkbh2hkg0swnqdlqxuzty2x74ztwdqwynqvzi54lh68uwymz7rtifcgkah0zerfwhzrugtqwexgve8vre8q3xngcolxuauwzxpsvemuhwcbcideaoqdeezfflinhocmkddnh5ldtt7vnwonj9ceezb5znz9sddzxcicgbslp4ys4b9oigd2hf1mrwvfnppev418xaxhiw7rmslehoalsiwqywq43ppequadqcx5ctldc9227wh127vpheyx23jxvfgfecnjw7yy7va4htpyt4z9ai1repb4b5nywvluekdbyrnuojjpwlt3cjywsylwtjeidkafwdq25qtzqlo0nsntry2pftgqxjjb99bxltleg2gf0c4dfgoyn5tmipyxvqcvrckxybylre67k5rxh3bjewawyt51cryocwrtxfjewadyas1tt1z8vh2phh3ifroxzzq8d8x9googcexty257sd6vinbrgr8bnuappwv14a7wj3gxvjnffeddbr3hsozdh5x3hla5a6hxb24aaq9j5pwnmiqlshvublpxxspmmhcwe4eb1wwpeciffpw7zxd7vwmfr9mrwpg8jyy4wiiq4vm7rdnff9zt5pzcn0bf8hibrb3xu8f2pwgcvgykfzefkaaaaabjru5erkjggg\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>テストについてもチュートリアルがあるのは助かる<img null=\"\" data-icon=\"emoji-blush\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAT80lEQVR4AeyVU4AsSRpGzx8RiWIb1xzbtm175nVf1rbNlzXGWtvGtTXXdru6ujIjYrtqNWxcrk6Z+X0nkPyf/2n+z/8R9jPvAnX33Uw1nmNQHCXCdIF2paUeTxYAoeSs7/Sw1XtW4licCgsfeYTVgGM/Iu/aP6VlzT2c6oVrA82lKpAjdaCyKlSoUBAloAWej/V453GV6s1hE1dyiV+SWH4qnu9OeZgZgP+3ngGzriHbVM+tSvNgGKuzdEYpldWoqFrcI8oh2iNaQASej/d4W70J3ilcRXADDley2H7nKmX3B2f5yq5OngJK7CNkMPRe09ODmTyBu00grw0z6mhdMKicQsceFTgkClGZenRxLORakWw7EuYRFQLgXQVf6cWXtkLfdmz3Zlx/J36ggksUtiy4PoftSan0u0Vp4j++dgOPACl7ifzqfPaKsWM5NQ74QJzXF5k6gylqJLKo2GDqJ6DaT0C1nYTkpyNxI5gsiAYB8ACAgAe8hbSEL+/G967EbZuN2zqXtHMDrpziBzRptyXtSin32l+UE94CzGAvkOV3skcc9hiy+i5eE2fl3WFDkNP1ASbrUFmDaTsGPelSVMupkGkED/gUcOA9AAjgeZnnAigQAwL078btmIFd91PSbQtxpZS0pLCdCZWOpK9c8u+c+iifAPyB2gNk1i0UWzJ8Li7ou4PmEFOn0RmLaT0UPf0mVOvpYGLwFfAWEcWe4L0D0SAhpGXc9j9jVz5Lun0Ftl+TdlmSnRXKPfaRHf286uSn6Qb8/hQgc65lTGMjj2brzPlBW4gpCCYfYqZdhpp8ExLVgysjACJ7djT/EhN4ABXjBzpxawclrPoJaW+FtMeTbKtQ6kp/vXs3d534XbaMRoKMtnxzI9+Om4JTopYIXQDT0IA54g5U2zngEwQHIvv2HOOfL0KBBLhtvyNd+jhpRwe2BwZ2DFDelczcuZvrRyPBMDLkx5fRMFj+8Vr59mp5IWhowhz1ENJwBGK7AAEBPPtHACAeoIRqPZUgKCCLvwx6F5GOAE5pJnl8MOsNl/+EDsDvCwECqMPb+UzcYM6NWiN0URE01GOOuAdVnAxJB4h6fvn9JgAAD2L7keJkzJH3wNKvg3QSuQicP/dwn34GuA9wgN8bAQKoFXfzmkxR3xW0hph6jSmEmKlXIfkJkHaCKPB7XXj0QtJyLUM1CyueQajgXEgm9XetuNvOP/QRPjGcBBmu/B9v4aTJDfLLeFycC1siTBHMhLNR4y4GUhBBAIQDiwcP4D1gcJt+Trrh96TdUKnuB5vKfWs7/IVnPs3soSSYocrf00Y8rsBHo6YgFzQEmLxCN7Sjmk8A1wd4RADkoAgQPN4DSC2T7l0Nbis+DfBlmxuXVj462OHKh7dRfp6EkQt468Xclsnrc01DgM4HqIxCNR0NWoEtIQKIcDAR/3cJ2qCajsGXdqBTwTRYMn323LdebG97+FEeBvxIBQig3nwqxVwkb6iVLwToWFD5ZiTbDrYXEQ/+QI/8EDPBCZJtq2XUyQ5cIahJyPW6N7z5VP+dD86g63kShhSgAH3HdG6KivowUzSojEFFCsmPA/GIKx3EkR9iJoipZVSlXbXM1exRMT3sjunpTYMCvg54wA4lQAA5rZGoEMtDpqhROYOOFRJFSFyHuH7AgTA8gQKtIHFgHaNCKwgUWAeJG+FMSCCuq2XVyQAuZ6h2KHTbh05r9E/8ZTcWEMAPJUB/6FxOzGTlZJ03qFijQoWEGUQZsP0gniFRAkZYv7qL7TtLTJ5QpLk9DwOWERFpdm7tZe2Gblqbs0ycXAepB+cZEi+IMrWsKkxq2asdMtnk5A+d60+84Nv8CXBDCVCAbsura4O8Viqr0aFGjAITgU/BJwyJFpyFrz+2hB/8dCXlckJ9fZZ7bz2KSy+ZPLyESPPTnzzHN55aTGdniTgOuOrS6dx325EoAaxnaKSWVYyqZbdZTbVLW55rwc0ALOBeToAAamoDQSb2F0hWo/5eXrSglAFbBtyQxyYwPP7kCr73/eWMazLEjSHdpQG+8LXZFLKeM84cA2XHyxIr/vSH9YPfnUNTVhgzNqScuMH/WkqoHXfddigkKXiGQNWyOi217LUOWU0mTi+odlvdQQoI4F9WwDtPYmoUy2E61kioUYFClP5r9XYBIzmWpHH8F8+ZxdU0PaxhXJg5Wt7V6JiZmZmZmZmZ95iZmXGZhxmau6uqqyoz7Rd3VlnqVOu6j8nSp3Da4XD8v5emBLKjm5AVCEACAgvFQ/ee8od/8qCbrxg7tFqMGg6ujIxPtX7h1+7xRrctWVkOusr8xk2xfSL1OVesh6sOjiyMaLvG8jj0NV/4pgddf/0a00q6QB+F7ETpe089Q8/SM33Zm+WNH/ZHXn8xA5pr1t0xWijLZbEoo6AEgrpLuw1U55sOjIq//PvHLWhdsja2uhiawuKIKw6MPHB028tefp8XPXeVyXlFFss/rzvrzIltN142sr4URg1dJaI4fXbW13b9tdfR1ov3UXcRlOgZ9Cw90zXr9Q7cg7jgIXBguTy9WQgxClGKEAJmM+omZZGagCQrZkSr3ence/9Jh1Ybi6OgprZN0RTLC6wt8rr7J170nFWE+Unuretz+txAO62iRF+rr9nX1p5aNCoNOcKYKAigBHVCNxMIA8Mo9Ew9G/VXL2RA0eON8qYYl70NAxlkoSbtFnapZYDv0BHJKJzeTJsbrf0LYWe3s7g2tnLJgs2ju7pZtbpYPHV0ps5COe+xuV/Wr+tzZtOqjhvrl63YPj012ZpZWghnNlqnT88cXm9pd8lAQzQISkVLJFHIKsIey7hYHLU3GTjnoSEGNeNwmSYoIRQSLWbBNNmdsrvLzoRJyzSZBl04czZ1HTs71WW3H/CBX/x0H/llT/Men3278aHlHsz2drU7QwAg9Mv6dX1On9tv02/b1+hr9TV1nX4fdME0mCS77V4vu7t7vU2TWdAiCYUSNKFnQzPHe/4hYNyEA9HE3HM3mUmboqLLPSUYbAuE2qWtnWr/1Uve58Outm9nizdM3XzFqnf/yOt825febTxNwvkTwWSaZkqf66aDHW844oq1hb6Wb3pox7HHJ2qXTCqT+T7IIJqQBU0yCioS9tb1bBhf9BxQRpYiB/BB0SWzKjvM5ndMFDSo4cBqoy413vKdDtu3eZbTU8bBYxtuumrNG7/5Ya9/1aalZUwrAJWl5UZZGXnj5x100+HKY1sIju3Yd6Dra3rxTzzlwGphpxsMIBMQZBOMeiELDP0TSc+G8i8ZEIASSANgV2mrrMksxWwvapMEFIyClsOHii/44mvcvIhjuywEkhIcP+v93v2A429zQMkdshIwpOCTP/sah1dw7CwFtRJ7te66ZclV/1z78KkJm51s0SYdkEMfxkEX1KTkHkOSUgAFMShHYA6na+1qya4H7+QsRAbTlNM5E2oOrqMGgo3qtqXKmSobCCCCTOu7W9ZXClstjfmJtnPDWrJTZXZEIAGpOXrWbQtFbszkLBmkQ567/VaDDCJkSdl1PQstPRsKEvkvPgu01YZaaTsxCxoyiTaZYVoHAxBoEkEJWvL4jGU0gSBQgkLOiBnKBe4iz07OddWZv9zKNtmYG/VZMk26kBDIkIr5fUbb6lnUqme72OcBaY/veHaV2jsHRJ7bcbb13AkxEoZmg4qIOagghtgAYpALmJCDApEE5LllNalokxYdIeSwH6XQoQuSrC1dJ9uqZ7vQ02AOsjGJh6+a5R5oDUpHRyJqkr2qTGSKRKIChAgDfMpmgO8VFzGgIudUEUTkuVogz+Uy9BEU5+5XMqiArspeberZSBc6BBLtw2fq/be2jVpT5p72gJKSxLzIkhTKGIsDaAkKmhT/VgMKhrLmzajJUC9GySKmZIOOKEEOOVGHGAg1yS7VXi09G7oLPQ5XtH/7hAfe8qa6a1aWapdKkwTRx1FSK5KKsrcsFsORzXTkOHfeiQWMBujBCMXFDcg5QePcSI6wQp3xsnvTMy4LS+MBPIIalGQcjAsNhtVV0qZuUnd7NsxQL2TA7Efv9tinPcv9S7N8RlbD25gIMJiBLmVJUYiFagef+n3VOz87fNwHsn4IaTAhKSgXgHcefABqsIBFHn49X/8DaaPyo59UxFbKHMArSjC2pxFZko7sqLO0tev+nu18A8p5LUzOzsyOno2/y92Uw2gLjLE4p2ViCUtk4frbeL/3K372t/jMr+Mv/4YcYRXjoAThwpo3qAkWg/3szPiFX+EzvoZX3B0+7mOKxX1D7cVBS3sxh9fGKLDH0LMc3Yq/69kwudAhkJhh5w8erX91yxXlI0ZTpfagDUaUwAgtBEGUZIQtPvL9w9EneMkfpW/7Xn7/L3i7d0hv9ixWDiHmLm+JhHkDggZtOv4kf/1X/NHvh0ceJGd80meHu940uCfFMtmihhQEhj4T2VIrOaGdZO2ZsIPZhQyAiu1vfak3vP9t+ZorD+addS0FmiaYv9OSBIrheE+LW3zGFxXf3VT3/UN64oHwvd8VDl+ZnnFnevozuP469h8IqyuMmsH1GVtnOXmS++7jNa/i7teFs6fCyohLVtObf0D4oPcP7ktWghm6uRsfIRoyQnbUdjj5TdOJjXxNz4RtVLiYATsbMzuvOpq/dtml9c5mVjQZFHI8PFpmBYo554OOfZPq07+y+NkfTK/+43TZItNJeOlfhr/9c5qFtLaPpWVKA7QtO1uc3cIsLI04sMLBQ3SFt/zQ4p3eCQ/ncDhhRnSYv2qUQkUlkzpL3XbVs/RM9Lq4ATkkbXzB3/jzZ19THzq0r15fVkNBNIVRUoKcP8vH8ASGKStb1Ud9ZvirZxd/9Qtp+xiHD1BGtDVMW9odakWwEGF1KV29ThPMpkxmXPoM3vZDwu03JY8mESwH7TnDZVD3lEnO+lgN8M5s1Id6Fmxg59/yxUiLzfvP2PzbR/Mn3n5//dJmX1FXQkkDrHMqA3zjXKzBsfSiu7jj2eElf87df5M2jrBQWVmiNJQIUGvqOtqOGHPlbdz55uGNn5PG0+SpPLffFsPhqPYiuqAdTJhRW7qd1G1WPUPPQi8tXNwAEls4/Ql/6s//7or6sivXujeN5VCWU1kslBDjpMk5eIxQYIgn2L9UvdW7hhe9fXjsYR69hxNPsH2G2YQIFpZZPRguu5Zrb+Xqq1N0yclkGowH2EQZ5rtBdQ8+M2RHzqpuN7WbnSPH68t6BpzG1r/ny9EJTp/Ztf8HXpHf83n7uu+J1bLUmzBerMq4UIhxMJp/NyBgGDHocDwtjrjpem66DYU6o21DRBqNiFHSYsceeIccRjoREOQAXQZ1ISuJOq1mkx6+2j3Z7fa9n9m1gdMDk3+rAYkNnPj2l7v/za+PH7lrtfukZinUhSLGlYUAEUFBg0CBQFKSmDNiA4BS0kIkUFEDAEPNDHKIAs7B556ys6dpVXdTPVN1pzp//0j8yLe/PO/HCWwg/z0GwBQnsfLuv1p//R/X45abx+3bGo8oRWlCaVCIJkgUJGIAT0CcF3MAmU+Y509z4OfFCOoA35JT6i51K81OV9Pjrfsfq3/w7r+av47jA8MU/r0GJLaGAssf8lv5g7/2XvWyy0fdGwvGDdGUHl5GihggAubg5jkhXeRXVHERAwKo5052piF3Ut2sPbzZ0c7RJ+or+l5xCicvdOwDNC4+JTo4vqN5xTGveesr8unLxaVGIQqCMMwkIc4HwjzIvAyxzC+nDssyyCHWoCtyFnvgu6FuV3UzzU5VsyM9fPf6j/7d/LqXHfE4npwf/f+oAdCiwiMb4hVHvPzND+eNqyWvHM7IIiHIufOCueM3MZ8zb0gv5sCHZfPwXaELOR2u89vkVtWeSW0P/2TriUfqyz/md/Lr/+oxj+MpHMdZ+M8aAFMDxiMb8g/v99K3vNyBfZE3RZJJ1CSJDJlzxkSQ5qDnIA3K81T3gNWgB+41DXapZ1Nu7MF3J6rZU537Hqp/+D6/nt/5iiOemIM/A/9VBsAEFXlyIn7wlV75nMNx5vKmu6O0RnvQBoAkwWDKHHAEzpvP84xo9zR8Gy8n9o71Lboe/lT2x7vtp9rdv7zbD73Nz+VPn9xxHEdwDKfhv9oAmKBDRfmF1+djs4mX3Lqcl6/UvDKHNdkZRtCQHbKbH2Hk/G0sWnQD+LQXuZty2x74ZtWdqWYnqvZI54lH68u+/W/ymz7rT/IfcGKAH0Ze/rf+WhzruGTQweXG+ve8vRe8+Q3xngcOlxua/UWzXpSVEMuhWcBCiDEaoqDEeZfFlINhOcMkddNh5LdTt7VnwOnj9cE/ezB/5ZN+z9/sdDZxCicGbSL/p/4ys4b9OIgD2Hf1mrWvfnPPev418XaXHIw7RmslehOalSIWQywQ43PPEqUAdQCX5CTldC9227WH127VPHEyX/23j+Xvf/GfecnjW7YY7vA4hTPY+t/4z9Ai1rEPB4b5NYw+/VlueKdbyrNuOJjPWlt3/cJyWSyLwTjEiDKafwdQ25QtZqlO0nSnTrY2PfTgqXjJb99bX/LtL/Eg2gF0c4DfGOYn/5t/mipYxvqcVrCKxYbyLre67K5rXH3bJeWawyt51crYocWRtXFjEWadyaS1tT1z8vh2PHH3ifroXzzq8d+8x9GOOgCexTY257SD6v/INBrgr8BNuAPPwV14a7wj3gXvjnfFe+DdBr3HsOzdh5x3HLa5a6hxB24aaq9j5P/wNMIqLsHVuBlPxxsPMM/HCwe4eb1wWPecIffpw7ZXD7VWMfr/9M/RwPg8jYY4//wIiQ4VM7RDnFf+9zT5PzcN0Bf8hiBRB3X/U8f2PwGcVgYKFzeFKAAAAABJRU5ErkJggg==\"></h3>\n<p>実際の開発だとテストコードは必須なので、プロダクションコードだけでなくGraphQLのモックを使ったテストが紹介されていて非常にありがたいです。</p>\n<h3 id=\"サンプルコードを見ながら読み進めたほうが良いimg-null-data-iconemoji-warning-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaal1eleqvr4ae2abxbu2dkajynxjzoeiqsqncjuemndoe7rb11deugrcpr7o47xhgpidhi7p7u3e7moyzxf4gtvi7vvdnvy9yl33jhdchwneizgg5gzjsra1648cmubuicfsgyfzztz5e77yxohmydfjozgfehxfxjyjyjk0pgnfdrlnabc7lwclypsdvqdgyxfaaupaeqjkcfv8dvj5qgcsd7s25ufuuk773o3ymd4fggsfrr7rgjqykq7tqsckai89xqiwu1f8bwnbb8fxdkiqzlhgzkq74c026uvjxigdft6jgrkvd51p8oqdm1xxsiilokbexq6elzfi7xx4oa8udhvw1zgot9l1gdzapvimx7b5q2dddz1xytdzmlocepnyb3vrnwauw8nua5esxhctv6setw00r5srxdx8puwiacpy3ty6c9vre8q0uq7ftz9fbdibgxbxl96j9rnzor6hrm9eiizjvzqr9cffiqfyzqfoi1ffbon87kio6utjubws6aqymlgvghk21e0nigwmrbuqza2tvxgxnjgq5s802puzyh6riwqv3mqgkegmmz4er23xskaflqhrt6eqbit7r1qi31cwn48hmq13gvjadhrlosgxytpw7gilyqe2ky1l32bvzc2gweac3gxsjohq6myiquclityisq2cpxnkb5bh7pqjzxdnrewups9mo9hmfw63xmmprybhrxivlbnba7wiv4udtqpietd3ocz1otskz4katjnngveaijkqfa7xlkorp0bz2cfnmon6jqzvffhonzdbjm15qeubxibg3qhglaa2pmdidkuqdvxjy5uwcoov92ighjtrs8xjubmgqwu9pp3vrz8w77lvunt4bqlknifc3juwcypweuz4ap1vndoebb6b9gc5te9qmomow2gesdvgkyi3jsbqqbqfrr467fr69qdlcnbghjuahjk5cjzcsoqx2uzyqfm9waffb7ekuakx4rykn45pcm5aqdjqbff1b4oyieiufgc0vddsr6rqyniouqol5eyg5lgghlqxxijrahltonn4kxogonkkihatzxqiyat6epbix33bnrevmwpxibhysnjdidcizb4zktkbpzdnwwgfyl7c1wdb1xxo4bqog8g15s3lsddlxndjb4qifkprbwuaggslbackb4greedqku0ahydck6obsgycmwsvlvgpkekmhqszi1fooowzgfob4vplcugwyccqtrjdl3dvggmxq0ngb6qyvtjgexrrgqe8jloyn3fqjyppjmywzwlxl9px121zmpgzzte9rwji6aicstg2izvssmbsklbr5elzgz072woubqk1zfzx4rze2uxfeqxye2qfs8flxwidtlk2cfo58vpdytyhofqhjmgcqgzgsfasxbmgucvc4gtapraxqf4yddhdigdvsdah39ype81eyefpfq6ns9ms3ktfk4xo3lf4caggxuhrzb0shy6c7zgy8sdivbanfflcwporgaavua34i5qilb4zdly7odol8vo9owycworadpvhg2qnxy3thfzwmebmzqp5wyd8bie9flm2g7nfof3c2ogilak424cdxdbon323llyhlj3vd2xnuh6v4h0qrd1c0ddtj4bqajegivzrue2uhzzv7m3q5e4cmlhrziqlsfjw6vrpax8opruibpaqyvyddy2x0fwnjobqqc8qw40qpr0qo5hzqtvldwjdo6dsleghypw87uq5byfzxaww3bay34ixfi6mod4d6rhwsvzeh97mra7vfwogbm26mf7s36l2tddyt8zsyrpbhyakbf7f1vzpmsouawnownjad9kd4myqzrrcrogckknab7prg9dt2wqg2q8qzvtkxplov5ftvehyt5ocr2vzroonud7px91emx8w6e4ugsuyhik70qxlsizpvdzle21zdg4mgrgcy8omzxcybetl0v9m3mkvnnxxcviede7srzqfqikqpt4dggbxsdeum9i6sgjdzy7wvtguew2afkwhjtkrlevmy2evkl5qibi6kwdtjnxhclimwioxj5ttk4r0gqit3adoefc90ppdck4ar2z9pav5waunqyxfc1av19pmjpn9iphu1eb2p46dvrwlmz4w6g88ghnkdzapqmdgdzlrqwkdovjp2rmxt1rrvpppiisojjoso13xzkazsrfvchiehtpuwigwt2yhcsdcopnyji3q1gob9as93htsdhtc34mod9kjfvot4qyh5vtv92hjoaic1iafe3mnvvqghgpkij1rhblsmd6wixq2kqoeul9os9w0aigo1ob1we8ooyyecubth73iogz7svdvarr6keecpbddjrb8dl5jefr5yxifslcodvmspt7pb1xbuyd7lc5wkpct89a8sidnvc9qjpfpv8ow5njbdxgupkj2vvu9flr7tafhtzlxmskydvs9rmdmxadxgitaigfitjlq2eckmlzcrmc6cuwyt9nwtr8kf1tvqxojdudd75pejrkaato0f5m3iclqwrjsbjlrc7q12mcvulcczdgrjp0i3vjqvvqyeqdedb5iewt4hiycmerbxxaqxjuzzayhl0ideredtdb31rxmpsegnqdxjvduk1y6zwkkg4s0rnncurkyx9dgps8alqh3o56ps6l7aj3zajzztob3lhhbb73twcifme7qt7l8c5qnyb8tbeszba0eeswujlfn25jw5aqpprb1yyc2390injd7nzryd1sx6ifftmkrgqdygjbwyfunbsdq5asg5axgc2uhvsnmnfxb7eorwjnk2wcpde5vvyo5oejwu87t9pszoxhvgkbn7o2bsw8g9scudmuoquucriqhxhhufi7kr0baeofdkjeisfn41xwfxrf3k8b5ysvmpgsraslzbd5l2jsz3rjydtpazgera16lbizgm3fibubmb5gwxkuzponilndqjonc0vulemt9nksinyfv6wmvaidjamsjhnnhtl5ezdddhvpcsbxvw1iwxrvlasaqulxhvswgczchfhdmky2yjs5wepnxhqwrlezynwbcu3u6xcqvsz0wyy91ta9j4plcx1ver6leryajy2grwdlshfmuosw5hftevzmp0izvlmpmvnn6nabb97sxty3sjwfvrs3yazl1erveziu7u54c8b2np3muhrqxpkl5ljkbn4hxsdsxqcffsw1nipzlmd7avtdh9jyfw2lfpuekxrdniwupqs67edxbpblfe61nolb0qcr8jozqb8n1ejxotzo9v1zxo9shirkx93wxzur6vfmstzs2amgkkauiopmb0r44gtbmcbpcxjh6slo6nmzz3dgamel7rp5n1uggidsmmimgwy367v2crx8tblgkyul30wka1mtudzr35xwbulzvtrdzz9y8z0vqakezg0qynyphmwdqvntuagfkphffr6oes6tbigjzt4mvyeh5snbm3yhjsooo0zg0u3e7b2wjwrppv3aalzmimpbi9mt8r0bnzqwremvdrl40yi9oyfekuekjhejtb0tke2hwxek8awluzrihtz8ts8v4wqayfpndxunodblz9zmd8ulc9bswgh23pyfltzgqp0kzihwcidegm2lvjxgfljvx42oyvfflbx8ris9kcnzgvteeqdzqbznpkqo4hdv0oz8qyg4v8dnjdbyclkewqr8j3yb7id2cnsatvwn9zzhzzdvp5picoioh8lhhnrifzkyeqtcjryhpka7kxjbcbe34ncucerobwbf141mytog3mhajq6bxzizgo2nxg2er9zyxzwhdbvbstsgnp5aie9uhyqq6c8jbryrbndpgtxdf57jup8jmvpeglejdkjhnoydouyztcuoq79d2mhuappwhqaaaabjru5erkjggg\"><a href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%A6%8B%E3%81%AA%E3%81%8C%E3%82%89%E8%AA%AD%E3%81%BF%E9%80%B2%E3%82%81%E3%81%9F%E3%81%BB%E3%81%86%E3%81%8C%E8%89%AF%E3%81%84img-null-data-iconemoji-warning-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaal1eleqvr4ae2abxbu2dkajynxjzoeiqsqncjuemndoe7rb11deugrcpr7o47xhgpidhi7p7u3e7moyzxf4gtvi7vvdnvy9yl33jhdchwneizgg5gzjsra1648cmubuicfsgyfzztz5e77yxohmydfjozgfehxfxjyjyjk0pgnfdrlnabc7lwclypsdvqdgyxfaaupaeqjkcfv8dvj5qgcsd7s25ufuuk773o3ymd4fggsfrr7rgjqykq7tqsckai89xqiwu1f8bwnbb8fxdkiqzlhgzkq74c026uvjxigdft6jgrkvd51p8oqdm1xxsiilokbexq6elzfi7xx4oa8udhvw1zgot9l1gdzapvimx7b5q2dddz1xytdzmlocepnyb3vrnwauw8nua5esxhctv6setw00r5srxdx8puwiacpy3ty6c9vre8q0uq7ftz9fbdibgxbxl96j9rnzor6hrm9eiizjvzqr9cffiqfyzqfoi1ffbon87kio6utjubws6aqymlgvghk21e0nigwmrbuqza2tvxgxnjgq5s802puzyh6riwqv3mqgkegmmz4er23xskaflqhrt6eqbit7r1qi31cwn48hmq13gvjadhrlosgxytpw7gilyqe2ky1l32bvzc2gweac3gxsjohq6myiquclityisq2cpxnkb5bh7pqjzxdnrewups9mo9hmfw63xmmprybhrxivlbnba7wiv4udtqpietd3ocz1otskz4katjnngveaijkqfa7xlkorp0bz2cfnmon6jqzvffhonzdbjm15qeubxibg3qhglaa2pmdidkuqdvxjy5uwcoov92ighjtrs8xjubmgqwu9pp3vrz8w77lvunt4bqlknifc3juwcypweuz4ap1vndoebb6b9gc5te9qmomow2gesdvgkyi3jsbqqbqfrr467fr69qdlcnbghjuahjk5cjzcsoqx2uzyqfm9waffb7ekuakx4rykn45pcm5aqdjqbff1b4oyieiufgc0vddsr6rqyniouqol5eyg5lgghlqxxijrahltonn4kxogonkkihatzxqiyat6epbix33bnrevmwpxibhysnjdidcizb4zktkbpzdnwwgfyl7c1wdb1xxo4bqog8g15s3lsddlxndjb4qifkprbwuaggslbackb4greedqku0ahydck6obsgycmwsvlvgpkekmhqszi1fooowzgfob4vplcugwyccqtrjdl3dvggmxq0ngb6qyvtjgexrrgqe8jloyn3fqjyppjmywzwlxl9px121zmpgzzte9rwji6aicstg2izvssmbsklbr5elzgz072woubqk1zfzx4rze2uxfeqxye2qfs8flxwidtlk2cfo58vpdytyhofqhjmgcqgzgsfasxbmgucvc4gtapraxqf4yddhdigdvsdah39ype81eyefpfq6ns9ms3ktfk4xo3lf4caggxuhrzb0shy6c7zgy8sdivbanfflcwporgaavua34i5qilb4zdly7odol8vo9owycworadpvhg2qnxy3thfzwmebmzqp5wyd8bie9flm2g7nfof3c2ogilak424cdxdbon323llyhlj3vd2xnuh6v4h0qrd1c0ddtj4bqajegivzrue2uhzzv7m3q5e4cmlhrziqlsfjw6vrpax8opruibpaqyvyddy2x0fwnjobqqc8qw40qpr0qo5hzqtvldwjdo6dsleghypw87uq5byfzxaww3bay34ixfi6mod4d6rhwsvzeh97mra7vfwogbm26mf7s36l2tddyt8zsyrpbhyakbf7f1vzpmsouawnownjad9kd4myqzrrcrogckknab7prg9dt2wqg2q8qzvtkxplov5ftvehyt5ocr2vzroonud7px91emx8w6e4ugsuyhik70qxlsizpvdzle21zdg4mgrgcy8omzxcybetl0v9m3mkvnnxxcviede7srzqfqikqpt4dggbxsdeum9i6sgjdzy7wvtguew2afkwhjtkrlevmy2evkl5qibi6kwdtjnxhclimwioxj5ttk4r0gqit3adoefc90ppdck4ar2z9pav5waunqyxfc1av19pmjpn9iphu1eb2p46dvrwlmz4w6g88ghnkdzapqmdgdzlrqwkdovjp2rmxt1rrvpppiisojjoso13xzkazsrfvchiehtpuwigwt2yhcsdcopnyji3q1gob9as93htsdhtc34mod9kjfvot4qyh5vtv92hjoaic1iafe3mnvvqghgpkij1rhblsmd6wixq2kqoeul9os9w0aigo1ob1we8ooyyecubth73iogz7svdvarr6keecpbddjrb8dl5jefr5yxifslcodvmspt7pb1xbuyd7lc5wkpct89a8sidnvc9qjpfpv8ow5njbdxgupkj2vvu9flr7tafhtzlxmskydvs9rmdmxadxgitaigfitjlq2eckmlzcrmc6cuwyt9nwtr8kf1tvqxojdudd75pejrkaato0f5m3iclqwrjsbjlrc7q12mcvulcczdgrjp0i3vjqvvqyeqdedb5iewt4hiycmerbxxaqxjuzzayhl0ideredtdb31rxmpsegnqdxjvduk1y6zwkkg4s0rnncurkyx9dgps8alqh3o56ps6l7aj3zajzztob3lhhbb73twcifme7qt7l8c5qnyb8tbeszba0eeswujlfn25jw5aqpprb1yyc2390injd7nzryd1sx6ifftmkrgqdygjbwyfunbsdq5asg5axgc2uhvsnmnfxb7eorwjnk2wcpde5vvyo5oejwu87t9pszoxhvgkbn7o2bsw8g9scudmuoquucriqhxhhufi7kr0baeofdkjeisfn41xwfxrf3k8b5ysvmpgsraslzbd5l2jsz3rjydtpazgera16lbizgm3fibubmb5gwxkuzponilndqjonc0vulemt9nksinyfv6wmvaidjamsjhnnhtl5ezdddhvpcsbxvw1iwxrvlasaqulxhvswgczchfhdmky2yjs5wepnxhqwrlezynwbcu3u6xcqvsz0wyy91ta9j4plcx1ver6leryajy2grwdlshfmuosw5hftevzmp0izvlmpmvnn6nabb97sxty3sjwfvrs3yazl1erveziu7u54c8b2np3muhrqxpkl5ljkbn4hxsdsxqcffsw1nipzlmd7avtdh9jyfw2lfpuekxrdniwupqs67edxbpblfe61nolb0qcr8jozqb8n1ejxotzo9v1zxo9shirkx93wxzur6vfmstzs2amgkkauiopmb0r44gtbmcbpcxjh6slo6nmzz3dgamel7rp5n1uggidsmmimgwy367v2crx8tblgkyul30wka1mtudzr35xwbulzvtrdzz9y8z0vqakezg0qynyphmwdqvntuagfkphffr6oes6tbigjzt4mvyeh5snbm3yhjsooo0zg0u3e7b2wjwrppv3aalzmimpbi9mt8r0bnzqwremvdrl40yi9oyfekuekjhejtb0tke2hwxek8awluzrihtz8ts8v4wqayfpndxunodblz9zmd8ulc9bswgh23pyfltzgqp0kzihwcidegm2lvjxgfljvx42oyvfflbx8ris9kcnzgvteeqdzqbznpkqo4hdv0oz8qyg4v8dnjdbyclkewqr8j3yb7id2cnsatvwn9zzhzzdvp5picoioh8lhhnrifzkyeqtcjryhpka7kxjbcbe34ncucerobwbf141mytog3mhajq6bxzizgo2nxg2er9zyxzwhdbvbstsgnp5aie9uhyqq6c8jbryrbndpgtxdf57jup8jmvpeglejdkjhnoydouyztcuoq79d2mhuappwhqaaaabjru5erkjggg\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>サンプルコードを見ながら読み進めたほうが良い<img null=\"\" data-icon=\"emoji-warning\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAL1ElEQVR4Ae2aBXBU2dKAJyNxJZOEiQsQnCjuEMNd/oe7rb11DeuGrCPr7o47xHGPIDHi7p7+u3e7mOyZXF4GTVI7VV+dnvY+9yL33JHd/c+/HwNEiZgg5gzJSra1648cMUbUiCfSgyFZzTZ5e77yxohmYDfjoZGfeH+XfXjYJYJk0pGNfdrlnaBC7LwclYPSdvqdgYxFAAUPAeQjKCfv8Dvj5qgcSD7s2+5ufUuk+773O/3YmD4fGgsfRR7RgjqykQ/7tqs/CkaI89xQiwU1F8bWNBb8FxDkIQZlhGzkQ74c026uvjXiG/dFt6jGrKV/D51/P8OQDm1xX/SIIl+OkbeXq++6eLzFI7Xx4+oa8u+Dhvw1zGot9L1gDZAP+VIMx7b5q2+DDDz1XY/TDZmLoCEPNyB3VRNWauW8NUA+5EsxHCtv6//seTw00/r5+sRxDX8PuwIacpY3Ty6C9vrE8Q0UQ7Ft+Z9FBdIBGXbxl96J9RnzoR6HrM9eiizjVZQR9CFfiqFYzqFoi1ffBOn87KIO6+uTJuBwS6A+qymLGVGHK21E0nigWMrBuQza2tVXGxnJgq5s802puzYH6rIWQV3mQgkEG/mmz4Er23xSKAflQhRt6eqbIt7r1qi31CWN48HmQ13GvJaD/hRLOSgXYtpW7gIlYqe2kY1L3+2bVZc2GweaC3gXSJOhq6MYiqUclItyIsq2cPXNkB5bH7P/qjZxDNRe+w/Ups9m/o9hmfW63xmMpRybHrX/iv+LbNba7wIV4uDtqpietd+3oCZ1OtSkz4KatJnNgVeaIJkQ/fA7xlKOrP0+BZ2cFNMoN6JqzVffHOnzdbjm15qEUBxiBg3QhGlAa2PmDIDKuQDVxJy/5UwcOoV92I+gHJTrS8xJubmGQWu9+pp+3VRz8w77lVUnT4bqlKnIFC3JUwCypwEUz4aP1vnDoEBb6B9gC5te9QMomoW2GeSDvgKYi3JSbqqBqFrr467fr69qdlcnBGHjuAHJk5CJzCSoQx2UzYQFM9wAff/B7EkuAKX4RyKN45pCm5AQDJQbff1b4+OyIeIUFGC0vDDSr6rqyniouqoL5EyG5LggHlqXxIjRAHlToNn4KxOgONK/KihAtZxqIYat6epbIX33bNREVMWPxIbHYsNjdIDciZB4ZKTkBpzdNwwgfyL7C1wdB1Xxo4BqoG8g15S3lsddlxnDjB4qifKprbwUAggSLBACkB4GReeDQKU0aHYDck6OBsgYC//MwSvLVGPKEKMHqSZi1FoOOwZGfOB4vPLCUGwyCCqTRjdL3dVggMxQ0Ngb6QyvtjGExrRgqE8Jloyn3FQjYpPjMYwZwLXl9/px121ZmPGzZTE+9RWJI6AicSTg2izVSSMBSkLBr5elzgZ072wOUBQK1ZfZX4RzE2UxfeqXYE2qfS8flxWIDTLk2CfO58vPDYTyhOFQHj+MGcqgzGsFAsXBMGuCvc4GTApRAxQF4YDDhDiGdVSDah39yPE81eYeFPfq6ns9Ms3ktfK4Xo3lF4cAggxuHrZB0ShY+6C7zgY8sdIVbaNFf+lcWPORGaavUA/34i5QILb4ZDLy7OdOl8vO9oWyCwORAdpVhG2QNxy+3thFZwM+ebMzQP5wYD8BIe9FlM/2g7NfOF3C2OGILaK424cdXdbON323LLYHlJ3vD2Xn+uH6v4H0QRD1c0+dDTj4bQ+AjEGivzRUE2uHzzV7m3q5e4cm/LhrZiQLSfjW6VrpaX8oPRuIBPAqyvyddY2X+0FWnJ/OBqQc8QW40q+pr0QO5hzqTvlDwjdO6dSLeGhypw87uq5bYfZxaWw3bAY34Ixfi6mOD4D6RH+wsVZeH97MRA7VFwOgBm26Mf7S36l2TDdYt8zsY+rpbhyaKBF7F1vZpMs/OuaWnOwNJad9kD4MyQzrRCrO+gCk+kNAb7PrG9DT2wQg2Q8qzvtKxPloV5FTveHyT5ocR2vZROoNUd7px91emx8w/6E4ugsUY/Hik70QXlsIZPvDzLE21zdg4mgrgCy8omzXC+yBetl0v9m3mKvnnXxcViEde7srZqf+qikqPt4dG+gBxSdEUM9I6SGjDzy7Wvt/gUeW2AFk+WhjTkrlEvMy2EvKL5qibi6KWdTjnXhcliMWiO+Xj5ttK4r0gqIT3aDoeFc90PpDck/4ar2z9p/AV5wAUnqyXf+c1Av19Pmjpn9iPh/u1eB2P+46DvRWLMz4w6G88GhnKDzapQmdGdZLrQwkdoVjP2r/MxT1rRvppPIISOjjOsO13xzKAzsrFvChieHtPuwI+GWt2YHCSDcoPNYJi3q1gOb9as93htSDHtc34Mo+D9KJfvoT4QY/h5vtv92HJoaIc1iAfE3mNvvqghgPKIj1RHBlSMd6WiXQ2kqOeUL9OS9w0aigo1oB1We8oOyYECuBth73IOgz/7SvDvaRr6KeEcPbddjRb8dL5jEFR5yxiFsLcOdVmspT7pB1xBUyD7lC5WkPCT89a8SiDnvc9qJpFPV8Ow5NjBDXGUPkj2VvU9flR7tAfhTzl+xMsKyDVs9+rMdmXaDxgitAigfiTjLq2EckmlZCrMc6cUWyt9nWTR8kf1TvQxOJd/uDD75pejr/kAaTO0F+5M3iCLQWRjsBJLrC7q12MCvUlCCZdGRjP0I3VjqvVqYeqdeDb5iewt4HiYcmer/bXxaqXJuzzaYhL0IDeREdtdB31rXMpsEGNQDxjvDuk1Y6zwKkg4s0RNNcUrKYX9dGPS8aLQ/H3O56PS6L7/aj3zaJzztoB3lHHBB73TWCIFmE7QT7l8c5QNYB8TBESzba0EeswUjlFn25J+w5aqPpRb1+YyC+2390inJd7nZryD1sx6iFFTmkRgQdygjbWYfUnbSDQ5/aSG5AxGc2UHvSnmNFxB7E+oRWJnK2WcPDE5VvYO5Oejwu87t9pSzoxHvGKbn7O2BSW8g9SCuDMuoQUUcrI/qhXHHUFi7+Kr0BaEOfDkJeISfn41XwFXrF3k+8b5ysVMpGSR+aSLzbD5+l2JSz3RJyDtpAzgERa16lbIzgm3fIBuBMB5gwXKUzPOnIlndQjONc0vUlemT9NksInyF/v6W/MVAidjamsjHnNhtl5ezDDdhvpcsBXvW1IWXRVlASaQULxhvS+wGCZChFHdmkY2+yJs5wepNxhqWRLEzyNwbCu/3u6xcqvsz+0wyy91tA9j4pLCX1vEr6lERYAJy2grwDlshfMuosW5hftEvZmP0IzvLmPMVnN/6NAb/b97SXTY3/SJWfvRs3YA+zl1eRveZIU7u54C8B2nP3mUHRQXPkL5ljKB/n4HxSdSXqCfFsw1niPzLMd7aVTdH9jYFw2LFpueKXrD+NIWuPqS67edXBpBlfE61NOlb0QcR8JozQB8N1eJXOTzO9v1zxo9ShiRKx93WXzUr6VFmStZs2AMGkKAuIOpMb++0R4+4GtBmCbpcxJH6sLO6NMzZ3dGaMeL+7RP5N1u+GGIDsMmIMGWY367V2cRX8tbLgKyUL30Wka1MtUdZ+R35XwbuLZV/TrDzz9Y8Z0v/Qa/KEzG0qyNyphMwdqv/NTuaGfkphFfR6oeS6+tbiGJzt4MvyeH5SNBM3YHjsOoO0zG0U3E7B2WJwRppV3AALZMimpbI9mT8r0BnZqWREmVdRL40YI9oYfeKUEkjHEjTb+0tke2hWxEK8AwLUZrIHtz8tS8v4wQAyfpNDxu/NodBLz9z+mD8ULc9Bs/wgh23PyFLtzGQP0KziHWCIdEGm2lvJXg+fLjvx42OyvF+flBX/8ris9KcnZGVtEeqdZqBZnpkqO4HDv0oz8qyG4v8DnJDByCLkeWQr8j3yB7ID2cnsatVwn9zzHzzDVp5pIc/oiOh8LHhnRiFzkYeQtcjryHpkA7KxjbCBe34NCUceRObwbF141mY/tog3MhAJQ6bxZizgO2NxG2ER9zyXZwhDBvBstsgNP5aIE+9UHyQQ6c8JBrYRBnDPgTxDF57JUp8jMVPEGlEjDkjHNoYDouYZTCUOQ/79/D/2mhuappW/hQAAAABJRU5ErkJggg==\"></h3>\n<p>本書ではチュートリアル形式でサンプルアプリを作っていきますが、記載しているソースコードのファイルパスは書かれていないことが多いので、そこらへんは<a href=\"https://github.com/takanorip/nuxt-graphql-sample\">サンプルコード</a>が理解の助けになります。あと必要なライブラリのyarn addも「明示してないけど適宜やってね」という感じでした。</p>\n<h3 id=\"githubのトークンはハードコードしないほうが良いのでは？img-null-data-iconemoji-warning-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaal1eleqvr4ae2abxbu2dkajynxjzoeiqsqncjuemndoe7rb11deugrcpr7o47xhgpidhi7p7u3e7moyzxf4gtvi7vvdnvy9yl33jhdchwneizgg5gzjsra1648cmubuicfsgyfzztz5e77yxohmydfjozgfehxfxjyjyjk0pgnfdrlnabc7lwclypsdvqdgyxfaaupaeqjkcfv8dvj5qgcsd7s25ufuuk773o3ymd4fggsfrr7rgjqykq7tqsckai89xqiwu1f8bwnbb8fxdkiqzlhgzkq74c026uvjxigdft6jgrkvd51p8oqdm1xxsiilokbexq6elzfi7xx4oa8udhvw1zgot9l1gdzapvimx7b5q2dddz1xytdzmlocepnyb3vrnwauw8nua5esxhctv6setw00r5srxdx8puwiacpy3ty6c9vre8q0uq7ftz9fbdibgxbxl96j9rnzor6hrm9eiizjvzqr9cffiqfyzqfoi1ffbon87kio6utjubws6aqymlgvghk21e0nigwmrbuqza2tvxgxnjgq5s802puzyh6riwqv3mqgkegmmz4er23xskaflqhrt6eqbit7r1qi31cwn48hmq13gvjadhrlosgxytpw7gilyqe2ky1l32bvzc2gweac3gxsjohq6myiquclityisq2cpxnkb5bh7pqjzxdnrewups9mo9hmfw63xmmprybhrxivlbnba7wiv4udtqpietd3ocz1otskz4katjnngveaijkqfa7xlkorp0bz2cfnmon6jqzvffhonzdbjm15qeubxibg3qhglaa2pmdidkuqdvxjy5uwcoov92ighjtrs8xjubmgqwu9pp3vrz8w77lvunt4bqlknifc3juwcypweuz4ap1vndoebb6b9gc5te9qmomow2gesdvgkyi3jsbqqbqfrr467fr69qdlcnbghjuahjk5cjzcsoqx2uzyqfm9waffb7ekuakx4rykn45pcm5aqdjqbff1b4oyieiufgc0vddsr6rqyniouqol5eyg5lgghlqxxijrahltonn4kxogonkkihatzxqiyat6epbix33bnrevmwpxibhysnjdidcizb4zktkbpzdnwwgfyl7c1wdb1xxo4bqog8g15s3lsddlxndjb4qifkprbwuaggslbackb4greedqku0ahydck6obsgycmwsvlvgpkekmhqszi1fooowzgfob4vplcugwyccqtrjdl3dvggmxq0ngb6qyvtjgexrrgqe8jloyn3fqjyppjmywzwlxl9px121zmpgzzte9rwji6aicstg2izvssmbsklbr5elzgz072woubqk1zfzx4rze2uxfeqxye2qfs8flxwidtlk2cfo58vpdytyhofqhjmgcqgzgsfasxbmgucvc4gtapraxqf4yddhdigdvsdah39ype81eyefpfq6ns9ms3ktfk4xo3lf4caggxuhrzb0shy6c7zgy8sdivbanfflcwporgaavua34i5qilb4zdly7odol8vo9owycworadpvhg2qnxy3thfzwmebmzqp5wyd8bie9flm2g7nfof3c2ogilak424cdxdbon323llyhlj3vd2xnuh6v4h0qrd1c0ddtj4bqajegivzrue2uhzzv7m3q5e4cmlhrziqlsfjw6vrpax8opruibpaqyvyddy2x0fwnjobqqc8qw40qpr0qo5hzqtvldwjdo6dsleghypw87uq5byfzxaww3bay34ixfi6mod4d6rhwsvzeh97mra7vfwogbm26mf7s36l2tddyt8zsyrpbhyakbf7f1vzpmsouawnownjad9kd4myqzrrcrogckknab7prg9dt2wqg2q8qzvtkxplov5ftvehyt5ocr2vzroonud7px91emx8w6e4ugsuyhik70qxlsizpvdzle21zdg4mgrgcy8omzxcybetl0v9m3mkvnnxxcviede7srzqfqikqpt4dggbxsdeum9i6sgjdzy7wvtguew2afkwhjtkrlevmy2evkl5qibi6kwdtjnxhclimwioxj5ttk4r0gqit3adoefc90ppdck4ar2z9pav5waunqyxfc1av19pmjpn9iphu1eb2p46dvrwlmz4w6g88ghnkdzapqmdgdzlrqwkdovjp2rmxt1rrvpppiisojjoso13xzkazsrfvchiehtpuwigwt2yhcsdcopnyji3q1gob9as93htsdhtc34mod9kjfvot4qyh5vtv92hjoaic1iafe3mnvvqghgpkij1rhblsmd6wixq2kqoeul9os9w0aigo1ob1we8ooyyecubth73iogz7svdvarr6keecpbddjrb8dl5jefr5yxifslcodvmspt7pb1xbuyd7lc5wkpct89a8sidnvc9qjpfpv8ow5njbdxgupkj2vvu9flr7tafhtzlxmskydvs9rmdmxadxgitaigfitjlq2eckmlzcrmc6cuwyt9nwtr8kf1tvqxojdudd75pejrkaato0f5m3iclqwrjsbjlrc7q12mcvulcczdgrjp0i3vjqvvqyeqdedb5iewt4hiycmerbxxaqxjuzzayhl0ideredtdb31rxmpsegnqdxjvduk1y6zwkkg4s0rnncurkyx9dgps8alqh3o56ps6l7aj3zajzztob3lhhbb73twcifme7qt7l8c5qnyb8tbeszba0eeswujlfn25jw5aqpprb1yyc2390injd7nzryd1sx6ifftmkrgqdygjbwyfunbsdq5asg5axgc2uhvsnmnfxb7eorwjnk2wcpde5vvyo5oejwu87t9pszoxhvgkbn7o2bsw8g9scudmuoquucriqhxhhufi7kr0baeofdkjeisfn41xwfxrf3k8b5ysvmpgsraslzbd5l2jsz3rjydtpazgera16lbizgm3fibubmb5gwxkuzponilndqjonc0vulemt9nksinyfv6wmvaidjamsjhnnhtl5ezdddhvpcsbxvw1iwxrvlasaqulxhvswgczchfhdmky2yjs5wepnxhqwrlezynwbcu3u6xcqvsz0wyy91ta9j4plcx1ver6leryajy2grwdlshfmuosw5hftevzmp0izvlmpmvnn6nabb97sxty3sjwfvrs3yazl1erveziu7u54c8b2np3muhrqxpkl5ljkbn4hxsdsxqcffsw1nipzlmd7avtdh9jyfw2lfpuekxrdniwupqs67edxbpblfe61nolb0qcr8jozqb8n1ejxotzo9v1zxo9shirkx93wxzur6vfmstzs2amgkkauiopmb0r44gtbmcbpcxjh6slo6nmzz3dgamel7rp5n1uggidsmmimgwy367v2crx8tblgkyul30wka1mtudzr35xwbulzvtrdzz9y8z0vqakezg0qynyphmwdqvntuagfkphffr6oes6tbigjzt4mvyeh5snbm3yhjsooo0zg0u3e7b2wjwrppv3aalzmimpbi9mt8r0bnzqwremvdrl40yi9oyfekuekjhejtb0tke2hwxek8awluzrihtz8ts8v4wqayfpndxunodblz9zmd8ulc9bswgh23pyfltzgqp0kzihwcidegm2lvjxgfljvx42oyvfflbx8ris9kcnzgvteeqdzqbznpkqo4hdv0oz8qyg4v8dnjdbyclkewqr8j3yb7id2cnsatvwn9zzhzzdvp5picoioh8lhhnrifzkyeqtcjryhpka7kxjbcbe34ncucerobwbf141mytog3mhajq6bxzizgo2nxg2er9zyxzwhdbvbstsgnp5aie9uhyqq6c8jbryrbndpgtxdf57jup8jmvpeglejdkjhnoydouyztcuoq79d2mhuappwhqaaaabjru5erkjggg\"><a href=\"#github%E3%81%AE%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E3%81%AF%E3%83%8F%E3%83%BC%E3%83%89%E3%82%B3%E3%83%BC%E3%83%89%E3%81%97%E3%81%AA%E3%81%84%E3%81%BB%E3%81%86%E3%81%8C%E8%89%AF%E3%81%84%E3%81%AE%E3%81%A7%E3%81%AF%EF%BC%9Fimg-null-data-iconemoji-warning-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaal1eleqvr4ae2abxbu2dkajynxjzoeiqsqncjuemndoe7rb11deugrcpr7o47xhgpidhi7p7u3e7moyzxf4gtvi7vvdnvy9yl33jhdchwneizgg5gzjsra1648cmubuicfsgyfzztz5e77yxohmydfjozgfehxfxjyjyjk0pgnfdrlnabc7lwclypsdvqdgyxfaaupaeqjkcfv8dvj5qgcsd7s25ufuuk773o3ymd4fggsfrr7rgjqykq7tqsckai89xqiwu1f8bwnbb8fxdkiqzlhgzkq74c026uvjxigdft6jgrkvd51p8oqdm1xxsiilokbexq6elzfi7xx4oa8udhvw1zgot9l1gdzapvimx7b5q2dddz1xytdzmlocepnyb3vrnwauw8nua5esxhctv6setw00r5srxdx8puwiacpy3ty6c9vre8q0uq7ftz9fbdibgxbxl96j9rnzor6hrm9eiizjvzqr9cffiqfyzqfoi1ffbon87kio6utjubws6aqymlgvghk21e0nigwmrbuqza2tvxgxnjgq5s802puzyh6riwqv3mqgkegmmz4er23xskaflqhrt6eqbit7r1qi31cwn48hmq13gvjadhrlosgxytpw7gilyqe2ky1l32bvzc2gweac3gxsjohq6myiquclityisq2cpxnkb5bh7pqjzxdnrewups9mo9hmfw63xmmprybhrxivlbnba7wiv4udtqpietd3ocz1otskz4katjnngveaijkqfa7xlkorp0bz2cfnmon6jqzvffhonzdbjm15qeubxibg3qhglaa2pmdidkuqdvxjy5uwcoov92ighjtrs8xjubmgqwu9pp3vrz8w77lvunt4bqlknifc3juwcypweuz4ap1vndoebb6b9gc5te9qmomow2gesdvgkyi3jsbqqbqfrr467fr69qdlcnbghjuahjk5cjzcsoqx2uzyqfm9waffb7ekuakx4rykn45pcm5aqdjqbff1b4oyieiufgc0vddsr6rqyniouqol5eyg5lgghlqxxijrahltonn4kxogonkkihatzxqiyat6epbix33bnrevmwpxibhysnjdidcizb4zktkbpzdnwwgfyl7c1wdb1xxo4bqog8g15s3lsddlxndjb4qifkprbwuaggslbackb4greedqku0ahydck6obsgycmwsvlvgpkekmhqszi1fooowzgfob4vplcugwyccqtrjdl3dvggmxq0ngb6qyvtjgexrrgqe8jloyn3fqjyppjmywzwlxl9px121zmpgzzte9rwji6aicstg2izvssmbsklbr5elzgz072woubqk1zfzx4rze2uxfeqxye2qfs8flxwidtlk2cfo58vpdytyhofqhjmgcqgzgsfasxbmgucvc4gtapraxqf4yddhdigdvsdah39ype81eyefpfq6ns9ms3ktfk4xo3lf4caggxuhrzb0shy6c7zgy8sdivbanfflcwporgaavua34i5qilb4zdly7odol8vo9owycworadpvhg2qnxy3thfzwmebmzqp5wyd8bie9flm2g7nfof3c2ogilak424cdxdbon323llyhlj3vd2xnuh6v4h0qrd1c0ddtj4bqajegivzrue2uhzzv7m3q5e4cmlhrziqlsfjw6vrpax8opruibpaqyvyddy2x0fwnjobqqc8qw40qpr0qo5hzqtvldwjdo6dsleghypw87uq5byfzxaww3bay34ixfi6mod4d6rhwsvzeh97mra7vfwogbm26mf7s36l2tddyt8zsyrpbhyakbf7f1vzpmsouawnownjad9kd4myqzrrcrogckknab7prg9dt2wqg2q8qzvtkxplov5ftvehyt5ocr2vzroonud7px91emx8w6e4ugsuyhik70qxlsizpvdzle21zdg4mgrgcy8omzxcybetl0v9m3mkvnnxxcviede7srzqfqikqpt4dggbxsdeum9i6sgjdzy7wvtguew2afkwhjtkrlevmy2evkl5qibi6kwdtjnxhclimwioxj5ttk4r0gqit3adoefc90ppdck4ar2z9pav5waunqyxfc1av19pmjpn9iphu1eb2p46dvrwlmz4w6g88ghnkdzapqmdgdzlrqwkdovjp2rmxt1rrvpppiisojjoso13xzkazsrfvchiehtpuwigwt2yhcsdcopnyji3q1gob9as93htsdhtc34mod9kjfvot4qyh5vtv92hjoaic1iafe3mnvvqghgpkij1rhblsmd6wixq2kqoeul9os9w0aigo1ob1we8ooyyecubth73iogz7svdvarr6keecpbddjrb8dl5jefr5yxifslcodvmspt7pb1xbuyd7lc5wkpct89a8sidnvc9qjpfpv8ow5njbdxgupkj2vvu9flr7tafhtzlxmskydvs9rmdmxadxgitaigfitjlq2eckmlzcrmc6cuwyt9nwtr8kf1tvqxojdudd75pejrkaato0f5m3iclqwrjsbjlrc7q12mcvulcczdgrjp0i3vjqvvqyeqdedb5iewt4hiycmerbxxaqxjuzzayhl0ideredtdb31rxmpsegnqdxjvduk1y6zwkkg4s0rnncurkyx9dgps8alqh3o56ps6l7aj3zajzztob3lhhbb73twcifme7qt7l8c5qnyb8tbeszba0eeswujlfn25jw5aqpprb1yyc2390injd7nzryd1sx6ifftmkrgqdygjbwyfunbsdq5asg5axgc2uhvsnmnfxb7eorwjnk2wcpde5vvyo5oejwu87t9pszoxhvgkbn7o2bsw8g9scudmuoquucriqhxhhufi7kr0baeofdkjeisfn41xwfxrf3k8b5ysvmpgsraslzbd5l2jsz3rjydtpazgera16lbizgm3fibubmb5gwxkuzponilndqjonc0vulemt9nksinyfv6wmvaidjamsjhnnhtl5ezdddhvpcsbxvw1iwxrvlasaqulxhvswgczchfhdmky2yjs5wepnxhqwrlezynwbcu3u6xcqvsz0wyy91ta9j4plcx1ver6leryajy2grwdlshfmuosw5hftevzmp0izvlmpmvnn6nabb97sxty3sjwfvrs3yazl1erveziu7u54c8b2np3muhrqxpkl5ljkbn4hxsdsxqcffsw1nipzlmd7avtdh9jyfw2lfpuekxrdniwupqs67edxbpblfe61nolb0qcr8jozqb8n1ejxotzo9v1zxo9shirkx93wxzur6vfmstzs2amgkkauiopmb0r44gtbmcbpcxjh6slo6nmzz3dgamel7rp5n1uggidsmmimgwy367v2crx8tblgkyul30wka1mtudzr35xwbulzvtrdzz9y8z0vqakezg0qynyphmwdqvntuagfkphffr6oes6tbigjzt4mvyeh5snbm3yhjsooo0zg0u3e7b2wjwrppv3aalzmimpbi9mt8r0bnzqwremvdrl40yi9oyfekuekjhejtb0tke2hwxek8awluzrihtz8ts8v4wqayfpndxunodblz9zmd8ulc9bswgh23pyfltzgqp0kzihwcidegm2lvjxgfljvx42oyvfflbx8ris9kcnzgvteeqdzqbznpkqo4hdv0oz8qyg4v8dnjdbyclkewqr8j3yb7id2cnsatvwn9zzhzzdvp5picoioh8lhhnrifzkyeqtcjryhpka7kxjbcbe34ncucerobwbf141mytog3mhajq6bxzizgo2nxg2er9zyxzwhdbvbstsgnp5aie9uhyqq6c8jbryrbndpgtxdf57jup8jmvpeglejdkjhnoydouyztcuoq79d2mhuappwhqaaaabjru5erkjggg\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHubのトークンはハードコードしないほうが良いのでは？<img null=\"\" data-icon=\"emoji-warning\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAL1ElEQVR4Ae2aBXBU2dKAJyNxJZOEiQsQnCjuEMNd/oe7rb11DeuGrCPr7o47xHGPIDHi7p7+u3e7mOyZXF4GTVI7VV+dnvY+9yL33JHd/c+/HwNEiZgg5gzJSra1648cMUbUiCfSgyFZzTZ5e77yxohmYDfjoZGfeH+XfXjYJYJk0pGNfdrlnaBC7LwclYPSdvqdgYxFAAUPAeQjKCfv8Dvj5qgcSD7s2+5ufUuk+773O/3YmD4fGgsfRR7RgjqykQ/7tqs/CkaI89xQiwU1F8bWNBb8FxDkIQZlhGzkQ74c026uvjXiG/dFt6jGrKV/D51/P8OQDm1xX/SIIl+OkbeXq++6eLzFI7Xx4+oa8u+Dhvw1zGot9L1gDZAP+VIMx7b5q2+DDDz1XY/TDZmLoCEPNyB3VRNWauW8NUA+5EsxHCtv6//seTw00/r5+sRxDX8PuwIacpY3Ty6C9vrE8Q0UQ7Ft+Z9FBdIBGXbxl96J9RnzoR6HrM9eiizjVZQR9CFfiqFYzqFoi1ffBOn87KIO6+uTJuBwS6A+qymLGVGHK21E0nigWMrBuQza2tVXGxnJgq5s802puzYH6rIWQV3mQgkEG/mmz4Er23xSKAflQhRt6eqbIt7r1qi31CWN48HmQ13GvJaD/hRLOSgXYtpW7gIlYqe2kY1L3+2bVZc2GweaC3gXSJOhq6MYiqUclItyIsq2cPXNkB5bH7P/qjZxDNRe+w/Ups9m/o9hmfW63xmMpRybHrX/iv+LbNba7wIV4uDtqpietd+3oCZ1OtSkz4KatJnNgVeaIJkQ/fA7xlKOrP0+BZ2cFNMoN6JqzVffHOnzdbjm15qEUBxiBg3QhGlAa2PmDIDKuQDVxJy/5UwcOoV92I+gHJTrS8xJubmGQWu9+pp+3VRz8w77lVUnT4bqlKnIFC3JUwCypwEUz4aP1vnDoEBb6B9gC5te9QMomoW2GeSDvgKYi3JSbqqBqFrr467fr69qdlcnBGHjuAHJk5CJzCSoQx2UzYQFM9wAff/B7EkuAKX4RyKN45pCm5AQDJQbff1b4+OyIeIUFGC0vDDSr6rqyniouqoL5EyG5LggHlqXxIjRAHlToNn4KxOgONK/KihAtZxqIYat6epbIX33bNREVMWPxIbHYsNjdIDciZB4ZKTkBpzdNwwgfyL7C1wdB1Xxo4BqoG8g15S3lsddlxnDjB4qifKprbwUAggSLBACkB4GReeDQKU0aHYDck6OBsgYC//MwSvLVGPKEKMHqSZi1FoOOwZGfOB4vPLCUGwyCCqTRjdL3dVggMxQ0Ngb6QyvtjGExrRgqE8Jloyn3FQjYpPjMYwZwLXl9/px121ZmPGzZTE+9RWJI6AicSTg2izVSSMBSkLBr5elzgZ072wOUBQK1ZfZX4RzE2UxfeqXYE2qfS8flxWIDTLk2CfO58vPDYTyhOFQHj+MGcqgzGsFAsXBMGuCvc4GTApRAxQF4YDDhDiGdVSDah39yPE81eYeFPfq6ns9Ms3ktfK4Xo3lF4cAggxuHrZB0ShY+6C7zgY8sdIVbaNFf+lcWPORGaavUA/34i5QILb4ZDLy7OdOl8vO9oWyCwORAdpVhG2QNxy+3thFZwM+ebMzQP5wYD8BIe9FlM/2g7NfOF3C2OGILaK424cdXdbON323LLYHlJ3vD2Xn+uH6v4H0QRD1c0+dDTj4bQ+AjEGivzRUE2uHzzV7m3q5e4cm/LhrZiQLSfjW6VrpaX8oPRuIBPAqyvyddY2X+0FWnJ/OBqQc8QW40q+pr0QO5hzqTvlDwjdO6dSLeGhypw87uq5bYfZxaWw3bAY34Ixfi6mOD4D6RH+wsVZeH97MRA7VFwOgBm26Mf7S36l2TDdYt8zsY+rpbhyaKBF7F1vZpMs/OuaWnOwNJad9kD4MyQzrRCrO+gCk+kNAb7PrG9DT2wQg2Q8qzvtKxPloV5FTveHyT5ocR2vZROoNUd7px91emx8w/6E4ugsUY/Hik70QXlsIZPvDzLE21zdg4mgrgCy8omzXC+yBetl0v9m3mKvnnXxcViEde7srZqf+qikqPt4dG+gBxSdEUM9I6SGjDzy7Wvt/gUeW2AFk+WhjTkrlEvMy2EvKL5qibi6KWdTjnXhcliMWiO+Xj5ttK4r0gqIT3aDoeFc90PpDck/4ar2z9p/AV5wAUnqyXf+c1Av19Pmjpn9iPh/u1eB2P+46DvRWLMz4w6G88GhnKDzapQmdGdZLrQwkdoVjP2r/MxT1rRvppPIISOjjOsO13xzKAzsrFvChieHtPuwI+GWt2YHCSDcoPNYJi3q1gOb9as93htSDHtc34Mo+D9KJfvoT4QY/h5vtv92HJoaIc1iAfE3mNvvqghgPKIj1RHBlSMd6WiXQ2kqOeUL9OS9w0aigo1oB1We8oOyYECuBth73IOgz/7SvDvaRr6KeEcPbddjRb8dL5jEFR5yxiFsLcOdVmspT7pB1xBUyD7lC5WkPCT89a8SiDnvc9qJpFPV8Ow5NjBDXGUPkj2VvU9flR7tAfhTzl+xMsKyDVs9+rMdmXaDxgitAigfiTjLq2EckmlZCrMc6cUWyt9nWTR8kf1TvQxOJd/uDD75pejr/kAaTO0F+5M3iCLQWRjsBJLrC7q12MCvUlCCZdGRjP0I3VjqvVqYeqdeDb5iewt4HiYcmer/bXxaqXJuzzaYhL0IDeREdtdB31rXMpsEGNQDxjvDuk1Y6zwKkg4s0RNNcUrKYX9dGPS8aLQ/H3O56PS6L7/aj3zaJzztoB3lHHBB73TWCIFmE7QT7l8c5QNYB8TBESzba0EeswUjlFn25J+w5aqPpRb1+YyC+2390inJd7nZryD1sx6iFFTmkRgQdygjbWYfUnbSDQ5/aSG5AxGc2UHvSnmNFxB7E+oRWJnK2WcPDE5VvYO5Oejwu87t9pSzoxHvGKbn7O2BSW8g9SCuDMuoQUUcrI/qhXHHUFi7+Kr0BaEOfDkJeISfn41XwFXrF3k+8b5ysVMpGSR+aSLzbD5+l2JSz3RJyDtpAzgERa16lbIzgm3fIBuBMB5gwXKUzPOnIlndQjONc0vUlemT9NksInyF/v6W/MVAidjamsjHnNhtl5ezDDdhvpcsBXvW1IWXRVlASaQULxhvS+wGCZChFHdmkY2+yJs5wepNxhqWRLEzyNwbCu/3u6xcqvsz+0wyy91tA9j4pLCX1vEr6lERYAJy2grwDlshfMuosW5hftEvZmP0IzvLmPMVnN/6NAb/b97SXTY3/SJWfvRs3YA+zl1eRveZIU7u54C8B2nP3mUHRQXPkL5ljKB/n4HxSdSXqCfFsw1niPzLMd7aVTdH9jYFw2LFpueKXrD+NIWuPqS67edXBpBlfE61NOlb0QcR8JozQB8N1eJXOTzO9v1zxo9ShiRKx93WXzUr6VFmStZs2AMGkKAuIOpMb++0R4+4GtBmCbpcxJH6sLO6NMzZ3dGaMeL+7RP5N1u+GGIDsMmIMGWY367V2cRX8tbLgKyUL30Wka1MtUdZ+R35XwbuLZV/TrDzz9Y8Z0v/Qa/KEzG0qyNyphMwdqv/NTuaGfkphFfR6oeS6+tbiGJzt4MvyeH5SNBM3YHjsOoO0zG0U3E7B2WJwRppV3AALZMimpbI9mT8r0BnZqWREmVdRL40YI9oYfeKUEkjHEjTb+0tke2hWxEK8AwLUZrIHtz8tS8v4wQAyfpNDxu/NodBLz9z+mD8ULc9Bs/wgh23PyFLtzGQP0KziHWCIdEGm2lvJXg+fLjvx42OyvF+flBX/8ris9KcnZGVtEeqdZqBZnpkqO4HDv0oz8qyG4v8DnJDByCLkeWQr8j3yB7ID2cnsatVwn9zzHzzDVp5pIc/oiOh8LHhnRiFzkYeQtcjryHpkA7KxjbCBe34NCUceRObwbF141mY/tog3MhAJQ6bxZizgO2NxG2ER9zyXZwhDBvBstsgNP5aIE+9UHyQQ6c8JBrYRBnDPgTxDF57JUp8jMVPEGlEjDkjHNoYDouYZTCUOQ/79/D/2mhuappW/hQAAAABJRU5ErkJggg==\"></h3>\n<p>GitHubのアクセストークンをソースコードにハードコードするよりは、<a href=\"https://github.com/nuxt-community/dotenv-module\">@nuxtjs/dotenv</a>を使う方法を載せておいたほうが親切かなと思いました。実際<a href=\"https://github.com/takanorip/nuxt-graphql-sample\">サンプルコード</a>は@nuxtjs/dotenvを使っていますし。</p>\n<h3 id=\"誤植？\"><a href=\"#%E8%AA%A4%E6%A4%8D%EF%BC%9F\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>誤植？</h3>\n<p><small>自分の認識ミスかもしれませんが...</small></p>\n<ul>\n<li>（P9）<code class=\"language-text\">apollo-moduleとapollo-link-httpをインストールします。</code>の直後のコマンドが<code class=\"language-text\">yarn add @nuxtjs/apollo</code>になっています。正しくは<code class=\"language-text\">yarn add @nuxtjs/apollo apollo-link-http</code>です。</li>\n<li>（32P）型「URI」は「String」です。GraphQLにURIという型はないし、32Pの型定義にもURIの定義はないので、おそらく「String」かと思います。</li>\n<li>（33P）reposMockのviewer.repositories.nodesは配列なので[]で囲む必要があります。</li>\n<li>（33P）addMockFunctionsToSchemaにセットするオブジェクトのプロパティは<code class=\"language-text\">mock</code>ではなく<code class=\"language-text\">mocks</code>です。</li>\n<li>（39P）「予期せぬネラー」は「予期せぬエラー」です。</li>\n</ul>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>Nuxt.js＋GraphQLをまだ始めたばかりですが、<strong><a href=\"https://booth.pm/ja/items/1045830\">「Hello, GraphQL for client-side!」</a></strong>は最初のとっかかりとしてオススメの一冊でした。これでapollo-moduleの設定・実装・テストの必要最低限を把握できたので、次のステップとしては、以下を参考に、サンプルアプリを作ったりAppoloのキャッシュまわりの設計について取り組むのが良いかなぁと考えています。<br/></p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"padding-bottom: 70.7035%; padding-top: 120px;\"><a href=\"https://www.aintek.xyz/posts/graphql-nuxt-chat\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fwww.aintek.xyz%2Fposts%2Fgraphql-nuxt-chat&key=0658bf78be97cafcf2b0b9f96c1270ee&iframe=card-small\"></a></div></div>\n<br/>\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.hiroppy.me%2Fentry%2Fapollo-link-state\" style=\"border: 0; width: 100%; height: 190px;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe>\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Femployment.en-japan.com%2Fengineerhub%2Fentry%2F2018%2F12%2F26%2F103000\" style=\"border: 0; width: 100%; height: 190px;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe>\n<br/>\n<p>🍅</p>","fields":{"slug":"/hello-nuxt-graphql-with-apollo-client","title":"Nuxt.js＋Apollo＋GraphQLをサクッと学べた /「Hello, GraphQL for client-side!」を読んだ","date":"2019-01-07T19:00:00.000+09:00","excerpt":"なにこれNuxt.js＋GraphQLの知識がこれから必要になるので「Hello, GraphQL for client-side!」を読んだところ、非常にサクっと学ぶことができたので感想を書きます。GraphQLでサーバーと通信するには「...","tags":["GraphQL","Nuxt.js","Apollo Client","Vue.js","読書感想"],"keywords":["GraphQL"],"thumbnail":"/thumbnail/2019/01/hello-nuxt-graphql-with-apollo-client.png"}},{"html":"<p><img src=\"/thumbnail/2019/03/aws-appsync-and-serverless-framework.png\" alt=\"aws-appsync-and-serverless-framework\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>AWSのGraphQLマネージドサービス「<a href=\"https://aws.amazon.com/jp/appsync/\">AppSync</a>」はGUIで簡単に設定ができて便利ですが、\n本格的に開発を進めていくとGUIポチポチでソースコードを管理するのはつらくなってきます。\n<strong><a href=\"https://serverless.com/\">Serverless Framework</a>というツールと<a href=\"https://github.com/sid88in/serverless-appsync-plugin\">serverless-appsync-plugin</a>（Serverless Frameworkのプラグイン）を使うと、AppSyncの設定をymlファイルで管理し、CLIでAWS上にデプロイできるので、GitHub等で構成管理が可能になります。</strong>\n今回はAppSyncからDynamoDBのユーザー情報を1件取得する場合を例にしてAppSync + Serverless Frameworkの使い方をご紹介します。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b4e940dd98c7ab5be67d93e353ffd018/bf025/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27.04186684969115%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABcRAAAXEQHKJvM/AAABOUlEQVQY012PvU7DQAzH8xLwQuwdmVh4ERbUhVfgY+ABWBgQLMwIUEWhLbS95tK4adLQpvm4JJc7n7lmQAJLP/kv27L/djjn90QUK6XmFmiaBogMGGNavaOqqjZLKS11S13XgFpBWTWwLSQY1Is8z5kDAG9aa9okCQkhyBgiz5uT7wMphbSLLMvJDtP/yERNh6c3dHByR+9+aiuoHMbYi4UAfDUafeLMX2Pvg+Frf4LM6kW4xvGYoet6GKxShFWBPEgQwhSfh3Pc63Rx/+gKrx8n1ooRThAse4PBiM4vLs1kykhbU0Uh7IEFxXFM9lUKlhGFkdVKt27DMCKPc8pFRcdnt9TpPlCfJ3afrp2Z6z2lJdL3tq4yoaSopLTefynKRg5ZJL94bPXfXrwRcgZbOfWT2oWNLMsq/QGLmW71JK3q7AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/b4e940dd98c7ab5be67d93e353ffd018/fb8a0/image.png\"\n        srcset=\"/static/b4e940dd98c7ab5be67d93e353ffd018/1a291/image.png 148w,\n/static/b4e940dd98c7ab5be67d93e353ffd018/2bc4a/image.png 295w,\n/static/b4e940dd98c7ab5be67d93e353ffd018/fb8a0/image.png 590w,\n/static/b4e940dd98c7ab5be67d93e353ffd018/526de/image.png 885w,\n/static/b4e940dd98c7ab5be67d93e353ffd018/fa2eb/image.png 1180w,\n/static/b4e940dd98c7ab5be67d93e353ffd018/08f6a/image.png 1770w,\n/static/b4e940dd98c7ab5be67d93e353ffd018/bf025/image.png 2914w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ol>\n<li><a href=\"#1-serverless-framework%E3%81%AE%E8%A8%AD%E5%AE%9A\">🔰 Serverless Frameworkの設定</a></li>\n<li><a href=\"#2-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E4%BD%9C%E6%88%90\">💪 プロジェクトのひな型作成</a></li>\n<li><a href=\"#3-%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E4%BD%9C%E6%88%90\">📝 設定ファイル作成</a></li>\n<li><a href=\"#4-%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E4%BD%9C%E6%88%90\">💖 リゾルバー作成</a></li>\n<li><a href=\"#5-%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E4%BD%9C%E6%88%90\">💎 スキーマ作成</a></li>\n<li><a href=\"#6-aws%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4\">🎊 AWSにデプロイ</a></li>\n</ol>\n<h2 id=\"1-serverless-frameworkの設定\"><a href=\"#1-serverless-framework%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Serverless Frameworkの設定</h2>\n<ul>\n<li>Serverless Frameworkはnpmで提供されるCLIツールです。まずはnpmでインストールします。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i -g serverless</code></pre></div>\n<ul>\n<li>クレデンシャルを設定します（事前にIAMでユーザを作成しておいてください）</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">serverless config credentials --provider aws --key AKIAIOSFODNN7EXAMPLE --secret wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</code></pre></div>\n<p><small>※詳細：<a href=\"https://serverless.com/framework/docs/providers/aws/guide/credentials#using-aws-profiles\">Serverless Framework - AWS Lambda Guide - Credentials</a></small></p>\n<h2 id=\"2-プロジェクトのひな型作成\"><a href=\"#2-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. プロジェクトのひな型作成</h2>\n<p>プロジェクトのひな型を作ります。\nServerless FrameworkでAppSync資産を扱えるように、<a href=\"https://github.com/sid88in/serverless-appsync-plugin\">serverless-appsync-plugin</a>と<a href=\"https://github.com/aws/aws-sdk-js\">aws-sdk</a>をインストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mkdir appsync-sample-with-serverless\ncd appsync-sample-with-serverless\nnpm init -y\nnpm i serverless-appsync-plugin aws-sdk</code></pre></div>\n<br/>\n<h2 id=\"3-設定ファイル作成\"><a href=\"#3-%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 設定ファイル作成</h2>\n<p>プロジェクト直下にServerless Frameworkの設定ファイル<code class=\"language-text\">serverless.yml</code>を作ります。<br/>\n<small>※ここではserverless.ymlの全量を示して、次のセクションでブロックごとに詳細を説明します。</small></p>\n<div class=\"gatsby-code-title\">serverless.yml</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># サービス名</span>\n<span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> appsync<span class=\"token punctuation\">-</span>sample<span class=\"token punctuation\">-</span>with<span class=\"token punctuation\">-</span>serverless\n<span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token comment\"># ステージ、デプロイ先を開発、運用などで分けたい場合はココを切り替えます</span>\n  <span class=\"token key atrule\">stage</span><span class=\"token punctuation\">:</span> production\n  <span class=\"token comment\"># デプロイ先のリージョンです</span>\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n<span class=\"token comment\"># AppSyncのプラグインを指定します</span>\n<span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> serverless<span class=\"token punctuation\">-</span>appsync<span class=\"token punctuation\">-</span>plugin\n<span class=\"token comment\"># プラグイン関連の設定はcustomで行います</span>\n<span class=\"token key atrule\">custom</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># ここでAppSyncの設定を行います</span>\n  <span class=\"token key atrule\">appSync</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># エンドポイントの名前を指定します</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> appsync<span class=\"token punctuation\">-</span>serverless<span class=\"token punctuation\">-</span>sample\n    <span class=\"token comment\"># AppSyncの認証方法を指定します</span>\n    <span class=\"token comment\"># ここではCognitoによる認証方法を指定しています</span>\n    <span class=\"token key atrule\">authenticationType</span><span class=\"token punctuation\">:</span> AMAZON_COGNITO_USER_POOLS\n    <span class=\"token comment\"># Cogtnitoによる認証方法の場合、Cognito側の情報を指定する必要があります</span>\n    <span class=\"token key atrule\">userPoolConfig</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># Cognitoが存在するリージョンを指定します</span>\n      <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n      <span class=\"token key atrule\">awsRegion</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n      <span class=\"token comment\"># CognitoのユーザープールのIDを指定します</span>\n      <span class=\"token key atrule\">userPoolId</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>1_U0e7zFRLQ\n      <span class=\"token comment\"># スキーマ定義で認証設定が記述されていない場合の挙動を指定します</span>\n      <span class=\"token comment\"># DENYを指定すると、認証されたいかなるユーザーも認可エラーに倒します</span>\n      <span class=\"token key atrule\">defaultAction</span><span class=\"token punctuation\">:</span> DENY\n    <span class=\"token comment\"># AppSyncのスキーマ定義ファイルのパスを指定します</span>\n    <span class=\"token comment\"># デフォルトだとschema.graphqlです</span>\n    <span class=\"token key atrule\">schema</span><span class=\"token punctuation\">:</span> schema.graphql\n    <span class=\"token comment\"># データソースを指定します(複数指定可能)</span>\n    <span class=\"token key atrule\">dataSources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># データソースの型を指定します</span>\n      <span class=\"token comment\"># 以下が指定できます</span>\n      <span class=\"token comment\"># AMAZON_DYNAMODB ・・・DynamoDB</span>\n      <span class=\"token comment\"># AMAZON_ELASTICSEARCH ・・・Elasticsearch</span>\n      <span class=\"token comment\"># AWS_LAMBDA ・・・Lambda関数</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> AMAZON_DYNAMODB\n        <span class=\"token comment\"># データソース名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># DynamoDBのテーブルの説明を指定します</span>\n        <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ユーザー情報テーブル'</span>\n        <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n          <span class=\"token comment\"># 参照するテーブル名を指定します</span>\n          <span class=\"token key atrule\">tableName</span><span class=\"token punctuation\">:</span> dynamo_user\n          <span class=\"token comment\"># データソースのロールARNを指定します</span>\n          <span class=\"token key atrule\">serviceRoleArn</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>999999999999<span class=\"token punctuation\">:</span>role/sample_role_arn\n          <span class=\"token comment\"># データソースのリージョンを指定します</span>\n          <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n          <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n    <span class=\"token comment\"># マッピングテンプレートのVTLファイルの格納先を指定します</span>\n    <span class=\"token comment\"># デフォルトはmapping-templatesです</span>\n    <span class=\"token key atrule\">mappingTemplatesLocation</span><span class=\"token punctuation\">:</span> mapping<span class=\"token punctuation\">-</span>templates\n    <span class=\"token comment\"># リゾルバー定義を指定します</span>\n    <span class=\"token comment\"># ※ここではPipeline Resolverの例を示します</span>\n    <span class=\"token key atrule\">mappingTemplates</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># リゾルバーの方を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Query\n        <span class=\"token comment\"># リゾルバーを紐づけるスキーマ中のフィールド名を指定します</span>\n        <span class=\"token key atrule\">field</span><span class=\"token punctuation\">:</span> user\n        <span class=\"token comment\"># Pipeline Resolverを使い場合、以下を指定します</span>\n        <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PIPELINE\n        <span class=\"token comment\"># リクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'start.vtl'</span>\n        <span class=\"token comment\"># レスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'end.vtl'</span>\n        <span class=\"token comment\"># リゾルバーで使う関数を実行順に指定します</span>\n        <span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> GetUser\n    <span class=\"token comment\"># 関数定義を指定します</span>\n    <span class=\"token key atrule\">functionConfigurations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># ユーザー一覧取得</span>\n        <span class=\"token comment\"># 関数で扱うデータソース名を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">dataSource</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># 関数名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser'</span>\n        <span class=\"token comment\"># 関数のリクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.req.vtl'</span>\n        <span class=\"token comment\"># 関数のレスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.res.vtl'</span></code></pre></div>\n<br/>\n<p>以下で、<code class=\"language-text\">serverless.yml</code>に定義したプロパティがAWSコンソール上のどの項目に紐づくかを説明します。</p>\n<h3 id=\"appsyncの基本設定\"><a href=\"#appsync%E3%81%AE%E5%9F%BA%E6%9C%AC%E8%A8%AD%E5%AE%9A\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AppSyncの基本設定</h3>\n<div class=\"gatsby-code-title\">serverless.ymlからAppSyncの基本設定を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">  <span class=\"token comment\"># ここでAppSyncの設定を行います</span>\n  <span class=\"token key atrule\">appSync</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># エンドポイントの名前を指定します</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> appsync<span class=\"token punctuation\">-</span>serverless<span class=\"token punctuation\">-</span>sample\n    <span class=\"token comment\"># AppSyncの認証方法を指定します</span>\n    <span class=\"token comment\"># ここではCognitoによる認証方法を指定しています</span>\n    <span class=\"token key atrule\">authenticationType</span><span class=\"token punctuation\">:</span> AMAZON_COGNITO_USER_POOLS\n    <span class=\"token comment\"># Cogtnitoによる認証方法の場合、Cognito側の情報を指定する必要があります</span>\n    <span class=\"token key atrule\">userPoolConfig</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># Cognitoが存在するリージョンを指定します</span>\n      <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n      <span class=\"token key atrule\">awsRegion</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n      <span class=\"token comment\"># CognitoのユーザープールのIDを指定します</span>\n      <span class=\"token key atrule\">userPoolId</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>1_U0e7zFRLQ\n      <span class=\"token comment\"># スキーマ定義で認証設定が記述されていない場合の挙動を指定します</span>\n      <span class=\"token comment\"># DENYを指定すると、認証されたいかなるユーザーも認可エラーに倒します</span>\n      <span class=\"token key atrule\">defaultAction</span><span class=\"token punctuation\">:</span> DENY</code></pre></div>\n<br/>\n<p>AWSコンソールのAppSyncの画面で、エンドポイント一覧が表示されます。\n<code class=\"language-text\">serverless.yml</code>で定義したエンドポイント名はココで確認できます。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0d72e5f2831b7d4fea63c5eda934a0c0/90b21/appsync-gui-main-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 53.31715210355987%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABcRAAAXEQHKJvM/AAAB1ElEQVQoz42Sy3KbMBSGebv2JdpF+3bNNLvaronKrvY6m8TZkICpAWNA3C8H/T2SGceTZlHNfHMkwfl1bpbn+VvXde/CMHKklI7McydNUyeKY2cfBM6L7zvPnud4bPX5Lf5+r63g75tvNzcfLfBq2xbvLcXIokAmCwxE5jwp9Q8jf9NrvV5/sWbfniGllEHvx3Gkoixpt9vR84tHVV1TLuW78KNDw0EtV6tPRnCappGFzlHNlvhVHV3BHJMEZVmiaRrUTHMFnxWLkfaybfuzNYuMOkF1JcgRGrE0y8B1Ms76bhiGtyidjfb55Tivguq8gZproP/IqxplXaPtOnSMTqudaV4xEWqfOyFmQU5ZixlBXWApQWEI6XsoeV9UDUoWl0xxsRW4rhrFaZNuzI/FYhbkDC+d1cIPD6DtFtVmgzJO4Gc1orxCkJYI2e7TCnVP18NgDtwUFuS6TIdDr5KE1OlE2iJNiXgvgz/UZpnptu5y3/fU9R1x3S4Tca6/mRIslkvuMhcej4+A5wG+D7guEATA0xNwf89D2mCYJvzPWq5+frW6adpU42jX4yjqYRDGMkXXicPpJKKEiWIRRpE4hOGFMI5FfDyKiImPic13v7/f3n74C7W6OcaoFOEsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui main 1\"\n        title=\"\"\n        src=\"/static/0d72e5f2831b7d4fea63c5eda934a0c0/fb8a0/appsync-gui-main-1.png\"\n        srcset=\"/static/0d72e5f2831b7d4fea63c5eda934a0c0/1a291/appsync-gui-main-1.png 148w,\n/static/0d72e5f2831b7d4fea63c5eda934a0c0/2bc4a/appsync-gui-main-1.png 295w,\n/static/0d72e5f2831b7d4fea63c5eda934a0c0/fb8a0/appsync-gui-main-1.png 590w,\n/static/0d72e5f2831b7d4fea63c5eda934a0c0/526de/appsync-gui-main-1.png 885w,\n/static/0d72e5f2831b7d4fea63c5eda934a0c0/fa2eb/appsync-gui-main-1.png 1180w,\n/static/0d72e5f2831b7d4fea63c5eda934a0c0/90b21/appsync-gui-main-1.png 1236w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>エンドポイントの画面を開き<code class=\"language-text\">Settings</code>を確認するとuserPoolConfigなどの詳細が確認できます。\nほぼ<code class=\"language-text\">serverless.yml</code>のプロパティ名と一致しているので、なんとなく紐づけがわかると思います。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ebbcece7c06dbe507ee4c1450e51f3f6/8014e/appsync-gui-main-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 85.01818181818183%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABcRAAAXEQHKJvM/AAACvElEQVQ4y41UXW/TQBD07+d/ICHBM4qgQfQBtQ+tGjVx3NKq8Wdix46/z46b8y2zF5eaUCROWmd9uZvbmZ2zcX5+/s40lz8sy/oahtE0vLycBh8/Te2zs6mFfDZfTE3TnDqOM3Vd983Af2ee5327vr7+YNi2/Z3Go+uIkoQoy0i1Lcle0f+OLYYxXyw+d0pR2e67rBbyQCQBISspZdG2cpemsqwq2e73kkff938FHgc+NoqilfFoWZPm4YGEZcnetkm5LqmnJxKYq5FnRUFZnlOKikXT0B4MAE77UeBdHaQkPwgc48lcTCQA5GqFGY+IAX2fGnNJ+cUFhbsdn0xpmlIDQDFEMwq8q+fnZ2x1HcNznQnzV0eqNORUY2GN6nJEVVXUQE8FaThAk8B+HHprGIaO4XveEZBnsRCrOada1FSKBkLHBA2pKEoqypLKsqIW4HrPcIDix7EpqPAFcFQhYEFDUFo1FAEwirYakGm9gJwMPRHH8QiwaaSCwFBZ26UCVVHXg17tsRmYFyMdX6IWQnU4zNEarlYT3QjTlAgiyyK1WJBYLikNAgq3WwqCNS/WneYq9yddRijW1ff9AZCpJIlUAKGbGwYn8fMnVQDMUaXehAq77hlG76kfGjMKTRluGACZMkysYA9yHFLwo0BF5TaiDTSMkx0xJfYfVyjf6DIjrjebAZA7K4RU9/dEbO7HRxLzOQl4MOfuQk/22+Fw0A05AfsNuNGArjshXnh1JdXdHdHtLSmANdCyhNE3cUJ5Xmi7sBe5UgZ+rbL/04ee72vKfZoeVJ4rVRSqzzIl4ljlaapw7RRfLQAp6KhzAHITtHWH6FnX9XptG0EQfHnry9Hh9AaaVWhK0+5fm8GUkfPdPR3woWfMZrP3WZYhj1cJjJkkicMG5XsZrNdOiM5tQOVfER5/bZjfw3fz8heLbQepoY3dIgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui main 2\"\n        title=\"\"\n        src=\"/static/ebbcece7c06dbe507ee4c1450e51f3f6/fb8a0/appsync-gui-main-2.png\"\n        srcset=\"/static/ebbcece7c06dbe507ee4c1450e51f3f6/1a291/appsync-gui-main-2.png 148w,\n/static/ebbcece7c06dbe507ee4c1450e51f3f6/2bc4a/appsync-gui-main-2.png 295w,\n/static/ebbcece7c06dbe507ee4c1450e51f3f6/fb8a0/appsync-gui-main-2.png 590w,\n/static/ebbcece7c06dbe507ee4c1450e51f3f6/526de/appsync-gui-main-2.png 885w,\n/static/ebbcece7c06dbe507ee4c1450e51f3f6/fa2eb/appsync-gui-main-2.png 1180w,\n/static/ebbcece7c06dbe507ee4c1450e51f3f6/8014e/appsync-gui-main-2.png 1375w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<h3 id=\"データソース定義\"><a href=\"#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BD%E3%83%BC%E3%82%B9%E5%AE%9A%E7%BE%A9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>データソース定義</h3>\n<div class=\"gatsby-code-title\">serverless.ymlからデータソース定義を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">    <span class=\"token comment\"># データソースを指定します(複数指定可能)</span>\n    <span class=\"token key atrule\">dataSources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># データソースの型を指定します</span>\n      <span class=\"token comment\"># 以下が指定できます</span>\n      <span class=\"token comment\"># AMAZON_DYNAMODB ・・・DynamoDB</span>\n      <span class=\"token comment\"># AMAZON_ELASTICSEARCH ・・・Elasticsearch</span>\n      <span class=\"token comment\"># AWS_LAMBDA ・・・Lambda関数</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> AMAZON_DYNAMODB\n        <span class=\"token comment\"># データソース名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># DynamoDBのテーブルの説明を指定します</span>\n        <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ユーザー情報テーブル'</span>\n        <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n          <span class=\"token comment\"># 参照するテーブル名を指定します</span>\n          <span class=\"token key atrule\">tableName</span><span class=\"token punctuation\">:</span> dynamo_user\n          <span class=\"token comment\"># データソースのロールARNを指定します</span>\n          <span class=\"token key atrule\">serviceRoleArn</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>999999999999<span class=\"token punctuation\">:</span>role/sample_role_arn\n          <span class=\"token comment\"># データソースのリージョンを指定します</span>\n          <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n          <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span></code></pre></div>\n<br/>\n<p>エンドポイントの画面を開き<code class=\"language-text\">Data Sources</code>を確認すると\nデータソースが一覧表示されるので、一覧から今回<code class=\"language-text\">serverless.yml</code>に定義したデータソースを選択すると、以下のように詳細が確認できます。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ce7642343b110f652569cb878bcb890a/08352/appsync-gui-datasource.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.09269662921349%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABcRAAAXEQHKJvM/AAAClElEQVQ4y32Ub2/aMBDG8/WnfZhpmhia1OVF30xTqcSgGxBISMgoFJIQO84/fPbt7NAqZVstPVIM4fHvuTvj3N7evp/N5t+Wy9XXw+Hg7vd7N45jd+n77uin5z54K3e6WLqT+cpqOvdIS/fHzHO9le/6QeD6vn+zDsPvd6PRO4c2Lv5jSaVwl3HMihJZIVBUNZZ1g6C1lVQaFb2nSWcp7W82cXzjTCaTQd20yDhvGWOglLLKsgyCwIcw2kAYRhCsQ4g2G+BFAfQucBK7KGesNcZE+ckJA3+IWiKcWzpY25OAxJsGkzTD3X6Px+MRG9obkrqusabnnjR9ZhG32+3A8RaLYUsvKSnBuqUpKs9DMZuhoGcuBJZliQBgRfRWz3uSlgDWkHowcNabzRC7WoDlyzKEKEIRBJgT2VOS4Ikxa8yK4kUFHSI6afpOdizpwPlNhNi2qKMINHSQajzGcjpFTmZpnmNBZiZeQ7Vu2k7S0FKJiFaTrGGSJAMnvrsbou+jHo1AEwnS6crEXa3wdDjgkYhTEhX+Je5fkaXsGcbx68imhvM5CjokJ8MsZy+EFdXaNKZvbAjhUsPOMAg6w7oGTWS4WKAiOmPIqIaHJLVNMUb9prw27Eder2lsNOqqAr3bmVYhbLco4hhPRPtEhukpt3SmZmDivhnZGPYjX+awIINclHg8MTyQxIXyfD5fx75qynPkviGRmLFIcm4Hu27qrrNkJC/Re4vi6aumnE6ofv2S+uFB43is4f5ei+lUp/FWU5e1EIW+XhcyK7gQ0o2iOXx8/GLPqSpt5pEyId0vrDhHe8dFhS0ofGspk93eieyz+bf5aIrdnM+8lbI0qtu2TLKsTHNulTFeCiH+KxorbuoaRdGHP06Xvi0j2WSQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui datasource\"\n        title=\"\"\n        src=\"/static/ce7642343b110f652569cb878bcb890a/fb8a0/appsync-gui-datasource.png\"\n        srcset=\"/static/ce7642343b110f652569cb878bcb890a/1a291/appsync-gui-datasource.png 148w,\n/static/ce7642343b110f652569cb878bcb890a/2bc4a/appsync-gui-datasource.png 295w,\n/static/ce7642343b110f652569cb878bcb890a/fb8a0/appsync-gui-datasource.png 590w,\n/static/ce7642343b110f652569cb878bcb890a/526de/appsync-gui-datasource.png 885w,\n/static/ce7642343b110f652569cb878bcb890a/fa2eb/appsync-gui-datasource.png 1180w,\n/static/ce7642343b110f652569cb878bcb890a/08352/appsync-gui-datasource.png 1424w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<h3 id=\"リゾルバー定義\"><a href=\"#%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E5%AE%9A%E7%BE%A9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リゾルバー定義</h3>\n<div class=\"gatsby-code-title\">serverless.ymlからリゾルバー定義を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">    <span class=\"token comment\"># リゾルバー定義を指定します</span>\n    <span class=\"token comment\"># ※ここではPipeline Resolverの例を示します</span>\n    <span class=\"token key atrule\">mappingTemplates</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># リゾルバーの方を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Query\n        <span class=\"token comment\"># リゾルバーを紐づけるスキーマ中のフィールド名を指定します</span>\n        <span class=\"token key atrule\">field</span><span class=\"token punctuation\">:</span> user\n        <span class=\"token comment\"># Pipeline Resolverを使い場合、以下を指定します</span>\n        <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PIPELINE\n        <span class=\"token comment\"># リクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'start.vtl'</span>\n        <span class=\"token comment\"># レスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'end.vtl'</span>\n        <span class=\"token comment\"># リゾルバーで使う関数を実行順に指定します</span>\n        <span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> GetUser</code></pre></div>\n<br/>\n<p>リゾルバー定義は、エンドポイントの画面を開き<code class=\"language-text\">Schema</code>を確認します。\n今回は<code class=\"language-text\">user</code>というフィールド名のクエリに対してリゾルバーを割り当てているので、右側のペインで以下のように確認できます。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9433457c9ebfa1de9cb0d571d6625d1c/b789f/appsync-gui-resolver.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.11990950226244%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACJUlEQVQ4y4WTyXLaQBRF+f9vyAdk50UW9tIsUsEuVXAqZZshoAEJEEIIoaFnvdxuBifErnTVlbpeN6dvP11634fDT4tF/HO9Xj/u93svyzIvXCy851ng/Qojb+RH3us88sZ+6PlB4EVYi5PEW8TxRVEUPSbL5dPg4eFzz/f9b3Q1hFQUxgnlRUE141S1nJiQqEuSSlPTMmpRl0oR48e3HZPp9LU3HY/uWVVSWR6kEMKgbvZlafwgNIs4MclyZdJsa/JdbtZparJtjnlhtnludkVhDlVlpSx0NB4Pe0EQ9E3X2QO0fXSYV3VNxW5HTVWQVoyM1nAnXB0HE4erPN9Rjj0KoJMR6/BHD/fvn0DawqwOVU2CASQho6m77gn2wB2lmw3VOERw/gZMkuQC/NNh2zQkOYNDTkY1rm7BZ6EtVOPghgtiWjvg1ALjOP4HaB02AApuQXB4ctnhqlRVZCDWtm6vzDLSq5UDznz/fYdoMoAtgBVgwllywCAgursjGgxoG0VU4wD18kL85sYQWjANgo+B9spKwI3mgB672IUh0e0tdYBW69RFSRpDZcOODmezD3oI4Dlb55pziK9NhwN1WHf9wy04Pl7D5RsQPbw//cgSkKDOZUtK6eZ/ya6fZHPIGDNtCzWNMzOZTJ6sw6/XqeBC0P+GUo6BWBmq0R475vP5s83hF8xrBDTVWmcKQiQyRCdrGXtXTdte1nGbDAHfwESJf0r/N4rd3ksu3UVVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui resolver\"\n        title=\"\"\n        src=\"/static/9433457c9ebfa1de9cb0d571d6625d1c/fb8a0/appsync-gui-resolver.png\"\n        srcset=\"/static/9433457c9ebfa1de9cb0d571d6625d1c/1a291/appsync-gui-resolver.png 148w,\n/static/9433457c9ebfa1de9cb0d571d6625d1c/2bc4a/appsync-gui-resolver.png 295w,\n/static/9433457c9ebfa1de9cb0d571d6625d1c/fb8a0/appsync-gui-resolver.png 590w,\n/static/9433457c9ebfa1de9cb0d571d6625d1c/526de/appsync-gui-resolver.png 885w,\n/static/9433457c9ebfa1de9cb0d571d6625d1c/fa2eb/appsync-gui-resolver.png 1180w,\n/static/9433457c9ebfa1de9cb0d571d6625d1c/b789f/appsync-gui-resolver.png 1768w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>上記画面の<code class=\"language-text\">Pipeline</code>のリンクを開くとリゾルバーの詳細が確認できます。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ec96f8926f756713f045671cd3c5f466/a95f7/appsync-gui-resolver-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.8494623655914%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACKUlEQVQ4y4WUbW+bMBSF8/9/w77sR0yapn5Zt7CNuFpWRdWaJiFA3iDhzRgDqe2za2BRulWbpaNDMDk89/omoyAIZnEcu3meM3LmhyH76QVsHW7Zwg/Zk79hT+uALQYtSSuffLViS89j4XY/CeOcBVE6+XBz83aEP1bbtvA3W/jhBrtDTL5FzkvUdF82DZrzGS2ppmvZ0jU/4XnloPVcMPfr3Ui1DQohzi2gKU8nnOunpad9P9B+EOi173cehBtSqKM41kma6iRJdHRKdbpdqvz7O539eK++OZ/GI2OxskyBMejpFNV8jrzg2O33nba7HdIsQ2PpiPLiJFtNc1aGYCAVjMvYl75kIZQ5HGCOR5RWQiBNUySDbCAvS1RSvlRVQVTCVPR8WXLjum4faOZzhft7mNkM4vERG8+j/kXg1LuCcxREnBcFFZJ34enwkqqSlthYUlnXxp1MhkBAWdfGdHQl0VgiSRQdWU/SXdv9mKo4JemwJ41tAxFfBRrTB2pN1dMX8hIH0pFXiIsKUS6QCdn1ra7rvn/DaROdsf6S8DqQaOwDSmsM9Jdl9y2hUup60syw93qgbbbtSWZ7RaKBt2/HP1YXqK4DqXet6e5pRQSKKBXnXBW8JC/ps1RU5utqeqeXPlPguB+bxQJ4eABoBkGzZ0l/n6yVHsr/35owNh1ReXc0R5+lEA6dpkMn6NCvwaGhdmioL36IIud4Ov2tY+/0PzD+eHv75hdnwtP/gHqLVwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui resolver 2\"\n        title=\"\"\n        src=\"/static/ec96f8926f756713f045671cd3c5f466/fb8a0/appsync-gui-resolver-2.png\"\n        srcset=\"/static/ec96f8926f756713f045671cd3c5f466/1a291/appsync-gui-resolver-2.png 148w,\n/static/ec96f8926f756713f045671cd3c5f466/2bc4a/appsync-gui-resolver-2.png 295w,\n/static/ec96f8926f756713f045671cd3c5f466/fb8a0/appsync-gui-resolver-2.png 590w,\n/static/ec96f8926f756713f045671cd3c5f466/526de/appsync-gui-resolver-2.png 885w,\n/static/ec96f8926f756713f045671cd3c5f466/fa2eb/appsync-gui-resolver-2.png 1180w,\n/static/ec96f8926f756713f045671cd3c5f466/08f6a/appsync-gui-resolver-2.png 1770w,\n/static/ec96f8926f756713f045671cd3c5f466/a95f7/appsync-gui-resolver-2.png 1860w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<h3 id=\"関数定義\"><a href=\"#%E9%96%A2%E6%95%B0%E5%AE%9A%E7%BE%A9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>関数定義</h3>\n<div class=\"gatsby-code-title\">serverless.ymlから関数定義を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">    <span class=\"token comment\"># 関数定義を指定します</span>\n    <span class=\"token key atrule\">functionConfigurations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># ユーザー一覧取得</span>\n        <span class=\"token comment\"># 関数で扱うデータソース名を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">dataSource</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># 関数名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser'</span>\n        <span class=\"token comment\"># 関数のリクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.req.vtl'</span>\n        <span class=\"token comment\"># 関数のレスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.res.vtl'</span></code></pre></div>\n<br/>\n<p>関数定義は、エンドポイントの画面を開き<code class=\"language-text\">Functions</code>を確認します。\n関数が一覧表示されるので、一覧から今回<code class=\"language-text\">serverless.yml</code>に定義した関数を選択すると、以下のように詳細が確認できます。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/435d0863a69c0fbe6ef7d6fe1f99ab06/4d911/appsync-gui-function.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 96.86520376175548%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABcRAAAXEQHKJvM/AAAC3klEQVQ4y31U23LTMBTM//8AL3wIPJBhmBZMYSgT2iZpEqeJHd/vF1myZR3Okd00U1w8s5FlxetzdleaGYbxfrczby3L/hZFkeE4jmHu98af9c5Yb03jYWMa9487Y7nZGSucr3C8W29xfQDdr5/sr09evPi5eHg3M03zBl5dnZRwtB1wPB9sx4U0L6ERLTDOQbQdcATTcwFN1wM7/AYIbuH4a349Wy6XX+q6hjzLW865RD6ZFYV83GwGbE15OFrSsm2NMIpkkqYyjmMZhKGMk0ym629tb16D+f3Dp9nBOl6B74K6+SFhsQB1fw/1agVJloEfBBDFCQghoG1brK7V9xwhRnDBoZFAhYDlhfPZfr+/ookSQiJANQ3UeQ4ZIk4SaHCulJpE3/fDfS81oes689nJtgdCGL5Cf6gYg6IsIS+Koao30KCmpDdCv4uGzmf2M2Hfy5EYyoZjqzF4vg9pmgGjqvEjpHVdsxeMz6q61u8ejscLQqowikChjuzxEQpsmcgaJO+6DqgIavENDBW67ivCqgJ1OgHzPIxKpg3J8gLQVShxjcygFiWSyHEc9Rw09LzplivUBttAogQwStCPBgy4MOXFoAnCZ1NIQyRpxzZ1qxcE2gRcI7QvUky0TMK6mEfHgdq2Uc4IMLg4xnqkTNJIrTM0g0CmFDjHNGjCp8PhgpAe3t2BQrDtFnBHnEloDCMkj6MxKt25SpIEU6AJkWu6ZdKQdkaps1jqiOgFBGk4cel3vTc1xNxRXAQeAIJ3ILAA3nQajNE2RO16eXZaTgbbdSVg/tR2A7VlQTC2SfCxbWqdZCD3z0Efd1Q2pWGfJBINUcrzVO37KvRD5Zx8FQSRCqNYJUmmMOiKc6FQuzMwm7j9sfRnDbHM61GHszgNii0YtlvTxscFOeA/V08/aN5nOmDnJAFvmkpwznjDWZqmLPAj5rsJi4KIpUmOz3JW1RWrqn+B5pVkIp70H/8CGYSmIXpWVBIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui function\"\n        title=\"\"\n        src=\"/static/435d0863a69c0fbe6ef7d6fe1f99ab06/fb8a0/appsync-gui-function.png\"\n        srcset=\"/static/435d0863a69c0fbe6ef7d6fe1f99ab06/1a291/appsync-gui-function.png 148w,\n/static/435d0863a69c0fbe6ef7d6fe1f99ab06/2bc4a/appsync-gui-function.png 295w,\n/static/435d0863a69c0fbe6ef7d6fe1f99ab06/fb8a0/appsync-gui-function.png 590w,\n/static/435d0863a69c0fbe6ef7d6fe1f99ab06/526de/appsync-gui-function.png 885w,\n/static/435d0863a69c0fbe6ef7d6fe1f99ab06/fa2eb/appsync-gui-function.png 1180w,\n/static/435d0863a69c0fbe6ef7d6fe1f99ab06/08f6a/appsync-gui-function.png 1770w,\n/static/435d0863a69c0fbe6ef7d6fe1f99ab06/4d911/appsync-gui-function.png 1914w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<br/>\n<p>設定ファイルの説明は以上です。次にリゾルバーとスキーマの定義について説明します。</p>\n<h2 id=\"4-リゾルバー作成\"><a href=\"#4-%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. リゾルバー作成</h2>\n<p><code class=\"language-text\">mapping-templates</code>フォルダを作成し、その中にリクエストマッピングテンプレートとレスポンスマッピングテンプレートを作成します。</p>\n<p>PipelineResolver用のマッピングテンプレート</p>\n<div class=\"gatsby-code-title\">mapping-templates/start.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\">{}</code></pre></div>\n<br/>\n<p>PipelineResolver用のマッピングテンプレート</p>\n<div class=\"gatsby-code-title\">mapping-templates/end.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\"><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">)</span></span></code></pre></div>\n<br/>\n<p>ユーザー1件取得用の関数ではDynamoDBのGetItemを呼び出します。</p>\n<div class=\"gatsby-code-title\">mapping-templates/GetUser.req.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\">{\n    \"version\": \"2018-05-29\",\n    \"operation\": \"GetItem\",\n    \"key\": {\n        \"id\": <span class=\"token variable\">$util<span class=\"token punctuation\">.</span>dynamodb<span class=\"token punctuation\">.</span><span class=\"token function\">toDynamoDBJson</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span></span>,\n    }\n}</code></pre></div>\n<br/>\n<p>取得情報をレスポンスにて返却します。</p>\n<div class=\"gatsby-code-title\">mapping-templates/GetUser.res.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>error</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$res</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>result</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span>\n<span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span>$res<span class=\"token punctuation\">)</span></span></code></pre></div>\n<br/>\n<h2 id=\"5-スキーマ作成\"><a href=\"#5-%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E4%BD%9C%E6%88%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. スキーマ作成</h2>\n<p>ユーザー情報（ID、名前）を1件検索するだけのシンプルなスキーマ定義です。\n<code class=\"language-text\">serverless.yml</code>の<code class=\"language-text\">schema</code>で指定した通り、プロジェクトルートに<code class=\"language-text\">schema.graphql</code>ファイルを作成します。</p>\n<div class=\"gatsby-code-title\">schema.graphql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\">type User <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> String\n<span class=\"token punctuation\">}</span>\n\ntype UserResponse <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">user</span><span class=\"token punctuation\">:</span> User\n<span class=\"token punctuation\">}</span>\n\ninput GetUserInput <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\"># ユーザー1件取得</span>\n</span><span class=\"gatsby-highlight-code-line\">type Query <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    user<span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> UserResponse\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span>\n</span></code></pre></div>\n<h2 id=\"6-awsにデプロイ\"><a href=\"#6-aws%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. AWSにデプロイ</h2>\n<p>以下コマンドを実行します。とても簡単にデプロイできます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">serverless deploy -v</code></pre></div>\n<br/>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はAppSync + Serverless FrameworkによるAppSync資産の構成管理についてご紹介しました。\n複数人開発においてGUI操作の場合、意図せず変更が加えられてデグレするリスクがあるので、Serverless Frameworkを使って構成管理するのが得策です。\nまたServerless Frameworkの利点はなんといっても1コマンドでAWSにデプロイという手軽さです。\nAppSync資産だけでなく、Lambdaや他資産もServerless Frameworkで管理できるので、AWSでサーバーレスなアプリを開発するときは是非使ってみてください🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://foobar123.com/building-an-appsync-serverless-framework-backend-foobar-c383a840de0d\">Building an AppSync + Serverless Framework Backend | FooBar</a></li>\n</ul>","fields":{"slug":"/aws-appsync-and-serverless-framework","title":"AppSync + Serverless Frameworkによるソースコードの構成管理","date":"2019-03-04T07:50:00.000+09:00","excerpt":"なにこれAWSのGraphQLマネージドサービス「AppSync」はGUIで簡単に設定ができて便利ですが、本格的に開発を進めていくとGUIポチポチでソースコードを管理するのはつらくなってきます。Serverless Frameworkという...","tags":["AppSync","serverless","AWS","GraphQL"],"keywords":["AppSync"],"thumbnail":"/thumbnail/2019/03/aws-appsync-and-serverless-framework.png"}},{"html":"<p><img src=\"/thumbnail/2019/02/mutliple-validation-errors-in-aws-appsync.png\" alt=\"mutliple-validation-errors-in-aws-appsync\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>AppSyncのリゾルバーでDynamoDBのデータを更新する場合、更新処理の前に入力チェックは必ず実施すると思います。\nこの時、入力チェックエラーを見つけた時点で1つのエラーメッセージを返すより、\nすべてのチェック実施後にまとめてエラーメッセージを返してあげたほうが、AppSyncの呼び出し側としては助かります。\nただ、このやり方は調べてもあまり出てきませんでした。そのため本記事で紹介します。</p>\n<h2 id=\"結論\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>たとえば、人(ID、名前、組織名)を更新する場合</p>\n<div class=\"gatsby-code-title\">人(ID、名前、組織名)を更新するmutation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  updatePerson <span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    id\n    name\n    organizationName\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    person <span class=\"token punctuation\">{</span>\n      id\n      name\n      organizationName\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>以下のようにリクエストマッピングテンプレートのVTLを記述します。</p>\n<div class=\"gatsby-code-title\">複数エラーメッセージを返すVTL</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n</span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n</span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n</span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n</span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#return</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors</span><span class=\"token punctuation\">)</span></span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n</span>\n{\n  \"operation\" : \"PutItem\",\n  \"key\" : {\n    \"id\" : { \"S\" : \"<span class=\"token variable\">$<span class=\"token punctuation\">{</span>ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span>\" }\n  },\n  \"condition\" : {\n    \"expression\" : \"attribute_exists(id)\"\n  },\n  \"attributeValues\" : <span class=\"token variable\">$util<span class=\"token punctuation\">.</span>dynamodb<span class=\"token punctuation\">.</span><span class=\"token function\">toMapValuesJson</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span></span>\n}</code></pre></div>\n<br/>\n<h2 id=\"実際どのようなレスポンスが返ってくるか\"><a href=\"#%E5%AE%9F%E9%9A%9B%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AA%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%81%8C%E8%BF%94%E3%81%A3%E3%81%A6%E3%81%8F%E3%82%8B%E3%81%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実際どのようなレスポンスが返ってくるか</h2>\n<p>以下のmutationを発行してみると...</p>\n<div class=\"gatsby-code-title\">複数の入力チェックエラーになるようなmutation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  updatePerson<span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1234\"</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前\"</span>\n    <span class=\"token attr-name\">organizationName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    person <span class=\"token punctuation\">{</span>\n      id\n      name\n      organizationName\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>複数エラーメッセージを含むレスポンスが返ってきます！</p>\n<div class=\"gatsby-code-title\">複数エラーメッセージを含むレスポンス</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"updatePerson\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"person\"</span><span class=\"token punctuation\">:</span> null\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"errors\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"path\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token string\">\"updatePerson\"</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">:</span> null<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorType\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorInfo\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"locations\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"line\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"column\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"sourceName\"</span><span class=\"token punctuation\">:</span> null\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"message\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"名前は30文字以下で入力してください。\"</span>\n</span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"path\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token string\">\"updatePerson\"</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">:</span> null<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorType\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorInfo\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"locations\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"line\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"column\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"sourceName\"</span><span class=\"token punctuation\">:</span> null\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"message\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span>\n</span>    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h2 id=\"結論に至るまでの試行錯誤\"><a href=\"#%E7%B5%90%E8%AB%96%E3%81%AB%E8%87%B3%E3%82%8B%E3%81%BE%E3%81%A7%E3%81%AE%E8%A9%A6%E8%A1%8C%E9%8C%AF%E8%AA%A4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論に至るまでの試行錯誤</h2>\n<p><a href=\"https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/resolver-util-reference.html\">AppSyncの公式ドキュメント</a>を見ると、<code class=\"language-text\">$util.appendError</code>が使えそうだと思ったのですが、いざ書こうとすると、以下2点につまづきました。</p>\n<ol>\n<li>「1つ以上入力チェックエラーがある」ことをどうやって判定するのか</li>\n<li>複数エラー情報をどうやってレスポンスとして返すのか</li>\n</ol>\n<h3 id=\"1-「1つ以上入力チェックエラーがある」ことをどうやって判定するのか\"><a href=\"#1-%E3%80%8C1%E3%81%A4%E4%BB%A5%E4%B8%8A%E5%85%A5%E5%8A%9B%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E3%81%82%E3%82%8B%E3%80%8D%E3%81%93%E3%81%A8%E3%82%92%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E5%88%A4%E5%AE%9A%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 「1つ以上入力チェックエラーがある」ことをどうやって判定するのか</h3>\n<p>最初に考えたのは、<code class=\"language-text\">#set($valid=true)</code>のようにフラグで判断する方法です。</p>\n<div class=\"gatsby-code-title\">validフラグで判定する方法</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\"><span class=\"gatsby-highlight-code-line\"><span class=\"token velocity-comment comment\">## 事前にフラグを定義しておく</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span></span>\n</span>\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token velocity-comment comment\">## チェックNGの場合はフラグを更新</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span>\n</span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span>\n</span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span>\n</span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span>\n</span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token velocity-comment comment\">## 異常時の処理</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n</span></code></pre></div>\n<br/>\n<p>ただこれだと記述が冗長です。<br/>\nappendErrorしたエラーはどこに格納されているのか？<br/>\n<code class=\"language-text\">$util.error($util.toJson($context))</code>をして<code class=\"language-text\">$context</code>の中身を確認してみると、\nどうやら<code class=\"language-text\">$context.outErrors</code>に格納されているということがわかりました。<br/>\nそれを踏まえて処理を以下のようにリファクタリングしました。</p>\n<div class=\"gatsby-code-title\">validフラグを使わずに判定する方法</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token velocity-comment comment\">## 異常時の処理</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n</span></code></pre></div>\n<br/>\n<h3 id=\"2-複数エラー情報をどうやってレスポンスとして返すのか\"><a href=\"#2-%E8%A4%87%E6%95%B0%E3%82%A8%E3%83%A9%E3%83%BC%E6%83%85%E5%A0%B1%E3%82%92%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%81%A8%E3%81%97%E3%81%A6%E8%BF%94%E3%81%99%E3%81%AE%E3%81%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 複数エラー情報をどうやってレスポンスとして返すのか</h3>\n<p><code class=\"language-text\">$util.appendError</code>はエラーを追加してくれるだけです。<code class=\"language-text\">$util.error</code>は1つのエラー情報しか返してくれません。<br/>\n試行錯誤した結果、<code class=\"language-text\">#return</code>で返せそうだということがわかりました。<br/>\n1の調査結果により<code class=\"language-text\">$util.appendError</code>で詰めたエラー情報は<code class=\"language-text\">$ctx.outErrors</code>に格納されていることがわかっていたので、\nそれら踏まえて以下のようにしました。</p>\n<div class=\"gatsby-code-title\">エラー時に複数エラーメッセージを返すにはreturnを使う</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\">  <span class=\"token directive\"><span class=\"token keyword\">#return</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors</span><span class=\"token punctuation\">)</span></span></code></pre></div>\n<br/>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>VLTは結構めんどくさいですが、ちょっとずつ慣れてきました。\nググってもAppSyncのVTL系の情報は、まだあまり見かけません。そのため今後もノウハウがたまったら記事を書きます🍅</p>","fields":{"slug":"/mutliple-validation-errors-in-aws-appsync","title":"AWS AppSyncで入力チェックエラーを複数返す方法","date":"2019-02-26T07:30:00.000+09:00","excerpt":"なにこれAppSyncのリゾルバーでDynamoDBのデータを更新する場合、更新処理の前に入力チェックは必ず実施すると思います。この時、入力チェックエラーを見つけた時点で1つのエラーメッセージを返すより、すべてのチェック実施後にまとめてエラ...","tags":["AppSync","AWS","GraphQL"],"keywords":["AppSync"],"thumbnail":"/thumbnail/2019/02/mutliple-validation-errors-in-aws-appsync.png"}}],"latestPosts":[{"html":"<p><img src=\"/thumbnail/2019/05/wordcloud-with-kuromoji-d3cloud-nodejs.png\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"/wordcloud-with-kuromoji-d3cloud-react\">前回記事</a>ではReactでWordCloudを出力しました。しかし実際は、過去大量データから出力するようなツールとして使えたほうが便利です。\nそこで<a href=\"https://github.com/Takumon/playbox2019/blob/master/react-kuromoji-sample/src/App.js\">前回のサンプル</a>をベースにNode.jsでWordCloudのSVGファイルを出力するサンプルを作成しました。\n今回はサンプルの実装方法をポイントと合わせてご紹介します。</p>\n<p>※サンプルは以下に置いております。\n<a href=\"https://github.com/Takumon/playbox2019/blob/master/node-kuromoji-d3cloud-sample/index.js\">https://github.com/Takumon/playbox2019/blob/master/node-kuromoji-d3cloud-sample/index.js</a></p>\n<p>この記事は、[challenge-every-month全員でアウトプット芸人 Advent Calendar] 9日目の記事です。<br/>\n前日の記事は、<a href=\"https://twitter.com/kojirock5260\">@kojirock5260</a>さんの記事です。</p>\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fkojirooooocks.hatenablog.com%2Fentry%2F2019%2F05%2F04%2F163742\" style=\"border: 0; width: 100%; height: 190px;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe>\n<h2 id=\"処理手順\"><a href=\"#%E5%87%A6%E7%90%86%E6%89%8B%E9%A0%86\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>処理手順</h2>\n<p>以下4ステップです。</p>\n<ol>\n<li>kuromoji.jsで文章を解析して単語出現回数をデータ化</li>\n<li>\n<p>D3-Cloudで上記データに以下情報追加</p>\n<ol>\n<li>フォントの大きさ</li>\n<li>フォントの回転位置</li>\n<li>フォントの種類</li>\n<li>表示位置</li>\n</ol>\n</li>\n<li>d3.jsで配色を決定しSVGを<strong>仮想DOM</strong>に描画</li>\n<li>SVGをファイル出力</li>\n</ol>\n<h2 id=\"実装のポイント\"><a href=\"#%E5%AE%9F%E8%A3%85%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装のポイント</h2>\n<h3 id=\"1-d3-cloud--canvasだけでは不十分なのでd3jsを使う\"><a href=\"#1-d3-cloud--canvas%E3%81%A0%E3%81%91%E3%81%A7%E3%81%AF%E4%B8%8D%E5%8D%81%E5%88%86%E3%81%AA%E3%81%AE%E3%81%A7d3js%E3%82%92%E4%BD%BF%E3%81%86\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. D3-Cloud + Canvasだけでは不十分なのでd3.jsを使う</h3>\n<p>最初は、D3-CloudでCanvasを使えるので、<a href=\"https://github.com/Automattic/node-canvas\">node-canvas</a>を使えばNode.jsでも画像を生成できるのでは？と考えたのですが、やってみるとうまくいきません。以下のような画像が出力されます。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5c0dfead862a7dffa4699ce66baf1ba5/ca9f3/wordcloud-by-canvas.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 68.43455945252353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABcRAAAXEQHKJvM/AAACb0lEQVQ4y2VU7UrjQBTtG+0+wQo+zSLsD0FsBP/5FL6DoIIb8dfuf8FCwdraNknTpq2dpk36ocZM7tk5GdNd2MDlzNy5c+6Zey+pLa6ufs0ajRsVRa66u3PVfO6qiwtXXV66qtt1VRy7Kghc1em46vraVc2m9TF+NLLYat2+9Ho33w8Pv9bQagHDIcrv+dkifb6P3Xd/D2QZEMdAUfz1v75afHgAPA8n5+f7Ne5NSCZZpqUotAD/m4hFrbXkuZY0tZgkWkajXIKgKOL4o352tldjdtluNXo9YDIB3t+B2Qzo94HBAHh5AR4fgU4HaDSA6RRoNoEwLOOk2xWMxxSlnePjvVIhs++esdkA7bYl73axKwmJ/30uv9WKd6V8pVHvOI4hNEGyXGpst4ZW27pQ4ceHrRuRfip7ewOSBFgsgDQtz2SzEYooCU9OPhWuVrq8THVURkKugwB4erI+ElQJ12ubzJDLbCZcF6b+ViGzrNea8stLNF5gLZdLYD63CfLcEvMlVErF5sw0SHi3MKKc09NPQipkE6p6VQ0iGRMxAUeGjWEt+WT6DbkRI0xQmMZaQhHIZKLLuYsiS0YbjSyJUtZYOyahn6VgvEEZDoX3ijDUTr1uCFmHdluL54lEkYjvi5ktYWC5H4/tmhYEIoOBGAEWw7D0l2MznWrn6MgQUnYUZaJUbgJzQ5CbYIscWvrm89wUP5fFIpc4zmU6tZgkpZkS6CJJsnq9/q22mz0Wmh1kM2jVnsaGVD52l1jF8Zw+g0bhfm3jeb8Tz7tJ+323NPMjSD3PrgcDi77vpr2exeqcGIbW5/u3yzD8+ePg4Msfq80DXTye9xsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wordcloud by canvas\"\n        title=\"\"\n        src=\"/static/5c0dfead862a7dffa4699ce66baf1ba5/fb8a0/wordcloud-by-canvas.png\"\n        srcset=\"/static/5c0dfead862a7dffa4699ce66baf1ba5/1a291/wordcloud-by-canvas.png 148w,\n/static/5c0dfead862a7dffa4699ce66baf1ba5/2bc4a/wordcloud-by-canvas.png 295w,\n/static/5c0dfead862a7dffa4699ce66baf1ba5/fb8a0/wordcloud-by-canvas.png 590w,\n/static/5c0dfead862a7dffa4699ce66baf1ba5/526de/wordcloud-by-canvas.png 885w,\n/static/5c0dfead862a7dffa4699ce66baf1ba5/ca9f3/wordcloud-by-canvas.png 1169w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>そのためD3-Cloud + Canvasだけの組み合わせはあきらめて、\n<a href=\"https://github.com/Yoctol/react-d3-cloud\">react-d3-cloud</a>の内部実装と同じようにd3.jsを使ってSVGを描画して、そこからファイル出力処理するようにしました。</p>\n<h3 id=\"2-domエミュレート用にnode-canvasとjsdomを使う\"><a href=\"#2-dom%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%83%88%E7%94%A8%E3%81%ABnode-canvas%E3%81%A8jsdom%E3%82%92%E4%BD%BF%E3%81%86\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. DOMエミュレート用にnode-canvasとjsdomを使う</h3>\n<p><a href=\"https://github.com/d3/d3\">d3.js</a>は、ブラウザ上での動作を前提としているためDOMが必要です。Node.jsでDOMをエミュレートするために<a href=\"https://github.com/jsdom/jsdom\">jsdom</a>を使いました。<br/>\n<a href=\"https://github.com/jasondavies/d3-cloud\">D3-Cloud</a>も同様にCanvasの指定が必須です。\nそのためCanvasをエミュレートする<a href=\"https://github.com/Automattic/node-canvas\">node-canvas</a>を使いました。</p>\n<h2 id=\"実装\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h2>\n<p>ポイントを踏まえたうえで4ステップごとに実装方法を説明します。</p>\n<h3 id=\"1-kuromojijsで文章を解析して単語出現回数をデータ化\"><a href=\"#1-kuromojijs%E3%81%A7%E6%96%87%E7%AB%A0%E3%82%92%E8%A7%A3%E6%9E%90%E3%81%97%E3%81%A6%E5%8D%98%E8%AA%9E%E5%87%BA%E7%8F%BE%E5%9B%9E%E6%95%B0%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%E5%8C%96\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. kuromoji.jsで文章を解析して単語出現回数をデータ化</h3>\n<p>kuromoji.jsによるデータ加工については<a href=\"/wordcloud-with-kuromoji-d3cloud-react#1-%E6%96%87%E7%AB%A0%E3%82%92%E8%A7%A3%E6%9E%90%E3%81%97%E3%81%A6%E5%8D%98%E8%AA%9E%E5%87%BA%E7%8F%BE%E5%9B%9E%E6%95%B0%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%E5%8C%96-1\">前回記事のReactアプリ</a>と同様です。\n今回はブラウザではなくNode.jsで動かすのでkuromoji.jsの辞書はnode_modules配下から移動する必要はありません。</p>\n<div class=\"gatsby-code-title\">kuromoji.jsによる解析処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> kuromoji <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kuromoji'</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\">// インプットとなる文章(長文につき一部省略)</span>\n<span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`\nそこも場合もうその病気らに対して旨の時がしんませ。\n単に事実に使用方はどうかその応用たないでもが思いてならないがも発展思いうべきて、\nあいにくにもなるだなですた。\n・・・\n`</span></span>\n\n<span class=\"token comment\">// kuromoji.jsにバンドルされている辞書のフォルダパス</span>\n<span class=\"token comment\">// kuromoji.jsは形態素解析用関数を生成する際に辞書を読み込む</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">'node_modules/kuromoji/dict'</span>\n\n<span class=\"token comment\">// WordCloudの情報として抽出する品詞（助詞、助動詞などは意味がないので拾わない）</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TARGET_POS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'名詞'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'動詞'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'形容詞'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">// kuromoji.jsの解析結果の値で特に値がない場合は以下の文字が設定される</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">=</span> <span class=\"token string\">'*'</span>\n\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// kuromoji.jsによる解析処理</span>\n  <span class=\"token keyword\">const</span> words <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 辞書を読み混んでトークナイザー（形態素解析するための関数）を生成</span>\n    kuromoji<span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> dicPath<span class=\"token punctuation\">:</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> tokenizer<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// テキストを引数にして形態素解析</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>tokenizer<span class=\"token punctuation\">.</span><span class=\"token function\">tokenize</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// pos（品詞）を参照し、'名詞', '動詞', '形容詞'のみを抽出</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> <span class=\"token constant\">TARGET_POS</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// 単語を抽出(basic_formかsurface_formに単語が存在する)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> t<span class=\"token punctuation\">.</span>basic_form <span class=\"token operator\">===</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">?</span> t<span class=\"token punctuation\">.</span>surface_form <span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">.</span>basic_form<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// [{text: 単語, size: 出現回数}]の形にReduce</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">=></span> c<span class=\"token punctuation\">.</span>text <span class=\"token operator\">===</span> text<span class=\"token punctuation\">)</span>\n\n          <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            target<span class=\"token punctuation\">.</span>size <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>size <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            data<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              text<span class=\"token punctuation\">,</span>\n              size<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n          <span class=\"token keyword\">return</span> data\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n\n  <span class=\"token comment\">// D3-Cloudによる解析処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// d3.jsによる描画処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// SVGファイル出力処理</span>\n  <span class=\"token comment\">// (略)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br/>\n<p>これで以下のような情報が得られます。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span> \n  <span class=\"token punctuation\">{</span>\n    text<span class=\"token punctuation\">:</span> <span class=\"token string\">'相違'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 単語</span>\n    size<span class=\"token punctuation\">:</span> <span class=\"token number\">19</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 出現回数</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<br/>\n<h3 id=\"2-d3-cloudで上記データに以下情報追加\"><a href=\"#2-d3-cloud%E3%81%A7%E4%B8%8A%E8%A8%98%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AB%E4%BB%A5%E4%B8%8B%E6%83%85%E5%A0%B1%E8%BF%BD%E5%8A%A0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. D3-Cloudで上記データに以下情報追加</h3>\n<p>D3-Cloudでは解析情報に以下を追加するだけです。</p>\n<ul>\n<li>フォントの回転位置 ☚自分で定義</li>\n<li>フォントの重み ☚自分で定義</li>\n<li>フォントの大きさ ☚自分で定義</li>\n<li>フォントの種類 ☚自分で定義</li>\n<li>表示位置 ☚D3-Cloudが定義してくれる</li>\n</ul>\n<p>なおD3-CloudはbodyタグかCanvasが必須なので、今回は<a href=\"https://github.com/Automattic/node-canvas\">node-canvas</a>を使います。</p>\n<div class=\"gatsby-code-title\">D3-Cloudによる解析処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> cloud <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d3-cloud'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// Node.jsでCanvasをエミュレートするためnode-canvasを使う</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createCanvas <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'canvas'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Canvasの幅(px)</span>\n<span class=\"token keyword\">const</span> w <span class=\"token operator\">=</span> <span class=\"token number\">1600</span>\n\n<span class=\"token comment\">// Canvasの高さ(px)</span>\n<span class=\"token keyword\">const</span> h <span class=\"token operator\">=</span> <span class=\"token number\">1000</span>\n\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// kuromoji.jsによる解析処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// D3-Cloudによる解析処理</span>\n  <span class=\"token comment\">// D3-Cloudの解析によってwordsForCloudには</span>\n  <span class=\"token comment\">// 出現回数の他にフォントの回転位置、大きさ、重み、種類が追加された状態になる</span>\n  <span class=\"token keyword\">const</span> wordsForCloud <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span>resolve <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">cloud</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// node-canvasを指定する(エラーを防ぐため)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">canvas</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">createCanvas</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// kuromoji.jsの解析結果を指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">words</span><span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの回転位置を指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>word <span class=\"token operator\">=></span> word<span class=\"token punctuation\">.</span>size <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの重みを指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fontWeight</span><span class=\"token punctuation\">(</span>word <span class=\"token operator\">=></span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">,</span> <span class=\"token number\">1.3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの大きさを指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fontSize</span><span class=\"token punctuation\">(</span>word <span class=\"token operator\">=></span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">,</span> <span class=\"token number\">1.3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの種類を指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">font</span><span class=\"token punctuation\">(</span><span class=\"token string\">'meiryo'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 加工終了時のイベント登録、解析結果をd3.jsでの描画に引き継ぐ</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 解析開始</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// d3.jsによる描画処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// SVGファイル出力処理</span>\n  <span class=\"token comment\">// (略)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br/>\n<p>これで以下のような情報が得られます。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> \n    text<span class=\"token punctuation\">:</span> <span class=\"token string\">'相違'</span><span class=\"token punctuation\">,</span>\n    size<span class=\"token punctuation\">:</span> <span class=\"token number\">19</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// D3-Cloudによって追加された情報</span>\n    font<span class=\"token punctuation\">:</span> <span class=\"token string\">'meiryo'</span><span class=\"token punctuation\">,</span>\n    style<span class=\"token punctuation\">:</span> <span class=\"token string\">'normal'</span><span class=\"token punctuation\">,</span>\n    weight<span class=\"token punctuation\">:</span> <span class=\"token number\">19.952623149688797</span><span class=\"token punctuation\">,</span>\n    rotate<span class=\"token punctuation\">:</span> <span class=\"token number\">90</span><span class=\"token punctuation\">,</span>\n    padding<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    width<span class=\"token punctuation\">:</span> <span class=\"token number\">64</span><span class=\"token punctuation\">,</span>\n    height<span class=\"token punctuation\">:</span> <span class=\"token number\">59</span><span class=\"token punctuation\">,</span>\n    xoff<span class=\"token punctuation\">:</span> <span class=\"token number\">192</span><span class=\"token punctuation\">,</span>\n    yoff<span class=\"token punctuation\">:</span> <span class=\"token number\">957</span><span class=\"token punctuation\">,</span>\n    x1<span class=\"token punctuation\">:</span> <span class=\"token number\">32</span><span class=\"token punctuation\">,</span>\n    y1<span class=\"token punctuation\">:</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span>\n    x0<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span>\n    y0<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">22</span><span class=\"token punctuation\">,</span>\n    hasText<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    x<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">199</span><span class=\"token punctuation\">,</span>\n    y<span class=\"token punctuation\">:</span> <span class=\"token number\">294</span> \n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3 id=\"3-d3jsで配色を決定しsvgを仮想domに描画\"><a href=\"#3-d3js%E3%81%A7%E9%85%8D%E8%89%B2%E3%82%92%E6%B1%BA%E5%AE%9A%E3%81%97svg%E3%82%92%E4%BB%AE%E6%83%B3dom%E3%81%AB%E6%8F%8F%E7%94%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. d3.jsで配色を決定しSVGを<strong>仮想DOM</strong>に描画</h3>\n<p>D3-Cloudの解析情報に文字色や配置情報を追加してSVGを仮想DOM上に描画します。\n仮想DOMは<a href=\"https://github.com/jsdom/jsdom\">jsdom</a>を使って生成します。<br/>\nフォント色のテーマは<code class=\"language-text\">schemeCategory10</code>を使いました。他にもいろいろテーマがあるようです。<br/>\n参考：<a href=\"https://wizardace.com/d3v5-scale-chromatic/\">D3.js v5 カラーテーマまとめ (d3-scale-chromatic) – データビジュアライゼーション・ラボ</a></p>\n<div class=\"gatsby-code-title\">d3.jsによるSVG描画処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> d3 <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d3'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">JSDOM</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jsdom\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 仮想documentオブジェクトを生成</span>\n<span class=\"token keyword\">const</span> document <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JSDOM</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`&lt;body>&lt;/body>`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document\n\n<span class=\"token comment\">// WordCloud描画領域の幅(px) ※Canvasのやつを使いまわし</span>\n<span class=\"token keyword\">const</span> w <span class=\"token operator\">=</span> <span class=\"token number\">1600</span>\n\n<span class=\"token comment\">// WordCloud描画領域の高さ(px) ※Canvasのやつを使いまわし</span>\n<span class=\"token keyword\">const</span> h <span class=\"token operator\">=</span> <span class=\"token number\">1000</span>\n\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// kuromoji.jsによる形態素解析</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// D3-Cloudによる解析処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// d3.jsによるSVG描画処理</span>\n  <span class=\"token comment\">// 仮想DOMのbodyタグを指定</span>\n  d3<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// SVG形式で仮想DOMに描画</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'svg'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// SVGのプロパティもろもろ指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ui fluid image'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'viewBox'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`0 0 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>w<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>h<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// SVGのグループ要素追加して</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// SVGを中央寄せ</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>w<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>h<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// テキスト要素にD3-Cloudによる解析結果を追加</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>wordsForCloud<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 領域を新規作成し、テキスト要素追加</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの大きさは解析結果通りに指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-size'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>size<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの種類は解析結果通りに指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-family'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> d<span class=\"token punctuation\">.</span>font<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// フォントの配色は、schemeCategory10を指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fill'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> d3<span class=\"token punctuation\">.</span>schemeCategory10<span class=\"token punctuation\">[</span>i <span class=\"token operator\">%</span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// テキストの真ん中を表示位置のポイントに指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text-anchor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'middle'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 位置と回転位置は解析結果通りに指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token string\">`translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>x<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>y<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)rotate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>rotate<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 単語は解析結果通りに指定</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>d <span class=\"token operator\">=></span> d<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// SVGファイル出力処理</span>\n    <span class=\"token comment\">// (略)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br/>\n<h3 id=\"4-svgをファイル出力\"><a href=\"#4-svg%E3%82%92%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%87%BA%E5%8A%9B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. SVGをファイル出力</h3>\n<p>仮想DOMに描画したSVGをファイル出力します。</p>\n<div class=\"gatsby-code-title\">d3.jsによるSVG描画処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// kuromoji.jsによる形態素解析</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// D3-Cloudによる解析処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// d3.jsによるSVG描画処理</span>\n  <span class=\"token comment\">// (略)</span>\n\n  <span class=\"token comment\">// 仮想DOMに描画されたSVGをファイル出力</span>\n  fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'wordcloud.svg'</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br/>\n<p>すると以下のようなファイルが出力されます。</p>\n<div class=\"gatsby-highlight\" data-language=\"html:svgファイルの中身\"><pre class=\"language-html:svgファイルの中身\"><code class=\"language-html:svgファイルの中身\">&lt;svg class=&quot;ui fluid image&quot; viewBox=&quot;0 0 1600 1000&quot; width=&quot;100%&quot; height=&quot;100%&quot;&gt;\n  &lt;g transform=&quot;translate(800,500)&quot;&gt;\n    &lt;text style=&quot;font-size: 466px; font-family: meiryo; fill: #1f77b4;&quot; transform=&quot;translate(48, 35)rotate(0)&quot; text-anchor=&quot;middle&quot;&gt;ある&lt;/text&gt;\n    &lt;text style=&quot;font-size: 269px; font-family: meiryo; fill: #ff7f0e;&quot; transform=&quot;translate(460, 15)rotate(90)&quot; text-anchor=&quot;middle&quot;&gt;よう&lt;/text&gt;&lt;text style=&quot;font-size: 245px; font-family: meiryo; fill: #2ca02c;&quot; transform=&quot;translate(-263, -290)rotate(0)&quot; text-anchor=&quot;middle&quot;&gt;云う&lt;/text&gt;\n    &lt;text style=&quot;font-size: 191px; font-family: meiryo; fill: #d62728;&quot; transform=&quot;translate(-265, 193)rotate(0)&quot; text-anchor=&quot;middle&quot;&gt;それ&lt;/text&gt;\n   ・\n   ・\n   ・\n  &lt;/g&gt;\n&lt;/svg&gt;</code></pre></div>\n<br/>\n<p>描画すると以下のようになります。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8a36774cbb4d037a3d625981f5f8af21/fd114/wordcloud.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.92315959161742%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACn0lEQVQ4y41Ty27aQBTlm7uousqqldouuqiqquori1ap0rxQWuXZhKAICISJIbYhEBwwNgSDPTbmDZ45HdNGoavmSkcz9/rO8RnNPRFZlj/5vq9SSs9dzyPUcQjtdIjIiUNd4onawO8Sv+uRnoAj6h3bIR2HEtd1F3HhOM55pNlsprAQLJEAy2YBSQIKyrzWHgJTsXpT/DcihmHE5kRBELazfkFlfUVi/UuVST9jbONIYd/zLVaw+kwxPZbTHRYlJtsiBgMHC88IBOEqYhoxTTMeEnLOA1GAYZioynlcX5Xx7iCPx2sJvI+m4WtVlGgXSkXDi+gFllO6YBmjqldhWRYXPBiPx8E/hOKPcLo2rksKqFbGt2QJTzYJXq2dYfOAIN6w8FHUltYy2M7c4KhooG7ouG1ZvGW1MZlO7wmFulA2CnYFA/8Ge5cWnm7n8WglAegKlo+ziOVyeLMvYeVEwWW+itd7GkZa+D3B5xyzyT2hkBiMZwHOvS7oZIgTxcDLXRW/5Ao2Ygre7h+jYXzBsZrBs3WCpdUzJMsU0A4RxJ9zlHbEA9gLVwYP+IwhXbahOz76po5eowVbs6BVOqhr4orqNrJmDOkawVd5HfWyClorYdTJcN5rhq+zoFAk3c4QuUMdRrGFy0QdLc1GIaXBruhQdIIfhV3Eaykk6idYlj9AIqfwKiqGvSLntVOh0Fkk5MGoP4FnTzBqVuBe1dFQhLJyS7ywhXSJIClHkS3u4LbtCKUZjKYMrJEHk1c51C2wAQ3u51DMkCD9M1eexjh1WV/tsFGFskHBZk3FZmPtgo1NldH29G7+GA8xcMVMMjEmmIZOSeIhMXtQFyLCy5+Fl4uhd4UfpTkonYPe5Z5A15Oo9zcXoGHPfE/v9jnhZfIbALe0xkdR0eEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wordcloud\"\n        title=\"\"\n        src=\"/static/8a36774cbb4d037a3d625981f5f8af21/fb8a0/wordcloud.png\"\n        srcset=\"/static/8a36774cbb4d037a3d625981f5f8af21/1a291/wordcloud.png 148w,\n/static/8a36774cbb4d037a3d625981f5f8af21/2bc4a/wordcloud.png 295w,\n/static/8a36774cbb4d037a3d625981f5f8af21/fb8a0/wordcloud.png 590w,\n/static/8a36774cbb4d037a3d625981f5f8af21/526de/wordcloud.png 885w,\n/static/8a36774cbb4d037a3d625981f5f8af21/fa2eb/wordcloud.png 1180w,\n/static/8a36774cbb4d037a3d625981f5f8af21/08f6a/wordcloud.png 1770w,\n/static/8a36774cbb4d037a3d625981f5f8af21/fd114/wordcloud.png 1861w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>Node.jsでWordCloudのSVGファイルを出力する方法についてご紹介しました。\n今回の実装で、ブラウザ処理はnode-canvasとjsdomを使えばNode.jsでも再現できることがわかったので、いろんな場面で応用できそうです。\n次回は、今回の実装をベースにして自分のブログのWordCloudを生成してみようと思います🍅</p>","fields":{"slug":"/wordcloud-with-kuromoji-d3cloud-nodejs","title":"Node.js + kuromoji.js + D3-CloudでWordCloudの画像を出力","date":"2019-05-04T18:00:00.000+09:00","excerpt":"なにこれ前回記事ではReactでWordCloudを出力しました。しかし実際は、過去大量データから出力するようなツールとして使えたほうが便利です。そこで前回のサンプルをベースにNode.jsでWordCloudのSVGファイルを出力するサン...","tags":["Node.js","kuromoji.js","d3.js","d3Cloud","形態素解析","WordCloud"],"keywords":["WordCloud"],"thumbnail":"/thumbnail/2019/05/wordcloud-with-kuromoji-d3cloud-nodejs.png"}},{"html":"<p><img src=\"/thumbnail/2019/05/wordcloud-with-kuromoji-d3cloud-react.png\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>WordCloudをJSだけで生成したい。Pythonとか使わずにフロントエンドだけでやりたい。というモチベーションで、\n<a href=\"https://github.com/takuyaa/kuromoji.js/\">kuromoji.js</a>と<a href=\"https://github.com/jasondavies/d3-cloud\">D3-Cloud</a>を使って文字列をインプットにWordCloudを描画するReactアプリを作ってみました。今回はそのやり方についてご紹介します。</p>\n<p>※サンプルコードは以下に置いております。\n<a href=\"https://github.com/Takumon/playbox2019/blob/master/react-kuromoji-sample/src/App.js\">https://github.com/Takumon/playbox2019/blob/master/react-kuromoji-sample/src/App.js</a></p>\n<h2 id=\"wordcloudの作り方（原理）\"><a href=\"#wordcloud%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9%EF%BC%88%E5%8E%9F%E7%90%86%EF%BC%89\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WordCloudの作り方（原理）</h2>\n<p>WordCloudは文章をインプットにして画像をアウトプットします。\nその過程は2つに分かれます。</p>\n<h3 id=\"1-文章を解析して単語出現回数をデータ化\"><a href=\"#1-%E6%96%87%E7%AB%A0%E3%82%92%E8%A7%A3%E6%9E%90%E3%81%97%E3%81%A6%E5%8D%98%E8%AA%9E%E5%87%BA%E7%8F%BE%E5%9B%9E%E6%95%B0%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%E5%8C%96\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 文章を解析して単語出現回数をデータ化</h3>\n<div class=\"gatsby-code-title\">たとえばこんな文章を...</div>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">そこも場合もうその病気らに対して旨の時がしんませ。単に事実に使用方はどうかその応用たないでもが思いてならないがも発展思いうべきて、あいにくにもなるだなですた。\n差が向いんものは何だか翌日からしきりにんなけれう。もちろんネルソンさんで養成道具一応束縛に致しませ示威この力誰か講演をというご妨害ないますですうば、\n...</code></pre></div>\n<p>↓↓</p>\n<div class=\"gatsby-code-title\">単語と出現回数のデータに加工します</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"そこ\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">14</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"場合\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">11</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"うそ\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"病気\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ら\"</span><span class=\"token punctuation\">,</span>      value<span class=\"token punctuation\">:</span> <span class=\"token number\">17</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"旨\"</span><span class=\"token punctuation\">,</span>      value<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"時\"</span><span class=\"token punctuation\">,</span>      value<span class=\"token punctuation\">:</span> <span class=\"token number\">43</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"しん\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"事実\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"使用\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"方\"</span><span class=\"token punctuation\">,</span>      value<span class=\"token punctuation\">:</span> <span class=\"token number\">41</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"応用\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ない\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">175</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"思う\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">39</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"なる\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">99</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"発展\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">13</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"思い\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"くる\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"差\"</span><span class=\"token punctuation\">,</span>      value<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"向く\"</span><span class=\"token punctuation\">,</span>    value<span class=\"token punctuation\">:</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h3 id=\"2-データをもとにイイ感じの画像出力\"><a href=\"#2-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%82%E3%81%A8%E3%81%AB%E3%82%A4%E3%82%A4%E6%84%9F%E3%81%98%E3%81%AE%E7%94%BB%E5%83%8F%E5%87%BA%E5%8A%9B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. データをもとにイイ感じの画像出力</h3>\n<p>単語と出現回数の他に、以下の値を何らかの形で決定します。</p>\n<ul>\n<li>フォントの大きさ</li>\n<li>フォントの回転位置</li>\n<li>フォントの種類</li>\n<li>フォントの色</li>\n<li>表示位置</li>\n</ul>\n<p>大体のWordCloud系ライブラリは出現回数が多い単語を大きく中心に配置し、\nその周りに敷き詰めるように他の単語を配置します。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/704eab6cfb822de63938be47f6ccc745/07c6b/wordcloud-sample.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 86.17511520737328%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEN0lEQVQ4yyWU2ZLaOBiFedh5jKnKzTzAZKlUkqlM1WRykUy2Jkl3oE3T0BCaZnWz2CzeMDYI4xVjVokz6pkLVUkq1dH5z/9JqVqt+ps8UEv67bcsEV4JknQujPWyYNYtYd7VhPPmUPhQuBc+l7vCuKkKYlkXKgVFsHq2oMuGIM0sQTLMS9G08oXr/B8pfaJmElDAk4GggwPtANAA38GBzypagCtljaK+BjYJMDWwnS4Al48dsOCHrpMDsntAnVrDlKKrX2J46FjuPtNzqBN6FPXXdFN6TOP+GUX5Gd1rt9RZULpW7ikdXfO9x5QJjyghEZ30lrQer4/fnBX0yaTFBfX0ihus6z59faOgSxIwuwX88wu2ioyd2Qda72FrBwTOFofOBZB9BDrMwtQXELtLlMOI1dd7qBNTTOnKIL3ZbuG5SzoxfUx9XkP5d5zyjxG5wF6q4zD+jiD2cGp9xKn5N0Iy5Rf1wC6f4qrt4OncZe+5Q8WYiKmBYaaxMQE5TQ9yxEOZAtWXYPWPWBMeYr+AQ+UJ9pEKGHdA8w1Y7S9suzkcf76G2rfQNm023B5h2JaYMq1ZGojBnDlddV3stBjHmQ8ot3B5ST+aI0Did9oq4rmBXeMTWOUVj+EtwvMzxIUbhLkLhukceksRUxPDSD+0a+25lHgBvAmB1mhi1GzAHUn40LDx5X4JlkSg6xAnsQ10qtisXC74FYmi4Z19wfSlBruucoezB4dAqOvU7XXhzWxIlSLk2xLEXAaRYyPdUPHkUsZZ08DFzQjS3U9g3sLJkXA8HaGM79ghjmDoNhdUlTT4wiczSrhtSzOgik1M+h30Sjc4xhZahoVfP/bxtqTiTV2GZi4QnIDVbIYke4koV2TeeIT+fVtMGaqaDuIjnNDnDI7h+3MMK2W0C1ewe1XkJQvP8yr0iCPlVPFO+hOZ8Rl6wQx9R0ZnVMQ+3rLIIZDbXPCBw2H4QHmNRlEFy1kNarOOAS9r1OvgWW6EwF/CUmV8H1zgfe8DvqtZtMZFTDhS91Yf69wVY4MhzAcOp6b5X4Z+4tE4GcI2yxjVb9Et5FC7+AZ7NsdIV7EJYrSsBl7WXnDBDHp6FUG2gFbAX+3XNFvlrtAQRTFlTf8XHIcLmtXSkAyRt7+BXjmPTukaoesiNkwUjDyyhoBz5RxfRmf4oWU4Oh2Qz58QZ/Jst3BQ7Mscm8nk7MgFJ6vloU7qbLQYMF28Z91iiS3sGVsJOeY/f8FUtc9K8k8mKS12J92wxlxmBS9hmqYxz0rTFULkh2Y7Zc/ccyDCet3H1CYgxMRxw2ANtsD2BDoYgIeDcOnxD8bDjrPKfwVsky3SXgL+rhAH19idljxXuZfSFO3NLiFxHM7tuWmTqaIQf7Eg/tIn8dIlG8chh+OO7OKYROuEbOINOUYLkng2WUcrkkQB2SSHubucebe9av5fm6Gzz267ZFMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wordcloud sample\"\n        title=\"\"\n        src=\"/static/704eab6cfb822de63938be47f6ccc745/fb8a0/wordcloud-sample.png\"\n        srcset=\"/static/704eab6cfb822de63938be47f6ccc745/1a291/wordcloud-sample.png 148w,\n/static/704eab6cfb822de63938be47f6ccc745/2bc4a/wordcloud-sample.png 295w,\n/static/704eab6cfb822de63938be47f6ccc745/fb8a0/wordcloud-sample.png 590w,\n/static/704eab6cfb822de63938be47f6ccc745/07c6b/wordcloud-sample.png 868w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"wordcloudの作り方（実装）\"><a href=\"#wordcloud%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9%EF%BC%88%E5%AE%9F%E8%A3%85%EF%BC%89\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WordCloudの作り方（実装）</h2>\n<p>自前実装の必要はありません。<a href=\"https://github.com/takuyaa/kuromoji.js/\">kuromoji.js</a>と<a href=\"https://github.com/jasondavies/d3-cloud\">D3-Cloud</a>というライブラリを使えば簡単に実装できます。\nさらに<a href=\"https://github.com/Yoctol/react-d3-cloud\">react-d3-cloud</a>というD3-CloudをReactで使うためのライブラリもあったので、それを使ってReactアプリを実装します。</p>\n<h3 id=\"1-文章を解析して単語出現回数をデータ化-1\"><a href=\"#1-%E6%96%87%E7%AB%A0%E3%82%92%E8%A7%A3%E6%9E%90%E3%81%97%E3%81%A6%E5%8D%98%E8%AA%9E%E5%87%BA%E7%8F%BE%E5%9B%9E%E6%95%B0%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%E5%8C%96-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 文章を解析して単語出現回数をデータ化</h3>\n<p>kuromoji.jsは形態素解析で辞書を使います。\nkuromoji.jsをインストールすると辞書がバンドルされています。\nReactで使う場合は以下のように辞書の場所を移動して、辞書をブラウザから読み込めるようにしておく必要があります。</p>\n<div class=\"gatsby-code-title\">辞書をブラウザから読み込める場所にコピー</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cp</span> -a node_modules/kuromoji/dict public/</code></pre></div>\n<br/>\n<p>kuromoji.jsの解析結果は以下のようになります。\n色々ありますが、今回は<code class=\"language-text\">pos（品詞）</code>と<code class=\"language-text\">surface_form（表層形）</code>または<code class=\"language-text\">basic_form（基本形）</code>のみを使います。</p>\n<div class=\"gatsby-code-title\">kuromoji.js解析結果の形式</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n  word_id<span class=\"token punctuation\">:</span> <span class=\"token number\">509800</span><span class=\"token punctuation\">,</span>          <span class=\"token comment\">// 辞書内での単語ID</span>\n  word_type<span class=\"token punctuation\">:</span> <span class=\"token string\">'KNOWN'</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\">// 単語タイプ(辞書に登録されている単語ならKNOWN, 未知語ならUNKNOWN)</span>\n  word_position<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>         <span class=\"token comment\">// 単語の開始位置</span>\n  surface_form<span class=\"token punctuation\">:</span> <span class=\"token string\">'黒文字'</span><span class=\"token punctuation\">,</span>    <span class=\"token comment\">// 表層形</span>\n  pos<span class=\"token punctuation\">:</span> <span class=\"token string\">'名詞'</span><span class=\"token punctuation\">,</span>               <span class=\"token comment\">// 品詞</span>\n  pos_detail_1<span class=\"token punctuation\">:</span> <span class=\"token string\">'一般'</span><span class=\"token punctuation\">,</span>      <span class=\"token comment\">// 品詞細分類1</span>\n  pos_detail_2<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>        <span class=\"token comment\">// 品詞細分類2</span>\n  pos_detail_3<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>        <span class=\"token comment\">// 品詞細分類3</span>\n  conjugated_type<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>     <span class=\"token comment\">// 活用型</span>\n  conjugated_form<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>     <span class=\"token comment\">// 活用形</span>\n  basic_form<span class=\"token punctuation\">:</span> <span class=\"token string\">'黒文字'</span><span class=\"token punctuation\">,</span>      <span class=\"token comment\">// 基本形</span>\n  reading<span class=\"token punctuation\">:</span> <span class=\"token string\">'クロモジ'</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\">// 読み</span>\n  pronunciation<span class=\"token punctuation\">:</span> <span class=\"token string\">'クロモジ'</span>  <span class=\"token comment\">// 発音</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span></code></pre></div>\n<br/>\n<p>Reactコンポーネントでは以下のように実装します。</p>\n<div class=\"gatsby-code-title\">テキスト加工処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> kuromoji <span class=\"token keyword\">from</span> <span class=\"token string\">'kuromoji'</span>\n\n<span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`そこも場合もうその病気らに対して旨の時がしんませ。\n単に事実に使用方はどうかその応用たないでもが思いてならないがも発展思いうべきて、\n...\n`</span></span>\n\n<span class=\"token comment\">// 辞書格納フォルダパス</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">'/dict'</span>\n\n<span class=\"token comment\">// WordCloudの情報として抽出する品詞（助詞、助動詞などは意味がないので拾わない）</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TARGET_POS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'名詞'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'動詞'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'形容詞'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">// kuromoji.jsの解析結果の値で特に値がない場合は以下の文字が設定される</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">=</span> <span class=\"token string\">'*'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// kuromoji.jsによる形態素解析は非同期なので</span>\n  <span class=\"token comment\">// 解析結果はstateのプロパティとしてコンストラクタで初期化しておく</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n      dataForD3Cloud<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 辞書を読み混んでトークナイザー（形態素解析するための関数）を生成</span>\n    kuromoji<span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> dicPath<span class=\"token punctuation\">:</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> tokenizer<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// テキストを引数にして形態素解析</span>\n      <span class=\"token keyword\">const</span> tokens <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span><span class=\"token function\">tokenize</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n\n      <span class=\"token comment\">// 解析結果から単語と出現回数を抽出</span>\n      <span class=\"token keyword\">const</span> dataForD3Cloud <span class=\"token operator\">=</span> tokens\n        <span class=\"token comment\">// pos（品詞）を参照し、'名詞', '動詞', '形容詞'のみを抽出</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> <span class=\"token constant\">TARGET_POS</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// 単語を抽出(basic_formかsurface_formに単語が存在する)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>t <span class=\"token operator\">=></span> t<span class=\"token punctuation\">.</span>basic_form <span class=\"token operator\">===</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">?</span> t<span class=\"token punctuation\">.</span>surface_form <span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">.</span>basic_form<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// [{text: 単語, value: 出現回数}]の形にReduce</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">=></span> c<span class=\"token punctuation\">.</span>text <span class=\"token operator\">===</span> text<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            target<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            data<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              text<span class=\"token punctuation\">,</span>\n              value<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n          <span class=\"token keyword\">return</span> data\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      \n      <span class=\"token comment\">// 加工した解析結果をstateにセット</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>dataForD3Cloud<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 略</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"2-データをもとにイイ感じの画像出力-1\"><a href=\"#2-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%82%E3%81%A8%E3%81%AB%E3%82%A4%E3%82%A4%E6%84%9F%E3%81%98%E3%81%AE%E7%94%BB%E5%83%8F%E5%87%BA%E5%8A%9B-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. データをもとにイイ感じの画像出力</h3>\n<p><a href=\"https://github.com/Yoctol/react-d3-cloud\">react-d3-cloud</a>が専用のコンポーネントを提供しているのでそれを使うだけです。</p>\n<div class=\"gatsby-code-title\">WordCloud描画処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> WordCloud <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-d3-cloud\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// フォントの大きさを決める関数</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fontSizeMapper</span> <span class=\"token operator\">=</span> word <span class=\"token operator\">=></span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span>\n\n<span class=\"token comment\">// フォントの回転位置</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">rotate</span> <span class=\"token operator\">=</span> word <span class=\"token operator\">=></span> word<span class=\"token punctuation\">.</span>value <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">90</span>\n\n<span class=\"token comment\">// フォントの種類</span>\n<span class=\"token keyword\">const</span> fontFamily <span class=\"token operator\">=</span> <span class=\"token string\">'meiryo'</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 略</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 略</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>WordCloud\n          data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>dataForD3Cloud<span class=\"token punctuation\">}</span>\n          fontSizeMapper<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>fontSizeMapper<span class=\"token punctuation\">}</span>\n          rotate<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>rotate<span class=\"token punctuation\">}</span>\n          font<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>fontFamily<span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>さて、ここで疑問を持たれる方もいると思います。\n前述の<a href=\"#2-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%82%E3%81%A8%E3%81%AB%E3%82%A4%E3%82%A4%E6%84%9F%E3%81%98%E3%81%AE%E7%94%BB%E5%83%8F%E5%87%BA%E5%8A%9B\">WordCloudの作り方（原理）> 2. データをもとにイイ感じの画像出力</a>で画像出力するには以下を決定する必要があると述べました。</p>\n<ol>\n<li>フォントの大きさ・・・・・☚コンポーネントで定義した👍</li>\n<li>フォントの回転位置・・・・☚コンポーネントで定義した👍</li>\n<li>フォントの種類・・・・・・☚コンポーネントで定義した👍</li>\n<li>フォントの色・・・・・・・☚コンポーネントで定義してない🤔</li>\n<li>表示位置・・・・・・・・・☚コンポーネントで定義してない🤔</li>\n</ol>\n<p><code class=\"language-text\">4</code>,<code class=\"language-text\">5</code>どうやって決めるのでしょうか？\n実は<code class=\"language-text\">4</code>はreact-d3-cloud内部でよしなり定義してくれていて、\n<code class=\"language-text\">5</code>はD3-Cloudがイイ感じに決めてくれています。</p>\n<p><a href=\"https://github.com/Yoctol/react-d3-cloud/blob/master/src/WordCloud.js#L91\"><strong>↓react-d3-cloud内部ロジック 色定義：WordCloud.js#L91</strong></a></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 67\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">   <span class=\"token keyword\">const</span> layout <span class=\"token operator\">=</span> <span class=\"token function\">cloud</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">font</span><span class=\"token punctuation\">(</span>font<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">words</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">padding</span><span class=\"token punctuation\">(</span>padding<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>rotate<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fontSize</span><span class=\"token punctuation\">(</span>fontSizeMapper<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> words <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> texts <span class=\"token operator\">=</span> <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>wordCloud<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'svg'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">,</span> layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">,</span> layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token template-string\"><span class=\"token string\">`translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span>\n          <span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-size'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>size<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px`</span></span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-family'</span><span class=\"token punctuation\">,</span> font<span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fill'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fill</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</span>          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text-anchor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'middle'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token string\">`translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">[</span>d<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)rotate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>rotate<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>d <span class=\"token operator\">=></span> d<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p><a href=\"https://github.com/jasondavies/d3-cloud/blob/master/build/d3.layout.cloud.js#L59-L73\"><strong>↓D3-Cloud内部ロジック 表示位置定義：d3.layout.cloud.js#L59-L73</strong></a></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 56\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">    <span class=\"token keyword\">function</span> <span class=\"token function\">step</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> start <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> start <span class=\"token operator\">&lt;</span> timeInterval <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">++</span>i <span class=\"token operator\">&lt;</span> n <span class=\"token operator\">&amp;&amp;</span> timer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">var</span> d <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">        d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">        d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">cloudSprite</span><span class=\"token punctuation\">(</span>contextAndRatio<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">.</span>hasText <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">place</span><span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> bounds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          tags<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">          event<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"word\"</span><span class=\"token punctuation\">,</span> cloud<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bounds<span class=\"token punctuation\">)</span> <span class=\"token function\">cloudBounds</span><span class=\"token punctuation\">(</span>bounds<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token keyword\">else</span> bounds <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">:</span> d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>x0<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>y0<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">:</span> d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>x1<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>y1<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token comment\">// Temporary hack</span>\n</span><span class=\"gatsby-highlight-code-line\">          d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-=</span> size<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">          d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-=</span> size<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span>\n</span>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">>=</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        cloud<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        event<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"end\"</span><span class=\"token punctuation\">,</span> cloud<span class=\"token punctuation\">,</span> tags<span class=\"token punctuation\">,</span> bounds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>これによって以下のようなイイ感じのWordCloudを出力することができるのですね。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/704eab6cfb822de63938be47f6ccc745/07c6b/wordcloud-sample.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 86.17511520737328%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEN0lEQVQ4yyWU2ZLaOBiFedh5jKnKzTzAZKlUkqlM1WRykUy2Jkl3oE3T0BCaZnWz2CzeMDYI4xVjVokz6pkLVUkq1dH5z/9JqVqt+ps8UEv67bcsEV4JknQujPWyYNYtYd7VhPPmUPhQuBc+l7vCuKkKYlkXKgVFsHq2oMuGIM0sQTLMS9G08oXr/B8pfaJmElDAk4GggwPtANAA38GBzypagCtljaK+BjYJMDWwnS4Al48dsOCHrpMDsntAnVrDlKKrX2J46FjuPtNzqBN6FPXXdFN6TOP+GUX5Gd1rt9RZULpW7ikdXfO9x5QJjyghEZ30lrQer4/fnBX0yaTFBfX0ihus6z59faOgSxIwuwX88wu2ioyd2Qda72FrBwTOFofOBZB9BDrMwtQXELtLlMOI1dd7qBNTTOnKIL3ZbuG5SzoxfUx9XkP5d5zyjxG5wF6q4zD+jiD2cGp9xKn5N0Iy5Rf1wC6f4qrt4OncZe+5Q8WYiKmBYaaxMQE5TQ9yxEOZAtWXYPWPWBMeYr+AQ+UJ9pEKGHdA8w1Y7S9suzkcf76G2rfQNm023B5h2JaYMq1ZGojBnDlddV3stBjHmQ8ot3B5ST+aI0Did9oq4rmBXeMTWOUVj+EtwvMzxIUbhLkLhukceksRUxPDSD+0a+25lHgBvAmB1mhi1GzAHUn40LDx5X4JlkSg6xAnsQ10qtisXC74FYmi4Z19wfSlBruucoezB4dAqOvU7XXhzWxIlSLk2xLEXAaRYyPdUPHkUsZZ08DFzQjS3U9g3sLJkXA8HaGM79ghjmDoNhdUlTT4wiczSrhtSzOgik1M+h30Sjc4xhZahoVfP/bxtqTiTV2GZi4QnIDVbIYke4koV2TeeIT+fVtMGaqaDuIjnNDnDI7h+3MMK2W0C1ewe1XkJQvP8yr0iCPlVPFO+hOZ8Rl6wQx9R0ZnVMQ+3rLIIZDbXPCBw2H4QHmNRlEFy1kNarOOAS9r1OvgWW6EwF/CUmV8H1zgfe8DvqtZtMZFTDhS91Yf69wVY4MhzAcOp6b5X4Z+4tE4GcI2yxjVb9Et5FC7+AZ7NsdIV7EJYrSsBl7WXnDBDHp6FUG2gFbAX+3XNFvlrtAQRTFlTf8XHIcLmtXSkAyRt7+BXjmPTukaoesiNkwUjDyyhoBz5RxfRmf4oWU4Oh2Qz58QZ/Jst3BQ7Mscm8nk7MgFJ6vloU7qbLQYMF28Z91iiS3sGVsJOeY/f8FUtc9K8k8mKS12J92wxlxmBS9hmqYxz0rTFULkh2Y7Zc/ccyDCet3H1CYgxMRxw2ANtsD2BDoYgIeDcOnxD8bDjrPKfwVsky3SXgL+rhAH19idljxXuZfSFO3NLiFxHM7tuWmTqaIQf7Eg/tIn8dIlG8chh+OO7OKYROuEbOINOUYLkng2WUcrkkQB2SSHubucebe9av5fm6Gzz267ZFMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wordcloud sample\"\n        title=\"\"\n        src=\"/static/704eab6cfb822de63938be47f6ccc745/fb8a0/wordcloud-sample.png\"\n        srcset=\"/static/704eab6cfb822de63938be47f6ccc745/1a291/wordcloud-sample.png 148w,\n/static/704eab6cfb822de63938be47f6ccc745/2bc4a/wordcloud-sample.png 295w,\n/static/704eab6cfb822de63938be47f6ccc745/fb8a0/wordcloud-sample.png 590w,\n/static/704eab6cfb822de63938be47f6ccc745/07c6b/wordcloud-sample.png 868w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"その他：日本語長文サンプルの準備には「すぐに使えるダミーテキスト」が便利\"><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96%EF%BC%9A%E6%97%A5%E6%9C%AC%E8%AA%9E%E9%95%B7%E6%96%87%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%81%AE%E6%BA%96%E5%82%99%E3%81%AB%E3%81%AF%E3%80%8C%E3%81%99%E3%81%90%E3%81%AB%E4%BD%BF%E3%81%88%E3%82%8B%E3%83%80%E3%83%9F%E3%83%BC%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%80%8D%E3%81%8C%E4%BE%BF%E5%88%A9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>その他：日本語長文サンプルの準備には「すぐに使えるダミーテキスト」が便利</h2>\n<p>WordCloudを作るときにテキトーな日本語文章を大量に用意する必要があります。\nそんな時は下記サイトが便利でした。</p>\n<p><a href=\"https://lipsum.sugutsukaeru.jp/index.cgi\">https://lipsum.sugutsukaeru.jp/index.cgi</a></p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>Pythonじゃないと形態素解析とWordCloud生成は無理かなと思っていましたが、JavaScriptでもライブラリが提供されていました。JavaScriptであればブラウザ上で処理を行えるので、たとえば入力フォームに入力した文字列をインプットにWordCloudを生成するなど、インタラクティブな操作が可能です。ただし生成に時間がかかるので、実際使うときはユーザーに生成中の旨をフィードバックするようなUIにする必要があるでしょう🍅</p>","fields":{"slug":"/wordcloud-with-kuromoji-d3cloud-react","title":"React + kuromoji.js + D3-CloudでWordCloudをブラウザに描画","date":"2019-05-04T12:40:00.000+09:00","excerpt":"なにこれWordCloudをJSだけで生成したい。Pythonとか使わずにフロントエンドだけでやりたい。というモチベーションで、kuromoji.jsとD3-Cloudを使って文字列をインプットにWordCloudを描画するReactアプリ...","tags":["React","kuromoji.js","d3.js","d3Cloud","形態素解析","WordCloud"],"keywords":["React"],"thumbnail":"/thumbnail/2019/05/wordcloud-with-kuromoji-d3cloud-react.png"}},{"html":"<p><img src=\"/thumbnail/2019/05/posts-relation-map-with-cytoscape-in-gatsby.png\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://takumon.com/gatsby-related-posts-like-hugo\">以前の記事</a>で紹介した<strong>タグとキーワードから関連記事を算出するロジック</strong>と、<a href=\"http://js.cytoscape.org/\"><strong>Cytoscape.js</strong></a>を用いて記事の関連情報を視覚的に確認できるマップを作りました。\n今回はそのマップの紹介とCytoscape.jsを使ってみた感想です。</p>\n<h2 id=\"記事関連マップ\"><a href=\"#%E8%A8%98%E4%BA%8B%E9%96%A2%E9%80%A3%E3%83%9E%E3%83%83%E3%83%97\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>記事関連マップ</h2>\n<h3 id=\"使い方\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h3>\n<p>URL: <a href=\"https://takumon.com/map\">https://takumon.com/map</a> <br/>\n遷移方法: 一覧ページのCytoscapleアイコンから遷移できます。 <br/>\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 94.04666130329848%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABcRAAAXEQHKJvM/AAAE5UlEQVQ4y51Sa0yTVxg+crGi3Ec0UaZz6BBoaaEX2tIPRJA473MzTqYxzjCzMBc3URK8bGLGNmVziS66TaeOMBN0Ix+WIoKIbga5iDgsRRGh5SsWykcpwyjzlGenNdv/7STP97znefM9533PeUlGSMwny8Pj6taFxVW+HRZvzA1NML7PkMfwcUiCsXC61HgoUGYs9pMZjzAuCZAZvw2QG08Gyo2npyiMZUTuxaULRFF9LlBWStaExdXkvqRCXmQSCiNU+DxMjS9CGTMcD1LjtESNs/5qlBMNLgZqYJyqQe1ULS77a/Ebwy3CwLhrhgENoWoX2RwaX7ErUomCGbKJA8GJdF94Mi0OSabHpqvoOYmang1S03OBalrup6G/TNVQnmlVAUm0XqKiN4NTaGuknrZF6Z93ztSjebbGRraFJfDMBF9Gc/RIpBaf+UtxnMjxA0lAGZHiPInHRcaVbF9DZKgPUKIxikNzuA6t0xS4M00Oc4TSI8znYF6gFciHYVK+WJKIs0u30hu7v0JNTgFadh+FiXsXv6/PR0tuEVrfyMcfG/fi7ro9aFu0BvaSM7DuOoz+vCII2/fDkbPDIy7UoDtRL5D8YBn/dZASJ2Zy9OrGAlzftBdNW/ajedM+3F6bj/YVH6FjfQHu5x5E58o83EtcC+u2Qgibd2FoxwGMHj4O96ESjztWib6UVIEUBkn5k+zyvyMKepq1VMrau8Da44nC12IdwzWSiMYAOVolCtxjD3d/pgp90WrY5qowrEmHKy3TM2Hg4MjWCaRomoz/0U+J0kVLaNni11ETmYG6sDRcDzKgeVYWWuZk4u7cJTDPz0JP3FJY5ctgi0vHQFwqRFUaxjkDxvSpHqxMw/BadofFEilfTlJgUnO0OkOF8ujFKF3wDvj0zbiRuQLml7PQ+Vo2HjIzISkbA5plcKqXQEw24M80Dk+zOTxbbvBgE4fhDczwqL+Mr2SGF9loXJmegiq/ZFQHc2iYk462eTp0RWnwMFqLR/N1sC/U43GsDiNqA55kcZhYxeH5ag40h1W41QBxq0og3xM5X8eGs4Ko6OUpKjQy0zY23JaoFNyfpcPDeamwxqTiiVQFV3Kqr6rJTD0mmRneNICuN2DyPZ0Hu1MwsjdeIKf8FPy1AD1qJSlsULVojdDBPFuP7lcMsMZyeJzAYVCbgarVeTiScxgluUchrMlG4+ql6M/JAHZqMblH40GREiOfLxTITySWb2EvetM/kbZK5OgIUcASkYTeOcmwxyjhildiUJOKVdsrIdt5G9wHN3BmwxaUL34VFW9pIRZK0XUs3vPoYAzs34QL5M6J8/xfl29huKKOuvirGLt0FeOmejy9Uo9ndfWgDYwbGtB72wJTrQWV1fcw1GBC/akTMNf8Ck/3FTx5VO3x2Grh7PhZIAOuYR4vFsX/Xx7vxzU2IZCuTovPUBxyUpcowjUsYnRkBN54yOHA2OioD07nMNzuMYjiiC/vdrngeDwAa18vXCOiz1AUnQLp6OiocDqdePDgwQQD7e7upl7u6emhFouF9vb2Upb/V/PmvZogCL59e3s77e/vf/7CULQR9lONd+N2u70C2AEYHBzE+Pj4f+6bebhIU1PTp3a7/VpfX5+RsclqtZrYiSabzeaDN/bqXnhjVpmPvWCV/qNVORyOGrPZXPY3DrvXghXs5/YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"map link\"\n        title=\"\"\n        src=\"/static/406f832b6971112a20ac87e06f027a1e/fb8a0/map-link.png\"\n        srcset=\"/static/406f832b6971112a20ac87e06f027a1e/1a291/map-link.png 148w,\n/static/406f832b6971112a20ac87e06f027a1e/2bc4a/map-link.png 295w,\n/static/406f832b6971112a20ac87e06f027a1e/fb8a0/map-link.png 590w,\n/static/406f832b6971112a20ac87e06f027a1e/526de/map-link.png 885w,\n/static/406f832b6971112a20ac87e06f027a1e/fa2eb/map-link.png 1180w,\n/static/406f832b6971112a20ac87e06f027a1e/2b7c4/map-link.png 1243w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>記事のサムネイル画像が、タグ・キーワードの関連線でつながっています。\n記事はドラッグ＆ドロップでグリグリ動かせます。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e647bf984a2eb73a989cc699b2236e11/b40d2/map.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 67.08520179372198%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC0klEQVQ4y01Ty27bSBDk7+19z2Gwf+BvySWXAIYR+JRFTsnGsUXJUNaxY2dlxbYsSqJMSiTFl6gXn8OZqQyHXiUNNBqcnqmu7i4qlmV9wW9GigpFUaIsS+x2OxBSwPc3CL1if2cTBjJWeYaVaezPPc8zFdOanbEshWdMCAMYKQmLoiVzXYfdXQ/Z09Rls8srtjMGIg22XUZM//yBrZOERZ7H5jdXjFBa1YC2bQ+VueNqNI4w793Q+gU4x2RswHYchGGIIF5hcfIPSuPfpgNKsU5SzB4foH//hoxxcFGozjmOoyvD8UR7ZkwbPC4/fHuBx/8G6F3cIavYvi39+hKD/i3m4xGmtz3YMwujyy/yguu6unL25rVWpikqQugu9FFVkj0iW7AzF9jEGYqsgOm4WO0SRMMHBDMT44d7jIdDkY8RPt5LwIXn6cpdtyMZblcxNc5bKPJ8z6ZuhlKCkhAsk3zPvm4lGNxhLYCfTQIauq4rphtIQMYYfY6i6hasovjWu4XlLJoN+j4s22k6EMCpUEKSZVINtGpm0tfOdKX79pUETJKMxuEK6/Uakx8W8rREvFmLRw3jaBnD9Ru5UFHMDgLMHBu+OPeWYdPyYqEr/YuPEnDpb6hjBgJ4J1nWlgkGhJQwZ3M4bsP04voeo4kpR5MInW6EF/R5y7atK5a9aNUfaZrSvMh5FC75ba/P43jF/37/ngux8qfZnI+MaT1AniSp8ETkYx6EEY+XIXdGpww8E0XFUizrSavxfT9kRVFACBvb3UYuYLvdiqXQ338kmHMPg+EYI8PCTX+EMt8inrwTxWpAf6RMp1PJkBBS64VXtOKiVS6GLxnVnpcFn0yfeCk6cP2Y+2HMaxPF/r/zS9iHh4d/dLvdv9pt7YWI6tHRkXpwcKCenJyomqZJP2211E+np2pLxOurr+rV5YXabrfVTqcjz1pnn9Tz887L4+PjP38COHm56SUtcw8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"map\"\n        title=\"\"\n        src=\"/static/e647bf984a2eb73a989cc699b2236e11/fb8a0/map.png\"\n        srcset=\"/static/e647bf984a2eb73a989cc699b2236e11/1a291/map.png 148w,\n/static/e647bf984a2eb73a989cc699b2236e11/2bc4a/map.png 295w,\n/static/e647bf984a2eb73a989cc699b2236e11/fb8a0/map.png 590w,\n/static/e647bf984a2eb73a989cc699b2236e11/526de/map.png 885w,\n/static/e647bf984a2eb73a989cc699b2236e11/b40d2/map.png 1115w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>関連線はタグよりもキーワードのほうが太くなっています。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/15ce0e664fd8d919af584ecff2b15472/184bd/map-relation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 64.15094339622641%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACcUlEQVQ4y4WTzW7TQBDH94QQEsoBKeVYQcWlPACHCqlBlXiA8h5cOHDlgMQLcOLEhQNHeiiXFKtdpSku0ECiVPlwEjt27DhOYuc7uxlmFhtSJMRKI3t2Z/8z8xubFQqFN7Ztf7cs66zZbOq1alVHX5nv+7rrunqtVlNWKpXUnuM4Osbrnuep8yAIPvf7/a/oZ1mr1cqhA81WCyzThLZtg2E0gHMOGAx/LyEESCl/+yi2fjZhFxcXR0/29+Hhzs4ik8nIx3t78tHurvxwcCAxI928YoPBQKKInM1mEgWUj0uQ4GKx8NlpPq/dSqXgBmOCMQYPUjfh7vVr8DGbVVnH4zFge4Di0Ol0oF6vQ6PRoMvqfLlcUsUyrjBguq5r97e34XY6LdIbG3BvawvubG7CJ02D6XSqBEmoWq0CcgVkCQaKnus6IH+oVCqA2CQlbbfbAcNsGmUvX14KuvSjWKR3mM/nSgxbU4JU1XA4VOag//TZc/hWKMIEY6IoklQxxgcMlbWEaQJ3hpVRKyRKz9VqpYRoeHTmel04yX9RsZZlw2Q6lTHDgJmmqcUsBE0wmVzX95VQskfVJtNN9iaTieIbhqE6QER/BGlSJED2K3isBtHr9aDjOOoisoIiIsEWlRgxJiRTnDglw46uCiYVDMMQXrx8Bcc8h/wcqOEQ6kZdidGU17/DeMm4SyV4FAsu4u9JdFxPvH33XrieL6JoJAqHORHavog5UyciLiCxZcywy3DUZ/CPFYaRetpFA+R4Dv9byHbOyuXya+RxjmCPkQ0nw3duWSY3DIPjf8tN2+Jm2+L4V/DRaMSTuDU7wf1T/AoOfwKLYaonzELSHQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"map relation\"\n        title=\"\"\n        src=\"/static/15ce0e664fd8d919af584ecff2b15472/fb8a0/map-relation.png\"\n        srcset=\"/static/15ce0e664fd8d919af584ecff2b15472/1a291/map-relation.png 148w,\n/static/15ce0e664fd8d919af584ecff2b15472/2bc4a/map-relation.png 295w,\n/static/15ce0e664fd8d919af584ecff2b15472/fb8a0/map-relation.png 590w,\n/static/15ce0e664fd8d919af584ecff2b15472/526de/map-relation.png 885w,\n/static/15ce0e664fd8d919af584ecff2b15472/184bd/map-relation.png 1166w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>記事にマウスカーソルを合わせると拡大され、関連線が青にハイライトされたり...\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b66fb19bd8083acf7c142c725a9445b5/87add/hover-style.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACvklEQVQ4y31TyXLTQBD1h/Ib3Dlx5gA3Ci6hUlBcgEog+BAsx0SExLGz2onj3bI10tja15YeLSWBBFJ0VZdmetQ9r9/rqbTb7eeWZbVM0/wupVQL571q27bquI4axr7q8tdaWarjOKWfn3fUZutAbezsqm9efVS3txq7rdbhj8FgsFOZzWY1/GVxHMPzPVjSQf98CmmskKQJDMMozwo7rB/C0la43OhDzrzrxByojMfjrWKdZVmS5znxknRNkD6fkzYWVP90RKPenAxT0MnxCem6TnEc0YeXNaq9bdHB+glNL8wiL0+TNKpMJpNqWZyLsZcXycUSh7UuLppTDM8WWJkudKGDu8FyucRikUKbBOCLMB4YsJd+mZimafJgwTRJ0NzRcFAbQq2eQnBrt2ZZwOpmm6TxbbhMJKKHCwZBjpX1h9Mw8uH7MXOYQ8qsjHmuh9FoVBQpcv9fsN+PMRnHHMuKA76AsL8vcXwsEUXXqHw/AE8IwjD8jfBeyywKFfE0zXF5GcE00/K/OM4ZGdDr+Tg768C2r6FzMoQQ91pmQHcQZqXCKKZCiLwAxmiKNeC6t1QEvPbYXS5sgxWH7S6xss2c55j5tZJiDqucjsl0QrPZFFdXQ2iajzBgJbWYW6O7IEpzHIvbbaHZbKK+0UJ9s53P53MWa5lUFmJR1YcCZwcdIu46YYWL4Y2SmBMd5ii6FibMGBnxl2lhas/3LjCZDfGi8RgbjfflbRmypGIH9tbm66948uhp3B9P6WfziDrdPvU6Q5JyxZ4QU0DdbkSdTkiaRmTZoIv2iD6vq7T2bo2qXxTKU2QpJWHFkKLuLnxctQewmJ9ub8iCWHCFd+855jn+NbrjN1Y5PTl95rj2Hhf+JoSuLKVUDEMogp2fpSKlqfi+y+4onucoTIPCgigsjOIHnuIFHA/cIl7nV7T9C3DXFXIT1dw5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"hover style\"\n        title=\"\"\n        src=\"/static/b66fb19bd8083acf7c142c725a9445b5/fb8a0/hover-style.png\"\n        srcset=\"/static/b66fb19bd8083acf7c142c725a9445b5/1a291/hover-style.png 148w,\n/static/b66fb19bd8083acf7c142c725a9445b5/2bc4a/hover-style.png 295w,\n/static/b66fb19bd8083acf7c142c725a9445b5/fb8a0/hover-style.png 590w,\n/static/b66fb19bd8083acf7c142c725a9445b5/526de/hover-style.png 885w,\n/static/b66fb19bd8083acf7c142c725a9445b5/87add/hover-style.png 1100w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<p>記事関連マップをフルスクリーン表示できたり...\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17d62e7816cad650aef03928e4c91916/15240/fullscreen-button.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 47.3811833171678%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABcRAAAXEQHKJvM/AAABxUlEQVQoz41Rya4TMRCcT+YjOPEkkLhwCkgIcQFuXLiwJ0AShEZKQgghTCZxJok9+2KPt6Zt8fSegAMltWZst8tV1UEYho+Xy+WP1er7jLF0UZTVoqzqRdM0vuq6/quqqvqz5tj7lRAyCg6EjAEhhIArWLDWgpQSjDHwvyjLsgrG0/B9UXFgaani/ck8ex2bF58ORill+r73X3zA4APmEpxz03Wd0Vr7tTtzhEVRnINX7ybDp89fwp17D/SHyQxu3P0CNx8uwPVUdQ1t3QJaguPpBJRSr+T+YAC3L27BpbOyKG3TtJCmKQ0oPQ+n4RwGj57o65YxE08keuGswOrnHi9k0LStUwKo0Hd2LYfoW2J7oSDPcxpsNpvhbxZN4ikwuoW+V7DbxZBmmWvyxA55xoDEW+CoSggOh+PeP4bqLMe1J4yiyBPiAPR8cmEP25F1Eo3RFjOy+2Ni94T4PQCfpP+vy9qG4czi1C1mamnCICFHTzjyJt1Y/4HrmxmqUfoqGSk0ICE6EtBUHdATS4P1ev3GHfZK8+3HtzJLiFTGyDzLJE5ZokrZcS7btpOEUZmcz3L8eSYxY8k7LuNoJ1Fhj44US1nyC9gLpNpvP95EAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"fullscreen button\"\n        title=\"\"\n        src=\"/static/17d62e7816cad650aef03928e4c91916/fb8a0/fullscreen-button.png\"\n        srcset=\"/static/17d62e7816cad650aef03928e4c91916/1a291/fullscreen-button.png 148w,\n/static/17d62e7816cad650aef03928e4c91916/2bc4a/fullscreen-button.png 295w,\n/static/17d62e7816cad650aef03928e4c91916/fb8a0/fullscreen-button.png 590w,\n/static/17d62e7816cad650aef03928e4c91916/526de/fullscreen-button.png 885w,\n/static/17d62e7816cad650aef03928e4c91916/fa2eb/fullscreen-button.png 1180w,\n/static/17d62e7816cad650aef03928e4c91916/08f6a/fullscreen-button.png 1770w,\n/static/17d62e7816cad650aef03928e4c91916/15240/fullscreen-button.png 2062w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<p>記事クリックで記事ページに遷移できたりします。</p>\n<h3 id=\"過去記事を視覚的に俯瞰できるのでとても良い\"><a href=\"#%E9%81%8E%E5%8E%BB%E8%A8%98%E4%BA%8B%E3%82%92%E8%A6%96%E8%A6%9A%E7%9A%84%E3%81%AB%E4%BF%AF%E7%9E%B0%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE%E3%81%A7%E3%81%A8%E3%81%A6%E3%82%82%E8%89%AF%E3%81%84\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>過去記事を視覚的に俯瞰できるのでとても良い</h3>\n<p>以前から関連記事機能は実装していましたが、記事関連マップにすると俯瞰できるので、改めて気付いたことがありました。\n記事関連マップを見る限り自分のブログのメインコンテンツとしては以下ですね。フロントエンド多めです。</p>\n<ul>\n<li>Gatsby(ちょっとReact)</li>\n<li>Vue.js + AppSync</li>\n<li>Angular</li>\n</ul>\n<p>また、まったく関連が存在しない記事も幾つかあることがわかります（Git,Vimあたり）。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5ce63ed33e6b3fe46bb57ad1e4380691/71f4d/no-relation-posts.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 47.27272727272727%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACCUlEQVQoz12QbYvTQBDH8zFFUfSNIuihvtKioJ9CbBQ5RBAPDqkvxAOh0vTBs2DP3J1nT+hDsnnYPCdNmm0yO27SXgX/MLvLf3Z+zIxkWfYhCvmhiyxPMUlijKIIi6JA4Bw9P0IviDBOUlwsFsgYwyzNhB+i43iYCK/yK2na/FAilq+gt4/+lysFaV+G3GhBmiOIPAxHP+H6rR3YefAQ9vZbsCoK4GUBvzQKrz+N4GXrFHrHAWTLZbEGaopETLeLeQezH4/LYNRAHnSwxLW+Kj28dO0m3rn/CF+8eoMXUkYH+PT5VXzWvI3vP7/FVbmqSwghXak6Nv9K/E9FCVh9rYIVgABQ+1mWInUNpJ6OYUS3tTXQMIwaSD2/DOJE7MWpEpimKSLfkMXNxT5LKOt7K1jn8jz/B6SUKtpcw9+HnXJ+NOTHqsp93+eiG+76lKtnR/z0XOVzMuVhGFU07niU/5mM6zBtg/uimQ1QkTzX6anjMc6e3OXqvRvYHQ63DSSFix8HH3Cv8w4Xhbf1aWjgwaCFw5mC02C8maEG9qqR21EcY3B2spx8/8ZM22Iix0SHLM0TRkOTWYHBsnzBOHAmSlmchmxCzpnmTpiXUAYlLCugruttqd/vN6ht7+qO27TDSDZNU57NZnVoc102iSVbhlW/L3xdIzK1HOHbMtENeTqdNolOdgeDQeMvXzeKnvgQ4tgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"no relation posts\"\n        title=\"\"\n        src=\"/static/5ce63ed33e6b3fe46bb57ad1e4380691/fb8a0/no-relation-posts.png\"\n        srcset=\"/static/5ce63ed33e6b3fe46bb57ad1e4380691/1a291/no-relation-posts.png 148w,\n/static/5ce63ed33e6b3fe46bb57ad1e4380691/2bc4a/no-relation-posts.png 295w,\n/static/5ce63ed33e6b3fe46bb57ad1e4380691/fb8a0/no-relation-posts.png 590w,\n/static/5ce63ed33e6b3fe46bb57ad1e4380691/526de/no-relation-posts.png 885w,\n/static/5ce63ed33e6b3fe46bb57ad1e4380691/fa2eb/no-relation-posts.png 1180w,\n/static/5ce63ed33e6b3fe46bb57ad1e4380691/71f4d/no-relation-posts.png 1320w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<p>知識は点よりも線にしたほうが強みになるので、今後記事を書く際は、そこらへんの記事の関連線を増やしていく方向で学習を進めようと思います。</p>\n<h3 id=\"今後の予定\"><a href=\"#%E4%BB%8A%E5%BE%8C%E3%81%AE%E4%BA%88%E5%AE%9A\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>今後の予定</h3>\n<p>現在、関連度算出はタグとキーワードの重み付けという非常に簡素なロジックです。\n今後は、記事本文を解析して関連度を詳細に出したり、記事の傾向を解析したり、WordCloudを出したりと色々機能追加できそうです。</p>\n<h2 id=\"cytoscapejsを使ってみた感想\"><a href=\"#cytoscapejs%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F%E6%84%9F%E6%83%B3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cytoscape.jsを使ってみた感想</h2>\n<h3 id=\"概要\"><a href=\"#%E6%A6%82%E8%A6%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>概要</h3>\n<p>公式ドキュメントは充実しているので実装方法に悩むことはありません。\nCanvasで描画するので、オブジェクトのスタイル指定でCSSは使えないのが若干もどかしいですが、CSSに似たプロパティ設定することで非常に細かいレイアウト調整ができます。\nまたオブジェクト毎にイベント発火時（hover, click, mouseover, etc...）の処理を指定できます。こちらはjQueryっぽい実装です。</p>\n<h3 id=\"テーマ\"><a href=\"#%E3%83%86%E3%83%BC%E3%83%9E\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>テーマ</h3>\n<p>公式サイトでは多くのテーマが紹介されています。\nインストールしてuseするだけで簡単に使えます。</p>\n<div class=\"gatsby-code-title\">テーマの使い方</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> cytoscape <span class=\"token keyword\">from</span> <span class=\"token string\">'cytoscape'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> coseBilkent <span class=\"token keyword\">from</span> <span class=\"token string\">'cytoscape-cose-bilkent'</span><span class=\"token punctuation\">;</span>\n\ncytoscape<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span> coseBilkent <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>テーマごとに豊富なオプションが用意されており、以下のように調査できます。</p>\n<div class=\"gatsby-code-title\">テーマの調整</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>CytoscapeComponent</span>\n  <span class=\"token attr-name\">layout</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'cose-bilkent'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Whether to include labels in node dimensions. Useful for avoiding label overlap</span>\n    nodeDimensionsIncludeLabels<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// number of ticks per frame; higher is faster but more jerky</span>\n    refresh<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Whether to fit the network view after when done</span>\n    fit<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Padding on fit</span>\n    padding<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Whether to enable incremental mode</span>\n    randomize<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Node repulsion (non overlapping) multiplier</span>\n    nodeRepulsion<span class=\"token punctuation\">:</span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Ideal (intra-graph) edge length</span>\n    idealEdgeLength<span class=\"token punctuation\">:</span> <span class=\"token number\">700</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Divisor to compute edge forces</span>\n    edgeElasticity<span class=\"token punctuation\">:</span> <span class=\"token number\">0.45</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Nesting factor (multiplier) to compute ideal edge length for inter-graph edges</span>\n    nestingFactor<span class=\"token punctuation\">:</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Gravity force (constant)</span>\n    gravity<span class=\"token punctuation\">:</span> <span class=\"token number\">0.20</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Maximum number of iterations to perform</span>\n    numIter<span class=\"token punctuation\">:</span> <span class=\"token number\">2500</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Whether to tile disconnected nodes</span>\n    tile<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Type of layout animation. The option set is {'during', 'end', false}</span>\n    animate<span class=\"token punctuation\">:</span> <span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Amount of vertical space to put between degree zero nodes during tiling (can also be a function)</span>\n    tilingPaddingVertical<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Amount of horizontal space to put between degree zero nodes during tiling (can also be a function)</span>\n    tilingPaddingHorizontal<span class=\"token punctuation\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Gravity range (constant) for compounds</span>\n    gravityRangeCompound<span class=\"token punctuation\">:</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Gravity force (constant) for compounds</span>\n    gravityCompound<span class=\"token punctuation\">:</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Gravity range (constant)</span>\n    gravityRange<span class=\"token punctuation\">:</span> <span class=\"token number\">3.8</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Initial cooling factor for incremental layout</span>\n    initialEnergyOnIncremental<span class=\"token punctuation\">:</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">/></span></span></code></pre></div>\n<br/>\n<h3 id=\"拡張機能\"><a href=\"#%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BD\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>拡張機能</h3>\n<p>拡張機能も豊富です。ただ一部jQuery依存の拡張機能もあります。たとえば、ズーム機能を提供する<a href=\"https://github.com/cytoscape/cytoscape.js-panzoom\">cytoscape.js-panzoom</a>などです。今回jQueryは使えないので（GatsbyでReactベースなので）、ズーム機能は自前実装しました。スタイルや細かい挙動など設定項目が非常に多く、結構手間なので自前実装はオススメしません。</p>\n<h3 id=\"react-cytoscapejsハマりポイント\"><a href=\"#react-cytoscapejs%E3%83%8F%E3%83%9E%E3%82%8A%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>react-cytoscape.jsハマりポイント</h3>\n<p>GatsbyでCytoscape.jsを使えるようにするため<a href=\"https://github.com/plotly/react-cytoscapejs\">react-cytoscape.js</a>を採用しました。\nただ2点ハマりポイントがあったので紹介します。</p>\n<h4 id=\"1-wheelsensitivityが使えない\"><a href=\"#1-wheelsensitivity%E3%81%8C%E4%BD%BF%E3%81%88%E3%81%AA%E3%81%84\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. wheelsensitivityが使えない</h4>\n<p>Cytoscape.jsは、wheelsensitivityというプロパティを指定すれば、マウスホイールで拡大・縮小する時の拡大率を調整できます。これを設定しないとマウスホイールで拡大したときに、急に拡大されて、自分が今どこにいるのかわからなくなります。wheelsensitivityを使えば拡大率を調整できるので、それを防ぐことができます。\nただコレreact-cytoscapeではサポートしていません。そのため今回は拡大率調整を断念しました。</p>\n<h4 id=\"2-gatsbyビルド時にエラー\"><a href=\"#2-gatsby%E3%83%93%E3%83%AB%E3%83%89%E6%99%82%E3%81%AB%E3%82%A8%E3%83%A9%E3%83%BC\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Gatsbyビルド時にエラー</h4>\n<p><code class=\"language-text\">WebpackError: ReferenceError: window is not defined</code>というエラーが出ます。react-cytoscape.jsではwindowオブジェクトを直参照しており、Gatsbyビルド時に、webpackに怒られます。Gatsbyではwindowオブジェクトを直参照できないようです。</p>\n<p>対策は<a href=\"https://github.com/gatsbyjs/gatsby/issues/309#issuecomment-302043875\">GatsbyのIssue</a>にもあがっており、以下のようにライブラリの中身を直接書き換えました。</p>\n<ul>\n<li><code class=\"language-text\">node_modules\\react-cytoscapejs\\dist\\react-cytoscape.js</code>を書き換えます。</li>\n<li><code class=\"language-text\">window</code>を<code class=\"language-text\">windowGlobal</code>に置換します</li>\n<li>冒頭に<code class=\"language-text\">const windowGlobal = typeof window !== &#39;undefined&#39; &amp;&amp; window;</code>を追記します</li>\n</ul>\n<p>これでビルドが通ります。ただ手動でやるのは無理やり感があるので、npmのpostinstallのスクリプトで書き換える方法を検討中です。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回は、記事関連マップの紹介と<a href=\"http://js.cytoscape.org/\">Cytoscape.js</a>の使用感をご紹介しました。業務でもWebアプリでデータを可視化したいという要件は割とある気がするので、そんなときはCytoscape.jsの導入を検討しようと思います🍅</p>","fields":{"slug":"/posts-relation-map-with-cytoscape-in-gatsby","title":"GatsbyでCytoscape.jsを使って記事関連マップを作った","date":"2019-05-01T18:00:00.000+09:00","excerpt":"なにこれ以前の記事で紹介したタグとキーワードから関連記事を算出するロジックと、Cytoscape.jsを用いて記事の関連情報を視覚的に確認できるマップを作りました。今回はそのマップの紹介とCytoscape.jsを使ってみた感想です。記事関...","tags":["Gatsby","Cytoscape.js"],"keywords":["Gatsby"],"thumbnail":"/thumbnail/2019/05/posts-relation-map-with-cytoscape-in-gatsby.png"}},{"html":"<p><img src=\"/thumbnail/2019/04/vuetify-datatable-and-pagination-with-vuex.png\" alt=\"vuetify-datatable-and-pagination-with-vuex\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>VuetifyのDataTableとPaginationを使った検索一覧画面でページングの状態を、ルーティングをまたいで保存しておきたい。という要望を満たすため、ページングの状態をVuexで管理する方法をメモします。\nDataTableだけだとすんなりできますが、Paginationもあわせて使う場合は少し雑な実装になってしまいます。</p>\n<h2 id=\"やり方\"><a href=\"#%E3%82%84%E3%82%8A%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>やり方</h2>\n<p>まずはストアに以下のように定義します。\nアクションには「ページングオブジェクト保存」と「ページングオブジェクトのページのみ保存」の2種類を用意します。</p>\n<div class=\"gatsby-code-title\">サンプル実装（Vuex側）</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vuex<span class=\"token punctuation\">.</span>Store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  state<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    pagination<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      page<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rowsPerPage<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n      sortBy<span class=\"token punctuation\">:</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span>\n      descending<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  getter<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    getPagination<span class=\"token punctuation\">:</span> state <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  actions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">SAVE_PAGINATION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> commit <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n        page<span class=\"token punctuation\">,</span>\n        rowsPerPage<span class=\"token punctuation\">,</span>\n        sortBy<span class=\"token punctuation\">,</span>\n        descending<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">;</span>\n\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'savePagination'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        page<span class=\"token punctuation\">,</span>\n        rowsPerPage<span class=\"token punctuation\">,</span>\n        sortBy<span class=\"token punctuation\">,</span>\n        descending<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token constant\">SAVE_PAGINATION_PAGE</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> commit <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> page <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'savePaginationPage'</span><span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  mutations<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">savePagination</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> pagination<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>pagination <span class=\"token operator\">=</span> pagination<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">savePaginationPage</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span>page <span class=\"token operator\">=</span> page<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>次にコンポーネント側です。\n<code class=\"language-text\">v-data-table</code>,<code class=\"language-text\">v-pagination</code>ともにVuexのページングオブジェクトを参照し、UIで変更があればVuexのアクションを呼び出します。それぞれのタグで微妙にやり方が違います。\nもう少しスマートにしたかったのですが、実際動かしてみた感じだとどうしてもスマートにはできませんでした。</p>\n<div class=\"gatsby-code-title\">サンプル実装（コンポーネント側）</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>\n      ページングはpaginationに任せるのでhide<span class=\"token operator\">-</span>actionsを指定している\n      pagination<span class=\"token punctuation\">.</span>syncにはgetterとsetterを持たせたpaginationを指定\n    <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>v<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>table\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">:</span>pagination<span class=\"token punctuation\">.</span>sync<span class=\"token operator\">=</span><span class=\"token string\">\"pagination\"</span>\n</span>      <span class=\"token punctuation\">:</span>items<span class=\"token operator\">=</span><span class=\"token string\">\"items\"</span>\n      hide<span class=\"token operator\">-</span>actions\n    <span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブルの中身 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>v<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>table<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>\n      valueでVuexのページングオブジェクトを参照して\n      <span class=\"token constant\">UI</span>側からの変更は@inputでVuexのアクションを呼び出す\n    <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>v<span class=\"token operator\">-</span>pagination\n      <span class=\"token punctuation\">:</span>length<span class=\"token operator\">=</span><span class=\"token string\">\"pages\"</span>\n      v<span class=\"token operator\">-</span><span class=\"token keyword\">if</span><span class=\"token operator\">=</span><span class=\"token string\">\"pages >= 2\"</span>\n      <span class=\"token punctuation\">:</span>total<span class=\"token operator\">-</span>visible<span class=\"token operator\">=</span><span class=\"token string\">\"7\"</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">:</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"paginationPage\"</span>\n</span><span class=\"gatsby-highlight-code-line\">      @input<span class=\"token operator\">=</span><span class=\"token string\">\"savePaginationPageInStore({ page: $event })\"</span>\n</span>    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> mapActions<span class=\"token punctuation\">,</span> mapGetters <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n\n\n  <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      items<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n\n  computed<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">mapGetters</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      paginationInStore<span class=\"token punctuation\">:</span> <span class=\"token string\">'getPagination'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n<span class=\"gatsby-highlight-code-line\">    pagination<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// Vuexのページングオブジェクトを参照</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>paginationInStore<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// UI側から変更があった場合はSetter経由でVuexのアクションを呼び出す</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>pagination<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">savePaginationInStore</span><span class=\"token punctuation\">(</span>pagination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>\n    <span class=\"token comment\">// ページネーション参照用</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">paginationPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>paginationInStore<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span>    <span class=\"token comment\">// ページネーション用ページ数算出メソッド</span>\n    <span class=\"token function\">pages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span>rowsPerPage <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span>rowsPerPage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">mapActions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      savePaginationInStore<span class=\"token punctuation\">:</span> <span class=\"token string\">'SAVE_PAGINATION'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      savePaginationPageInStore<span class=\"token punctuation\">:</span> <span class=\"token string\">'SAVE_PAGINATION_PAGE'</span><span class=\"token punctuation\">,</span>\n</span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<p>これでルーティングをまたいでページングオブジェクトを保持できるようになりました。\n実用の場面では、検索条件もVuexに持たせて、ページングオブジェクトと連動させて使います。<br/>\n以上です🍅</p>","fields":{"slug":"/vuetify-datatable-and-pagination-with-vuex","title":"VuetifyのDataTableとPaginationの状態をVuexで管理する","date":"2019-04-28T20:30:00.000+09:00","excerpt":"なにこれVuetifyのDataTableとPaginationを使った検索一覧画面でページングの状態を、ルーティングをまたいで保存しておきたい。という要望を満たすため、ページングの状態をVuexで管理する方法をメモします。DataTabl...","tags":["Vue.js","Vuetify","Vuex"],"keywords":["Vue.js"],"thumbnail":"/thumbnail/2019/04/vuetify-datatable-and-pagination-with-vuex.png"}},{"html":"<p><img src=\"/thumbnail/2019/04/multi-message-snackbar-in-vuetify.png\" alt=\"multi-message-snackbar-in-vuetify\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>VuetifyのSnackbarはメッセージを1つしか表示できません。こちらGitHubでもissueになっています。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://github.com/vuetifyjs/vuetify/issues/2384\" data-iframely-url=\"//cdn.iframe.ly/vKsahN0\"></a></div></div>\n<br/>\n<p>ただUIとしてはメッセージを複数表示できたほうが便利なので、今回はVuetifyのSnackbarをベースにメッセージを複数表示できるようにカスタムしてみました。\n※Snackbarはアプリ共通で呼び出すことが多いので、今回のサンプル実装でもSnackbarのメッセージはVuexで管理しています。</p>\n<h2 id=\"見た目\"><a href=\"#%E8%A6%8B%E3%81%9F%E7%9B%AE\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>見た目</h2>\n<p>1つでもメッセージがあるとSnackbarが表示され、\n複数同時に追加可能で、あとから追加することもできます。\nメッセージの表示時間は個別で管理できるようにしています。\nたとえばINFOメッセージはしばらくたったら自動で削除されますが、\nエラーメッセージは×ボタンを押さないかぎり削除されないなどの制御が可能です。</p>\n<p><img src=\"/multi-message-snackbar-5fcfe01c4dfae99c0bac9e8d1838bfa9.gif\"></p>\n<h2 id=\"仕様\"><a href=\"#%E4%BB%95%E6%A7%98\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>仕様</h2>\n<p>ざっくり登場人物とその責務を...</p>\n<h3 id=\"ストア\"><a href=\"#%E3%82%B9%E3%83%88%E3%82%A2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ストア</h3>\n<ul>\n<li>Snackbarに表示するメッセージ配列を管理します。</li>\n<li>\n<p>メッセージ配列の要素は、メッセージテキスト以外にも以下のような情報を保持します。</p>\n<ul>\n<li>メッセージテキスト</li>\n<li>\n<p>メッセージカラー</p>\n<ul>\n<li>error, info, warn, successなど ※VuetifyのSnackbarの仕様に沿ったものです。</li>\n</ul>\n</li>\n<li>\n<p>メッセージ表示時間</p>\n<ul>\n<li>必須ではないです。</li>\n<li>指定しない場合、×ボタンを押さない限りずーっと表示し続けます。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"複数メッセージ表示用コンポーネント\"><a href=\"#%E8%A4%87%E6%95%B0%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E8%A1%A8%E7%A4%BA%E7%94%A8%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>複数メッセージ表示用コンポーネント</h3>\n<ul>\n<li>VuetifyのSnackbarをラップしたコンポーネントです。</li>\n<li>VuetifyのSnackbarのメッセージ領域に、無理やり複数メッセージをねじ込むようなDOM構造＆スタイルを実装しています。</li>\n<li>個々のメッセージの識別と削除、Snackbar自体の表示制御を担います。</li>\n<li>個々のメッセージ表示は子コンポーネントに任せます。</li>\n</ul>\n<h3 id=\"メッセージ表示用コンポーネント\"><a href=\"#%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E8%A1%A8%E7%A4%BA%E7%94%A8%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>メッセージ表示用コンポーネント</h3>\n<ul>\n<li>削除タイミングの管理（表示時間の管理、削除ボタン）を担います。</li>\n<li>メッセージの削除自体は親コンポーネントに委譲しています。</li>\n</ul>\n<h2 id=\"実装\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h2>\n<p>最初にストアの実装です。<br/></p>\n<div class=\"gatsby-code-title\">ストア</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Vuex <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 個々のメッセージ識別するためのid採番用に使う</span>\n<span class=\"token keyword\">import</span> uuidv4 <span class=\"token keyword\">from</span> <span class=\"token string\">'uuid/v4'</span><span class=\"token punctuation\">;</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>Vuex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vuex<span class=\"token punctuation\">.</span>Store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\n  state<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    messages<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  getters<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// メッセージが1つもない場合はSnackbarを表示しない</span>\n    isShow<span class=\"token punctuation\">:</span> state <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span>legth <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    getMessages<span class=\"token punctuation\">:</span> state <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  actions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * Snackbarにメッセージ(複数指定可)を表示する\n     */</span>\n    <span class=\"token constant\">ADD_MESSAGES</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> commit <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'addMessages'</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/**\n     * 指定したメッセージをSnackbarから削除する\n     */</span>\n    <span class=\"token constant\">REMOVE_MESSAGE</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> state<span class=\"token punctuation\">,</span> commit <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'removeMessage'</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  mutations<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token function\">addMessages</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// メッセージをストアに加える際に、個々のメッセージが識別できるようにidを加える</span>\n      state<span class=\"token punctuation\">.</span>messages <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>payload<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>m <span class=\"token operator\">=></span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token function\">uuidv4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">removeMessage</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">;</span>\n      state<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          state<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<br/>\n<p>次に、複数メッセージの受け皿となるコンポーネントです。\n個々のメッセージコンポーネントの生成、削除、Snackbarの表示制御を担います。</p>\n<div class=\"gatsby-code-title\">複数メッセージ表示用コンポーネント</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!--\n    タイムアウトの管理は、大枠ではせずメッセージ毎に行う\n    全てのメッセージが消えたら大枠を消す\n    大枠を消す処理はStoreに実装する\n  --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-snackbar</span>\n    <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>isShow<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>white<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">:timeout</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">top</span>\n    <span class=\"token attr-name\">auto-height</span>\n  <span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- メッセージを縦並びにするためdivタグでラップする --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> -14px auto<span class=\"token punctuation\">;</span> <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0 -24px</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span> <span class=\"token attr-name\">v-for</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>(message, index) in getMessages<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>snackbarMessage</span>\n            <span class=\"token attr-name\">:key</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>message.id<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">@remove</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>removeMessage({ id: message.id })<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">:message</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>message<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token punctuation\">/></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\">\n            <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span>1px 0<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">v-if</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>index != lastIndex<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">:key</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>`${message.id}-divider`<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>v-snackbar</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\">\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> mapGetters<span class=\"token punctuation\">,</span> mapActions <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// メッセージ表示用コンポーネント</span>\n<span class=\"token keyword\">import</span> snackbarMessage <span class=\"token keyword\">from</span> <span class=\"token string\">'./snackbar-message.vue'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n\n  components<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    snackbarMessage<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  computed<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">mapGetters</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'isShow'</span>\n      <span class=\"token string\">'getMessages'</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">lastIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">mapActions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      removeMessage<span class=\"token punctuation\">:</span> actionType<span class=\"token punctuation\">.</span>snackbar<span class=\"token punctuation\">.</span><span class=\"token constant\">REMOVE_MESSAGE</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<br/>\n<br/>\n<p>最後に個々のメッセージ用コンポーネントです。\n削除タイミングの管理（表示時間の管理、削除ボタン）を担い、メッセージの削除自体は親に委譲しています。</p>\n<div class=\"gatsby-code-title\">メッセージ表示用コンポーネント</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-card</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\">\n    <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 6px 12px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">:color</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>message.state.color<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span><span class=\"token property\">align-items</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ message.text }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-spacer</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>v-spacer</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-btn</span>\n      <span class=\"token attr-name\">icon</span>\n      <span class=\"token attr-name\">depressed</span>\n      <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>remove()<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-icon</span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>rgba(51, 51, 51, 0.3)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>cancel<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>v-icon</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>v-btn</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>v-card</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\">\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    message<span class=\"token punctuation\">:</span> Object<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      activeTimeout<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">mounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// メッセージコンポーネントがマウントされた時点からカウント開始</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>activeTimeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> timeout <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// タイムアウト時間が設定されている場合は</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timeout<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 指定時間後にremoveを呼び出す</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>activeTimeout <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> timeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 親コンポーネントにremoveを発火</span>\n    <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">$emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'remove'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<br/>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はVuetifyのSnackbarで複数メッセージが表示できるようにする方法をご紹介しました。\n現在だと、<a href=\"https://www.npmjs.com/package/@tozd/vue-snackbar-queue\">複数表示できるようにするための拡張ライブラリ</a>も出ているようです。\nライブラリを使ってもいいかもしれませんが、UIの細かな部分はシステムに依存すると思うので、カスタムで作る際は是非参考にしてみてください🍅</p>","fields":{"slug":"/multi-message-snackbar-in-vuetify","title":"VuetifyのSnackbarで複数メッセージ表示する方法","date":"2019-04-21T21:30:00.000+09:00","excerpt":"なにこれVuetifyのSnackbarはメッセージを1つしか表示できません。こちらGitHubでもissueになっています。ただUIとしてはメッセージを複数表示できたほうが便利なので、今回はVuetifyのSnackbarをベースにメッセ...","tags":["Vuetify","Vue.js"],"keywords":["Vue.js"],"thumbnail":"/thumbnail/2019/04/multi-message-snackbar-in-vuetify.png"}}],"previous":{"html":"<p><img src=\"/thumbnail/2019/02/nuxt-apollo-with-graphpack.png\" alt=\"nuxt-apollo-with-graphpack\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>以前の記事<a href=\"graphpack-graphql-zero-config-server\">設定いらずのNode製GraphQLサーバー「Graphpack」の使い方</a>でGraphQLのサーバー側を実装を紹介しました。\nGraphpackは備え付けの<a href=\"https://github.com/prisma/graphql-playground\">GraphQL Playground IDE</a>で動作確認できますが、せっかくなので今回はクライアント側も作成してみました。\n本記事では<strong><a href=\"https://ja.nuxtjs.org/\">Nuxt.js</a>と<a href=\"https://www.apollographql.com/docs/react/api/apollo-client.html\">Apollo Client</a>を使って簡単なユーザー管理画面を作成する方法をチュートリアル形式でご紹介します。</strong><br/>\n最終的にはQuery, Mutation, Subscription全てを実装しますが、\n以下のようにステップを分けて、少しずつ実装していきましょう✨</p>\n<ul>\n<li><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\">🔰 プロジェクトのひな型を作成する</a></li>\n<li><a href=\"#query%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💪 Queryを実装する</a> → ユーザー情報が一覧で表示できる</li>\n<li><a href=\"#mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💖 Mutationを実装する</a> → ユーザーの登録・更新・削除ができる</li>\n<li><a href=\"#subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💎 Subscriptionを実装する</a> → 他ブラウザとリアルタイムでユーザー情報が同期する</li>\n</ul>\n<p>完成イメージ\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 534px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.28089887640449%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACo0lEQVQ4y52T204acRDGV+2tN76CT1BvjCY+ju1FL3rVpzGEEKMX0kbDRbGmbcqpKTaiAVrksMAe2TOgnOS/8HX+a1AwTdt0ki9kJrs/Zr6ZFdbW1nY3NzejOzs74e3t7ci8tra2IlSPrK+vRwRB+JPCpCPSK2H35YvDfKWEfD4PUayj2WyQmoHq9TparRbC4TA2Np5jdXUVS0tLeLaygpXfaXn5WDg7O9uzHRuapg1LpRJTNT2QompMUhTWMqwg/3b+naUzX1kylWapdIalMo9KpjOj3OUVom/f7QvJRCJUrVRRKBSZbVlwXJfkwXZcuPTbvblBfzDAeMzAfB88JtMpxuw+D8R8xus1UTwQ4vH3IcMwCZhnzaaE+ZhMJrjpdjAcDYN8SqBatYrb295DzsP3WQAUOTCRTIR44tgWKxZ/wCfI3WiEwXCATqeDuliDYZoYUW08HuO6VIKu63AcB57nod1uc3AAbDQaB4Io1kJTgmiqyjhgOBzCNAzIsgTLtoKXNVWDQTXPa+PubgxFlpHJZPCzdL9MikdgsVAI8Y5lRWV8dFVVYVk2ySJAB7ymGzr44trkL/dUVRVcXFygWquhXC4vAsvX18HIrusy0zTQlGS4NIqiyWjpGiTqRtEVAuvw2h76vR6/CFxdXXLPUKlUFoGJL59DPXqIWmfcq2j0CKfx04elcOPnNav7tN2ZFjxMJZMhRiOTR0ysVWl0OVgGr/EXn8YM+qT2CEwmkiHPc7kX7Pw8S19HI/Cw3+8H/z6DzHf4tOsF4IfT+N4tjUxnMKJFkI8mcxyXDQYDulmf8Yf/JppkxIH0qe4L6VTqkCcEIsP7wbn8b0iSdCxks9nXtm1/ons7IR9jpmHGHNuJ0cHG6HD/SXQhJ91u92Mul3vzC1hCARcadoS1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-4\"\n        title=\"\"\n        src=\"/static/5454a20a76b75a63cafbfdaec4944a08/18433/project-image-4.png\"\n        srcset=\"/static/5454a20a76b75a63cafbfdaec4944a08/653a0/project-image-4.png 148w,\n/static/5454a20a76b75a63cafbfdaec4944a08/fd081/project-image-4.png 295w,\n/static/5454a20a76b75a63cafbfdaec4944a08/18433/project-image-4.png 534w\"\n        sizes=\"(max-width: 534px) 100vw, 534px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>完成品はGitHubに置いております。躓いたときは参考にしてください。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"\" data-iframely-url=\"//cdn.iframe.ly/HQ2E77R\"></a></div></div>\n<h2 id=\"プロジェクトのひな型を作成する\"><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プロジェクトのひな型を作成する</h2>\n<ul>\n<li>create-nuxt-appで雛形を作成します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx create-nuxt-app client</code></pre></div>\n<br/>\n<ul>\n<li>何個か質問されるので以下のように答えます。<code class=\"language-text\">Author name</code>は読み替えてください。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">? Project name client\n? Project description My amazing Nuxt.js project\n? Use a custom server framework none\n? Choose features to install\n? Use a custom UI framework none\n? Use a custom test framework none\n? Choose rendering mode Single Page App\n? Author name Takumon\n? Choose a package manager npm</code></pre></div>\n<br/>\n<ul>\n<li>アプリを起動しましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd client\nnpm run dev</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">http://localhost:3000</code>にアクセスして以下の画面が表示されればOKです。</li>\n</ul>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.74336283185842%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACTUlEQVQ4y61TzWsTQRTfPyD/gVcPIoR6kFjwrkfBsyB6ELR6zE0bCQhaCBW6FUqhFhHSUg+KiSal3eDBgl78QNDShpoSs7W2+djvzc7Ozze7m7BEYiP44Ddv5r03v3lv3ox0e/LORiaTWSMo2WxWSafTSiKRUCRJGgnJZHJ9fPxMJZVKlY+PnZqQDNOEqqpottqEFg4Om8gvLWNGliHPzg7FjCz0I8zNz0Om2Fwuh8s3b01LIDEMw7Vtm1mWxRzXZWT6V3CC9ay8+iAgjIx98RkDI3ieF4Ry5qNLcxbZByDIhN/JFwpTAaHv+4xzjjh87gfk1c5PaJ6NKA6DcVwMJB5jzlKhGBKSLciQh/M+hNx4v4DrpTl8qm6HpfjhQT1/j5AJwuIAYU96m0r1jzhbuouxq1dwaeoeeOTvkR1JGJYaBu+ZLZyr3MeJyWs4efoijp2/AHn1Rf/AkTKME251VCxW3+DpqzKeLBewuPISz9+97d/tyISI3Z+nueA+jxrCwVyvTzbYlD8I4/cipK3p2Nyp4fPXLXzb/o4PXzax29jDoPw1Qy94e+Jt+XC7XZiWTdoL5l3SAsInYgSGZijeYfBjTAuttgZNN0nrATodAzqtD5saaSvw/TpoB+uI6+iSRRdt14Xp2DBsytLrwrYd6IYJ+prxhgzN0BWkfkjMqHSm079uahpr6TqzXYdR+YyyZ0RM54VxsT2crsDKF4r9v/xfZOV1aVr6sb+/UWs01nYbqhJAVZVaQ6ARQ9wWxUWg9TrtqezU6+WHC48nfgNALr8PAswu2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-1\"\n        title=\"\"\n        src=\"/static/8683d513dabb23a5d6a660ace450aff3/fb8a0/project-image-1.png\"\n        srcset=\"/static/8683d513dabb23a5d6a660ace450aff3/1a291/project-image-1.png 148w,\n/static/8683d513dabb23a5d6a660ace450aff3/2bc4a/project-image-1.png 295w,\n/static/8683d513dabb23a5d6a660ace450aff3/fb8a0/project-image-1.png 590w,\n/static/8683d513dabb23a5d6a660ace450aff3/526de/project-image-1.png 885w,\n/static/8683d513dabb23a5d6a660ace450aff3/ab356/project-image-1.png 904w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  </p>\n<ul>\n<li>次にApollo Clientを導入します。<a href=\"https://www.npmjs.com/package/@nuxtjs/apollo\">@nuxtjs/apollo</a>をインストールしましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i @nuxtjs/apollo</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">nuxt.config.js</code>に以下設定を追加します。</li>\n</ul>\n<div class=\"gatsby-code-title\">nuxt.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n  modules<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'@nuxtjs/apollo'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    clientConfigs<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Graphpack側のエンドポイントを指定します。</span>\n        httpEndpoint<span class=\"token punctuation\">:</span> <span class=\"token string\">'http://localhost:4000/graphql'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Subscription用にWebSocketの設定も追加します。</span>\n        wsEndpoint<span class=\"token punctuation\">:</span> <span class=\"token string\">'ws://localhost:4000/graphql'</span><span class=\"token punctuation\">,</span>\n        websocketsOnly<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> \n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>これで準備は整いました。\n次からは本格的な実装に入っていきます。</p>\n<h2 id=\"queryを実装する\"><a href=\"#query%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Queryを実装する</h2>\n<h3 id=\"実装\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー情報取得用のクエリ<code class=\"language-text\">apollo/queries/getUsers.gql</code>を作成します。今回は<code class=\"language-text\">apollo/queries</code>配下にgqlファイルを作成することにします。</li>\n</ul>\n<div class=\"gatsby-code-title\">apollo/queries/getUsers.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> GetUsers <span class=\"token punctuation\">{</span>\n    users <span class=\"token punctuation\">{</span>\n        id\n        name\n        email\n        age\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<ul>\n<li>次に<code class=\"language-text\">pages/index.vue</code>を修正します。ここでは<a href=\"https://github.com/Akryum/vue-apollo/blob/master/docs/api/smart-query.md\">SmartQuery</a>を使い、コンポーネントにapolloオブジェクトを定義してApollo Clientを呼び出す方法を使います。 <small>※今回デザインは一切気にしないので<code class=\"language-text\">&lt;style&gt;～&lt;/style&gt;</code>の部分を削除しています。</small></li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vue</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>table<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token constant\">ID</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>名前<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>メール<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>年齢<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>tr v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"item in users\"</span> <span class=\"token punctuation\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.id\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> getUsersGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/queries/getUsers.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<h3 id=\"動作確認\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<h4 id=\"サーバー側起動\"><a href=\"#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E5%81%B4%E8%B5%B7%E5%8B%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>サーバー側起動</h4>\n<ul>\n<li>\n<p>GraphQLサーバを起動します。以下2通り、お好きなほうで起動してください。</p>\n<ul>\n<li>\n<p>サーバー側を作成する</p>\n<ul>\n<li><a href=\"graphpack-graphql-zero-config-server\">以前のGraphpackの記事</a>にしたがって作成</li>\n<li>作成したアプリに移動</li>\n<li><code class=\"language-text\">npm run dev</code></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://github.com/Takumon/nuxt-graphpack-sample\">本記事のサンプルコード</a>を使う</p>\n<ul>\n<li><code class=\"language-text\">git clone https://github.com/Takumon/nuxt-graphpack-sample.git</code></li>\n<li><code class=\"language-text\">cd nuxt-graphpack-sample/server</code></li>\n<li><code class=\"language-text\">npm i</code></li>\n<li><code class=\"language-text\">npm run dev</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>GraphQLサーバーの起動確認をします。<code class=\"language-text\">http://localhost:4000/</code>にアクセスして以下のクエリを発行しユーザー情報が返ってくればOKです。</li>\n</ul>\n<div class=\"gatsby-code-title\">サーバー動作確認用クエリ</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  users <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 78.40670859538784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACh0lEQVQ4y52Uy27TQBSG/QoxSezUl1ycm2PHThw3iZukqahXREjs2bJFbFmiVrBCqNC0pa4Ej0EbqU1dFlWFxLuAugFGPpyx09SNUhYsfp0ZT86X/5/jhHn+9Nm7o4OPV+O98dTzPH97a9svKorPsqyfSqX8VDJ5v/CcTST8arV6PhqNLlzXPWE877N/9e07TM4u4OziEk5Ofdj3PsHO+BA+7Hv/1Pu9w1C7B0ews3sAW6/fBEyu+/hYabuQLpq/WblMEmKRrJTrKIPwRQ2lE17RSLpQm+21cJ8p6USsmOFnhYpBhLIRyJr1kxFVe6JY65Bv9AgKJL0DWcMBSWtDutQIxVes8DlXac0l4HmhOQDZWKM1KLbWIWf0rplUXpusaF3IVFuELzchg81UdE2VyGmwuvEIXrx8BVnTgQI2SmYfJKMPgtEDMVIg6GsgO8NrJp3XJxm9DbzWIlzRpNHn4tBdSjEAU0DNcUFu9CFrY8VEEq4jcI+uA0F1QH0yihxmNBt4wyZpJYLcKA7l1XbU3HIh23GpG5C7Q5DsEB5Qx6LVR2ABHVZt2kzisDmUVgSLdQcd4p1ZGwgY4j6KS13SyGGt4x0m87UJvfQb4I2rRaeCjoMyeyC3NkFuPwS5g+5W0R0OBmHBDHwXuAx2C+yGbkKgvYnRB1FcWhv3AJfB4kAaedYYRa7fTvk/gM4cFk43JtGMA3MxII288OqkS+adyOLtuxdX3KF2zJctOs1fKELFLYh+GTokUmNAsHGZ/tDBoNMf6FD9Sl8bGi36dVjAYeVKM4Xrxp3Iy0TPaAoG/xDeciXjki/VTwW1Oc3VV6d4r1M2W52yubjU6QMUu6DZs7NkQTtHzpe/Ik/mSq0GcCYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"server-image-1\"\n        title=\"\"\n        src=\"/static/45799f178c13308357e838cda5402668/fb8a0/server-image-1.png\"\n        srcset=\"/static/45799f178c13308357e838cda5402668/1a291/server-image-1.png 148w,\n/static/45799f178c13308357e838cda5402668/2bc4a/server-image-1.png 295w,\n/static/45799f178c13308357e838cda5402668/fb8a0/server-image-1.png 590w,\n/static/45799f178c13308357e838cda5402668/526de/server-image-1.png 885w,\n/static/45799f178c13308357e838cda5402668/cc4aa/server-image-1.png 954w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"クライアント側起動\"><a href=\"#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E5%81%B4%E8%B5%B7%E5%8B%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>クライアント側起動</h4>\n<ul>\n<li>サーバーの準備が整ったら、クライアント側を<code class=\"language-text\">npm run dev</code>で起動します。</li>\n<li>ブラウザで<a href=\"http://localhost:3000\">http://localhost:3000</a> にアクセスして以下の画面が表示されればOKです。</li>\n</ul>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.35942668136714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABRUlEQVQ4y+2TsU6DUBSGLy/Ak7joUHkF9UV4AhcVWRh8AoWKTnbXKi6WxaTRdihtsM6UlGJLqEWsqVw4XipENI00bCb+yZ97znC//wznoI2tzYM9jqvzPH+zz3GqIAgqy7IqRVEqQijXNE2rDMPU1kul25XVNRGdV6u11+kUbNuG8fMEJt4LWAMbzioVODwSQZTKIJUXW5QkkE9OSX0MsizD9s5uB+m6fum6LvT71owIO46Dn4ZDDADY9/35u4TfiUHrdu/QY/dB8TwPRiMCIlMSMBiGAQPLAtcdA8Y410EQhDHwvtVqILPXU+ImDEMcRRGkiutlTf7OgQ1NI0DTVBIATlCQVRqSDfupL2D7O3BReh7sVyAU1D/wDwCvEmAQFVR8FNnFvk6AYdEJ0z1ttjtNRO72Im7ITU5J0qyIyd+3z1vW6h/G6pf3C+eMuQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-2\"\n        title=\"\"\n        src=\"/static/aadd25baed54bb3fdc5f7088b257ad92/fb8a0/project-image-2.png\"\n        srcset=\"/static/aadd25baed54bb3fdc5f7088b257ad92/1a291/project-image-2.png 148w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/2bc4a/project-image-2.png 295w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/fb8a0/project-image-2.png 590w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/526de/project-image-2.png 885w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/eaf84/project-image-2.png 907w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  </p>\n<h2 id=\"mutationを実装する\"><a href=\"#mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mutationを実装する</h2>\n<h3 id=\"実装-1\"><a href=\"#%E5%AE%9F%E8%A3%85-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー一覧ができたので、登録、更新、削除処理を追加します。</li>\n</ul>\n<div class=\"gatsby-code-title\">apollo/mutations/createUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($name: String!, $email: String!, $age: Int) {\n  createUser(name: $name, email: $email, age: $age) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/mutations/updateUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($id: ID!, $name: String!, $email: String!, $age: Int) {\n  updateUser(id: $id,name: $name,email: $email,age: $age) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/mutations/deleteUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($id: ID!) {\n  deleteUser(id: $id) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<ul>\n<li>次にユーザー一覧で、登録、更新、削除ができるようにします。index.vueを修正しましょう。</li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vueの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブル上部に登録ボタンを設置します。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"isShowEditArea = true\"</span><span class=\"token operator\">></span>\n      新規登録\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブルに編集ボタンと削除ボタンの列を追加します。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>table<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token constant\">ID</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>名前<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>メール<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>年齢<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token operator\">-</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>tr v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"item in users\"</span> <span class=\"token punctuation\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.id\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"editItem(item)\"</span><span class=\"token operator\">></span>\n            編集\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"deleteItem(item)\"</span><span class=\"token operator\">></span>\n            削除\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 登録と更新の両方で使う編集エリアです。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 登録か更新かの判定はeditedIndexを見ます。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div v<span class=\"token operator\">-</span><span class=\"token keyword\">if</span><span class=\"token operator\">=</span><span class=\"token string\">\"isShowEditArea\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> formTitle <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.name\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"名前\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.email\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"email\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"メール\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.age\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"number\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"年齢\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"close\"</span><span class=\"token operator\">></span>\n          キャンセル\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"save\"</span><span class=\"token operator\">></span>\n          保存\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> getUsersGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/queries/getUsers.gql'</span>\n<span class=\"token comment\">// 今回定義したgqlファイルをインポートします。</span>\n<span class=\"token keyword\">import</span> createUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/createUser.gql'</span>\n<span class=\"token keyword\">import</span> updateUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/updateUser.gql'</span>\n<span class=\"token keyword\">import</span> deleteUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/deleteUser.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 登録・更新用の編集エリア表示非表示のためのフラグです</span>\n      isShowEditArea<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 登録か更新かを判定するための値です。</span>\n      <span class=\"token comment\">// -1の場合は登録</span>\n      <span class=\"token comment\">// それ以外の場合は更新　と判定します。</span>\n      editedIndex<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 編集エリア用のモデルです。</span>\n      editedItem<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        id<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 編集エリア用のモデルを初期化用モデルです。</span>\n      <span class=\"token comment\">// 初期化時に</span>\n      <span class=\"token comment\">// this.editedItem = Object.asigne({}, this.defaultEditedItem)</span>\n      <span class=\"token comment\">// のように使います。</span>\n      defaultEditedItem<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        id<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 更新の場合、更新対象が何番目かをeditedIndexにセットしているので</span>\n  <span class=\"token comment\">// editedIndexの値によって、更新か登録かを判断し</span>\n  <span class=\"token comment\">// 編集エリアのタイトルを出しわけます。</span>\n  computed<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">formTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n        <span class=\"token operator\">?</span> <span class=\"token string\">'ユーザー新規登録'</span>\n        <span class=\"token punctuation\">:</span> <span class=\"token string\">'ユーザー更新'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//登録処理です。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// mutationを発行する場合は、Smart Queryではなく</span>\n      <span class=\"token comment\">// $apolloを使って処理します。</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> createUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// refetchQueriesは処理完了後に発行するGraphQLの操作を指定できます。</span>\n        <span class=\"token comment\">// ここでは登録後に、データを再取得してユーザー一覧をリフレッシュしています。</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// 編集エリアを非表示にします。</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 更新処理です。</span>\n    <span class=\"token comment\">// 登録処理とほぼ同様の処理なので説明は割愛します。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> updateUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 削除処理です。</span>\n    <span class=\"token comment\">// 登録処理とほぼ同様の処理なので説明は割愛します。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">deleteItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`ユーザー(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)を削除しますか?`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> deleteUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>id\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 一覧の編集ボタンクリック時の処理です</span>\n    <span class=\"token comment\">// 編集エリアの変数に値を代入して、編集エリアを表示します。</span>\n    <span class=\"token function\">editItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isShowEditArea <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 編集エリアを非表示にする処理です。</span>\n    <span class=\"token comment\">// 編集エリアのモデルの初期化もあわせて実施します。</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isShowEditArea <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>defaultEditedItem<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 編集エリアで保存ボタンをクリックした場合の処理です。</span>\n    <span class=\"token comment\">// editedIndexをみて登録か更新かを判断します。</span>\n    <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-1\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>ブラウザを開いてみてください。\nそれぞれの以下のようにして操作ができます。</p>\n<h4 id=\"登録\"><a href=\"#%E7%99%BB%E9%8C%B2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>登録</h4>\n<ol>\n<li>右上の新規登録ボタンをクリック</li>\n<li>名前、メール、年齢を入力</li>\n<li>保存ボタンをクリック</li>\n</ol>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.86618876941458%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAAC3UlEQVQ4y5WTS0sbURTHx426cmW/g5/BTV2oxS8hiFgpLS26E6Qb7cpFu2iJD0o1oYggSoVa4wOhraiNxkYTm4eaySTzMIlJMJOZSe7M/HsmWtrQKvbAb+4993L+99xzz3D3mpt729ruzz/o7JzuaG93V+noqNJO866uLndLS4u7rq7OzXHcTUwT88Qjrv/JY09Q4BGMRMHzPIRkEoIgIEljIsEjm81iamoKra2taGpqQn19PRobG9HQ0FCDs0Z789zq4oIrHwpCDgT0cCTCUqLIUso5SwgC45MpJsoKEyWZHXwPMN/ePtv17bFvNPr+gHwj9COM5ZWVGS44PPz+9OMyQosLTO1/CK2jEzlJQjZfQC6fx2WxCE03UK5UwEwTjpmWRT5DhVWxCeasUxIebn9gYFbZ2UFkaYnxT58Bo6MABVQDSaRQKKCkla58kyEaiUBV1aoP265+LWeDLJVKebjdtdUJUCaFUIiFz+JwctANA6VSCRe5C6prHOfn5zBoTdN0nJycQJZkKIqCTCaDfCHvqFYFRVH0cNGT2KQjIqXTrJDLQafTMyQgiWI1QBRTkGWFkOncAhgzISQS+Lq1hcOjI4Qj4VrBYDg84ThxegApnXWEEYvzOKUgSVQouzRkRUImm8EFvbiTuaLIOD4+Rjwed7qhVnDT4357SXUJrW8wnmr5YXwcsy9fYXpsDDt7+7iD2WS/BWNDQ7vFgwOkvF4z+/kLyjTXAwGo6+uo9PQA3d2wr6JuolYw7HL5k9QCMUmygtTQiQxdu1xBiZrcGhkBKFP7+kXtq1e9XTA6MLCt7eyiuLlpXq6tIrexAd1/gIrXC4tq9kvgukX+ed8awe1Py5M5Ku5pMFhOz82Z0TevzXJvr4nBQdM2DNO2rCts+zbK14Iz3JkgvPvrWJcL6OvD/5okSXPc0eHhc13XY2qx6FNLJb9qGH7VsvyqafpVXffTX3EXfJqmxche/ARiYvUEkG7PUgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-create-1\"\n        title=\"\"\n        src=\"/static/219f2e622c366462cb616927adf04e8a/fb8a0/project-image-create-1.png\"\n        srcset=\"/static/219f2e622c366462cb616927adf04e8a/1a291/project-image-create-1.png 148w,\n/static/219f2e622c366462cb616927adf04e8a/2bc4a/project-image-create-1.png 295w,\n/static/219f2e622c366462cb616927adf04e8a/fb8a0/project-image-create-1.png 590w,\n/static/219f2e622c366462cb616927adf04e8a/851ad/project-image-create-1.png 837w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧に登録したユーザが追加されます。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.35885167464114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACk0lEQVQ4y62Ty07bQBSGvWCDYMeOt+AJeAC6ABa8QDe9rLrqktegkVrAEpvCDlJuAQJJCVIWhARsCL40dpzEjp0YciMZe/7OpBEEtZUq1CN9OufMGf9zfDwWJicnX8+8mtmYn59fnp2dFefm5h7h+cLCgjg1NSWOjIyIgiD8jRXGOuON8Pb9O1HWVciyDMMwYFnWI6ZpolarQRRFTE9PY2JiAqOjoxgbG/uN8fFxXtsQYgexJdd1uUBHkiRiGCYxLYvohQLDYHGJlG2HXEoyyeYuyUU2Ry6Yzz7nQdF0HBwerQjxo6NI/uYGmUyG8G5q9Trqvt/3vn+HRrOJdqeDbreHXo+AWxCGj3m316PM9wsFwxCFrc3NiOt6kKQrks8rGLYgILhj4s1Wq59TJsQPv7+/H97GlsO+YLFYFIXkyXGEJ67jEPlKQsAO6zCBVqOBmluFrqmolMpot9psvQ1dVVHiMy4W4dg2PLdK6UCQjU0UbormEuVJtUr8dgvtIIRd82BUbNh+na+j7Hmo8HE0W+jyvY6NZDqNy3wekqZS9vyToLK2JgbyNQoHh8SKH8OKx1FOJFBJfkc1dYbSSQJWIg7nNAk3lULj/JzVEjhfX4eytwstGqWUNdMX5K98t7i4RzIZ+PF44MT2YWxtoRqLwdqOorKzAysaRZHFzv4u6uyw1ukpbCaUZVdJZ3t/fPlMaersl6BpioK5vb3MLhugqgSaBug6jxks5nk/Vp/F9FYBVRSEnOtrSn3/qUPFND/xJGRz4LP8FzDkefhshurtbWTw7QnYteDQAX+Kh9cGUGZDgqq61O8wDB9YIXgh3YHgqqBp2ir+k5VKpa9COp3+4Pt+kv3PUc/zdl7IN/bbJnK53Mef7IQBrxTsBPQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-create-2\"\n        title=\"\"\n        src=\"/static/ddded17ee5f77eae7cceb841d2b22ab2/fb8a0/project-image-create-2.png\"\n        srcset=\"/static/ddded17ee5f77eae7cceb841d2b22ab2/1a291/project-image-create-2.png 148w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/2bc4a/project-image-create-2.png 295w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/fb8a0/project-image-create-2.png 590w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/db147/project-image-create-2.png 836w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"更新\"><a href=\"#%E6%9B%B4%E6%96%B0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更新</h4>\n<ol>\n<li>更新したい行の編集ボタンをクリック</li>\n<li>名前、メール、年齢を入力</li>\n<li>保存ボタンをクリック</li>\n</ol>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.95693779904306%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADCElEQVQ4y5WTTU8TURSGJ8CShexd8Q/cEEjgR/gbFOPGhXEnezEu3JloSQTGhVGLWpooaCSBtkZCqVDSUlvo18ydmc4HzDBKp70z83qmYKxGTTzJm5NzJ/c5X3eEkZGRK2NjY/HJycn5iYkJsV/j4+Pi1NSUODo6KgqC8C8tkF6QrgtXr02L+XIJe3t7qFaraNTrqJMiH8WtVgtzc3MgOIaHhzEwMIChoaHfNNjzg4ODcWFlZeWhYZpgjLVLpRKXZMYVVeNN8k1Z5orW4hJT+OZWlqczH/lGKs1T6QxPZfqUznjbuc94lVheEDbW12OHBwdRhdwksGlasKwj6IYBk7ztnOC03Uany8H9AJGFpC73Ke4pJPHovClJorCcSMQYU7CXz/NarYF+8zmH49j4+u1bLw4IUD08xMmJewYOewlC/xwoRcBUOhWLAtMw+O5uHkEQwPM8tKmq4+MjNBp1aDTHTqcL77SNUqEAhTEYdGZRR7Zth2Q9II1NFCqVcgyUiYbPXdeF1+lEcERVm5YJVVWh6wZ0AjhtDz5dVAwdmVwOxfIX7O/v/wqkVmM+D1Cr1bksMcquQJYkMJlBU1ugJaHRrEO1DLSyWbiJBFrbWew+e4by1hYqtSp13gcsFItnLR8fc1XXUW02YRwdQdYYVIVBplgioNb14M7eAS5ehHn/PnZu3sQBQb8wOYQf/AS+f/vmUZtaLGxucp3eXnxhHu9evgKt7+d2wvDMOw7CSgWhbSOQZQS0rCD62t9yfmbmSXttDSyR4MXFRTSW4nDX19FdXUVAGwUli3AhLSvEHywMfwWW7t57odIzKDPGs/tFHNAM9a6Pr9RqMD0NXLqEkCrDORQRmCoOf/jfgYWZ20+9RhNu9bBjVyq+Xa35rqr6XqnkB6urPpaWfLrsU3U+XfybvHPgovBp/vET7OxA39gAF0Vo84+BBw+Ay5dBbwL/Y4qiPBdSudwNxXHWGrbzmhUKSSmZTGrx+HL3woVte3b2nXF6mjA1LUm/5V9lGMZry7I+5PP5W98BuHvqiqfu8OAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-update-1\"\n        title=\"\"\n        src=\"/static/b0c9d01a7a765f2ad8726624b95eff41/fb8a0/project-image-update-1.png\"\n        srcset=\"/static/b0c9d01a7a765f2ad8726624b95eff41/1a291/project-image-update-1.png 148w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/2bc4a/project-image-update-1.png 295w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/fb8a0/project-image-update-1.png 590w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/db147/project-image-update-1.png 836w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧のユーザー情報が更新されています。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 74.94033412887828%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACrElEQVQ4y61TTU8aURSdhRujS/0j/gO3dqM0cds2XfYfdNtF+xNaFtWMVhY20QRTPxAlFUythspARWRgmIH5AEYGKSDDgzm9M47apDZpmt7k5N5337z7zrvnDjc5Ofl85tHMx8DjwMLc3BwfCAR417uYnZ3l5+fn+ampKX5kZITnOO5PWCCsEl5wT549XfpeyCObPYeiKFBV9Q7lchmNRgPLy8uYnp7GxMQERkdHMTY29hvGx8fdvXUuEom8rZsmNFW7zmazrCTLrKJqTCJfUsqsTLFerbHM2RkT0hkPKSHNUn7srdOZXlEqIbof+8DtRaPB/EUexycnzGXTarVgNZuwrCYaloWrqxauezYGgwHsfh/9PoNrg+EQPdt2145t3yTphSFuIxwO1mo1GIbORFGEeXmJX21IBy0q7F7kmePgIpfzLvTNIXgFqU0hLpGIB90FIzvPnaPuF+x0u2h32sTWgqzI0HQd3e61x1ai52maDlXTQO1yavW6V1DTtBCXl4pB4g1ZFJlFTHutHy4t1EkURSygSl6jgjoJZihlmLoBu92GUVaQiMWQFVKOcHp6XzATWgni6zGU8AbTPm2itL6Oy+gerP0YjK1t1CJR6JtbMHa2UN3ZhhmJoPX5APXdCIQlHvJG2CnwPAP1UzNNYvjmdRDpDCxBYObJMfK7u8ht70A/+gL18AC1oyOoiTgqh3FUKWd9S6KdyXj507U1SPG4k19cZKCWaM1miCukUkF0OgCNCckEVCrU3Qq8+CHIsgenVLr1jlMs3jzZMEKcKEmeKEPSxfEl+xvg3pPuNyprrsoFUfQKOsMh87Z8OD4eiu9yJB7B8c7eikKz986fN5s+Gv4LyPr+HK5wkiS9x38ywzBWabATL+lPEYjuga7rh/8C92y1WhWSyeSrn8H5AJ/EVXCaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-update-2\"\n        title=\"\"\n        src=\"/static/836e31067505db3d284f49bb4ea425b5/fb8a0/project-image-update-2.png\"\n        srcset=\"/static/836e31067505db3d284f49bb4ea425b5/1a291/project-image-update-2.png 148w,\n/static/836e31067505db3d284f49bb4ea425b5/2bc4a/project-image-update-2.png 295w,\n/static/836e31067505db3d284f49bb4ea425b5/fb8a0/project-image-update-2.png 590w,\n/static/836e31067505db3d284f49bb4ea425b5/b97a1/project-image-update-2.png 838w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"削除\"><a href=\"#%E5%89%8A%E9%99%A4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>削除</h4>\n<p>削除したい行の削除ボタンをクリック</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.14934289127837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAAClUlEQVQ4y61TS08TURQeXBtc+agrgjuNEYwLQlF/jBvxR7gC3bPSJkadRlnIgpgALSaAQMKigUILKTPMtLTzHvrAPtLH7cznmdsSSHzEEE/y5dx759zvfPecM8LNoaFno+PhuYcTj9/fHxsTH4yPiyPhCXGUMBIOi4+ePBWH7t4Tr4VucwzeComDoVDPn+MD4cvV6zcmhecvJqM7BynsbG9DkiQcyTJkuecPMxnomobpqSncGR7GlYEBCILwN8wJsXj8TalSgWVZTSJkpmUx03aYYdnMMC3mFktMyebYyuoaiy1/Y0vxZbYYi3Mf64PWre8bm/g0O/tRWFtdjWRVFal0mp2cnKBcrsAlb7suHEKQrNXuwPOBrueBHLfAB/uu5/vkWXCm6UZU+Do/H8nnC8jlckzXNTQaDVy0TruNCpGenbdbLaiKQr7dI+5Zj1DTosL6xnok2LBOh+2ldklhmQc2m0206HKwLxQKKBaLoBBOfLC/D8dx+Lei6/q1apUT6gYplGQp4pN0w9BZrVZDt+txQtu2YZoGiqUSLFq7DpWAUK83eIxyJGM7mcTuYcbPUt05YaAwtbcXYZSZns0Mw0L+OM9VmIYJXTeoWQ7VRsdxIUdJLDhEXq1WoWap7okEpKVF39jc7BGaZlRIp1L8yfQk5rgO0vSczKEEyyGFlk6ENoLamrZJSi2c/jhFvVaHUshjf2EB8utXvjYzw0C11svlqKBms5F+/Rn+YFT0X86oufA71H3b8buOw+8agUJVVTmhR60PLv4rcJ4kWPUIg6acEQat/+3FvsKLa1yM8Uhrfw45oaIob/sK2xTgXRId3hRdFwUa6Hf4T0a/72dha2vrJXX4iOYuQcO6c0kk6LeVk8nk9E+KvwmFDR1ScwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-delete-1\"\n        title=\"\"\n        src=\"/static/b1607176351ad84514e6c52fec749066/fb8a0/project-image-delete-1.png\"\n        srcset=\"/static/b1607176351ad84514e6c52fec749066/1a291/project-image-delete-1.png 148w,\n/static/b1607176351ad84514e6c52fec749066/2bc4a/project-image-delete-1.png 295w,\n/static/b1607176351ad84514e6c52fec749066/fb8a0/project-image-delete-1.png 590w,\n/static/b1607176351ad84514e6c52fec749066/851ad/project-image-delete-1.png 837w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧から削除したユーザーがなくなっています。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 535px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.14018691588784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACFElEQVQ4y62SzW7aQBDHVxyAG3eegBfgBVIB4kF6qnrpx9NEVsslkZse2hL1SA5waQ2KGuwaAgaMMbbxFy0GDAtMxxtKW0W9IEb6eTVrzX/+u7MknU4/PXtydlUoFN7k87lSPp8/kMvlSsVisZTJZEqxWKxECPkfbxEeeU5evH51IfcVkCQJVFUFTRsiGmOI+WQyAY7jIJvNQiqVgng8DolE4hHJZDL6VyaVSuXccV0YjUZLWZapNtKpputUHWq0r2p0bJhUHxu0cXtLhXqDfhHq9Gs9ovEHoR6K32X48PHTJbmp3HDtdhuazSZ1XQc8zwPP98HF1fen8HMWwGKxhNV6DWtKIYrNdos5ZfmeTbR/3+nw5Lpc5mzbwSOLVFU1+Du2WDid+hCG4cPGbgf32DwIgkPOGmBEa7fb5Um1VuWixDLGVJJkJrJYLGA+D5hbRemCaVrMZRiuoNVqgWkYYNv2wymw4W63Y4KKovCk0+lwG7SNQ6CRQDCbYYHJBmThQHRdj+4XDBRxXQ9WqzX0egrUalVoiiJ8u7tjJg+CkigyhxPLptGdRaKO44DtuNj9B07ZBtNCMQ9zJAjm6NhkTtXhkPGPYL/f5/ZXRuHI+H3kXq/HE/xw+wFQ/AFH8lgQN0/r8JSC5/sjLyPRY8DacD+US4LP4wJOFIPBoEwEQXjm+/5nfKg8Ppf3x4C171DjGrVe/gIh5xJ+ikFGNwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-delete-2\"\n        title=\"\"\n        src=\"/static/f05fb2933584ab5973f6a98536edbbe1/0e065/project-image-delete-2.png\"\n        srcset=\"/static/f05fb2933584ab5973f6a98536edbbe1/8485e/project-image-delete-2.png 148w,\n/static/f05fb2933584ab5973f6a98536edbbe1/b3455/project-image-delete-2.png 295w,\n/static/f05fb2933584ab5973f6a98536edbbe1/0e065/project-image-delete-2.png 535w\"\n        sizes=\"(max-width: 535px) 100vw, 535px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>これでユーザ一覧でCRUD操作ができるようになりました。</p>\n<h2 id=\"subscriptionを実装する\"><a href=\"#subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Subscriptionを実装する</h2>\n<p>Subscriptionを使って、ユーザー情報を他の人が編集したときにリアルタイムで同期するようにしてみましょう。</p>\n<h3 id=\"実装-2\"><a href=\"#%E5%AE%9F%E8%A3%85-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userCreated.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userCreated {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userUpdated.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userUpdated {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userDeleted.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userDeleted {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<ul>\n<li>index.vueでSubscriptionを実装します。templateには一切手をいれません。scriptタグのみ修正します。</li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vueの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/* (中略) */</span>\n<span class=\"token comment\">// 今回定義したgqlファイルをインポートします。</span>\n<span class=\"token keyword\">import</span> userCreatedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userCreated.gql'</span>\n<span class=\"token keyword\">import</span> userUpdatedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userUpdated.gql'</span>\n<span class=\"token keyword\">import</span> userDeletedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userDeleted.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql<span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// SubscriptionはSmart QueryのsubscribeToMoreで指定します。</span>\n      subscribeToMore<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\">// 登録時の処理です</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userCreatedGql<span class=\"token punctuation\">,</span>\n          <span class=\"token comment\">// Subscription発生時の処理をupdateQueryに定義します。</span>\n          <span class=\"token comment\">// 第一引数は前回のusers</span>\n          <span class=\"token comment\">// 第二引数はサーバーからのレスポンス情報　です。</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> newUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userCreated\n            <span class=\"token comment\">// ここで返した値がusersに代入されます。</span>\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// 更新時の処理です。</span>\n        <span class=\"token comment\">// 登録時とほぼ同様の処理なので説明は割愛します。</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userUpdatedGql<span class=\"token punctuation\">,</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userUpdated\n            <span class=\"token keyword\">const</span> targetUser <span class=\"token operator\">=</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span> <span class=\"token operator\">===</span> updatedUser<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n            targetUser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>name\n            targetUser<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>email\n            targetUser<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>age\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// 削除時の処理です。</span>\n        <span class=\"token comment\">// 登録時とほぼ同様の処理なので説明は割愛します。</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userDeletedGql<span class=\"token punctuation\">,</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> deletedUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userDeleted\n            <span class=\"token keyword\">const</span> userIndex <span class=\"token operator\">=</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span> <span class=\"token operator\">===</span> deletedUser<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User not found'</span><span class=\"token punctuation\">)</span>\n\n            prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>userIndex<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> createUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> updateUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">deleteItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`ユーザー(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)を削除しますか?`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> deleteUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>id\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/* (中略) */</span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-2\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>2つブラウザを開いてみて、片方で操作してみてください。\nリアルタイムでもう一方のブラウザにユーザー情報の変更が反映されていればOKです。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>簡単ではありますが、Nuxt.js+Apollo Clientで簡単なアプリの作り方をご紹介しました。\nせっかくのクライアントアプリなので、UIフレームワークを使ってリッチにしてみるのも良いかもしれません。\n一応Vue.jsのマテリアルデザインのUIフレームワーク<a href=\"https://vuetifyjs.com/ja/\">「Vuetify」</a>を使った版も以下においておりますので、参考にしてみてください🍅</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://github.com/Takumon/nuxt-graphpack-sample/tree/master/client_vuetify\" data-iframely-url=\"//cdn.iframe.ly/9B6aV8g\"></a></div></div>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://medium.freecodecamp.org/how-to-build-a-real-time-editable-data-table-in-vue-js-46b7f0b11684\">How to build a real-time editable data table in Vue.js</a></li>\n<li><a href=\"https://www.aintek.xyz/posts/graphql-nuxt-chat\">GraphQL と Nuxt.js でチャットを作る</a></li>\n<li><a href=\"https://github.com/the-road-to-graphql/fullstack-apollo-subscription-example\">the-road-to-graphql/fullstack-apollo-subscription-example: A minimal Apollo Server 2 with Apollo Client 2 with Subscriptions application.</a></li>\n<li><a href=\"https://github.com/bmsantos/apollo-graphql-subscriptions-example\">bmsantos/apollo-graphql-subscriptions-example: Apollo GraphQL Subscriptions issue</a></li>\n<li><a href=\"https://www.levvel.io/our-ideas/A-Guide-to-Subscriptions-in-GraphQL-with-Apollo\">Levvel Blog - A Guide to Subscriptions in GraphQL with Apollo</a></li>\n</ul>","fields":{"slug":"/nuxt-apollo-with-graphpack","title":"Nuxt.js＋Apollo ClientでCRUD操作 / ユーザー管理画面でQuery, Mutation, Subscriptionを実装","date":"2019-02-12T07:00:00.000+09:00","excerpt":"なにこれ以前の記事設定いらずのNode製GraphQLサーバー「Graphpack」の使い方でGraphQLのサーバー側を実装を紹介しました。Graphpackは備え付けのGraphQL Playground IDEで動作確認できますが、せ...","tags":["GraphQL","Nuxt.js","Apollo Client","Vue.js"],"keywords":["GraphQL"],"thumbnail":"/thumbnail/2019/02/nuxt-apollo-with-graphpack.png"}},"next":{"html":"<p><img src=\"/thumbnail/2019/02/vue-i18n-in-script-tag.png\" alt=\"vue-i18n-in-script-tag\"></p>\n<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://kazupon.github.io/vue-i18n/\"><strong>VueI18n</strong></a>はVue.jsの多言語対応ライブラリです。vueファイルのtemplateタグでは、<code class=\"language-text\">&lt;p&gt;{{$t(&#39;message.hello&#39;)}}&lt;/p&gt;</code>のように使います。ただ<strong>vueファイルのscriptタグや、他のJavaScriptファイルでの使い方</strong>は<a href=\"https://kazupon.github.io/vue-i18n/guide/formatting.html\">ガイド</a>に明記されていません。今回はそのやり方についてご紹介します。</p>\n<h2 id=\"使い方\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h2>\n<p><a href=\"https://github.com/kazupon/vue-i18n/issues/149\">GitHubのIssue</a>に答えが載っています。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://github.com/kazupon/vue-i18n/issues/149\" data-iframely-url=\"//cdn.iframe.ly/GvV4JME\"></a></div></div>\n<br/>\n<p>まずVueI18nを以下のように定義します。</p>\n<div class=\"gatsby-code-title\">i18n.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span>\n<span class=\"token keyword\">import</span> VueI18n <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-i18n'</span>\n\n<span class=\"token keyword\">const</span> messages <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  en<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    message<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      hello<span class=\"token punctuation\">:</span> <span class=\"token string\">'hello world'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  ja<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    message<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      hello<span class=\"token punctuation\">:</span> <span class=\"token string\">'こんにちは、世界'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>VueI18n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> i18n <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VueI18n</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  locale<span class=\"token punctuation\">:</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span>\n  messages<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>vueファイルのscriptタグでは以下のようにします。\n<strong>VueI18nオブジェクトの<code class=\"language-text\">tc</code>メソッドを使います。</strong>\nこうすることでvueファイルのscriptやJavaScriptファイルなど、どこでも使えるようになります。</p>\n<div class=\"gatsby-code-title\">vueファイルのscriptタグ</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// i18nをインポートします</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> i18n <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'i18n.jsの相対パス'</span>\n</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* (中略) */</span>\n    methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">getHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">return</span> i18n<span class=\"token punctuation\">.</span><span class=\"token function\">tc</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message.hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>        <span class=\"token punctuation\">}</span>    \n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">/* (中略) */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<p>以上です🍅</p>","fields":{"slug":"/vue-i18n-in-script-tag","title":"VueI18nをscriptタグやJSファイル内で使う方法","date":"2019-02-21T07:50:00.000+09:00","excerpt":"なにこれVueI18nはVue.jsの多言語対応ライブラリです。vueファイルのtemplateタグでは、&#x3C;p>{{$t('message.hello')}}&#x3C;/p>のように使います。ただvueファイルのscriptタグ...","tags":["Vue.js","VueI18n"],"keywords":["Vue.js"],"thumbnail":"/thumbnail/2019/02/vue-i18n-in-script-tag.png"}}}}