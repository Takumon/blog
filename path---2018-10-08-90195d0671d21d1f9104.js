webpackJsonp([0x67309493c372],{456:function(n,a){n.exports={data:{site:{siteMetadata:{title:"Takumon Blog",author:"Takuto Inoue"}},markdownRemark:{id:"/Users/inouetakumon/git/blog/src/pages/2018/10/08/index.md absPath of file >>> MarkdownRemark",html:'<h2>なにこれ</h2>\n<p>スマホでネイティブアプリっぽいUXを実現するため、GatsbyでPWA対応した時のメモです。\n以下の4つが可能になりました。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/pwa-page-b0a7ff9e5cad14b32a6a127a86573e34-b06b8.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 417px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 188.72901678657075%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,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\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="ブラウザツールバーの色とアプリ追加催促のトースト"\n        title=""\n        src="/static/pwa-page-b0a7ff9e5cad14b32a6a127a86573e34-b06b8.png"\n        srcset="/static/pwa-page-b0a7ff9e5cad14b32a6a127a86573e34-6ceb3.png 148w,\n/static/pwa-page-b0a7ff9e5cad14b32a6a127a86573e34-aafa6.png 295w,\n/static/pwa-page-b0a7ff9e5cad14b32a6a127a86573e34-b06b8.png 417w"\n        sizes="(max-width: 417px) 100vw, 417px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/pwa-icon-962958d276a251645595b70672c01110-47df8.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 412px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 122.0873786407767%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAFhklEQVQ4y32UC1BUVRjHbzVOzlSwASa7e+8u711AZKUEdtllFxbYRXmIKI8YkIeOZBhGIgvCLqiVaCoOWT4qVOQRYmU6QuPYNE7mjrJZ6SSTjpYrjStZTo9JZQ//zr0LSDbTnfnNd77vnu9/vnPv+Q7DPMY9LVMVnArTVHyr0JQPRSRUOGSaSodvTJnD74UKh29UkcNPucThF5FPyXP4huc5gmJLHeHaFY4wdblDSecrNBVDwbGll6TRhQeYGc/Fi9i4qj9YXQO4uNcgz9sD77KjmJHbjZkFH0JU0g+xvglSdS2kmjpINOsQoG9AiLERQYb1CKYE6usRnNQETr3mAhNmfl0kUubfDpIHITLE280YrSQ+u5VUFuWQPFMx8c07RGYv3EE4dS2R6hoIq20g0oR6ItHwWATEGsuYJKEBEnXtWSYoa6/IR5E9qpOGYO58ljCGGuwstgDlGtzINSAsfx9mpbdBrq4Dp22krIeMWpluPR03gNXWUyyE1TXSHayzM/KkN0V+kQWjvtIEeInnkyfSWmDK2IgT5ky0GAvhm3cA4oU7IaMVsHobuES6NZrMI+OtZxHC6awewWeilvqwCfW/qHK2IN5cT/yLehCxvAuqorcRVdAO/xWfQpzRDrneClnyBnCGZnC88HQSrUSubwGX0GBnlAzzJPt8lSuIlu6/vJ94NX0D/5JeSJb1QrysD/4vHkKAsQWBSTYEJts8lhJAkSdZITcIEH4hun078/iuUYNPed/9mYVdYIo/Gp9paoN35Cp4RVdDpKLMXU3Ha+CtehXe86ahWiNYkccnYv6TaOvsjKgbtwIHAWPbeWJpeg/VtoOo3tiL1S09WGXrxUuUVzb00BjvT2Dt9kDHL1OqmnuIKmszZsfRb6g+9mBv5XmgYwDun37G+G9/AlduAD0DQHs3sOcwcPw0cPEK/u8hBdUddCc1dgZjd1fykYvDZOz6iHv8xxE3Llx24+RZNz4+5UbnMTdOO9y4ftNNZ7nx9z037t33cP/BGB6MuUHos7TqfTwbs9bO/Pr7XzW84LlLGKOMX7sJfD1MF7gKfPcDsKMT2Lof2E0rPfoF8G4frbof6B18tML98ImptTMjIyNl15x3cGbI6bZfcI5/5XDi9DknTn7pYXePEx/0O9E/6MSpM050fuLEQcoR6l8aduL7K04MX71JMpbvxqxY+lPiU0pmhSZZ7ihSm6EwNpGwFCsUqVYo0zxEpVsxhxJptiKc+nPMTQLhJitCkqcgAfpmBBisduYpeao3PeGjrM4GaUIjkdKTP0VCIyTTkD4yZrVT0E4RzqedkUXniGTaulE5PZiyxCZCwRQ6vs2m+4341/sJ5HwerTAoudnOSOZkCYKyRBufTDjdw1710IT/xiZInLQ0jwoGG1vsjDQqWxDkEmnr0J4UVtQJqwoVsjzTquXHk7784VzC0l4OTt1gZ9i5i0Sc1jLK0QCr5wXpJUBvjklLFxGQTcDpH/pynWeOnBbC5ytNm+wMp8oRcbr6Uc7gERQE9I9i81xdAtNjHnGOz6OC4elv0PswJlfE6iyjUvpTJImNREK/CY+YXqBiLQ/1eejWhPhkbNKn86glEioYauYF5+WKQo3Nt0PTWqFI2+xWmluJMn0LUS54i0RkbCMRmdtIZNZ2Ep65XbCR1OfjivStwjyFqZWE0Tw+P3JB61mGVWaJ4jK23TUVdyG1qAvmZYeRXXkUJXWDWFw9gNyaQRTUnUS57XMsXfuZEFtUdRyl604go/wIUuiFbMjvQGJeB+Zn7BhipAqzV3TKhsvaxe13NIt23dLm7HUl53e4ssq7XClFh1ypxd2u9LJeV87KPpeppJvGulzGwoOuzNJOl37JPpc6+x1XbGbbrZj0rXejUzcN/APepfKBOHzWiAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="ホーム画面のアイコン画像"\n        title=""\n        src="/static/pwa-icon-962958d276a251645595b70672c01110-47df8.png"\n        srcset="/static/pwa-icon-962958d276a251645595b70672c01110-04ecf.png 148w,\n/static/pwa-icon-962958d276a251645595b70672c01110-12192.png 295w,\n/static/pwa-icon-962958d276a251645595b70672c01110-47df8.png 412w"\n        sizes="(max-width: 412px) 100vw, 412px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/pwa-initialpage-b30fadaefe91012191e97096817595c0-b06b8.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 417px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 148.6810551558753%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsSAAALEgHS3X78AAAEdUlEQVRIx+WVbVBUVRzGT4QQlfLmh2qcmhzLGWBZ9u0uGjAMxfihBnK0L6ABw0dqSJ1mqmn60BRWClpZ65SiLDo1vIwKBIKyGAyLoA7Eyy4L7PKucLm4MFo5cu95Oufi4kZK0td25jfn/5xz7nOfc+/c/5LgYsUWdgp3NhS6f95W+OsRYX/bUXOB3fLKl3ZL6jd2y2tf2y0ph+yWhK8YB+yWpIN2y6uHF9e2fLFIwoHLFv3Hth8jCjyfkdDTuBNVCxxpnZ/zdEzP3L4xI/1+XZQmXaLUeF6UbPWi1HZpUY85RcnVKUr2JlG6WCdKoluUZtzT0tTYn+K8veaP9JTMzwn56FrVoUuOW/My0PIbIN0GHKNATStw8DTjFHCiBrD3LsLnvysHvi0DrrqAtj6gnY1jniFsTNt7mKzPKz1hq6y7WdUC2NplxeGmtK2L0o4eSgdHKZ2YptQzQemURKl7nNKfaimtvEBpeT2lFQ2Uzs7JFMDCgKMXz6XvKyTh+RWlZysavdXszs1XZdrVTzF2g4KZoG+IwjVC0ekEhicpnB6KM40UvzRTnLVR1LXwvQrzgzzk7MOG9L1FZF1embXlwgVvlxvo98g8Da45AJYOC+zm4k2Kpit0ydA9DlzppegZpLh4maL4jILBCciTw3145g1mGPpOubWprsE7NccN79JpSWGJFAyMKJC8CsRZhV2sqEk84wq6BxS0dipo71bQ0aOgomEBo1OQx4Z68Cw3jMgvs9ZXN3vPtfLkoPhvP3mcvRT1yGHvVlhPHz/prTg/ie4eJx1wudDffw9Wu/z1A3A4nBgZHZNt9bXY8OY+lvC9KuvWuM3exKStEASBMrAcs2mRB61xTIJZ3mLU4cWdHxSRyD1VVlP0Jm+cQYBer6cM+KPV6RDNNkcxtLq/r/nQ6Q2yoIu9Z8gSCjEveQ0mMwwGA2XwEUaGlm3eZjaj8u1UVO9KxnbBBM29NYM/RpNs1mv9DTcxQ+EfhrE6bmjCyI5UzO1MxY54E2LY3HJDvcEoCysZ8mP4NvOUySYjUgSjWi+Z+NcrGfo2+p6Pz1Trp1dl6NtsMplgNBqhYy/FwM3YyOe4Vuf8TP/VMC4uDklJScjPz0dOTg5yc3ORnZ2NjIwM5OXlIS0tDVqtdnUJOYmJiapxQkKCSnx8PJKTk1V8KR/5GfqS+sNNeDJer+rI/qYPY1UvZbX83w15+xJYt9EbH9xtHgnV0Ndt9lRbzZqXvUYhnn8ZakL+hXCWGsUKWh15tzHEYeNbHxaxf71zVt3mF7warQ6xsbGUExMTo/IwrdFoaHR09JKO1WoXdJooPL/9/SLyWFZJ6RpCboWsC0dg0BMICAzC2tBwFV4HrAnCU2tDERoRqerHVb0O4ZHrWR3MrmEEhyAwgCDAnHmYkMxjJYSQ4SBCbrPRy5hbG0DmnmbwmvMkIyzovg5hhAff14xZxl0S83oBIfuv7ye7i4+Q3SePkqwSC0tsIZnFi/Cas4vVGceX6WP3dZb1e7Lr2A/kE+enfwElJ9r2jwa1ZQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="ホーム画面から起動したときの画像"\n        title=""\n        src="/static/pwa-initialpage-b30fadaefe91012191e97096817595c0-b06b8.png"\n        srcset="/static/pwa-initialpage-b30fadaefe91012191e97096817595c0-6ceb3.png 148w,\n/static/pwa-initialpage-b30fadaefe91012191e97096817595c0-aafa6.png 295w,\n/static/pwa-initialpage-b30fadaefe91012191e97096817595c0-b06b8.png 417w"\n        sizes="(max-width: 417px) 100vw, 417px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2>前提</h2>\n<ul>\n<li>ServiceWorkerを利用するため、SSL化が必須です。そのためブログはhttpsでアクセスできるようにしておく必要があります。</li>\n</ul>\n<h2>対応概要</h2>\n<p>Gatsbyは<a href="https://github.com/gatsbyjs/gatsby-starter-default">スターター</a>の時点で、PWA用のプラグイン下記2つが導入済みなので、設定を少々いじるだけで素敵なPWA対応ができます。</p>\n<ul>\n<li><a href="https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-manifest">gatsby-plugin-manifest</a></li>\n<li><a href="https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-offline">gatsby-plugin-offline</a></li>\n</ul>\n<p>上記両方のプラグインを<code class="language-text">gatsby-config.js</code>に定義する場合、<code class="language-text">gatsby-plugin-manifest</code>を必ず先にする必要があります。</p>\n<h2>gatsby-plugin-manifestの設定</h2>\n<p>PWAで必須の<code class="language-text">manifest.webmanifest</code>を生成してくれるプラグインです。<br>\nサイトに<code class="language-text">manifest.webmanifest</code>を配置することで、スマホでブログを見たときに、ネイティブアプリのようなUXを実現できます。</p>\n<h3><code class="language-text">manifest.webmanifest</code>とは</h3>\n<p>下記3サイトで概要を理解しました。</p>\n<ul>\n<li><a href="https://www.w3.org/TR/appmanifest/">W3C ウェブアプリマニフェスト仕様書</a></li>\n<li><a href="https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/?hl=ja">Google ウェブアプリマニフェスト</a></li>\n<li><a href="https://developer.mozilla.org/ja/docs/Web/Manifest">MDN ウェブアプリマニフェスト</a></li>\n</ul>\n<p>とくにGoogleのサイトでは、設定ごとにどのようなUXになるかをアニメーションで示しているので、イメージをつかみやすいです。</p>\n<h3>アイコン画像は全サイズ用意した</h3>\n<p><code class="language-text">manifest.webmanifest</code>ではサイズ別アイコンを指定する必要があります。\nプラグインでは1つ大きなアイコンを用意すれば、全サイズ自動生成してくれる…とありますが、僕はビルド時にエラーが出たので、\nやむなく全サイズのアイコンを用意しました。\nただ全部手動でというわけでななく、<a href="https://app-manifest.firebaseapp.com/">Web App Manifest Generator</a>というサイト便利なサイトを使いました。アイコンを放り込むと全サイズのアイコンを作ってくれます。</p>\n<p>参考：<a href="https://qiita.com/shisama/items/d4d0b24980beaea57231">3分でPWAのmanifest.jsonと各サイズのアイコンを作るApp Manifest Generatorの紹介 | Qiita</a></p>\n<p>作ったアイコンは、<code class="language-text">static/icons</code>配下に格納します。</p>\n<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">├── static\n    ├── icons\n    │   ├── app-sns.png\n    │   ├── icon-128x128.png\n    │   ├── icon-144x144.png\n    │   ├── icon-152x152.png\n    │   ├── icon-192x192.png\n    │   ├── icon-384x384.png\n    │   ├── icon-512x512.png\n    │   ├── icon-72x72.png\n    │   └── icon-96x96.png</code></pre></div>\n<h3><code class="language-text">gatsby-config.js</code>の設定</h3>\n<p>下記のようにしました。</p>\n<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    <span class="token comment">// ・・・</span>\n    <span class="token punctuation">{</span>\n      resolve<span class="token punctuation">:</span> <span class="token string">\'gatsby-plugin-manifest\'</span><span class="token punctuation">,</span>\n      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n        name<span class="token punctuation">:</span> <span class="token string">\'Takumon blog\'</span><span class="token punctuation">,</span>\n        short_name<span class="token punctuation">:</span> <span class="token string">\'Takumon blog\'</span><span class="token punctuation">,</span>\n        start_url<span class="token punctuation">:</span> <span class="token string">\'/\'</span><span class="token punctuation">,</span>\n        background_color<span class="token punctuation">:</span> <span class="token string">\'#333\'</span><span class="token punctuation">,</span> <span class="token comment">// アプリ起動時の背景色</span>\n        theme_color<span class="token punctuation">:</span> <span class="token string">\'#d23d29\'</span><span class="token punctuation">,</span> <span class="token comment">// ブラウザツールバーの色</span>\n        display<span class="token punctuation">:</span> <span class="token string">\'minimal-ui\'</span><span class="token punctuation">,</span>　<span class="token comment">// アプリのスタイル</span>\n        <span class="token string">"icons"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token comment">// アイコン設定(サイズ別アイコン自動生成機能を使わない場合は、サイズ毎に設定が必要)</span>\n          <span class="token punctuation">{</span>\n            <span class="token string">"src"</span><span class="token punctuation">:</span> <span class="token string">"icons/icon-72x72.png"</span><span class="token punctuation">,</span>\n            <span class="token string">"sizes"</span><span class="token punctuation">:</span> <span class="token string">"72x72"</span><span class="token punctuation">,</span>\n            <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"image/png"</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">{</span>\n            <span class="token string">"src"</span><span class="token punctuation">:</span> <span class="token string">"icons/icon-96x96.png"</span><span class="token punctuation">,</span>\n            <span class="token string">"sizes"</span><span class="token punctuation">:</span> <span class="token string">"96x96"</span><span class="token punctuation">,</span>\n            <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"image/png"</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token comment">// サイズ別のアイコン設定</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token comment">// ・・・</span>\n  <span class="token punctuation">}</span></code></pre></div>\n<h3>設定のテスト</h3>\n<p>実際スマホからアクセスして試すこともできますが、\n正しくマニフェストがブラウザに読み込まれているかは、PCからChrome開発者ツールの<code class="language-text">Application</code> > <code class="language-text">Manifest</code>で確認できます。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/manifest-test-7e373e33bd1461c6c4aa6791df38d552-0d467.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 70.79303675048357%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAC8UlEQVQ4y22S3WvUWhTF85cJ98Ei96KI2imC4kOriDpXvVwVKagPIqiICj7YWtSOqFAExbeLiPhgsVZbp63WfmEmnZkkM5nJSTL5mMxkL/c502rBG1jsEM75Ze29trZz+7blf/JHggdjY+7oyIgojI+L0dFRMTg0JPbt3SsGcjmRy/WLXD+L3/tZ+/h9/0BOHNrfL/7atVts3/Gn2NHXJ/pY2sfiXG32yyK+V0wYZg161YZdb8IXAkbFgl7m7+Uy1ssVGEYJJcNAwyyjUGzgxkyIwqSOe68XMTtbZM1Ai/U1M5ufRrIwlcXfPhDWJqnwsUQjMzbdfh/QtXcBDb9p0Z1PCRmWRxUWdYmqMagUgsotFlegJ61eKJiLx4awdCFPq1dO4PvN43h76zS+vriJGd3B5EodU7qHr3aEoBUhTbtopx2+ykKmONTtouEm8FspNOf+U3N68Cimjv1NU/kTmD1/CtPnBmE9uoqGVUZpbRl+o4asHYGyDEkcw3VdeH6gLGVE6GasLiHjqtXvPjGXDx1A8fAwLVy6COfcWfjnzyC4dwuVahUrq6tougJhFKHVasHzfAXJGE5cN6U65qo1rz823T/ysPecodrAv3AOSuUhLl+HZVlKggOKGCghssZhiE5HtowN2K+HQzFNrFRBSwaxQKvryJZ1pPq6gpVKJdi2jZhbbbcTbreJpuMg7aQ/gVuleVFoOqEPSzSp5gtUGw78NFGH6/W6chcEAUJ2JS8oMIfS80W/A23LNhfm5jFfnKO5z0WsLC0haoUqAAmS8n1fAZMkUa16bh1R4P6/Qx60KQ/yJfI8TyUoJZ3IECRMSs5ODj1ha42Jh2j+97IH5JXZOkWNIaZsy3EcqnKqcm6y1Wgj1U2gdCiB7W4G590r6M/G5M70tnmrwyDwFZBBVKvZyp0EtNvtn+0qh2FvDDIKb2Ic1vBJyfstaY3/bMqFTNMORVGsIJs7tnWG0jFRhpgD8dcW8en5HcQVowfcOC+fH3iH6Koq0+yhAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="manifest-test"\n        title=""\n        src="/static/manifest-test-7e373e33bd1461c6c4aa6791df38d552-fb8a0.png"\n        srcset="/static/manifest-test-7e373e33bd1461c6c4aa6791df38d552-1a291.png 148w,\n/static/manifest-test-7e373e33bd1461c6c4aa6791df38d552-2bc4a.png 295w,\n/static/manifest-test-7e373e33bd1461c6c4aa6791df38d552-fb8a0.png 590w,\n/static/manifest-test-7e373e33bd1461c6c4aa6791df38d552-526de.png 885w,\n/static/manifest-test-7e373e33bd1461c6c4aa6791df38d552-0d467.png 1034w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2>gatsby-plugin-offlineの設定</h2>\n<p>ネットワークにつながりにくい環境、オフライン環境でもGatsbyのサイトが動くようにServiceWorkerを生成するためのプラグインです。\n<code class="language-text">gatsby-plugin-manifest</code>とあせて使う場合は、必ずこのプラグインを後に定義する必要があります。\nデフォルトは<a href="https://developers.google.com/web/tools/workbox/modules/workbox-build">Workbox</a>の設定を従っており、必要に応じて<code class="language-text">gatsby-config.js</code>で上書くという感じです。\nWorkboxは宣言的な記述だけで最適なServiceWorkerのコードが生成できるライブラリだそうで、詳細は下記にわかりやすく書かれていました。<br>\n参考：<a href="https://qiita.com/nazonohito51/items/32b61cabdac8b24769bd">ServiceWorkerを簡単に書けるworkbox-swの使い方 | Qiita</a></p>\n<h3><code class="language-text">gatsby-config.js</code>の設定</h3>\n<p>とくに何もいじってません。<br>\n複雑なオフライン処理をするなら修正するかもしれませんが、基本的にWorkboxに従っておけば問題なさそうでした。</p>\n<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    <span class="token comment">// ・・・</span>\n    <span class="token template-string"><span class="token string">`gatsby-plugin-offline`</span></span><span class="token punctuation">,</span>　<span class="token comment">// 必ずgatsby-plugin-manifestの後に定義する</span>\n    <span class="token comment">// ・・・</span>\n  <span class="token punctuation">}</span></code></pre></div>\n<h2>まとめ</h2>\n<p>これまたプラグインで簡単にPWA対応できてしまいました。（あまりプログラミングをしてる感じがありません…）<br>\n次あたりは、プログラミングっぽい記事を書きたいと思います。</p>',frontmatter:{date:"2018/10/08",title:"GatsbyでPWA対応",tags:["Gatsby","PWA"]}}},pathContext:{slug:"/2018/10/08/",previous:{fields:{slug:"/2018/10/07/"},frontmatter:{title:"GatsbyでYouTubeとTwitter埋め込み",tags:["Gatsby","SNS"]}},next:null}}}});
//# sourceMappingURL=path---2018-10-08-90195d0671d21d1f9104.js.map