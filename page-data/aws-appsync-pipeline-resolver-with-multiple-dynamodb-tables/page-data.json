{"componentChunkName":"component---src-templates-blog-post-js","path":"/aws-appsync-pipeline-resolver-with-multiple-dynamodb-tables","result":{"data":{"site":{"siteMetadata":{"title":"Takumon Blog","author":"Takuto Inoue"}},"markdownRemark":{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>AWSのGraphQLフルマネージドサービス<a href=\"https://aws.amazon.com/jp/appsync/\">「AppSync」</a>で複数のデータリソースを扱う場合は<strong>「Pipeline Resolver」</strong>という機能を使います。\nこれは、1つのデータリソースを扱うファンクションを定義し、それらを組み合わせるという仕組みです。\nファンクションではデータリソースのCRUD操作や操作結果の加工などを<a href=\"http://velocity.apache.org/engine/1.7/vtl-reference.html\"><strong>VTL（Apatch Verocity Template Language）</strong></a>で記述します。\n今回は、<strong>Pipeline Resolverを使って複数のデータリソース（DynamoDBの複数テーブル）から情報を取得する場合のVTLの書き方について以下2パターンをご紹介します。</strong></p>\n<ul>\n<li><a href=\"#1%E5%AF%BE1%E3%81%A7%E7%B4%90%E3%81%A5%E3%81%8F2%E3%81%A4%E3%81%AEdynamodb%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%8B%E3%82%891%E4%BB%B6%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\">🔰 1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合</a></li>\n<li><a href=\"#1%E5%AF%BEn%E3%81%A7%E7%B4%90%E3%81%A5%E3%81%8F2%E3%81%A4%E3%81%AEdynamodb%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%8B%E3%82%89%E8%A4%87%E6%95%B0%E4%BB%B6%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\">💪 1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合</a></li>\n</ul>\n<p><small>※この記事ではあくまでもVTLの書き方に注力して説明します。GraphQLのスキーマ・リゾルバー、AppSyncのリクエストマッピングテンプレート・レスポンスマッピングテンプレートの概要については知っている前提です。</small></p>\n<h2 id=\"pipeline-resolverの概要\"><a href=\"#pipeline-resolver%E3%81%AE%E6%A6%82%E8%A6%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pipeline Resolverの概要</h2>\n<p>少しだけ説明します。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4564cb92bd23969ee7df2b0be2b894f8/65d79/appsync-resolver.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 117.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABcRAAAXEQHKJvM/AAAECklEQVQ4y4VV/U+TVxTuP7KftuyHZUuGm9vU+cPcolN0xsy46aS1KrqIiHNLjGEOpmK2JcLGsmSBV8AVLOjko3wUaFFACsqXgsjb0tLWVipTka/R2t735dm5l5YJFLzJk/Pe3Hufe855zrmvpr6+/qDT6SyRZTnP4XBIg7IsBUb80vTEmDT57Ik0NfGUMPY/xp8KuFxOSZbtkt1uJyvnE0ex2WxO0fh8vlIsGgNDPkildTBUWFF4tWEBLl1rFIg3iKtGMzw8LPGJqqqhSIQx+mQZF/LZmxv2sISNWvbGR7tZwiYte3vjHF5du5O9sno7cz8YEXsVRWF09jnnIC6jxu12F/LJ7OwsY0wRN537rRB0GO9u1uOtj/di1af7kLBJh1WE19d/gdfW7YTXH0DUEX5WHCSuKwsI+SIf7V39yCuphLGyEX/9XYeC0moUllXDcM2M4vJ6sTY+OYXoueUJuZ2LGnj8ZAy3eu5BdrrReWcAdwccuEPouz80T8QdUAg87mUJo2u4YetGTr4RJeVm8tCES1drkVdcgYvGKvw7E4x5FtPj5YQ8R/U32mG92YnyuuuosdxEjbVNeBnL3UwwRKmogWSsUixtPXC5hpcSxoTp6ZexNzUD2rQfsetwOr46moHEpBPIIsEwqyIcDsPjG8Gabcn45MtURf/tT3AMOZcn7L1nh47IdGlnsPvIaexJ+QE7DpxEVm4RVIoiEongYWAUW3Xf4f2tB5Sk41mg4l4+ZP/IKKncgDKTBcVcXYKBFG+iFFDp0cUMk1PTkC5XIfdimWKydlDIrqWEMeVeHNNTk7SBzc9jCr8whBcejyc+IT/g8vjQ3N6Nts67qCUxLC230dTWJcpGXEqRcFFqm2wwNbQqvfddvFNWyCEXhYTQHiNRvp4TZUtMFMzOi/Je4n5s2JWi6E6cJ1GGVlZZeywT+m/OktqZSKLvz5NP4fzvRcI7Icqjf8QlqxP3K0lp51YWJTD6GFdIEGNFg2i9Iqo33n684FVVEaKMT0whJ8+Is78WKCWV1viixAh7+u24TGSNlLsKczPl0SasqbEVwdBzEfZiUeJ2Cov2stPtEyVjvt6OauqSOrIV5hbqno55pXk1RAWKTxjrTU7W0tEr2ox72nqrF7auPlHs3X0ymmlthvr5pa8Ni4b78x8GvLN5Hz7YdnDuXdyip7leWD6nxxcPHj5a9j0siC6EKVxereqZnAJ1zWfJ6rrth1QiUdfvOKyupe8PyRKhSq+26vEFxF4Km49IlLBM4/V6DYv/DSaLDYdO/oLjmblISc/GkfQL8zj6fTZST+dgcjq45J9CXOWawcHBbKqpiWAw6AmFQn6y/kg47FcYI0T8qsIWQOGgtdjeqPUSxzPi+vM/v3UMeAWNUVMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync-resolver\"\n        title=\"\"\n        src=\"/static/4564cb92bd23969ee7df2b0be2b894f8/5a190/appsync-resolver.png\"\n        srcset=\"/static/4564cb92bd23969ee7df2b0be2b894f8/772e8/appsync-resolver.png 200w,\n/static/4564cb92bd23969ee7df2b0be2b894f8/e17e5/appsync-resolver.png 400w,\n/static/4564cb92bd23969ee7df2b0be2b894f8/5a190/appsync-resolver.png 800w,\n/static/4564cb92bd23969ee7df2b0be2b894f8/65d79/appsync-resolver.png 905w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>Pileline Resolverの中で、どのファンクションをどの順番で呼び出すか指定します。</li>\n<li>ファンクションは「データリソース、リクエストマッピングテンプレート、レスポンスマッピングテンプレート」のセットです。</li>\n<li>柔軟性が高く、処理の共通化なども可能です。</li>\n</ul>\n<h2 id=\"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合\"><a href=\"#1%E5%AF%BE1%E3%81%A7%E7%B4%90%E3%81%A5%E3%81%8F2%E3%81%A4%E3%81%AEdynamodb%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%8B%E3%82%891%E4%BB%B6%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合</h2>\n<h3 id=\"apiとデータリソースの仕様\"><a href=\"#api%E3%81%A8%E3%83%87%E3%83%BC%E3%82%BF%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E4%BB%95%E6%A7%98\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>APIとデータリソースの仕様</h3>\n<details><summary>コチラをクリックしたら見れます。リゾルバーとあわせてご覧ください。</summary><div>\n<br/>\n<p><code class=\"language-text\">{&quot;id&quot;:&quot;1000&quot;}</code>を引数にAPIを呼び出すと以下レスポンスが返ってくる想定です。</p>\n<div class=\"gatsby-code-title\">APIのレスポンス</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1000\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ギャッツビー太郎\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"departmentId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"9001\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"departmentName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"総務部\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"queryのスキーマ\"><a href=\"#query%E3%81%AE%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Queryのスキーマ</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">type Sample1 {\n    id: ID!\n    name: String!\n    departmentId: String!\n    departmentName: String\n}\n\nquery {\n    sample1(id: ID!): Sample1\n}</code></pre></div>\n<h4 id=\"取得対象データ\"><a href=\"#%E5%8F%96%E5%BE%97%E5%AF%BE%E8%B1%A1%E3%83%87%E3%83%BC%E3%82%BF\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>取得対象データ</h4>\n<div class=\"gatsby-code-title\">従業員テーブル（Employeeテーブル） ※簡単のため１件のみ</div>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token list punctuation\">*</span> id: 100\n<span class=\"token list punctuation\">*</span> name: ギャッツビー太郎\n<span class=\"token list punctuation\">*</span> departmentId: 9001</code></pre></div>\n<div class=\"gatsby-code-title\">部署テーブル（Departmentテーブル） ※簡単のため１件のみ</div>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token list punctuation\">*</span> id: 9001\n<span class=\"token list punctuation\">*</span> name: 総務部</code></pre></div>\n</div></details>\n<br/>\n<h3 id=\"リゾルバーの書き方\"><a href=\"#%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リゾルバーの書き方</h3>\n<p>「従業員情報 + 従業員に紐づく部署情報」を1件取得する場合、以下のようなVTLを作成します。</p>\n<h4 id=\"1-従業員テーブルに対するファンクション\"><a href=\"#1-%E5%BE%93%E6%A5%AD%E5%93%A1%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AB%E5%AF%BE%E3%81%99%E3%82%8B%E3%83%95%E3%82%A1%E3%83%B3%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 従業員テーブルに対するファンクション</h4>\n<div class=\"gatsby-code-title\">リクエストマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\"># 従業員IDを指定してDynamoDBから1件情報を取得します。\n{\n    &quot;version&quot;: &quot;2017-02-28&quot;,\n    &quot;operation&quot;: &quot;GetItem&quot;,\n    &quot;key&quot;: {\n        &quot;id&quot;: $util.dynamodb.toDynamoDBJson($ctx.args.id),\n    },\n}</code></pre></div>\n<div class=\"gatsby-code-title\">レスポンスマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\"># 従業員情報をレスポンスに設定します。\n$util.toJson($context.result)</code></pre></div>\n<h4 id=\"2-部署テーブルに対するファンクション\"><a href=\"#2-%E9%83%A8%E7%BD%B2%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AB%E5%AF%BE%E3%81%99%E3%82%8B%E3%83%95%E3%82%A1%E3%83%B3%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 部署テーブルに対するファンクション</h4>\n<div class=\"gatsby-code-title\">リクエストマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\"># 前ファンクションの結果（従業員情報）に紐づく部署情報を取得します。\n{\n    &quot;operation&quot;: &quot;GetItem&quot;,\n    &quot;key&quot;: {\n        # 前ファンクションの結果は $ctx.prev.resultで参照できます。\n        # 部署IDを指定してDynamoDBから1件情報を取得します。\n        &quot;id&quot;: $util.dynamodb.toDynamoDBJson($ctx.prev.result.departmentId),\n    }\n}</code></pre></div>\n<div class=\"gatsby-code-title\">レスポンスマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\">#if($ctx.error)\n        $util.error($ctx.error.message, $ctx.error.type)\n#end\n\n# 前ファンクションの結果（従業員情報）と今回の結果（部署情報）をマージします。\n# オブジェクトに新しくプロパティを追加する場合は putメソッドを使います。\n# putメソッドを使う場合は $util.qr で囲む必要があります。\n$util.qr($ctx.prev.result.put(&quot;departmentName&quot;, $ctx.result.name))\n\n# マージ結果をレスポンスに設定します。\n$util.toJson($ctx.prev.result)</code></pre></div>\n<h2 id=\"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合\"><a href=\"#1%E5%AF%BEn%E3%81%A7%E7%B4%90%E3%81%A5%E3%81%8F2%E3%81%A4%E3%81%AEdynamodb%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%8B%E3%82%89%E8%A4%87%E6%95%B0%E4%BB%B6%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合</h2>\n<h3 id=\"apiとデータリソースの仕様-1\"><a href=\"#api%E3%81%A8%E3%83%87%E3%83%BC%E3%82%BF%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E4%BB%95%E6%A7%98-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>APIとデータリソースの仕様</h3>\n<details><summary>コチラをクリックしたら見れます。リゾルバーとあわせてご覧ください。</summary><div>\n<br/>\n<p><code class=\"language-text\">{ &quot;contractor&quot;:&quot;ギャッツビー太郎&quot;}</code>を引数にAPIを呼び出すと以下のレスポンスが返ってくる想定です。</p>\n<div class=\"gatsby-code-title\">APIのレスポンス</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"contracts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"items\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span>\n            \t<span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1000\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"〇〇〇案件\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"contractor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ギャッツビー太郎\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"productIds\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token string\">\"2001\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"2002\"</span>\n                <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"products\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2001\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"トマト\"</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2002\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ナス\"</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span>\n            \t<span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1001\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"△△△案件\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"contractor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ギャッツビー太郎\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"productIds\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token string\">\"2002\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"2003\"</span>\n                <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"products\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2002\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ナス\"</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2003\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"キュウリ\"</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"queryのスキーマ-1\"><a href=\"#query%E3%81%AE%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Queryのスキーマ</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">type Contracts {\n    items: [Contract]\n}\n\ntype Contract {\n    id: ID!\n    name: String!\n    contractor: String!\n    productIds: [ID]\n    products: [Product]\n}\n\ntype Product {\n    id: ID!\n    name: String\n}\n\nquery {\n    getContracts(contractor: String!): Contracts\n}</code></pre></div>\n<h4 id=\"取得対象データ-1\"><a href=\"#%E5%8F%96%E5%BE%97%E5%AF%BE%E8%B1%A1%E3%83%87%E3%83%BC%E3%82%BF-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>取得対象データ</h4>\n<div class=\"gatsby-code-title\">契約テーブル（Contractテーブル） 2件</div>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token list punctuation\">*</span> id: 1000\n<span class=\"token list punctuation\">*</span> name: 〇〇〇案件\n<span class=\"token list punctuation\">*</span> contractor: ギャッツビー太郎\n<span class=\"token list punctuation\">*</span> productIds: [2001,2002]\n\n<span class=\"token list punctuation\">*</span> id: 1001\n<span class=\"token list punctuation\">*</span> name: △△△案件\n<span class=\"token list punctuation\">*</span> contractor: ギャッツビー太郎\n<span class=\"token list punctuation\">*</span> productIds: [2002,2003]</code></pre></div>\n<div class=\"gatsby-code-title\">商品テーブル（Productテーブル） 3件</div>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token list punctuation\">*</span> id: 2001\n<span class=\"token list punctuation\">*</span> name: トマト\n\n<span class=\"token list punctuation\">*</span> id: 2002\n<span class=\"token list punctuation\">*</span> name: ナス\n\n<span class=\"token list punctuation\">*</span> id: 2003\n<span class=\"token list punctuation\">*</span> name: キュウリ</code></pre></div>\n</div></details>\n<br/>\n<h3 id=\"リゾルバーの書き方-1\"><a href=\"#%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リゾルバーの書き方</h3>\n<p>「契約情報 + 契約に紐づく商品情報」を複数件取得する場合、以下のようなVTLを作成します。</p>\n<h3 id=\"1-契約テーブルに対するファンクション\"><a href=\"#1-%E5%A5%91%E7%B4%84%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AB%E5%AF%BE%E3%81%99%E3%82%8B%E3%83%95%E3%82%A1%E3%83%B3%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 契約テーブルに対するファンクション</h3>\n<div class=\"gatsby-code-title\">リクエストマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\">{\n    &quot;operation&quot; : &quot;Scan&quot;,\n    # 複数件検索ではfilterで検索条件を指定します。\n    &quot;filter&quot; : {\n        # 具体的な検索条件はexpressionで定義します。\n        # 今回は契約者名が一致することが条件です。\n        &quot;expression&quot;: &quot;contractor = :contractor&quot;,\n        # 検索条件で使う変数はあらかじめexpressionValuesで初期化します。\n        &quot;expressionValues&quot; : {\n            &quot;:contractor&quot; : $util.dynamodb.toDynamoDBJson($ctx.args.contractor)\n        }\n    }\n}</code></pre></div>\n<div class=\"gatsby-code-title\">レスポンスマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\"># 契約情報をレスポンスに設定します。\n$util.toJson($context.result)</code></pre></div>\n<h3 id=\"2-商品テーブルに対するファンクション\"><a href=\"#2-%E5%95%86%E5%93%81%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AB%E5%AF%BE%E3%81%99%E3%82%8B%E3%83%95%E3%82%A1%E3%83%B3%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 商品テーブルに対するファンクション</h3>\n<div class=\"gatsby-code-title\">リクエストマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\"># 前ファンクションで取得した契約情報から商品IDを抽出します。\n#set($productIds = [])\n#set($contracts = $ctx.prev.result.items)\n#foreach($c in $contracts)\n    #foreach( $id in $c.productIds )\n        #if(!$productIds.contains($id))\n            $util.qr($productIds.add($id))\n        #end\n    #end\n#end\n\n{\n    &quot;version&quot; : &quot;2017-02-28&quot;,\n    &quot;operation&quot; : &quot;Scan&quot;,\n    &quot;filter&quot; : {\n        # 「複数の値のどれかに一致する」という条件はcontains関数で実現します。\n        &quot;expression&quot;: &quot;contains(:ids, id)&quot;,\n        &quot;expressionValues&quot; : {\n            &quot;:ids&quot; : $util.dynamodb.toDynamoDBJson($productIds)\n        }\n    }\n}</code></pre></div>\n<div class=\"gatsby-code-title\">レスポンスマッピングテンプレート</div>\n<div class=\"gatsby-highlight\" data-language=\"vtl\"><pre class=\"language-vtl\"><code class=\"language-vtl\">#if($ctx.error)\n        $util.error($ctx.error.message, $ctx.error.type)\n#end\n\n# 前ファンクションの結果（契約情報）と今回の結果（商品情報）をマージします。\n#foreach($c in $ctx.prev.result.items)\n    #set($products = [])    \n    # 商品情報をイテレート\n    #foreach( $p in $ctx.result.items )\n        # 契約情報に含まれる商品が見つかったら\n        #if($c.productIds.contains($p.id))\n            # $productsにaddします。\n            $util.qr($products.add($p))\n        #end\n    #end\n        \n    # 商品情報を契約情報に追加します。\n    #set($temp = { &quot;items&quot;: $products })\n    $util.qr($contract.put(&quot;products&quot;, $temp))\n#end\n\n# マージした情報をレスポンスに設定します。\n$util.toJson($ctx.prev.result)</code></pre></div>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回、AppSyncで複数のデータリソースから情報を取得する場合のVTLの書き方についてを紹介しました。\nここで紹介した方法さえ覚えておけば、データリソースが3つ以上になった場合もファンクションを追加していけば良いだけです。\nまたデータリソースがDynamoDBではなくRDB、Lambdaの場合もデータ取得APIを置き換えれば良いだけです。</p>\n<p>それにしてもAppSyncのリゾルバー定義は、なぜVTL縛りなのでしょうか。Lambdaのように好きな言語で実装させてくれてもいいのに... いずれは、そうなることを期待しています🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://dev.classmethod.jp/cloud/aws/appsync-updates-11-21/\">AWS AppSyncの新機能！Pipeline Resolver、Aurora Serverless Data Source、Delta Syncがサポートされました！ ｜ DevelopersIO</a></li>\n<li><a href=\"https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/tutorial-pipeline-resolvers.html\">チュートリアル: パイプラインリゾルバー - AWS AppSync</a></li>\n</ul>","headingsDetail":[{"id":"なにこれ","value":"なにこれ","depth":2,"parents":[]},{"id":"pipeline-resolverの概要","value":"Pipeline Resolverの概要","depth":2,"parents":[]},{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2,"parents":[]},{"id":"apiとデータリソースの仕様","value":"APIとデータリソースの仕様","depth":3,"parents":[{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"queryのスキーマ","value":"Queryのスキーマ","depth":4,"parents":[{"id":"apiとデータリソースの仕様","value":"APIとデータリソースの仕様","depth":3},{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"取得対象データ","value":"取得対象データ","depth":4,"parents":[{"id":"apiとデータリソースの仕様","value":"APIとデータリソースの仕様","depth":3},{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"リゾルバーの書き方","value":"リゾルバーの書き方","depth":3,"parents":[{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"1-従業員テーブルに対するファンクション","value":"1. 従業員テーブルに対するファンクション","depth":4,"parents":[{"id":"リゾルバーの書き方","value":"リゾルバーの書き方","depth":3},{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"2-部署テーブルに対するファンクション","value":"2. 部署テーブルに対するファンクション","depth":4,"parents":[{"id":"リゾルバーの書き方","value":"リゾルバーの書き方","depth":3},{"id":"1対1で紐づく2つのdynamodbのテーブルから1件情報を取得する場合","value":"1対1で紐づく2つのDynamoDBのテーブルから1件情報を取得する場合","depth":2}]},{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2,"parents":[]},{"id":"apiとデータリソースの仕様-1","value":"APIとデータリソースの仕様","depth":3,"parents":[{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"queryのスキーマ-1","value":"Queryのスキーマ","depth":4,"parents":[{"id":"apiとデータリソースの仕様-1","value":"APIとデータリソースの仕様","depth":3},{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"取得対象データ-1","value":"取得対象データ","depth":4,"parents":[{"id":"apiとデータリソースの仕様-1","value":"APIとデータリソースの仕様","depth":3},{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"リゾルバーの書き方-1","value":"リゾルバーの書き方","depth":3,"parents":[{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"1-契約テーブルに対するファンクション","value":"1. 契約テーブルに対するファンクション","depth":3,"parents":[{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"2-商品テーブルに対するファンクション","value":"2. 商品テーブルに対するファンクション","depth":3,"parents":[{"id":"1対nで紐づく2つのdynamodbのテーブルから複数件情報を取得する場合","value":"1対Nで紐づく2つのDynamoDBのテーブルから複数件情報を取得する場合","depth":2}]},{"id":"まとめ","value":"まとめ","depth":2,"parents":[]},{"id":"参考","value":"参考","depth":2,"parents":[]}],"fields":{"title":"AWS AppSyncのPipeline Resolverで複数データリソースを扱う場合のVTLの書き方","excerpt":"なにこれAWSのGraphQLフルマネージドサービス「AppSync」で複数のデータリソースを扱う場合は「Pipeline Resolver」という機能を使います。これは、1つのデータリソースを扱うファンクションを定義し、それらを組み合わせ...","date":"2019-02-19T07:30:00.000+09:00","tags":["AppSync","AWS","GraphQL","DynamoDB"],"thumbnail":"thumbnail/2019/02/aws-appsync-pipeline-resolver-with-multiple-dynamodb-tables.png"}}},"pageContext":{"slug":"/aws-appsync-pipeline-resolver-with-multiple-dynamodb-tables","relatedPosts":[{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>以前の記事<a href=\"graphpack-graphql-zero-config-server\">設定いらずのNode製GraphQLサーバー「Graphpack」の使い方</a>でGraphQLのサーバー側を実装を紹介しました。\nGraphpackは備え付けの<a href=\"https://github.com/prisma/graphql-playground\">GraphQL Playground IDE</a>で動作確認できますが、せっかくなので今回はクライアント側も作成してみました。\n本記事では<strong><a href=\"https://ja.nuxtjs.org/\">Nuxt.js</a>と<a href=\"https://www.apollographql.com/docs/react/api/apollo-client.html\">Apollo Client</a>を使って簡単なユーザー管理画面を作成する方法をチュートリアル形式でご紹介します。</strong><br/>\n最終的にはQuery, Mutation, Subscription全てを実装しますが、\n以下のようにステップを分けて、少しずつ実装していきましょう✨</p>\n<ul>\n<li><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\">🔰 プロジェクトのひな型を作成する</a></li>\n<li><a href=\"#query%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💪 Queryを実装する</a> → ユーザー情報が一覧で表示できる</li>\n<li><a href=\"#mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💖 Mutationを実装する</a> → ユーザーの登録・更新・削除ができる</li>\n<li><a href=\"#subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💎 Subscriptionを実装する</a> → 他ブラウザとリアルタイムでユーザー情報が同期する</li>\n</ul>\n<p>完成イメージ\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 534px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACo0lEQVQ4y52T204acRDGV+2tN76CT1BvjCY+ju1FL3rVpzGEEKMX0kbDRbGmbcqpKTaiAVrksMAe2TOgnOS/8HX+a1AwTdt0ki9kJrs/Zr6ZFdbW1nY3NzejOzs74e3t7ci8tra2IlSPrK+vRwRB+JPCpCPSK2H35YvDfKWEfD4PUayj2WyQmoHq9TparRbC4TA2Np5jdXUVS0tLeLaygpXfaXn5WDg7O9uzHRuapg1LpRJTNT2QompMUhTWMqwg/3b+naUzX1kylWapdIalMo9KpjOj3OUVom/f7QvJRCJUrVRRKBSZbVlwXJfkwXZcuPTbvblBfzDAeMzAfB88JtMpxuw+D8R8xus1UTwQ4vH3IcMwCZhnzaaE+ZhMJrjpdjAcDYN8SqBatYrb295DzsP3WQAUOTCRTIR44tgWKxZ/wCfI3WiEwXCATqeDuliDYZoYUW08HuO6VIKu63AcB57nod1uc3AAbDQaB4Io1kJTgmiqyjhgOBzCNAzIsgTLtoKXNVWDQTXPa+PubgxFlpHJZPCzdL9MikdgsVAI8Y5lRWV8dFVVYVk2ySJAB7ymGzr44trkL/dUVRVcXFygWquhXC4vAsvX18HIrusy0zTQlGS4NIqiyWjpGiTqRtEVAuvw2h76vR6/CFxdXXLPUKlUFoGJL59DPXqIWmfcq2j0CKfx04elcOPnNav7tN2ZFjxMJZMhRiOTR0ysVWl0OVgGr/EXn8YM+qT2CEwmkiHPc7kX7Pw8S19HI/Cw3+8H/z6DzHf4tOsF4IfT+N4tjUxnMKJFkI8mcxyXDQYDulmf8Yf/JppkxIH0qe4L6VTqkCcEIsP7wbn8b0iSdCxks9nXtm1/ons7IR9jpmHGHNuJ0cHG6HD/SXQhJ91u92Mul3vzC1hCARcadoS1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-4\"\n        title=\"\"\n        src=\"/static/5454a20a76b75a63cafbfdaec4944a08/a07a7/project-image-4.png\"\n        srcset=\"/static/5454a20a76b75a63cafbfdaec4944a08/772e8/project-image-4.png 200w,\n/static/5454a20a76b75a63cafbfdaec4944a08/e17e5/project-image-4.png 400w,\n/static/5454a20a76b75a63cafbfdaec4944a08/a07a7/project-image-4.png 534w\"\n        sizes=\"(max-width: 534px) 100vw, 534px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>完成品はGitHubに置いております。躓いたときは参考にしてください。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"\" data-iframely-url=\"//cdn.iframe.ly/HQ2E77R\"></a></div></div>\n<h2 id=\"プロジェクトのひな型を作成する\"><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プロジェクトのひな型を作成する</h2>\n<ul>\n<li>create-nuxt-appで雛形を作成します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx create-nuxt-app client</code></pre></div>\n<br/>\n<ul>\n<li>何個か質問されるので以下のように答えます。<code class=\"language-text\">Author name</code>は読み替えてください。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">? Project name client\n? Project description My amazing Nuxt.js project\n? Use a custom server framework none\n? Choose features to install\n? Use a custom UI framework none\n? Use a custom test framework none\n? Choose rendering mode Single Page App\n? Author name Takumon\n? Choose a package manager npm</code></pre></div>\n<br/>\n<ul>\n<li>アプリを起動しましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd client\nnpm run dev</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">http://localhost:3000</code>にアクセスして以下の画面が表示されればOKです。</li>\n</ul>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACTUlEQVQ4y61TzWsTQRTfPyD/gVcPIoR6kFjwrkfBsyB6ELR6zE0bCQhaCBW6FUqhFhHSUg+KiSal3eDBgl78QNDShpoSs7W2+djvzc7Ozze7m7BEYiP44Ddv5r03v3lv3ox0e/LORiaTWSMo2WxWSafTSiKRUCRJGgnJZHJ9fPxMJZVKlY+PnZqQDNOEqqpottqEFg4Om8gvLWNGliHPzg7FjCz0I8zNz0Om2Fwuh8s3b01LIDEMw7Vtm1mWxRzXZWT6V3CC9ay8+iAgjIx98RkDI3ieF4Ry5qNLcxbZByDIhN/JFwpTAaHv+4xzjjh87gfk1c5PaJ6NKA6DcVwMJB5jzlKhGBKSLciQh/M+hNx4v4DrpTl8qm6HpfjhQT1/j5AJwuIAYU96m0r1jzhbuouxq1dwaeoeeOTvkR1JGJYaBu+ZLZyr3MeJyWs4efoijp2/AHn1Rf/AkTKME251VCxW3+DpqzKeLBewuPISz9+97d/tyISI3Z+nueA+jxrCwVyvTzbYlD8I4/cipK3p2Nyp4fPXLXzb/o4PXzax29jDoPw1Qy94e+Jt+XC7XZiWTdoL5l3SAsInYgSGZijeYfBjTAuttgZNN0nrATodAzqtD5saaSvw/TpoB+uI6+iSRRdt14Xp2DBsytLrwrYd6IYJ+prxhgzN0BWkfkjMqHSm079uahpr6TqzXYdR+YyyZ0RM54VxsT2crsDKF4r9v/xfZOV1aVr6sb+/UWs01nYbqhJAVZVaQ6ARQ9wWxUWg9TrtqezU6+WHC48nfgNALr8PAswu2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-1\"\n        title=\"\"\n        src=\"/static/8683d513dabb23a5d6a660ace450aff3/5a190/project-image-1.png\"\n        srcset=\"/static/8683d513dabb23a5d6a660ace450aff3/772e8/project-image-1.png 200w,\n/static/8683d513dabb23a5d6a660ace450aff3/e17e5/project-image-1.png 400w,\n/static/8683d513dabb23a5d6a660ace450aff3/5a190/project-image-1.png 800w,\n/static/8683d513dabb23a5d6a660ace450aff3/d9217/project-image-1.png 904w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<ul>\n<li>次にApollo Clientを導入します。<a href=\"https://www.npmjs.com/package/@nuxtjs/apollo\">@nuxtjs/apollo</a>をインストールしましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i @nuxtjs/apollo</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">nuxt.config.js</code>に以下設定を追加します。</li>\n</ul>\n<div class=\"gatsby-code-title\">nuxt.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n  modules<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'@nuxtjs/apollo'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    clientConfigs<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Graphpack側のエンドポイントを指定します。</span>\n        httpEndpoint<span class=\"token punctuation\">:</span> <span class=\"token string\">'http://localhost:4000/graphql'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Subscription用にWebSocketの設定も追加します。</span>\n        wsEndpoint<span class=\"token punctuation\">:</span> <span class=\"token string\">'ws://localhost:4000/graphql'</span><span class=\"token punctuation\">,</span>\n        websocketsOnly<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> \n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>これで準備は整いました。\n次からは本格的な実装に入っていきます。</p>\n<h2 id=\"queryを実装する\"><a href=\"#query%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Queryを実装する</h2>\n<h3 id=\"実装\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー情報取得用のクエリ<code class=\"language-text\">apollo/queries/getUsers.gql</code>を作成します。今回は<code class=\"language-text\">apollo/queries</code>配下にgqlファイルを作成することにします。</li>\n</ul>\n<div class=\"gatsby-code-title\">apollo/queries/getUsers.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> GetUsers <span class=\"token punctuation\">{</span>\n    users <span class=\"token punctuation\">{</span>\n        id\n        name\n        email\n        age\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<ul>\n<li>次に<code class=\"language-text\">pages/index.vue</code>を修正します。ここでは<a href=\"https://github.com/Akryum/vue-apollo/blob/master/docs/api/smart-query.md\">SmartQuery</a>を使い、コンポーネントにapolloオブジェクトを定義してApollo Clientを呼び出す方法を使います。 <small>※今回デザインは一切気にしないので<code class=\"language-text\">&lt;style&gt;～&lt;/style&gt;</code>の部分を削除しています。</small></li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vue</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>table<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token constant\">ID</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>名前<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>メール<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>年齢<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>tr v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"item in users\"</span> <span class=\"token punctuation\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.id\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> getUsersGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/queries/getUsers.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<h3 id=\"動作確認\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<h4 id=\"サーバー側起動\"><a href=\"#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E5%81%B4%E8%B5%B7%E5%8B%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>サーバー側起動</h4>\n<ul>\n<li>\n<p>GraphQLサーバを起動します。以下2通り、お好きなほうで起動してください。</p>\n<ul>\n<li>\n<p>サーバー側を作成する</p>\n<ul>\n<li><a href=\"graphpack-graphql-zero-config-server\">以前のGraphpackの記事</a>にしたがって作成</li>\n<li>作成したアプリに移動</li>\n<li><code class=\"language-text\">npm run dev</code></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://github.com/Takumon/nuxt-graphpack-sample\">本記事のサンプルコード</a>を使う</p>\n<ul>\n<li><code class=\"language-text\">git clone https://github.com/Takumon/nuxt-graphpack-sample.git</code></li>\n<li><code class=\"language-text\">cd nuxt-graphpack-sample/server</code></li>\n<li><code class=\"language-text\">npm i</code></li>\n<li><code class=\"language-text\">npm run dev</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>GraphQLサーバーの起動確認をします。<code class=\"language-text\">http://localhost:4000/</code>にアクセスして以下のクエリを発行しユーザー情報が返ってくればOKです。</li>\n</ul>\n<div class=\"gatsby-code-title\">サーバー動作確認用クエリ</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  users <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 78.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACh0lEQVQ4y52Uy27TQBSG/QoxSezUl1ycm2PHThw3iZukqahXREjs2bJFbFmiVrBCqNC0pa4Ej0EbqU1dFlWFxLuAugFGPpyx09SNUhYsfp0ZT86X/5/jhHn+9Nm7o4OPV+O98dTzPH97a9svKorPsqyfSqX8VDJ5v/CcTST8arV6PhqNLlzXPWE877N/9e07TM4u4OziEk5Ofdj3PsHO+BA+7Hv/1Pu9w1C7B0ews3sAW6/fBEyu+/hYabuQLpq/WblMEmKRrJTrKIPwRQ2lE17RSLpQm+21cJ8p6USsmOFnhYpBhLIRyJr1kxFVe6JY65Bv9AgKJL0DWcMBSWtDutQIxVes8DlXac0l4HmhOQDZWKM1KLbWIWf0rplUXpusaF3IVFuELzchg81UdE2VyGmwuvEIXrx8BVnTgQI2SmYfJKMPgtEDMVIg6GsgO8NrJp3XJxm9DbzWIlzRpNHn4tBdSjEAU0DNcUFu9CFrY8VEEq4jcI+uA0F1QH0yihxmNBt4wyZpJYLcKA7l1XbU3HIh23GpG5C7Q5DsEB5Qx6LVR2ABHVZt2kzisDmUVgSLdQcd4p1ZGwgY4j6KS13SyGGt4x0m87UJvfQb4I2rRaeCjoMyeyC3NkFuPwS5g+5W0R0OBmHBDHwXuAx2C+yGbkKgvYnRB1FcWhv3AJfB4kAaedYYRa7fTvk/gM4cFk43JtGMA3MxII288OqkS+adyOLtuxdX3KF2zJctOs1fKELFLYh+GTokUmNAsHGZ/tDBoNMf6FD9Sl8bGi36dVjAYeVKM4Xrxp3Iy0TPaAoG/xDeciXjki/VTwW1Oc3VV6d4r1M2W52yubjU6QMUu6DZs7NkQTtHzpe/Ik/mSq0GcCYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"server-image-1\"\n        title=\"\"\n        src=\"/static/45799f178c13308357e838cda5402668/5a190/server-image-1.png\"\n        srcset=\"/static/45799f178c13308357e838cda5402668/772e8/server-image-1.png 200w,\n/static/45799f178c13308357e838cda5402668/e17e5/server-image-1.png 400w,\n/static/45799f178c13308357e838cda5402668/5a190/server-image-1.png 800w,\n/static/45799f178c13308357e838cda5402668/eb2af/server-image-1.png 954w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"クライアント側起動\"><a href=\"#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E5%81%B4%E8%B5%B7%E5%8B%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>クライアント側起動</h4>\n<ul>\n<li>サーバーの準備が整ったら、クライアント側を<code class=\"language-text\">npm run dev</code>で起動します。</li>\n<li>ブラウザで<a href=\"http://localhost:3000\">http://localhost:3000</a> にアクセスして以下の画面が表示されればOKです。</li>\n</ul>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABIUlEQVQ4y+2TwUqEQBjH5w3aN+jipY6Cj9K97t5bDN8gdjVIIbqsW2wF7b0dOgU9h7ihpGO6ycoOjvM1moeCzGq71R9+/Afm48d3mEH7/f6dpmk3AqzrOlZVFfd6Gxgh9CUkSZopioJlWZ5tbm1rKFsuIQgCIPETxEkCj1EE19MpDA0TTPNItNGKYZpwbNl1DwcD2Nndu0QkIuC6Ll1RyuI4ZvOHOQMAlud53d/hdHIxQovFMxBCWCQ28/0APM8T7UMYhkApBcZYF7wsSxBwyxk7CCq1SFEU0FzUg1VX4Zx3wZs5bjtnr0JxZvBBmtlP8044fiNs26BL3CqEH+Zf+GeF4lfQ5i2uhRCOEPxiTs4nVyjLsvskSXCaprfrcmjZBy+EHdn6piVGoQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-2\"\n        title=\"\"\n        src=\"/static/aadd25baed54bb3fdc5f7088b257ad92/5a190/project-image-2.png\"\n        srcset=\"/static/aadd25baed54bb3fdc5f7088b257ad92/772e8/project-image-2.png 200w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/e17e5/project-image-2.png 400w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/5a190/project-image-2.png 800w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/142fb/project-image-2.png 907w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<h2 id=\"mutationを実装する\"><a href=\"#mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mutationを実装する</h2>\n<h3 id=\"実装-1\"><a href=\"#%E5%AE%9F%E8%A3%85-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー一覧ができたので、登録、更新、削除処理を追加します。</li>\n</ul>\n<div class=\"gatsby-code-title\">apollo/mutations/createUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($name: String!, $email: String!, $age: Int) {\n  createUser(name: $name, email: $email, age: $age) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/mutations/updateUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($id: ID!, $name: String!, $email: String!, $age: Int) {\n  updateUser(id: $id,name: $name,email: $email,age: $age) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/mutations/deleteUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($id: ID!) {\n  deleteUser(id: $id) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<ul>\n<li>次にユーザー一覧で、登録、更新、削除ができるようにします。index.vueを修正しましょう。</li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vueの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブル上部に登録ボタンを設置します。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"isShowEditArea = true\"</span><span class=\"token operator\">></span>\n      新規登録\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブルに編集ボタンと削除ボタンの列を追加します。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>table<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token constant\">ID</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>名前<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>メール<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>年齢<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token operator\">-</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>tr v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"item in users\"</span> <span class=\"token punctuation\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.id\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"editItem(item)\"</span><span class=\"token operator\">></span>\n            編集\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"deleteItem(item)\"</span><span class=\"token operator\">></span>\n            削除\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 登録と更新の両方で使う編集エリアです。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 登録か更新かの判定はeditedIndexを見ます。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div v<span class=\"token operator\">-</span><span class=\"token keyword\">if</span><span class=\"token operator\">=</span><span class=\"token string\">\"isShowEditArea\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> formTitle <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.name\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"名前\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.email\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"email\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"メール\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.age\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"number\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"年齢\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"close\"</span><span class=\"token operator\">></span>\n          キャンセル\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"save\"</span><span class=\"token operator\">></span>\n          保存\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> getUsersGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/queries/getUsers.gql'</span>\n<span class=\"token comment\">// 今回定義したgqlファイルをインポートします。</span>\n<span class=\"token keyword\">import</span> createUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/createUser.gql'</span>\n<span class=\"token keyword\">import</span> updateUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/updateUser.gql'</span>\n<span class=\"token keyword\">import</span> deleteUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/deleteUser.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 登録・更新用の編集エリア表示非表示のためのフラグです</span>\n      isShowEditArea<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 登録か更新かを判定するための値です。</span>\n      <span class=\"token comment\">// -1の場合は登録</span>\n      <span class=\"token comment\">// それ以外の場合は更新　と判定します。</span>\n      editedIndex<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 編集エリア用のモデルです。</span>\n      editedItem<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        id<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 編集エリア用のモデルを初期化用モデルです。</span>\n      <span class=\"token comment\">// 初期化時に</span>\n      <span class=\"token comment\">// this.editedItem = Object.asigne({}, this.defaultEditedItem)</span>\n      <span class=\"token comment\">// のように使います。</span>\n      defaultEditedItem<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        id<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 更新の場合、更新対象が何番目かをeditedIndexにセットしているので</span>\n  <span class=\"token comment\">// editedIndexの値によって、更新か登録かを判断し</span>\n  <span class=\"token comment\">// 編集エリアのタイトルを出しわけます。</span>\n  computed<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">formTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n        <span class=\"token operator\">?</span> <span class=\"token string\">'ユーザー新規登録'</span>\n        <span class=\"token punctuation\">:</span> <span class=\"token string\">'ユーザー更新'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//登録処理です。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// mutationを発行する場合は、Smart Queryではなく</span>\n      <span class=\"token comment\">// $apolloを使って処理します。</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> createUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// refetchQueriesは処理完了後に発行するGraphQLの操作を指定できます。</span>\n        <span class=\"token comment\">// ここでは登録後に、データを再取得してユーザー一覧をリフレッシュしています。</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// 編集エリアを非表示にします。</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 更新処理です。</span>\n    <span class=\"token comment\">// 登録処理とほぼ同様の処理なので説明は割愛します。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> updateUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 削除処理です。</span>\n    <span class=\"token comment\">// 登録処理とほぼ同様の処理なので説明は割愛します。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">deleteItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`ユーザー(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)を削除しますか?`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> deleteUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>id\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 一覧の編集ボタンクリック時の処理です</span>\n    <span class=\"token comment\">// 編集エリアの変数に値を代入して、編集エリアを表示します。</span>\n    <span class=\"token function\">editItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isShowEditArea <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 編集エリアを非表示にする処理です。</span>\n    <span class=\"token comment\">// 編集エリアのモデルの初期化もあわせて実施します。</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isShowEditArea <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>defaultEditedItem<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 編集エリアで保存ボタンをクリックした場合の処理です。</span>\n    <span class=\"token comment\">// editedIndexをみて登録か更新かを判断します。</span>\n    <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-1\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>ブラウザを開いてみてください。\nそれぞれの以下のようにして操作ができます。</p>\n<h4 id=\"登録\"><a href=\"#%E7%99%BB%E9%8C%B2\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>登録</h4>\n<ol>\n<li>右上の新規登録ボタンをクリック</li>\n<li>名前、メール、年齢を入力</li>\n<li>保存ボタンをクリック</li>\n</ol>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAAC3UlEQVQ4y5WTS0sbURTHx426cmW/g5/BTV2oxS8hiFgpLS26E6Qb7cpFu2iJD0o1oYggSoVa4wOhraiNxkYTm4eaySTzMIlJMJOZSe7M/HsmWtrQKvbAb+4993L+99xzz3D3mpt729ruzz/o7JzuaG93V+noqNJO866uLndLS4u7rq7OzXHcTUwT88Qjrv/JY09Q4BGMRMHzPIRkEoIgIEljIsEjm81iamoKra2taGpqQn19PRobG9HQ0FCDs0Z789zq4oIrHwpCDgT0cCTCUqLIUso5SwgC45MpJsoKEyWZHXwPMN/ePtv17bFvNPr+gHwj9COM5ZWVGS44PPz+9OMyQosLTO1/CK2jEzlJQjZfQC6fx2WxCE03UK5UwEwTjpmWRT5DhVWxCeasUxIebn9gYFbZ2UFkaYnxT58Bo6MABVQDSaRQKKCkla58kyEaiUBV1aoP265+LWeDLJVKebjdtdUJUCaFUIiFz+JwctANA6VSCRe5C6prHOfn5zBoTdN0nJycQJZkKIqCTCaDfCHvqFYFRVH0cNGT2KQjIqXTrJDLQafTMyQgiWI1QBRTkGWFkOncAhgzISQS+Lq1hcOjI4Qj4VrBYDg84ThxegApnXWEEYvzOKUgSVQouzRkRUImm8EFvbiTuaLIOD4+Rjwed7qhVnDT4357SXUJrW8wnmr5YXwcsy9fYXpsDDt7+7iD2WS/BWNDQ7vFgwOkvF4z+/kLyjTXAwGo6+uo9PQA3d2wr6JuolYw7HL5k9QCMUmygtTQiQxdu1xBiZrcGhkBKFP7+kXtq1e9XTA6MLCt7eyiuLlpXq6tIrexAd1/gIrXC4tq9kvgukX+ed8awe1Py5M5Ku5pMFhOz82Z0TevzXJvr4nBQdM2DNO2rCts+zbK14Iz3JkgvPvrWJcL6OvD/5okSXPc0eHhc13XY2qx6FNLJb9qGH7VsvyqafpVXffTX3EXfJqmxche/ARiYvUEkG7PUgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-create-1\"\n        title=\"\"\n        src=\"/static/219f2e622c366462cb616927adf04e8a/5a190/project-image-create-1.png\"\n        srcset=\"/static/219f2e622c366462cb616927adf04e8a/772e8/project-image-create-1.png 200w,\n/static/219f2e622c366462cb616927adf04e8a/e17e5/project-image-create-1.png 400w,\n/static/219f2e622c366462cb616927adf04e8a/5a190/project-image-create-1.png 800w,\n/static/219f2e622c366462cb616927adf04e8a/ddc81/project-image-create-1.png 837w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧に登録したユーザが追加されます。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACk0lEQVQ4y62Ty07bQBSGvWCDYMeOt+AJeAC6ABa8QDe9rLrqktegkVrAEpvCDlJuAQJJCVIWhARsCL40dpzEjp0YciMZe/7OpBEEtZUq1CN9OufMGf9zfDwWJicnX8+8mtmYn59fnp2dFefm5h7h+cLCgjg1NSWOjIyIgiD8jRXGOuON8Pb9O1HWVciyDMMwYFnWI6ZpolarQRRFTE9PY2JiAqOjoxgbG/uN8fFxXtsQYgexJdd1uUBHkiRiGCYxLYvohQLDYHGJlG2HXEoyyeYuyUU2Ry6Yzz7nQdF0HBwerQjxo6NI/uYGmUyG8G5q9Trqvt/3vn+HRrOJdqeDbreHXo+AWxCGj3m316PM9wsFwxCFrc3NiOt6kKQrks8rGLYgILhj4s1Wq59TJsQPv7+/H97GlsO+YLFYFIXkyXGEJ67jEPlKQsAO6zCBVqOBmluFrqmolMpot9psvQ1dVVHiMy4W4dg2PLdK6UCQjU0UbormEuVJtUr8dgvtIIRd82BUbNh+na+j7Hmo8HE0W+jyvY6NZDqNy3wekqZS9vyToLK2JgbyNQoHh8SKH8OKx1FOJFBJfkc1dYbSSQJWIg7nNAk3lULj/JzVEjhfX4eytwstGqWUNdMX5K98t7i4RzIZ+PF44MT2YWxtoRqLwdqOorKzAysaRZHFzv4u6uyw1ukpbCaUZVdJZ3t/fPlMaersl6BpioK5vb3MLhugqgSaBug6jxks5nk/Vp/F9FYBVRSEnOtrSn3/qUPFND/xJGRz4LP8FzDkefhshurtbWTw7QnYteDQAX+Kh9cGUGZDgqq61O8wDB9YIXgh3YHgqqBp2ir+k5VKpa9COp3+4Pt+kv3PUc/zdl7IN/bbJnK53Mef7IQBrxTsBPQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-create-2\"\n        title=\"\"\n        src=\"/static/ddded17ee5f77eae7cceb841d2b22ab2/5a190/project-image-create-2.png\"\n        srcset=\"/static/ddded17ee5f77eae7cceb841d2b22ab2/772e8/project-image-create-2.png 200w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/e17e5/project-image-create-2.png 400w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/5a190/project-image-create-2.png 800w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/27b8e/project-image-create-2.png 836w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"更新\"><a href=\"#%E6%9B%B4%E6%96%B0\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更新</h4>\n<ol>\n<li>更新したい行の編集ボタンをクリック</li>\n<li>名前、メール、年齢を入力</li>\n<li>保存ボタンをクリック</li>\n</ol>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADCElEQVQ4y5WTTU8TURSGJ8CShexd8Q/cEEjgR/gbFOPGhXEnezEu3JloSQTGhVGLWpooaCSBtkZCqVDSUlvo18ydmc4HzDBKp70z83qmYKxGTTzJm5NzJ/c5X3eEkZGRK2NjY/HJycn5iYkJsV/j4+Pi1NSUODo6KgqC8C8tkF6QrgtXr02L+XIJe3t7qFaraNTrqJMiH8WtVgtzc3MgOIaHhzEwMIChoaHfNNjzg4ODcWFlZeWhYZpgjLVLpRKXZMYVVeNN8k1Z5orW4hJT+OZWlqczH/lGKs1T6QxPZfqUznjbuc94lVheEDbW12OHBwdRhdwksGlasKwj6IYBk7ztnOC03Uany8H9AJGFpC73Ke4pJPHovClJorCcSMQYU7CXz/NarYF+8zmH49j4+u1bLw4IUD08xMmJewYOewlC/xwoRcBUOhWLAtMw+O5uHkEQwPM8tKmq4+MjNBp1aDTHTqcL77SNUqEAhTEYdGZRR7Zth2Q9II1NFCqVcgyUiYbPXdeF1+lEcERVm5YJVVWh6wZ0AjhtDz5dVAwdmVwOxfIX7O/v/wqkVmM+D1Cr1bksMcquQJYkMJlBU1ugJaHRrEO1DLSyWbiJBFrbWew+e4by1hYqtSp13gcsFItnLR8fc1XXUW02YRwdQdYYVIVBplgioNb14M7eAS5ehHn/PnZu3sQBQb8wOYQf/AS+f/vmUZtaLGxucp3eXnxhHu9evgKt7+d2wvDMOw7CSgWhbSOQZQS0rCD62t9yfmbmSXttDSyR4MXFRTSW4nDX19FdXUVAGwUli3AhLSvEHywMfwWW7t57odIzKDPGs/tFHNAM9a6Pr9RqMD0NXLqEkCrDORQRmCoOf/jfgYWZ20+9RhNu9bBjVyq+Xa35rqr6XqnkB6urPpaWfLrsU3U+XfybvHPgovBp/vET7OxA39gAF0Vo84+BBw+Ay5dBbwL/Y4qiPBdSudwNxXHWGrbzmhUKSSmZTGrx+HL3woVte3b2nXF6mjA1LUm/5V9lGMZry7I+5PP5W98BuHvqiqfu8OAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-update-1\"\n        title=\"\"\n        src=\"/static/b0c9d01a7a765f2ad8726624b95eff41/5a190/project-image-update-1.png\"\n        srcset=\"/static/b0c9d01a7a765f2ad8726624b95eff41/772e8/project-image-update-1.png 200w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/e17e5/project-image-update-1.png 400w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/5a190/project-image-update-1.png 800w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/27b8e/project-image-update-1.png 836w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧のユーザー情報が更新されています。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACrElEQVQ4y61TTU8aURSdhRujS/0j/gO3dqM0cds2XfYfdNtF+xNaFtWMVhY20QRTPxAlFUythspARWRgmIH5AEYGKSDDgzm9M47apDZpmt7k5N5337z7zrvnDjc5Ofl85tHMx8DjwMLc3BwfCAR417uYnZ3l5+fn+ampKX5kZITnOO5PWCCsEl5wT549XfpeyCObPYeiKFBV9Q7lchmNRgPLy8uYnp7GxMQERkdHMTY29hvGx8fdvXUuEom8rZsmNFW7zmazrCTLrKJqTCJfUsqsTLFerbHM2RkT0hkPKSHNUn7srdOZXlEqIbof+8DtRaPB/EUexycnzGXTarVgNZuwrCYaloWrqxauezYGgwHsfh/9PoNrg+EQPdt2145t3yTphSFuIxwO1mo1GIbORFGEeXmJX21IBy0q7F7kmePgIpfzLvTNIXgFqU0hLpGIB90FIzvPnaPuF+x0u2h32sTWgqzI0HQd3e61x1ai52maDlXTQO1yavW6V1DTtBCXl4pB4g1ZFJlFTHutHy4t1EkURSygSl6jgjoJZihlmLoBu92GUVaQiMWQFVKOcHp6XzATWgni6zGU8AbTPm2itL6Oy+gerP0YjK1t1CJR6JtbMHa2UN3ZhhmJoPX5APXdCIQlHvJG2CnwPAP1UzNNYvjmdRDpDCxBYObJMfK7u8ht70A/+gL18AC1oyOoiTgqh3FUKWd9S6KdyXj507U1SPG4k19cZKCWaM1miCukUkF0OgCNCckEVCrU3Qq8+CHIsgenVLr1jlMs3jzZMEKcKEmeKEPSxfEl+xvg3pPuNyprrsoFUfQKOsMh87Z8OD4eiu9yJB7B8c7eikKz986fN5s+Gv4LyPr+HK5wkiS9x38ywzBWabATL+lPEYjuga7rh/8C92y1WhWSyeSrn8H5AJ/EVXCaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-update-2\"\n        title=\"\"\n        src=\"/static/836e31067505db3d284f49bb4ea425b5/5a190/project-image-update-2.png\"\n        srcset=\"/static/836e31067505db3d284f49bb4ea425b5/772e8/project-image-update-2.png 200w,\n/static/836e31067505db3d284f49bb4ea425b5/e17e5/project-image-update-2.png 400w,\n/static/836e31067505db3d284f49bb4ea425b5/5a190/project-image-update-2.png 800w,\n/static/836e31067505db3d284f49bb4ea425b5/a1dd2/project-image-update-2.png 838w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"削除\"><a href=\"#%E5%89%8A%E9%99%A4\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>削除</h4>\n<p>削除したい行の削除ボタンをクリック</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAAClUlEQVQ4y61TS08TURQeXBtc+agrgjuNEYwLQlF/jBvxR7gC3bPSJkadRlnIgpgALSaAQMKigUILKTPMtLTzHvrAPtLH7cznmdsSSHzEEE/y5dx759zvfPecM8LNoaFno+PhuYcTj9/fHxsTH4yPiyPhCXGUMBIOi4+ePBWH7t4Tr4VucwzeComDoVDPn+MD4cvV6zcmhecvJqM7BynsbG9DkiQcyTJkuecPMxnomobpqSncGR7GlYEBCILwN8wJsXj8TalSgWVZTSJkpmUx03aYYdnMMC3mFktMyebYyuoaiy1/Y0vxZbYYi3Mf64PWre8bm/g0O/tRWFtdjWRVFal0mp2cnKBcrsAlb7suHEKQrNXuwPOBrueBHLfAB/uu5/vkWXCm6UZU+Do/H8nnC8jlckzXNTQaDVy0TruNCpGenbdbLaiKQr7dI+5Zj1DTosL6xnok2LBOh+2ldklhmQc2m0206HKwLxQKKBaLoBBOfLC/D8dx+Lei6/q1apUT6gYplGQp4pN0w9BZrVZDt+txQtu2YZoGiqUSLFq7DpWAUK83eIxyJGM7mcTuYcbPUt05YaAwtbcXYZSZns0Mw0L+OM9VmIYJXTeoWQ7VRsdxIUdJLDhEXq1WoWap7okEpKVF39jc7BGaZlRIp1L8yfQk5rgO0vSczKEEyyGFlk6ENoLamrZJSi2c/jhFvVaHUshjf2EB8utXvjYzw0C11svlqKBms5F+/Rn+YFT0X86oufA71H3b8buOw+8agUJVVTmhR60PLv4rcJ4kWPUIg6acEQat/+3FvsKLa1yM8Uhrfw45oaIob/sK2xTgXRId3hRdFwUa6Hf4T0a/72dha2vrJXX4iOYuQcO6c0kk6LeVk8nk9E+KvwmFDR1ScwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-delete-1\"\n        title=\"\"\n        src=\"/static/b1607176351ad84514e6c52fec749066/5a190/project-image-delete-1.png\"\n        srcset=\"/static/b1607176351ad84514e6c52fec749066/772e8/project-image-delete-1.png 200w,\n/static/b1607176351ad84514e6c52fec749066/e17e5/project-image-delete-1.png 400w,\n/static/b1607176351ad84514e6c52fec749066/5a190/project-image-delete-1.png 800w,\n/static/b1607176351ad84514e6c52fec749066/ddc81/project-image-delete-1.png 837w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧から削除したユーザーがなくなっています。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 535px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACFElEQVQ4y62SzW7aQBDHVxyAG3eegBfgBVIB4kF6qnrpx9NEVsslkZse2hL1SA5waQ2KGuwaAgaMMbbxFy0GDAtMxxtKW0W9IEb6eTVrzX/+u7MknU4/PXtydlUoFN7k87lSPp8/kMvlSsVisZTJZEqxWKxECPkfbxEeeU5evH51IfcVkCQJVFUFTRsiGmOI+WQyAY7jIJvNQiqVgng8DolE4hHJZDL6VyaVSuXccV0YjUZLWZapNtKpputUHWq0r2p0bJhUHxu0cXtLhXqDfhHq9Gs9ovEHoR6K32X48PHTJbmp3HDtdhuazSZ1XQc8zwPP98HF1fen8HMWwGKxhNV6DWtKIYrNdos5ZfmeTbR/3+nw5Lpc5mzbwSOLVFU1+Du2WDid+hCG4cPGbgf32DwIgkPOGmBEa7fb5Um1VuWixDLGVJJkJrJYLGA+D5hbRemCaVrMZRiuoNVqgWkYYNv2wymw4W63Y4KKovCk0+lwG7SNQ6CRQDCbYYHJBmThQHRdj+4XDBRxXQ9WqzX0egrUalVoiiJ8u7tjJg+CkigyhxPLptGdRaKO44DtuNj9B07ZBtNCMQ9zJAjm6NhkTtXhkPGPYL/f5/ZXRuHI+H3kXq/HE/xw+wFQ/AFH8lgQN0/r8JSC5/sjLyPRY8DacD+US4LP4wJOFIPBoEwEQXjm+/5nfKg8Ppf3x4C171DjGrVe/gIh5xJ+ikFGNwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-delete-2\"\n        title=\"\"\n        src=\"/static/f05fb2933584ab5973f6a98536edbbe1/b5245/project-image-delete-2.png\"\n        srcset=\"/static/f05fb2933584ab5973f6a98536edbbe1/772e8/project-image-delete-2.png 200w,\n/static/f05fb2933584ab5973f6a98536edbbe1/e17e5/project-image-delete-2.png 400w,\n/static/f05fb2933584ab5973f6a98536edbbe1/b5245/project-image-delete-2.png 535w\"\n        sizes=\"(max-width: 535px) 100vw, 535px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>これでユーザ一覧でCRUD操作ができるようになりました。</p>\n<h2 id=\"subscriptionを実装する\"><a href=\"#subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Subscriptionを実装する</h2>\n<p>Subscriptionを使って、ユーザー情報を他の人が編集したときにリアルタイムで同期するようにしてみましょう。</p>\n<h3 id=\"実装-2\"><a href=\"#%E5%AE%9F%E8%A3%85-2\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userCreated.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userCreated {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userUpdated.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userUpdated {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userDeleted.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userDeleted {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<ul>\n<li>index.vueでSubscriptionを実装します。templateには一切手をいれません。scriptタグのみ修正します。</li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vueの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/* (中略) */</span>\n<span class=\"token comment\">// 今回定義したgqlファイルをインポートします。</span>\n<span class=\"token keyword\">import</span> userCreatedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userCreated.gql'</span>\n<span class=\"token keyword\">import</span> userUpdatedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userUpdated.gql'</span>\n<span class=\"token keyword\">import</span> userDeletedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userDeleted.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql<span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// SubscriptionはSmart QueryのsubscribeToMoreで指定します。</span>\n      subscribeToMore<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\">// 登録時の処理です</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userCreatedGql<span class=\"token punctuation\">,</span>\n          <span class=\"token comment\">// Subscription発生時の処理をupdateQueryに定義します。</span>\n          <span class=\"token comment\">// 第一引数は前回のusers</span>\n          <span class=\"token comment\">// 第二引数はサーバーからのレスポンス情報　です。</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> newUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userCreated\n            <span class=\"token comment\">// ここで返した値がusersに代入されます。</span>\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// 更新時の処理です。</span>\n        <span class=\"token comment\">// 登録時とほぼ同様の処理なので説明は割愛します。</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userUpdatedGql<span class=\"token punctuation\">,</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userUpdated\n            <span class=\"token keyword\">const</span> targetUser <span class=\"token operator\">=</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span> <span class=\"token operator\">===</span> updatedUser<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n            targetUser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>name\n            targetUser<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>email\n            targetUser<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>age\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// 削除時の処理です。</span>\n        <span class=\"token comment\">// 登録時とほぼ同様の処理なので説明は割愛します。</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userDeletedGql<span class=\"token punctuation\">,</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> deletedUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userDeleted\n            <span class=\"token keyword\">const</span> userIndex <span class=\"token operator\">=</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span> <span class=\"token operator\">===</span> deletedUser<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User not found'</span><span class=\"token punctuation\">)</span>\n\n            prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>userIndex<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> createUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> updateUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">deleteItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`ユーザー(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)を削除しますか?`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> deleteUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>id\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/* (中略) */</span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-2\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-2\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>2つブラウザを開いてみて、片方で操作してみてください。\nリアルタイムでもう一方のブラウザにユーザー情報の変更が反映されていればOKです。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>簡単ではありますが、Nuxt.js+Apollo Clientで簡単なアプリの作り方をご紹介しました。\nせっかくのクライアントアプリなので、UIフレームワークを使ってリッチにしてみるのも良いかもしれません。\n一応Vue.jsのマテリアルデザインのUIフレームワーク<a href=\"https://vuetifyjs.com/ja/\">「Vuetify」</a>を使った版も以下においておりますので、参考にしてみてください🍅</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://github.com/Takumon/nuxt-graphpack-sample/tree/master/client_vuetify\" data-iframely-url=\"//cdn.iframe.ly/9B6aV8g\"></a></div></div>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://medium.freecodecamp.org/how-to-build-a-real-time-editable-data-table-in-vue-js-46b7f0b11684\">How to build a real-time editable data table in Vue.js</a></li>\n<li><a href=\"https://www.aintek.xyz/posts/graphql-nuxt-chat\">GraphQL と Nuxt.js でチャットを作る</a></li>\n<li><a href=\"https://github.com/the-road-to-graphql/fullstack-apollo-subscription-example\">the-road-to-graphql/fullstack-apollo-subscription-example: A minimal Apollo Server 2 with Apollo Client 2 with Subscriptions application.</a></li>\n<li><a href=\"https://github.com/bmsantos/apollo-graphql-subscriptions-example\">bmsantos/apollo-graphql-subscriptions-example: Apollo GraphQL Subscriptions issue</a></li>\n<li><a href=\"https://www.levvel.io/our-ideas/A-Guide-to-Subscriptions-in-GraphQL-with-Apollo\">Levvel Blog - A Guide to Subscriptions in GraphQL with Apollo</a></li>\n</ul>","fields":{"slug":"/nuxt-apollo-with-graphpack","title":"Nuxt.js＋Apollo ClientでCRUD操作 / ユーザー管理画面でQuery, Mutation, Subscriptionを実装","date":"2019-02-12T07:00:00.000+09:00","excerpt":"なにこれ以前の記事設定いらずのNode製GraphQLサーバー「Graphpack」の使い方でGraphQLのサーバー側を実装を紹介しました。Graphpackは備え付けのGraphQL Playground IDEで動作確認できますが、せ...","tags":["GraphQL","Nuxt.js","Apollo Client","Vue.js"],"keywords":["GraphQL"],"thumbnail":"thumbnail/2019/02/nuxt-apollo-with-graphpack.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><strong>「とりあえずクライアント側と同じJavaScriptで手っ取り早くGraphQLサーバー立てたい！」</strong><br/></p>\n<p>このようなユースケースに<a href=\"https://github.com/glennreyes/graphpack\">Graphpack</a>はピッタリです。\n設定いらずのNode製GraphQLサーバーで <strong>「GraphQLのスキーマとリゾルバーを定義するだけでOK」</strong>、さらに <strong>「<a href=\"https://github.com/prisma/graphql-playground\">GraphQL Playground IDE</a>が標準搭載」</strong>なのでクライアント側を自前で実装せずとも動作確認できます。<br/>\n今回は、この<a href=\"https://github.com/glennreyes/graphpack\">Graphpack</a>の使い方について以下の5ステップでご紹介します。<br/>\n※ここで紹介するソースコードはGitHub(<a href=\"https://github.com/Takumon/nuxt-graphpack-sample\">Takumon/nuxt-graphpack-sample</a>)にもあるので参考にしてみてください。</p>\n<ul>\n<li><a href=\"#1-graphpack%E3%81%A8%E3%81%AF\">🔰 Graphpackとは</a></li>\n<li><a href=\"#2-graphpack%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\">💪 Graphpackを使ってみる</a></li>\n<li><a href=\"#3-graphpack%E3%81%A7query%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">💖 GraphpackでQueryを実装・動作確認する</a></li>\n<li><a href=\"#4-graphpack%E3%81%A7mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">✨️ GraphpackでMutationを実装・動作確認する</a></li>\n<li><a href=\"#5-graphpack%E3%81%A7subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">💎 GraphpackでSubscriptionを実装・動作確認する</a></li>\n</ul>\n<h2 id=\"1-graphpackとは\"><a href=\"#1-graphpack%E3%81%A8%E3%81%AF\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Graphpackとは</h2>\n<p>Node.js製のゼロコンフィグなミニマルGraphQLサーバーで<a href=\"https://github.com/webpack/webpack\">Webpack</a>、<a href=\"https://github.com/remy/nodemon\">Nodemon</a>、<a href=\"https://github.com/apollographql/apollo-server\">Apollo Server</a> をイイ感じにまとめたライブラリです。感触を掴むだけなら<a href=\"https://codesandbox.io/s/k3qrkl8qlv\">CodeSandboxのお試し環境</a>が用意されているので、そちらを触ってみるとよいでしょう。\n<a href=\"https://github.com/glennreyes/graphpack/README.md\">README</a>では以下8つの特徴をうたっています。</p>\n<ul>\n<li>📦 <strong>設定いらず</strong>（<strong>ZERO-CONFIG</strong>）！</li>\n<li>🚦 ライブリロード機能組み込み済！</li>\n<li>🚨 わかりやすいエラーメッセージ！</li>\n<li>🎮 <a href=\"https://github.com/prisma/graphql-playground\">GraphQL Playground IDE</a> 標準装備！</li>\n<li>⭐️ SDLでスキーマ定義可能（<a href=\"https://github.com/prisma/graphql-import\">GraphQL imports</a>）</li>\n<li>💖 TypeScriptをサポート</li>\n<li>🔥 爆速ビルド</li>\n<li>⚡️ ES module importsとdynamic importをサポート</li>\n</ul>\n<h2 id=\"2-graphpackを使ってみる\"><a href=\"#2-graphpack%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Graphpackを使ってみる</h2>\n<h3 id=\"実装してみる\"><a href=\"#%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装してみる</h3>\n<ul>\n<li>プロジェクト雛形を作成し、<code class=\"language-text\">graphpack</code> を開発環境用ライブラリとしてインストールします。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mkdir graphpack-sample\ncd graphpack-sample\nnpm init\nnpm i -D graphpack</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">src/schema.graphql</code>と<code class=\"language-text\">src/resolver.js</code>を作成します。</li>\n</ul>\n<div class=\"gatsby-code-title\">プロジェクト構成</div>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">graphpack-sample\n└── src\n     ├── resolvers.js\n     └── schema.graphql</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">src/scheme.graphql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\">type Query <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">hello</span><span class=\"token punctuation\">:</span> String\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">src/resolvers.graphql</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  Query<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    hello<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'world!'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> resolvers<span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">package.json</code>に以下のスクリプトを追記します。</li>\n</ul>\n<div class=\"gatsby-code-title\">package.jsonの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"graphpack\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"graphpack build\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認してみる\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認してみる</h3>\n<ul>\n<li>サーバーを<code class=\"language-text\">npm run dev</code>で起動して、ブラウザで <code class=\"language-text\">http://localhost:4000/</code> を開くとGraphQL Playground IDEが表示されます。</li>\n</ul>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17cbf1d9923125e72bcc7c16bd61eec3/061c7/hello-world.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACKklEQVQoz3WSy27TQBSG/QaUxE6ci52bnZg0GY+dkubSXIpaVMGKBZtKsELd8QbskBCrqmqUkpAI1Fdgwa5VrYZ2VSxWiHcAeYsaJ4czuSkNyeLTsT0+n/8zY+5g/+DTh+OTn0fHjZtGo2kfHh7ZRKf22n2P7fEKCL8aD2/zgs+uVOs3e3tPftUf7Xa4Tvf0+rv9Ay4uv8Hl1TVYvSvofj6FZqsNJ+2Pc3Tu3DdbY8bXbWh1uvD23fseF9+oXSTz2yAmjVs+qg3WQvFBUM0MJE0fhLAGV8DWpRQZ1XCK3MYyOZDT5hknkZKlbtQhqpfduLEF4fVNkLMFkDKb4E+a4FMp8IoOgkLBlzRGiKkcvl+CCCmyPsA+V324DeF04ZwTVGoFtRwEUqaLsAqTe2w04Z6chqfPX8D+q9fgT+PHaAUkHT9MyjNCpOxKtApyoXbOYQKLNftV6iKwiDeWAVLagcLjZxDIFEeyJbgRswaFNy8xoUItPxtF0V0EFmFSD0p9D/L/JZvDlY0axHd3xkKRCVckZFK2LrHGSaKIUYGoUYWoWYUIbsFUGNSKc0KFusvSTWs4W5qNyPaRiZhYplszIdY7CfvYOByjD1GE0FFlz1A4RNkQm5bRZ8JQtnTGTrknTn6PEcp0XGMCXrORWTp2wstg22DWcYqyxQmJ7NeAqv8VVf1PWDOdWDbviApxvNG0w8fWHX5SfQniYFqELKA7QoL8DmpmP5A0v/wDjn13J8/rnr8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"hello-world\"\n        title=\"\"\n        src=\"/static/17cbf1d9923125e72bcc7c16bd61eec3/5a190/hello-world.png\"\n        srcset=\"/static/17cbf1d9923125e72bcc7c16bd61eec3/772e8/hello-world.png 200w,\n/static/17cbf1d9923125e72bcc7c16bd61eec3/e17e5/hello-world.png 400w,\n/static/17cbf1d9923125e72bcc7c16bd61eec3/5a190/hello-world.png 800w,\n/static/17cbf1d9923125e72bcc7c16bd61eec3/c1b63/hello-world.png 1200w,\n/static/17cbf1d9923125e72bcc7c16bd61eec3/061c7/hello-world.png 1216w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>試しに以下のQueryを実行してみましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">query {\n  hello\n}</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">world!</code>がレスポンスとして返ってきます。</li>\n</ul>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/64ee442f811af0c8c03bf5f21d729ca1/ec09f/hello-world-result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcRAAAXEQHKJvM/AAACkklEQVQoz3WSy27TQBSG/QIgpLSxYydOnDiOZ3yL44SEXEqrUimhVAEJAUIIWMEOsanEG3DZ0gVtU5LSSogVT9As2kDVRWWxQWIH2SLxAK2tw7GThlLB4tM/tme+OTPHzLPHT3vdtc7X1dU3h531dXdl5bVbq9VcVc25lBCX/IeTb5RSt9VqHV5vt7+1ms11Znvr/cGh+wV2P32Gwf4B5j50321D520PNnqbsNHdHOXJeEyn2wsJxmsbXehubsGLl6/2mHStvZstL0BUNo4jScW/IEh+TKa+kNXD5DJ0klF5BCtrfkwxfC6YgxnL6kdxakOSWDtMQq8MssVZkKyal7brkNDLkDQqIOoV4JQCRLM2RDIWsIgo5yEhW5BSbFDNS6DgvCBpvurpzmUQSanPTEvagCcliKmOx+JENlcI4XAcyM6LBBZvP4An9x+BTQrg5KtgosjUyhM0rexVMWmh0meiaX0g4C6CVvKSqgMScXDnMggolUgReKzImWlCe34JYlYdBGcOeGcGeLsRPvNI1Gp4Jr67snyrz5wT1UGt2IDlVtt7ONeCewtL8Lx9E+7MNuFqdR7uzi/CDYnAtbgCMXsGRKMKCbM2QUR4s+5ZKLZmG31mSqIDPudAQrE9LpsHFuGwKl7JY6MsCN4JePwSLYWCOC5MjImPpVipZ2IqGTsQagMWL39atrxAcJpAHuQ0Cm28Z/FUZX9VOBaqpBgK94JusrJ1jAJ/hIW/hjVJbI6PQl+w6j5W4/NnwDs80gOh6uwEwgMOm8GGx7VHKH8Iu41XUqIXQcNF5Aw0OCpSGVW4x0SSuY+cbP7kZOOHkLOHIi0O2YwxjKTIcCpFQyISHSbT+jCHqfyLFP1OZPOXIBsffgOyq4DRTTBReQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"hello-world-result\"\n        title=\"\"\n        src=\"/static/64ee442f811af0c8c03bf5f21d729ca1/5a190/hello-world-result.png\"\n        srcset=\"/static/64ee442f811af0c8c03bf5f21d729ca1/772e8/hello-world-result.png 200w,\n/static/64ee442f811af0c8c03bf5f21d729ca1/e17e5/hello-world-result.png 400w,\n/static/64ee442f811af0c8c03bf5f21d729ca1/5a190/hello-world-result.png 800w,\n/static/64ee442f811af0c8c03bf5f21d729ca1/c1b63/hello-world-result.png 1200w,\n/static/64ee442f811af0c8c03bf5f21d729ca1/29007/hello-world-result.png 1600w,\n/static/64ee442f811af0c8c03bf5f21d729ca1/ec09f/hello-world-result.png 1916w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>こんな感じで、とても簡単にGraphQLサーバーが立てられます。</p>\n<h2 id=\"3-graphpackでqueryを実装・動作確認する\"><a href=\"#3-graphpack%E3%81%A7query%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. GraphpackでQueryを実装・動作確認する</h2>\n<p>ユーザー情報（ID、名前、メール、年齢）を扱う処理を例に実装方法を説明します。</p>\n<h3 id=\"実装\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー情報のスキーマ定義します。</li>\n</ul>\n<div class=\"gatsby-code-title\">src/schema.graphql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\">type Query <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">users</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>User<span class=\"token operator\">!</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span>\n  user<span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span>\n\ntype User <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> Int\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<ul>\n<li>仮のユーザー情報を用意しましょう。</li>\n</ul>\n<div class=\"gatsby-code-title\">src/db.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby taro'</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span> <span class=\"token number\">32</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'gridsome taro'</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token string\">'gridsom.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span> <span class=\"token number\">55</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<ul>\n<li>最後にリゾルバーを定義します。データは前手順で作成したものを使います。</li>\n</ul>\n<div class=\"gatsby-code-title\">src/resolvers.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> users <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./db'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  Query<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 1件検索</span>\n    user<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 複数件検索（簡単のため全件検索としている）</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> users\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<ul>\n<li>実装できたら<code class=\"language-text\">npm run dev</code>でサーバー起動して <code class=\"language-text\">http://localhost:4000/</code> を開いて\n以下のクエリを発行します。するとユーザー一覧が取得できます。</li>\n</ul>\n<div class=\"gatsby-code-title\">ユーザー一覧取得用Query</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  users <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2e9a53c6d98d2444c40ee1f8a777b552/7f15f/get-users.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 76.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADdUlEQVQ4y3WSS4zbVBiFDQwDohlP3nacd+K3E8d5J86kTjLtTKcjBEVCIMSSBZXYICEkBBJiRSUeUxixLDNTlnTFDiJUtWTBggVkURWhVkAXkA0bdtTW4bczrUZCLD79N9fOueeca+b1l1/95LPL+z98tPfxzct7e7P9/U9n29tbs5WVldkTq6uz1f/Bf+a/w7LszHGc78aj0ffdweAL5qsvr9289/s93Lp9G7/cuYu7v/6Gb6/fwJWDQxwcXQ34/JiDw6sP905y5eAIh4dHeO/9Sz8z+eELX5e6W4iXzX/Ws6p7Kplz43nFFaTqQzKKGZCSl3C058P7U6y6saJ2X5BNCKr1IyPUxlOpfw683nWz5gAJqY5oyaQDagFrWQ2ryTIe58qI8CISgoy8ZCFXNpEuVlCQ6yjJdS9vdBCRrTkTzmnTpNpBUmm7vNYBp7aRJPzp/46JdYidCezOGDU6wJQaqNMzy0dpBWvC6yttMtCcM6cEaZqtO1CH267UHuEkSneCtN7Ba2+9iw/eeBu82oLQdBCvbCCq24gaNmLEujHwalobyjNn5kworUyztQG08ZYr9yZQyI0v9ACZhAXTRsfoIqP1wNccpMzT4Ct9cHqfquojofU9y+xg/OErvkN5mqttQJ+cc9X+JlQS8dF6m8dMqJsmKiUrEEyaDoQWdd4i0Z5DB2yQ44HnV1BwhnNmLaMEHcaVprtOfYWJGPXE0mRFC3FaR8oWLJoZvQeuOiSRMTiKzZFzvjpYCsot8OXGMnJCbEAQLdes9GBUurSuo2v20KlvIE1rpkiXQS6zFC8QNIc0bXDUH6f1ETdsz6JLEdTWnHksJU2fd3Zw4fS2e/Hs03hptIMhRb608yz2nnsRMl3EbrIAh1zyQWTqtLWzjNynyBZFri4dCgoJPkIO36E/v3n+grtrb+K8fQYXN3dh0O2uZHSwOQMjQYJNgsKxQ4565IwBxV66XDr0BemzCWXUb+LlOnjRuh8tml6E4ETLixarHluoemHi0ZLlUWQvX7E9jvqi2/VIKIDXbS9h2O5x5J+YtbRynS2aCJETNl8JeLBeL1Sx7u8VTDSo5xQ5jBCxE8SJMFGjyCm5eYsJpcrXwnn970he/yNaMBacZC0EtbFgM8riqZS4CAnS4kkilyovqlxxofGlhf5f/mwK4l/hvHbjXz/X08DUq3RBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"get-users\"\n        title=\"\"\n        src=\"/static/2e9a53c6d98d2444c40ee1f8a777b552/5a190/get-users.png\"\n        srcset=\"/static/2e9a53c6d98d2444c40ee1f8a777b552/772e8/get-users.png 200w,\n/static/2e9a53c6d98d2444c40ee1f8a777b552/e17e5/get-users.png 400w,\n/static/2e9a53c6d98d2444c40ee1f8a777b552/5a190/get-users.png 800w,\n/static/2e9a53c6d98d2444c40ee1f8a777b552/c1b63/get-users.png 1200w,\n/static/2e9a53c6d98d2444c40ee1f8a777b552/7f15f/get-users.png 1530w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>1件検索の場合は以下のようなクエリを発行しましょう。指定したIDのユーザー情報が取得できます。</li>\n</ul>\n<div class=\"gatsby-code-title\">ユーザー情報1件検索用Query</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  user<span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f5bb7db9af2113a5374565973d0413ab/09262/get-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcRAAAXEQHKJvM/AAACr0lEQVQoz3WSTWsTURSGsxcxZpJ2Jt+ZZJLM151MJpk0aZo20ppitRAoFHWhbkQQoT/AjQsFcVebWFtB/Re6kEobBfEjCOJaCy5caMCV0GRez6QN1KKLhzP3zj3vfc8513P1/JUnm631z2uttfftdru7urrazRlG1+v1djmO63I+37/hfF0fxYDf363Vah/m5xsfp+v1555We/PN23ddvHi5ja2dV9ja7uDR46dorW/gwcbmf2k//Jv7rTZu3b7z3ROvLG6n7FmMS2zPH88OvCFxIKTUQTijD+MInhg/RDDDDqH3I4qJkGx88YS1UkcqzCBuVPqiWUVMtRHTJxAl+EweY1IOgVQOgmQiQtElljaRYWWk6UyaomJOOmp+igSLux5/Qu0ISglC1uqPU7LLWMoYIpCgNyrjzPIlrFy+Bks2UTDKMOg8k20wxaZvG5piO8VsAbpd3vUERK0TVIsIsmJfoJt5EhwhuO4SGrTKLM7WzyDMJhG25xCyagiaUwjmCKMK3qw5SWUCCzcv7gsKsgVes/qcyOAVdXDk7mSS4TjhJY4RGSpZpORoaQGxiTqi5WlEbcKiUo2qk9HKsE7VSDBJDsmuL8n6uVwFDTrcrJ3GUnUWdxeauNFYxHyaoSlqCJs1RMhVhFWHbiN0gQu5dLJ6BYqUpx6KaodP592e0aQKWGmcw3USuTAzj3vNZSxNzUEksRnqZ9Q4EDrCSFBT3KGI2o4rSMPY45LMUTXbUfWSE5ctR5QLDp8ynBOS6ejU+CibdARKDh7CLZc3qoM0Capy4asr+Hr4PFL7E3Z7R+UPn4r/YG+M/heUIhRWgUSO0kdIEjnqoSYXvnm4ePYZL7HffIr9CGXMXkIr9gSJ9bi43AsklJ4/rvR8FBOEQntZWmeHccRw/VNP6r+iKf3TH35igAJgECn4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"get-user\"\n        title=\"\"\n        src=\"/static/f5bb7db9af2113a5374565973d0413ab/5a190/get-user.png\"\n        srcset=\"/static/f5bb7db9af2113a5374565973d0413ab/772e8/get-user.png 200w,\n/static/f5bb7db9af2113a5374565973d0413ab/e17e5/get-user.png 400w,\n/static/f5bb7db9af2113a5374565973d0413ab/5a190/get-user.png 800w,\n/static/f5bb7db9af2113a5374565973d0413ab/c1b63/get-user.png 1200w,\n/static/f5bb7db9af2113a5374565973d0413ab/29007/get-user.png 1600w,\n/static/f5bb7db9af2113a5374565973d0413ab/09262/get-user.png 1896w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"4-graphpackでmutationを実装・動作確認する\"><a href=\"#4-graphpack%E3%81%A7mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. GraphpackでMutationを実装・動作確認する</h2>\n<p>ユーザー情報が取得できたので、次はユーザー情報の登録・更新・削除を実装します。</p>\n<h3 id=\"実装-1\"><a href=\"#%E5%AE%9F%E8%A3%85-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<p>スキーマ定義にMutationを追記します。</p>\n<div class=\"gatsby-code-title\">src/schema.graphqlの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\">type Mutation <span class=\"token punctuation\">{</span>\n  // 登録\n  createUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> Int\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n  \n  // 更新\n  updateUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> Int\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n  \n  // 削除\n  deleteUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>これはGraphQLとは関係ありませんが、ユーザー情報登録時のID採番用ロジックを<code class=\"language-text\">db.js</code>に追記します。\n初期状態でユーザー情報が2件なので、採番用IDは3から始まるようにします。</p>\n<div class=\"gatsby-code-title\">src/db.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby taro'</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span> <span class=\"token number\">32</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'gridsome taro'</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token string\">'gridsome.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span> <span class=\"token number\">55</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// 採番用ID(3から始まるようにする)</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">let</span> idSequence <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// 採番処理</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateId</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">++</span>idSequence<span class=\"token punctuation\">;</span>\n</span></code></pre></div>\n<br/>\n<p>リゾルバーにMutationを追記します。</p>\n<div class=\"gatsby-code-title\">src/resolvers.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> users<span class=\"token punctuation\">,</span> generateId <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./db'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  Query<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ・・・</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  Mutation<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    createUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> newUser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token function\">generateId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      users<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> newUser<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    updateUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      updatedUser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      updatedUser<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      updatedUser<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> updatedUser<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    deleteUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> userIndex <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User not found'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>deletedUser<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>userIndex<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> deletedUser<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>  <span class=\"token comment\">// ・・・</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-1\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>実装できたら<code class=\"language-text\">npm run dev</code>でサーバー起動して <code class=\"language-text\">http://localhost:4000/</code> を開きます。</p>\n<h4 id=\"登録の動作確認\"><a href=\"#%E7%99%BB%E9%8C%B2%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>登録の動作確認</h4>\n<p>以下のようなMutationを発行すると、登録したユーザー情報が返ってきます。<br/>\n<small>※登録後にユーザー一覧を取得すると、<code class=\"language-text\">nuxt taro</code>が取得できます。</small></p>\n<div class=\"gatsby-code-title\">登録用Muatation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  createUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"nuxt taro\"</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"nuxt.taro@gmail.com\"</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> <span class=\"token number\">43</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9c4b0f6957283d51fb598eb253db3645/a8a6f/create-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 77%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADRklEQVQ4y4WTWW8bVRiGJxCVoOAk9ZoZYs9iezybZ2yPdzuNx1tjR0rBgIQKQqAKIcpyiwRI3MAf4I4lKYoQXHENbgBV/Al6RS9Y+h/ao/PyjeNUgCJx8ej9dM6cZ75zzozw9Tff3bn/x338evcufrt3D7//+Rdun/6Ezz7/AkfHt/Dl0fGFHC3z+NZXOKbnTk5O8NHHn/wi7I8r3/tX+tD84EFKL7OobLCUZjHF9pni+Ex1qkwr1hbIVGcoM5Rpmk8vUzRKD2gONH5bkL36XKsGkJw2k+wWotkSYllvwUbGxpqoYzWhYSWu4rKYRzyVhZQ2odD8jmxDzrrQch6TzTq28qVTIaJ685Tdhuh1mVRsYttukLy54GmnhYTuo351hmeuXYevuXANH26hCs+oU107S7POmiat06unwnrGnGdKu6gOp6zUHqPUGMNpDGE2+jCadBSVXUyv38DNV99ELl9Gsj5C3OshZrURJcKMWG1W9tpovn6NhLI1V7wO6t0xsxojuCRzKa3GAHo9gNkc0FZ8KIqHAnWT8Pch+T2IfhdimSgupKxSaqP11izs0KIOuzC6I5YnwTn6EoM6jdP56CQ1KROVEbbdPaSoiVSlS3UHMafDwq3L2cqp8JRszxV6U3E0YWE3FhGmsaAPqzVE8pGwgRidd8pq0dgZYR212yRsQDXoDDdVZx6jBZtOg8XMGuJGFRJdjEwXlHbOWKVL0PQqDOriXBheZGpZPxIWSLhCW36lM8S3h8+x1zoDzHavQjOrELZ1rEgGnkxb6Is5tOlzytKi+P8JH98x5od7U7w/fZa9N53hJnGjf4AP+xO83Z+iQJ0Okiqu/Ff4D/7dYdqcv9Sb4oXdMXuxN+GTZp9/cDDjnx4+z98ZHHDV8LmgejxXqHG6ZU6LOUl4kjK5rEOhey4U0tYPb/QmeHd8+DCo9Xivtsdf3tvnObPGads8krH5hupyQ69ym6QJkkgkEZeENY09rND5aqFwQ7F+XJMdrGVMRBQHMb2MCP0R6zsGNjMWIvSbrRMx2YK1oxOFC9Bhq0VsacWfhUtxsXJZlIdRSQ62JCVIKvkgkc4Ga3EpuBQTFzxBPBbdDgRKIcyLSKaHq3HR/xsjlMuiDlHQ6gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"create-user\"\n        title=\"\"\n        src=\"/static/9c4b0f6957283d51fb598eb253db3645/5a190/create-user.png\"\n        srcset=\"/static/9c4b0f6957283d51fb598eb253db3645/772e8/create-user.png 200w,\n/static/9c4b0f6957283d51fb598eb253db3645/e17e5/create-user.png 400w,\n/static/9c4b0f6957283d51fb598eb253db3645/5a190/create-user.png 800w,\n/static/9c4b0f6957283d51fb598eb253db3645/c1b63/create-user.png 1200w,\n/static/9c4b0f6957283d51fb598eb253db3645/a8a6f/create-user.png 1516w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h4 id=\"更新の動作確認\"><a href=\"#%E6%9B%B4%E6%96%B0%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更新の動作確認</h4>\n<p>今度は<code class=\"language-text\">nuxt taro</code>を更新してみましょう。\n以下のようなMutationを発行すると、更新されたユーザー情報が返ってきます。<br/>\n<small>※更新後にユーザー一覧を取得すると<code class=\"language-text\">nuxt taro</code>が<code class=\"language-text\">nuxt updatedtaro</code>になっていることを確認できます。</small></p>\n<div class=\"gatsby-code-title\">更新用Muatation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  updateUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"nuxt updatedtaro\"</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"nuxt.updatedtaro@gmail.com\"</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> <span class=\"token number\">44</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dfd6b940da1fa35dfaaf387dd2441f07/6bfbb/update-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 77%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADb0lEQVQ4y3WTW28bRRTHN1XVIFE7rS9Zx469Xi/enb04a+/F60scO74kdiHIJlyEkCiqEA9IIMQjEhISDyA+AbekKALeeG5XEKnfgj7RBy79DNBZ/zl2rFZC5eGnOTuj/c2Zc2aE73/86d7DPx7i1/v38duDB/j9z7/w8y/n+Orrb3Byehvfnpw+ndOL8fT2dzghzs7O8Olnn98TJgfuHa87gOL1/xE1hycknYslgxdNd4lsebxU8blClCyX8Li8WDOci9F0eF6z/5ZND1LFuyNIth+W3C6yZotnzSYSShVJxV4SL5h4ZkvF5XQJaykZV3IMV7IarhYtJFUH8ZKNRNlBSnO5aDZwvVwNhZi8E4pmC1v2Ls9VmtgyA2StBnJWc0ladeGNpphN30BQqsDRHDg05zIfruYtR4/5vK4HyKh+KDyb10Op1oE9eJ7rzSGMYACdUOv7YI0+5NouDl+7ifdvvQujXIPkDZHf2UNObyDLaGMizRrcp2Ra70xJKBmhtNNCq3PA7eAQfjBGPZigFhzACoZgQR9xKoMs23iOBUh5E2TcHkSvA7HeRcbp4HqlzWu1NnbfOyZhwQiL1V1U2ge8XL/IbIFW76/YR4KOppZdaHSsTWeEjN2FWG1DpOwzRLLa4TatyYoTClclM5RIaA7GXKds9MZgmZW2YhEnNHcpZEYDSaq3aDSxqV8gEgmjxXcoe4V5obBRtMIMHTnT3Oc5qmWekN09ML8HdcWioxp1U2X1x8JFIy8godnmO5ShopFwjZpyRMf68sWX+eu9CYbUCEYbCNsGLtO1iUkW1pQaSqoH7WlCYyFsPRFe2mbhvtfFF0fH/KPJFB8cvYK3+jfwdquPN/cOwew2+qKMfbqXMv2UJklmIVyxiGkTbrOVUMhp4WxvjFd7Ez7rjuez9nD+4Xg6/+HopfknLxzPTbs174ryvKfY87zemF+z2nMSPCZFxK02t/Qnwru3Ogf4+MbsUT/oRwO/G93sTSLbakSCqEaxvBEJSi0qq17UKDtRmQWRzuoRW7GIy6z+qEklkZl/V4hJ+nl88czoFWwQaebSc6oiVtCxUTCWYyyvIyWZKOYZChT/F4nmi+S4plTOhfV0zo+J+XEsUxhtZIujzWJ5lNgujdaTW6P1VG5FdnSJvoV0biSk/odMYbyezvr/AilzzRyQ4ePbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"update-user\"\n        title=\"\"\n        src=\"/static/dfd6b940da1fa35dfaaf387dd2441f07/5a190/update-user.png\"\n        srcset=\"/static/dfd6b940da1fa35dfaaf387dd2441f07/772e8/update-user.png 200w,\n/static/dfd6b940da1fa35dfaaf387dd2441f07/e17e5/update-user.png 400w,\n/static/dfd6b940da1fa35dfaaf387dd2441f07/5a190/update-user.png 800w,\n/static/dfd6b940da1fa35dfaaf387dd2441f07/c1b63/update-user.png 1200w,\n/static/dfd6b940da1fa35dfaaf387dd2441f07/6bfbb/update-user.png 1514w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h4 id=\"削除の動作確認\"><a href=\"#%E5%89%8A%E9%99%A4%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>削除の動作確認</h4>\n<p>最後に<code class=\"language-text\">nuxt updatedtaro</code>を削除してみましょう。\n以下のようなMutationを発行すると削除されたユーザー情報が返ってきます。<br/>\n<small>※削除後にユーザー一覧を取得すると<code class=\"language-text\">nuxt updatedtaro</code>がなくなっていることが確認できます。</small></p>\n<div class=\"gatsby-code-title\">削除用Mutation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  deleteUser<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5cb85f5c669161188e9dd7ad4d2598ff/460fa/delete-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcRAAAXEQHKJvM/AAACrUlEQVQoz3XSz0/TYBgH8B7xpJO167Z23ca69fcvWDfoOjaFhUEAiTEYDprgQU1MMPFiPHjQvwEicywjevXileAMzAhRs5sHz5odPXiDNo9PNzlI9PDJ07fP22+ftynx6M6DdrvZ+tpoNL7sNHd6W5ubPVVVe+HR0R5FUT2SJP+JIoc9mqZ71Wr18/x8/VulWm0Su6328dHxJ9jrdGH/4CPsvf8AL9uv4UWzDds7u/8V9M/2bDVasN1swdNnz7uE62gHpjsDrOacUhnNDzEZnx6T/Biv+JG0hMQBCpG4HsB+NKv6NO6hh/WElS2ICdo+kZDz3cz4NKT0KS9tloBVCsCpRUggOmcBxZtA8gbEsiYksAaSeF/UpyCHewSssuF46kQFGDHfIcIpuUtLBYgqtkfxOlAZA+kDdM6ESwkRltbW4eHtu2CJFowbDuhyEVTRBk0akiXbK8oFUOzJDkGllW5ctoFR8l4ka0AEgyI4xZnRlAKqMwvzlTrEtBIwxTrEcZqY6Q7pJaB011OsMtQe3xwGRgQLSMn0zodRf2oorYISHNVwgSvUgbMrkJiqAOegfBniluupGGxMu8NAVrFxc8EjMTAwOqZBGAXHHrwEv58l2YNA1igDq7vAaA7W0kBUL3kqTi/wVocYYYXuWrkGu9dXvfXZRVh0ZoDDiVNSHmgMCgIvZy0wcJ3UnWHQObEgEHuSNNEhLjDZw7pbg3tzy6f369f8DfRq5Yb/ZGHFTwjj/kXe8JdY3l/I6D5luD4+/Jc4iujuiYSTiuLEO2KEyR2tTs/BxtwyzE5egVtXF6BWrOKvYkI0mBAxqIhHlnAa4RwR8cjWggnzh0SYy72N8trPGK/9iAlmP6nk+9SY0g9xQj+clJDYD6WkfiIl9wW8zv4LJ36XM+ovJqO++Q0HeYHa08D96QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"delete-user\"\n        title=\"\"\n        src=\"/static/5cb85f5c669161188e9dd7ad4d2598ff/5a190/delete-user.png\"\n        srcset=\"/static/5cb85f5c669161188e9dd7ad4d2598ff/772e8/delete-user.png 200w,\n/static/5cb85f5c669161188e9dd7ad4d2598ff/e17e5/delete-user.png 400w,\n/static/5cb85f5c669161188e9dd7ad4d2598ff/5a190/delete-user.png 800w,\n/static/5cb85f5c669161188e9dd7ad4d2598ff/c1b63/delete-user.png 1200w,\n/static/5cb85f5c669161188e9dd7ad4d2598ff/29007/delete-user.png 1600w,\n/static/5cb85f5c669161188e9dd7ad4d2598ff/460fa/delete-user.png 1910w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"5-graphpackでsubscriptionを実装・動作確認する\"><a href=\"#5-graphpack%E3%81%A7subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. GraphpackでSubscriptionを実装・動作確認する</h2>\n<h3 id=\"実装-2\"><a href=\"#%E5%AE%9F%E8%A3%85-2\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<p>GraphpackではSubscriptionはデフォルトoffになっています。\nそのためココだけは設定ファイルを作成する必要があります。\nプロジェクトのルートフォルダ直下に<code class=\"language-text\">graphpack.config.js</code>を作成しましょう。</p>\n<div class=\"gatsby-code-title\">graphpack.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  server<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    subscriptions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Subscriptionのエンドポイントとして</span>\n      <span class=\"token comment\">// QueryとMutationと同じパスを設定します。</span>\n      path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`/graphql`</span></span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>スキーマ定義にSubscriptionを追記します。</p>\n<div class=\"gatsby-code-title\">src/schema.graphqlの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\">type Subscription <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">userCreated</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n    <span class=\"token attr-name\">userUpdated</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n    <span class=\"token attr-name\">userDeleted</span><span class=\"token punctuation\">:</span> User<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>リゾルバーでSubscriptionを定義し、Mutationも修正します。\nMutationも修正するのは、登録・更新・削除完了後にSubscriptionを発行できるようにするためです。</p>\n<div class=\"gatsby-code-title\">src/resolvers.jsの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// Subscriptionのやりとりには`apollo-server`のPubSubを使る</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// `graphpack`の場合、`apollo-server`は入っている</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PubSub <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'apollo-server'</span><span class=\"token punctuation\">;</span>\n</span><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> users<span class=\"token punctuation\">,</span> generateId <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./db'</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> pubsub <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PubSub</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token constant\">EVENT</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'userCreated'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'userUpdated'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'userDeleted'</span><span class=\"token punctuation\">,</span>\n</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>    \n  <span class=\"token comment\">// ・・・</span>\n  Mutation<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    createUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> newUser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token function\">generateId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      users<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \n<span class=\"gatsby-highlight-code-line\">      pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> newUser<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>      <span class=\"token keyword\">return</span> newUser<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    updateUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      updatedUser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n      updatedUser<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email<span class=\"token punctuation\">;</span>\n      updatedUser<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">      pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> updatedUser<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>      <span class=\"token keyword\">return</span> updatedUser<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    deleteUser<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> userIndex <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User not found'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>deletedUser<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>userIndex<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n<span class=\"gatsby-highlight-code-line\">      pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> deletedUser<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>      <span class=\"token keyword\">return</span> deletedUser<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  Subscription<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      subscribe<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">asyncIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      subscribe<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">asyncIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">      subscribe<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">asyncIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span>  <span class=\"token comment\">// ・・・</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-2\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-2\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>実装できたら<code class=\"language-text\">npm run dev</code>でサーバー起動して <code class=\"language-text\">http://localhost:4000/</code> を開きます。</p>\n<p><code class=\"language-text\">userCreated</code>の動作確認をしましょう。\n以下のようなSubscriptionを発行します。</p>\n<div class=\"gatsby-highlight\" data-language=\":title=登録用muatation\"><pre class=\"language-:title=登録用muatation\"><code class=\"language-:title=登録用muatation\">subscription {\n  userCreated {\n    id\n    name\n    email\n    age    \n  }\n}</code></pre></div>\n<br/>\n<p>すると実行結果（画面右半分）にローディングアイコンが表示され、監視状態となります。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/46a5dd71ec73c93bd1b38799d7463245/7de21/subscription-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 63.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACzUlEQVQ4y32SW08TQRSA911baCvd3V6Wlm67t+6l2/tVIa0FgiUaEKvQoPHBF33XJ18NRq0YEdBIYoyJf8A/AFXr6gvG/yJOezxbawRCfPhydmZ2vjkz51DP2uvfHz5+1H3SblsP1tYswzSt006nNeJyWSOjo5bzBOx5e/2Uw2HFBOHL9OyMNVWtdkVJalD7+z9g79Nn6H79Bh+7Fuy8eQvPN7fgxdbL/7A9YAPZ3H4FG/h/++k6XGk2VynTrEE0N3ngl1I9T0jqMRG5FxC0nj+mIvFeYIDaYw/hs9dFfRg1gnN9Tk4cuJnACiWmpyCSKJGIWYZgPAecisSzQMdM8PIGuCM6OMMqjPM6cEN4KQWSloeYkgFFL/QRELQCcTLhFsXKuFnOEkZMAR01gIklBrDICMrKZgF2GvOgosTAAw0lC/ohcNzXMOaVNImEJlqUT0kDY2YIIyQwIx2lyCDa2Wkgy0m4k6sArRWB1ctI6Qg+o9w/Ey9BujpJ6remUIgnM2qSeDEbBiW2dCDm/4xtaRTXxnFzEKXH4fRi36eVwEwWiJlSWhQtJO1siH1FD25mBRMYZAzfz4MiL2ackZIQRGEABTb2Nzcco7TPGmXQpQyJuf0t6mqlDgvnpsni5AzUi1W4WZuDZuU8LNng3Gq9AUUtB/6hyJaEzAqEzbP/hPgU+J5EZMdb1OtmC+5fXiZ35xchmSgOMgyKSYjIqUG15yJxuIAwmAV30pVR6MODdDlDRJprUR+WrsG7les/3y8tk3uNBXJ79iK5VKyS0QmVuHiD6JxIarxG6ESF+PQywSIcRS//8hqVHlb6QKK5FSqBPaTpedARFdHs/pLT4P3bOtiPBvZbqVADA3tVxhZRsH0OI6p5yGJxIzR3g3KFlW+ukLw7FtU6ASXVcYXljiMQ7Xg4oeNG7MggsQDf4ZHoMXg/vycEox1hQt51eNjZ30AamZ9KzuyAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"subscription-1\"\n        title=\"\"\n        src=\"/static/46a5dd71ec73c93bd1b38799d7463245/5a190/subscription-1.png\"\n        srcset=\"/static/46a5dd71ec73c93bd1b38799d7463245/772e8/subscription-1.png 200w,\n/static/46a5dd71ec73c93bd1b38799d7463245/e17e5/subscription-1.png 400w,\n/static/46a5dd71ec73c93bd1b38799d7463245/5a190/subscription-1.png 800w,\n/static/46a5dd71ec73c93bd1b38799d7463245/c1b63/subscription-1.png 1200w,\n/static/46a5dd71ec73c93bd1b38799d7463245/29007/subscription-1.png 1600w,\n/static/46a5dd71ec73c93bd1b38799d7463245/7de21/subscription-1.png 1839w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>この状態で別タブを開き...</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/23165bbbf16f9be0be54b90121b38021/7de21/subscription-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 63.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACeUlEQVQ4y22SXU/TYBTHey9sbMvWlnV1s+3alb6s2xjMbRAIRFnURFFQEhZjvPBLeGm8wIgTE4SBoDfyQWAxo3KD8buIT3s87TqBZRe/nKfPy6//87TUp9bWr3eb77ubrZb9dmPDNizLHgmF7HAkYt8Ih31GxsbsUSSMhILqr4+O2llZPr3bWLLnFxa6Si73gDo//w0nP7pg22fws3sKR9+PYHunDTvtPfh2cAhfkcP9L9De24fPu21kD7ax9tlp7+P+XfjwcQuePlt7ThULiyBMz1/okuk0eMlpLa84q4sN5+Wde84r5M2jFedgdc1ZqMw6tKg6XFZzOFl3UorRq7JBklndTavWRZTl1illch5uWXWSs2qg50rgVSlfhbRaBkbKA5stAIOwchESkuXDTZQhg3tS+jSerbkIZMwqCdPpJsWqU0CrU4RGWTxrQRwlCYRGQoIBNasC28uPgdUqkDJrw3BTRg34Qp3ERLlJjU9MAlMoE0a2gBZNFJl+9dJFBRNUtQjN2UVIGtWeoF8Rzhvna+64UgH1yX1Sfv0QE2IyRi+ShGD6qfokxF6NYsqQMomCek8QiLhLsctpVcjU5gg/U8KESgkPm8QXiZft0v3WMW0qaPeqiL98dv017TYJxzNNyrvwhNQTJsTrKftzSW36f7ueJF2YgUxhti93g6QkykuBEBN6BwcZFPYTDuAGayTCiZ7Q8g7+QcgwvJcltQrBOyReiiH8RRzkAoXrFIP/l9+eJx6Cd4+8WQWtvgRCae7qx7iGNz+WFF5QjKifMYJ2zMn5jmCUOzjuRFLZToyXO9GA2E2lE0vnsA5DOYln1A4rGccjMbbxD91rkLBOE2s4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"subscription-2\"\n        title=\"\"\n        src=\"/static/23165bbbf16f9be0be54b90121b38021/5a190/subscription-2.png\"\n        srcset=\"/static/23165bbbf16f9be0be54b90121b38021/772e8/subscription-2.png 200w,\n/static/23165bbbf16f9be0be54b90121b38021/e17e5/subscription-2.png 400w,\n/static/23165bbbf16f9be0be54b90121b38021/5a190/subscription-2.png 800w,\n/static/23165bbbf16f9be0be54b90121b38021/c1b63/subscription-2.png 1200w,\n/static/23165bbbf16f9be0be54b90121b38021/29007/subscription-2.png 1600w,\n/static/23165bbbf16f9be0be54b90121b38021/7de21/subscription-2.png 1839w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>登録用のMutaitonを発行してみましょう。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/89891b4bc902fbc41f02ec590c8873ea/07d37/subscription-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 63%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACpUlEQVQ4y4WSy08TURTGZykqxLa0TN/Tx8x02s7ceXWmpaUFlKIR6iuigol7E/cuXJCYiOjCIBEogpGEBaxF+PM+zx0G0p2LX849d+Z8957vXOHi7C/Ozv7g/PwCJyenmJ+fg67rME3zvzDG4LouVldX8XptLUDY3T/E3uERhoe/cHR8jJ2D39geHmB77ye+7w4Dtnf3ieE1wf7OHjHEFsUv37bwcWMTnza/QkjJFqIlhpyiwm26kOw5JGQTExkFNxO5gLF4FmMUb4SMTeVxO1XAraREsYjxdBHRvBoglKwOOEV7Bpl6EwU2jaLZRrraQLLiBqS0BvKai0KF40Cu+9DdHjSq051usGbeHAp6G4JY85GsNyDSrRIyQ7x8iahYiBV1VLxZrK9v4B5rwjM8OPUWrKoHkw4xw2hQ9BQbVqsDQao6UI0mSqqPsupR6w6SZEMgXjKQrjXwcHkFlt6E6C0g4/eRtrtIsRkkWYdiByLlhbKHwec3ELKqhTSJcN+4EGeK1lfEuCh5bJIF6UYfktdHzu8i35pFzu0iZ3aQJlFF8+Ev3YUwVbXBEctXItRuOYTyOFGmlizyN2WTiNlDlgSyZkh4S1VvQZddCMmag3jVQkSqYzL0L0LcoQOidLsoCebJJ5sEeYtZox2QCeHrQJC8ZTQsgYtouo/Z1jye9hYx6C7ifX8ZP5ae4MXMAkQajKnaYDQ8XpgLRUa5FqR/hAkqeOB1cfr8FTYer+Dd/Uf4sPwMbxcHqFtttHIqXkoaKtSSyC79So3Ac5EGJNN3gwty0xXNwcDvoWm30aCJO+Y0YtRqpGgEUSIPfaKoT0OhQnkEnpdonz8dRggphSFRpkLFDJ5IpFDDeFbFJN0qXqgiJlWRoD01X4FGVEbQRvaMUh150vkHDjOsMRmNmOsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"subscription-3\"\n        title=\"\"\n        src=\"/static/89891b4bc902fbc41f02ec590c8873ea/5a190/subscription-3.png\"\n        srcset=\"/static/89891b4bc902fbc41f02ec590c8873ea/772e8/subscription-3.png 200w,\n/static/89891b4bc902fbc41f02ec590c8873ea/e17e5/subscription-3.png 400w,\n/static/89891b4bc902fbc41f02ec590c8873ea/5a190/subscription-3.png 800w,\n/static/89891b4bc902fbc41f02ec590c8873ea/c1b63/subscription-3.png 1200w,\n/static/89891b4bc902fbc41f02ec590c8873ea/29007/subscription-3.png 1600w,\n/static/89891b4bc902fbc41f02ec590c8873ea/07d37/subscription-3.png 1790w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>これで、元のタブに戻ると、登録された情報がレスポンスで返ってきていれば成功です。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5602d4585c77e98c3841e166f915cdd2/07d37/subscription-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 63%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACp0lEQVQ4y4WSy08TURTGZydETXj1MW1npq9pO9N2Xp0Hw6MVpNQINIqAINC6c+HKxI2sNCpqfIABC0RJ+AdYCzH92z7PHSvpxrj45bvn5sw353G5X5eXuLy4QLfbxfn5ORqNBiqWBddx4PwH27bh+z5arW202y20Wy1wnZNTHJ2e4fD4O45/nGK/c4L9byf4yvTw6J/sHXSwd9gJ9N2nPbx8s4vXu+/ByXoVCX0S0awKIacglDUxJCq4GZcxMJbAYEjAAHEtlCCEgIGwiOt8EoMRKdAbsRSGxVwAlzankGFY0xDLPtLGJNhdXHUQU2zwBRuxvIUkxSmKGbnyODS7BpXyyqTsbHgzSGlT4KJFD1FKiORMhLP6FVHZwHBGg617+Ln5CPWSDYfOlZIPU/VgKA4M1Q1UI3VzFswJMuQpkdfswCDSB4tDZCzlTWz5NZgl+rFbR8KbR7xSQ0yfAk8wjVpVpLIumh/a4EKKiQCqZqxXHdNRitl5iBjJ21SNg7jTQNKdh+hVIfm3INpViAaNh0xzigdv4Ta4TNGBQDOKUcvJQiWYV5qqklUbcZqXQMYzWY0qHEfMIhOjBoEMBKNHr8o8zb8s2+B2mit4e28NO81VfFnZwKvldZyRfiQ26ksoZcrYpu3pZMhaFLTJgEQPdg4MabY6jYXbmr2LjVoDzxbu48XSA3S3H+NgbROKRgasddkET4sziX7Dfq4MKYf7vPwQq2T4ZH4JT+uLWJ9bxPM7TWSo3RFqly1GpqdTpk2G9T/zivXB4qg+DZla1pihRDNL0Px4tl36mG1YpDu+t222oCwlzrkzKLqzkKkSuTwRGDByRIZi9nR0govI7M1pENQK0pqHcKaEYUnBaFLFGME0nC5BTRehJhUUpAIUotDj71mj7yRa3m8xB7JpIy+UbAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"subscription-4\"\n        title=\"\"\n        src=\"/static/5602d4585c77e98c3841e166f915cdd2/5a190/subscription-4.png\"\n        srcset=\"/static/5602d4585c77e98c3841e166f915cdd2/772e8/subscription-4.png 200w,\n/static/5602d4585c77e98c3841e166f915cdd2/e17e5/subscription-4.png 400w,\n/static/5602d4585c77e98c3841e166f915cdd2/5a190/subscription-4.png 800w,\n/static/5602d4585c77e98c3841e166f915cdd2/c1b63/subscription-4.png 1200w,\n/static/5602d4585c77e98c3841e166f915cdd2/29007/subscription-4.png 1600w,\n/static/5602d4585c77e98c3841e166f915cdd2/07d37/subscription-4.png 1790w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<br/>\n<p>以上でSubscriptionの動作確認は終了です。\n今回は紹介しませんが、<strong>userUpdated</strong>と<strong>userDeleted</strong>も同様の方法で動作確認できるのでやってみてください。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はNode製GraphQLサーバー「Graphpack」の使い方について紹介しました。\n上記で紹介した通り非常に簡単ですので、「とりあえずGraphQLサーバーを立ててみたい！」という方はGraphpackを検討してみてはいかがでしょうか🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li>\n<p><a href=\"https://dev.to/leonardomso/a-beginners-guide-to-graphql-3kjj\">A Beginner’s Guide to GraphQL - DEV Community 👩‍💻👨‍💻</a></p>\n<ul>\n<li>GraphpackでQuery、Mutationの実装方法を紹介している記事です。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://steemit.com/utopian-io/@richardbmx/logo-design-for-graphpack-approved-and-used-in-the-project\">Logo design for Graphpack | Steemit</a></p>\n<ul>\n<li>Gpraphpackロゴ作成の舞台裏です。</li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/graphpack-graphql-zero-config-server","title":"設定いらずのNode製GraphQLサーバー「Graphpack」の使い方 / Query, Mutation, Subscriptionを試す","date":"2019-01-23T19:50:00.000+09:00","excerpt":"なにこれ「とりあえずクライアント側と同じJavaScriptで手っ取り早くGraphQLサーバー立てたい！」このようなユースケースにGraphpackはピッタリです。設定いらずのNode製GraphQLサーバーで 「GraphQLのスキーマ...","tags":["GraphQL","Graphpack"],"keywords":["GraphQL"],"thumbnail":"thumbnail/2019/01/graphpack-graphql-zero-config-server.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Nuxt.js＋GraphQLの知識がこれから必要になるので<strong><a href=\"https://booth.pm/ja/items/1045830\">「Hello, GraphQL for client-side!」</a></strong>を読んだところ、非常にサクっと学ぶことができたので感想を書きます。\nGraphQLでサーバーと通信するには<strong><a href=\"https://www.apollographql.com/client\">「Apollo Client」</a></strong>というライブラリを使用します。\nNuxt.jsではApollo Clientを使いやすくしたライブラリである\n<strong><a href=\"https://github.com/nuxt-community/apollo-module\">「apollo-module」</a></strong>が用意されており、本書は主に<strong>「apollo-moduleの設定方法・実装方法についてチュートリアル形式で学べる一冊」</strong>になっていました。ボリュームも46ページとそんなに多くないので、<strong>「1日～2日で読める」</strong>内容です。\nただNuxt.jsの説明は端折っていたり、VuexのStoreのdispatchも知っている前提なので<strong>「Nuxt.js触ったことある人向け」</strong>かなと感じました。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://booth.pm/ja/items/1045830\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fbooth.pm%2Fja%2Fitems%2F1045830&key=0658bf78be97cafcf2b0b9f96c1270ee\"></a></div></div>\n<br/>\n<h2 id=\"目次\"><a href=\"#%E7%9B%AE%E6%AC%A1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>目次</h2>\n<p>第1章は冒頭6ページまでで、第2章がメインです。</p>\n<ul>\n<li>\n<p>&#x3C;第1章> GraphQLとは？</p>\n<ul>\n<li>1.1. 概要</li>\n<li>1.2. Apollo Client</li>\n</ul>\n</li>\n<li>\n<p>&#x3C;第2章> GraphQL with Nuxt.js</p>\n<ul>\n<li>2.1. 概要</li>\n<li>2.2. Nuxt.js</li>\n<li>2.3. apollo-module</li>\n<li>2.4. クエリの書き方</li>\n<li>2.5. 取得（Queries）</li>\n<li>2.6. 更新（Mutation）</li>\n<li>2.7. エラーハンドリングについて</li>\n<li>2.8. オフライン対応について</li>\n<li>2.9. テスト</li>\n<li>2.10. 良い使い方</li>\n<li>2.11. 周辺ライブラリ・エコシステム</li>\n<li>2.12. まとめ</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"本の感想\"><a href=\"#%E6%9C%AC%E3%81%AE%E6%84%9F%E6%83%B3\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>本の感想</h2>\n<h3 id=\"公式ドキュメントや他サイトを多く紹介してくれているimg-null-data-iconemoji-blush-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaat80leqvr4aeyvu4assrpgzx8riwib1xzbtm175nvf1rbnlzxgwtvgttxxdru6ujijyrtqnwxcrk6zx0nkpyf2nz8r9jpvanx33uw1nmnqhcxcdif2pauetxyaoess7sw1xtw4liccgsfeytvggmiuap6vlzt2c6ovra82lkpajdacyklsoubaloawejv453gv6s1he1dyivswh4qnu9oezgzgp3nggzrihbvmtsvnggkuzdeypldwoqfrci8oh2inaqasejd4w70j3ilcrxaddley2h7nkmx3b2f5yq5ongjk7cnkmpre09odmtybu00grw0z6mhdmkicqsceftgkclgzenrxlorakww7euyrfqlgxqvf6cwxtklfdmz3zlxj36ggksutiy4poftsan0u0vp4jdgopacl7ifzqfpakswm5nq74qjzxf5k6gylqjlko2gdqj6dat0c1nytkpynxi5gsiayb8acagae8hbselg967ebzun2zqxthmdrpzibzrptyxtsin32lue94czgavkov3skcc9hiyi5ee2fl3wfdknp1asbrufmdatsgpelsvmupkgkedgucoa9aajgeznnaigqawl078btmifd91psbqtxpzs0plcdczwopk9c8uciifapyb2gnk1i0uwzj8li7ou4pmefon0rmlat0upf0mvovpyglwffawecwe4l0d0sahpgxc9j9jvz5lun0ftltdlmsnrxkpfarhf286usn6qb8hqgc65ltgmjj2brzplbw4gpccyfyqzdhpp8exlvgysjacj7djtehn4abxjbzpxawclrpojawftmetbktq6kpvxs3d534xbamrokmtnxzi9om4jtopyixqdt0ia54g5u2zngewqhivv2hoofl0kbblhtvyndjhprwe2bwz2dfdelczcuzvrrypbmdlkx5frmfj8vr59mp5iwhowhz1enjwbgk7aaebppthacaeoirqpzugkcclvwx6f5goae5pjnl8mosnledsdvcwecqmpbuzcym6nwin0ure01goouadvnaxjb4h6fvn9jgaad2l7kejkzjh3wnkvg3qsuqicpdwn34gua9wgn8baqkofxfzmkxr3xw0hph6jsmemklxifkjkhackpb7xxj0qtjylum1cyueqajgxegm9xetunvopqrpjgcbbmub9v4atjdfllefycc1sitbhmhlnr4y4guhbbaiqdiwcp4d1gcjttrrh96tduknub5vkfws7ivnps3sossyocrf00y8rsbho6ygfzqemlxcn7sjmk8a1wd4radkoagqpn4dsc2t7l0nbisdfblmxuxvj462ohkh7drfp6ekqt468xclsnrc01dgm4hqixcnr0nwoetiqkicdar3cj2qcajsgxdqbtwtrymn323ldebg97feebvxibqig3nwqxvwkb6ivlwtowfd5zitbdryxeqqi8edpbczjtq2xuyq5ciahjypw6n7z5vpdd86g63kshhsgah3hdg6kivowuzsojeffcsmpagikx3ekr9ijoipzvslxbxm1exrmt3sjunptymcvg54wa4lqaa5rzgoemtdpqhroyoofrjfsfyhuh7agta8gqktihfghanckwguwaejgfmsccuq2xvyqauz6h2khtbh05r9e8ztcwemapjub6fxozgtlzj03qfijqoweguqzsp0gnifrakzyv7ql7ttltj5qplk9dwowerfpdm7tze2gblqbs0ycxaepbczeiimrwskkxq2asdmtnk5ad6084nv8cxbdcvcabsura4o8viqr0afgjaitgubjwyjfpyfrz2hb8dcxlckj9fzz7bz2ksyzplyespptnzzhn55atgdnitgouors6dx325eoaaxnakswvyyqzbdztbvlw55rwc0alobetoaaamodqsb2f0hwo5exrsglafbbtyqxyywpp7kcr73ewmazlejshdpqg8lxzflkem84ca2xhyxirvsh9ypfnuntvhgznqscumhwkqohxfddigkkxigqnwyoi217luowu0mtiodlvdqqoi4f9wwdtpymouy2e61kiouyfclp5r9xybizmwphh8f8zxdu0paxhxjg5wt7v6jizmzmzmzmz95izmxgzhxmau6uqqyoz7rd3vlnqvou6j8nsp3da4xd8v5emblkjm5avceacagvfqee8od8qcbrxg7tfqmgg6ujixptx7h17xrrctwvkousr8xk2xfsl1ovesh6sojiymalvg8jj0nv4pgddf0a00q6qbf7etpe089q8sm33zmwnhzhxn8xa5pr1t0xwijlzbeoo6aegrpluw1u55sojiqpvhlwhdsja2uhiawukikw6mphb028tefp8xpxevyxlffssrzvrziltn142sr4urg1djai4fxbw13b9tdfr1ov3uxcrlogz9cw90zxr9q7cg7jgixbguty9wqgxclgkeajmmomzzgagcqrzksr3ence9jh1ybi6ogprzn0rtlc6wt8rr7j170nfweunuretztxao62irfrr9nx1p5anconockykaigbhvcnxmia8mo9ew9gvxl2ra0eon8qyyl70naxlkosbtfnapzydv0bhjkjzetjsbrf0lywe3s7g2tnljgs2ju7pztbpyphv0ps5coexuvwrtzztoqjhvrl63ypj012zpzwghnnlqnt88cxm9pd8laqzqiskvljfhiksiey7hyhlu3gtjnosegnenwmsyoirqslwbbnnmdsrvlzorjyzszbl04czz1hts71ww3hcbxx0hlltmen3278ahlhsz2dru7qwag9mv6dx1on9tv02b1hr9tv1nx4fdme0mcs77v4vu7t7vu2twdaicyusnkfnqzphe4hynyea9he3hm3mumboqllpsuybaue2qwtnwr1uve58outm9nizdm3xzfqnfyot825febtxnwvktwwsazkqf66adhw844oq1hb6wb3pox7hhj2qxtcqtt7iijqqbu0ycios9tb1bbhf9bxqrpyibbb0swzkjvm5ndmfdso4cbqoy413vkddtu3ezbtu8bbyxtuumrng75ya91aalzuwrajwl5uzzgxnj5x100hky1siju3yd6dra3rxtzzlwgphpxsmibmqzbomeieldp0tscg8i8zeiassangv2mrrmksxwwvapmefiyclsohii44mvcvihjuywekhicpv93v2a429zqmkdshiwpoctpsah1dw7cwftrj7te66zclv1z78kkjm51s0sydkemfxkex1ktkhkosugafmshhya6na1qya4h7qsrabtlnm5e2oorqmggo3qtqxkmsobcccctou7w9zxclstjfmjtnpdwrjtzxzeiagpoxrwbqtfbszklbmkq567vaddcjksdl1pqstprskevkvpgu01yzaatsxcxoyitazyvohaxboekejwvl4jgu0gsbqgkloibnkbe4iz07oddwzv9zkntmygvzmk26kbdikir5fubb6lnuqme72ocbayvehav2jshrj7bcbb13akxeozmg4qioagghtgaypalmjcdapee5lllnalokxydieswh6xqoqusrc1dj9uqz7vq02aosjgjh6a5r5oduphryjqkr2qtgskrkichagdfmpmgo8vfzggiudueutkuvogzuy9beu55xmqiarspeberzsbc6bbltw2fqbe2jvpt5p72gjksxlzikhtkgisdaakkmhtvgmkhrlmzajjuc9gyskmziookeeoovghgag1ys7vxi09g7olpq5xth7hafe8qa6a1awapdkkwtrx1fsk5kksrcsfsorzxtkohfeiqwmbujbcmxfdcg5qepcsi6wqp3xsnvtmy4lsmbpiialgqcjasnhtvv0qzuund7nsxql2ta7efv9tinpcv9s7n8rlbd25gimjiblmvjuyifagefn3voz87fnwhsn4iatahksgxghcefabqsibfhn49x8daapyo59uxfbkhmarsjc2pxfzko7sqlo0tevnu18a8p5luzozsyono2y92uw2gljle4p2vicutk4frbel3k372tjmrmv4ycyrxjoathwpo3qakwg3szpifxezvozx3b07mokxx1d7cvbs3sxh9fgkldh0lmc3yq69kwudahkjhh5w8erx91yxxli0ztpfagduauwagtbeguziqtpvl9w9enemkfpw7xn7l3i7d0hv9ixwdihmlmjhhkdggztov4kf1xnhvh0cejgd80mehu940ucffmtmihhqehj4t2viroagdzo2zsipzhqyaiu1vfak3vp9tzordadds0fmiayv9osbirheelw3zgfxxf3vt3un64ohwvd8vdlznnfnevozup469h8iqyummsh1gvtnoxms7jnai7tefs6fcyohlvtobf0d4opcp7ktwghm6ursfiroyqnbudjj5tdojjxxnz4rtvliyatsbmzuvopqdtml9c5mvjqzfhi8pfpmbyo554oofzpq07ynkftk43tzitnjeolfhr9c5qftlappwvka7qto1uc3cisli04smlbq3sftzq4p3ecqncdhhrnsyv2quqkulkzpl3xbvsrm9lq4atkkbxzb3jzz19thzq0r15fvknbnivruokcp8vh8asgkstb1ud9zvirzxd9qtpxihd1bgtdvmw9odakwwegf1kv29thpmpkxmxpom3vzdwu03jy8meswh7tndzvd3lenolgn8m5s1id6fmxg59yxuilzfvp2pzbrmn3n5djmx1fxqkkdrhmqa3zjxkzbsfsiu7jj2eelf87df5m2jrbqwvminjqiugvqotqoghplbdz55ugnn5pg0spplfffsphqpyiuqadtjhrw7qd1g1wpuppqi8txnwaels4ql6s7or6sivxujen5vcwu1kslbdjpmk5eixqyign2l9uvdw7hhe9fxjsyr69hxnpsh2g2yqifpzzprguu5zrbxqq1n0yclkgowh2eqz5rtbdq8m2rhzqpun7wbnsph68t6bpzg1rny9ejtpztf8hxphf83n7uuj1blumzbermq4uihxmjpnybggdhocdwtjrjpem66dyu6o21drbqnifhsysceeiccrjoreoqaxqz1isujoq1mkx62j3z7fa9n9m1gdmdk3rayknnpj2l7vzaph7lrtfukzinuhslglyuaeufbg0cbqfksmdnia4bs0kikufedaepndhkias7b556ys6dpvxdtpvn1pzp0j8ylepohcwwgz0gwbqnsfluv1prx45abx3bgo8orwlcavcijkgujgiat0ccf3mamuy509z4offcooa35jt6i51k81ov9pjrfsfq3w7rav47ja8mur0gjlagassf8lv5g72xvwyy0fdgwvgddguhl5gihggaubg5jkhxerxvherawko5052pif3ut2spbzz0c7rjorl5xcicvdowdnc4jto4vqn5xtgveesr8unlxavgiqqcmmwkic4hwjzivayxzcndssyychwoctyfnvgu6fuv3uzzu5vsym9fpf6j7dlqxhfe4npwffoadciwimb4hvhvpzndenqywvhm7iiihiufocuem3mz8zb0gv5schzfpwxaelor2u89vkvtwesw0p2triufqyzmdlroxjmphmdzm8aafmdximb8gv99k3vnybfze3rzjj1csjdjlzxksq5qdnia3k81t3gnwgb41dxapz1nu7mf3j6rzu537hqpd6nt5iioemima9vbsaefxlyin7wlv75nmnx5vkmu6o0rnvqboakwwdkhhaezpvp84xo9zr8gy8n9o71lboelt2x7vtp9rdv7zbd73nzvpn9xxhedwdkfhv9oamkbdrfmf1djs4mx3lqcl6uvdkhndkzrtcqhbkbh2hkg0swnqdlqxuzty2x74ztwdqwynqvzi54lh68uwymz7rtifcgkah0zerfwhzrugtqwexgve8vre8q3xngcolxuauwzxpsvemuhwcbcideaoqdeezfflinhocmkddnh5ldtt7vnwonj9ceezb5znz9sddzxcicgbslp4ys4b9oigd2hf1mrwvfnppev418xaxhiw7rmslehoalsiwqywq43ppequadqcx5ctldc9227wh127vpheyx23jxvfgfecnjw7yy7va4htpyt4z9ai1repb4b5nywvluekdbyrnuojjpwlt3cjywsylwtjeidkafwdq25qtzqlo0nsntry2pftgqxjjb99bxltleg2gf0c4dfgoyn5tmipyxvqcvrckxybylre67k5rxh3bjewawyt51cryocwrtxfjewadyas1tt1z8vh2phh3ifroxzzq8d8x9googcexty257sd6vinbrgr8bnuappwv14a7wj3gxvjnffeddbr3hsozdh5x3hla5a6hxb24aaq9j5pwnmiqlshvublpxxspmmhcwe4eb1wwpeciffpw7zxd7vwmfr9mrwpg8jyy4wiiq4vm7rdnff9zt5pzcn0bf8hibrb3xu8f2pwgcvgykfzefkaaaaabjru5erkjggg\"><a href=\"#%E5%85%AC%E5%BC%8F%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%84%E4%BB%96%E3%82%B5%E3%82%A4%E3%83%88%E3%82%92%E5%A4%9A%E3%81%8F%E7%B4%B9%E4%BB%8B%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8Bimg-null-data-iconemoji-blush-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaat80leqvr4aeyvu4assrpgzx8riwib1xzbtm175nvf1rbnlzxgwtvgttxxdru6ujijyrtqnwxcrk6zx0nkpyf2nz8r9jpvanx33uw1nmnqhcxcdif2pauetxyaoess7sw1xtw4liccgsfeytvggmiuap6vlzt2c6ovra82lkpajdacyklsoubaloawejv453gv6s1he1dyivswh4qnu9oezgzgp3nggzrihbvmtsvnggkuzdeypldwoqfrci8oh2inaqasejd4w70j3ilcrxaddley2h7nkmx3b2f5yq5ongjk7cnkmpre09odmtybu00grw0z6mhdmkicqsceftgkclgzenrxlorakww7euyrfqlgxqvf6cwxtklfdmz3zlxj36ggksutiy4poftsan0u0vp4jdgopacl7ifzqfpakswm5nq74qjzxf5k6gylqjlko2gdqj6dat0c1nytkpynxi5gsiayb8acagae8hbselg967ebzun2zqxthmdrpzibzrptyxtsin32lue94czgavkov3skcc9hiyi5ee2fl3wfdknp1asbrufmdatsgpelsvmupkgkedgucoa9aajgeznnaigqawl078btmifd91psbqtxpzs0plcdczwopk9c8uciifapyb2gnk1i0uwzj8li7ou4pmefon0rmlat0upf0mvovpyglwffawecwe4l0d0sahpgxc9j9jvz5lun0ftltdlmsnrxkpfarhf286usn6qb8hqgc65ltgmjj2brzplbw4gpccyfyqzdhpp8exlvgysjacj7djtehn4abxjbzpxawclrpojawftmetbktq6kpvxs3d534xbamrokmtnxzi9om4jtopyixqdt0ia54g5u2zngewqhivv2hoofl0kbblhtvyndjhprwe2bwz2dfdelczcuzvrrypbmdlkx5frmfj8vr59mp5iwhowhz1enjwbgk7aaebppthacaeoirqpzugkcclvwx6f5goae5pjnl8mosnledsdvcwecqmpbuzcym6nwin0ure01goouadvnaxjb4h6fvn9jgaad2l7kejkzjh3wnkvg3qsuqicpdwn34gua9wgn8baqkofxfzmkxr3xw0hph6jsmemklxifkjkhackpb7xxj0qtjylum1cyueqajgxegm9xetunvopqrpjgcbbmub9v4atjdfllefycc1sitbhmhlnr4y4guhbbaiqdiwcp4d1gcjttrrh96tduknub5vkfws7ivnps3sossyocrf00y8rsbho6ygfzqemlxcn7sjmk8a1wd4radkoagqpn4dsc2t7l0nbisdfblmxuxvj462ohkh7drfp6ekqt468xclsnrc01dgm4hqixcnr0nwoetiqkicdar3cj2qcajsgxdqbtwtrymn323ldebg97feebvxibqig3nwqxvwkb6ivlwtowfd5zitbdryxeqqi8edpbczjtq2xuyq5ciahjypw6n7z5vpdd86g63kshhsgah3hdg6kivowuzsojeffcsmpagikx3ekr9ijoipzvslxbxm1exrmt3sjunptymcvg54wa4lqaa5rzgoemtdpqhroyoofrjfsfyhuh7agta8gqktihfghanckwguwaejgfmsccuq2xvyqauz6h2khtbh05r9e8ztcwemapjub6fxozgtlzj03qfijqoweguqzsp0gnifrakzyv7ql7ttltj5qplk9dwowerfpdm7tze2gblqbs0ycxaepbczeiimrwskkxq2asdmtnk5ad6084nv8cxbdcvcabsura4o8viqr0afgjaitgubjwyjfpyfrz2hb8dcxlckj9fzz7bz2ksyzplyespptnzzhn55atgdnitgouors6dx325eoaaxnakswvyyqzbdztbvlw55rwc0alobetoaaamodqsb2f0hwo5exrsglafbbtyqxyywpp7kcr73ewmazlejshdpqg8lxzflkem84ca2xhyxirvsh9ypfnuntvhgznqscumhwkqohxfddigkkxigqnwyoi217luowu0mtiodlvdqqoi4f9wwdtpymouy2e61kiouyfclp5r9xybizmwphh8f8zxdu0paxhxjg5wt7v6jizmzmzmzmz95izmxgzhxmau6uqqyoz7rd3vlnqvou6j8nsp3da4xd8v5emblkjm5avceacagvfqee8od8qcbrxg7tfqmgg6ujixptx7h17xrrctwvkousr8xk2xfsl1ovesh6sojiymalvg8jj0nv4pgddf0a00q6qbf7etpe089q8sm33zmwnhzhxn8xa5pr1t0xwijlzbeoo6aegrpluw1u55sojiqpvhlwhdsja2uhiawukikw6mphb028tefp8xpxevyxlffssrzvrziltn142sr4urg1djai4fxbw13b9tdfr1ov3uxcrlogz9cw90zxr9q7cg7jgixbguty9wqgxclgkeajmmomzzgagcqrzksr3ence9jh1ybi6ogprzn0rtlc6wt8rr7j170nfweunuretztxao62irfrr9nx1p5anconockykaigbhvcnxmia8mo9ew9gvxl2ra0eon8qyyl70naxlkosbtfnapzydv0bhjkjzetjsbrf0lywe3s7g2tnljgs2ju7pztbpyphv0ps5coexuvwrtzztoqjhvrl63ypj012zpzwghnnlqnt88cxm9pd8laqzqiskvljfhiksiey7hyhlu3gtjnosegnenwmsyoirqslwbbnnmdsrvlzorjyzszbl04czz1hts71ww3hcbxx0hlltmen3278ahlhsz2dru7qwag9mv6dx1on9tv02b1hr9tv1nx4fdme0mcs77v4vu7t7vu2twdaicyusnkfnqzphe4hynyea9he3hm3mumboqllpsuybaue2qwtnwr1uve58outm9nizdm3xzfqnfyot825febtxnwvktwwsazkqf66adhw844oq1hb6wb3pox7hhj2qxtcqtt7iijqqbu0ycios9tb1bbhf9bxqrpyibbb0swzkjvm5ndmfdso4cbqoy413vkddtu3ezbtu8bbyxtuumrng75ya91aalzuwrajwl5uzzgxnj5x100hky1siju3yd6dra3rxtzzlwgphpxsmibmqzbomeieldp0tscg8i8zeiassangv2mrrmksxwwvapmefiyclsohii44mvcvihjuywekhicpv93v2a429zqmkdshiwpoctpsah1dw7cwftrj7te66zclv1z78kkjm51s0sydkemfxkex1ktkhkosugafmshhya6na1qya4h7qsrabtlnm5e2oorqmggo3qtqxkmsobcccctou7w9zxclstjfmjtnpdwrjtzxzeiagpoxrwbqtfbszklbmkq567vaddcjksdl1pqstprskevkvpgu01yzaatsxcxoyitazyvohaxboekejwvl4jgu0gsbqgkloibnkbe4iz07oddwzv9zkntmygvzmk26kbdikir5fubb6lnuqme72ocbayvehav2jshrj7bcbb13akxeozmg4qioagghtgaypalmjcdapee5lllnalokxydieswh6xqoqusrc1dj9uqz7vq02aosjgjh6a5r5oduphryjqkr2qtgskrkichagdfmpmgo8vfzggiudueutkuvogzuy9beu55xmqiarspeberzsbc6bbltw2fqbe2jvpt5p72gjksxlzikhtkgisdaakkmhtvgmkhrlmzajjuc9gyskmziookeeoovghgag1ys7vxi09g7olpq5xth7hafe8qa6a1awapdkkwtrx1fsk5kksrcsfsorzxtkohfeiqwmbujbcmxfdcg5qepcsi6wqp3xsnvtmy4lsmbpiialgqcjasnhtvv0qzuund7nsxql2ta7efv9tinpcv9s7n8rlbd25gimjiblmvjuyifagefn3voz87fnwhsn4iatahksgxghcefabqsibfhn49x8daapyo59uxfbkhmarsjc2pxfzko7sqlo0tevnu18a8p5luzozsyono2y92uw2gljle4p2vicutk4frbel3k372tjmrmv4ycyrxjoathwpo3qakwg3szpifxezvozx3b07mokxx1d7cvbs3sxh9fgkldh0lmc3yq69kwudahkjhh5w8erx91yxxli0ztpfagduauwagtbeguziqtpvl9w9enemkfpw7xn7l3i7d0hv9ixwdihmlmjhhkdggztov4kf1xnhvh0cejgd80mehu940ucffmtmihhqehj4t2viroagdzo2zsipzhqyaiu1vfak3vp9tzordadds0fmiayv9osbirheelw3zgfxxf3vt3un64ohwvd8vdlznnfnevozup469h8iqyummsh1gvtnoxms7jnai7tefs6fcyohlvtobf0d4opcp7ktwghm6ursfiroyqnbudjj5tdojjxxnz4rtvliyatsbmzuvopqdtml9c5mvjqzfhi8pfpmbyo554oofzpq07ynkftk43tzitnjeolfhr9c5qftlappwvka7qto1uc3cisli04smlbq3sftzq4p3ecqncdhhrnsyv2quqkulkzpl3xbvsrm9lq4atkkbxzb3jzz19thzq0r15fvknbnivruokcp8vh8asgkstb1ud9zvirzxd9qtpxihd1bgtdvmw9odakwwegf1kv29thpmpkxmxpom3vzdwu03jy8meswh7tndzvd3lenolgn8m5s1id6fmxg59yxuilzfvp2pzbrmn3n5djmx1fxqkkdrhmqa3zjxkzbsfsiu7jj2eelf87df5m2jrbqwvminjqiugvqotqoghplbdz55ugnn5pg0spplfffsphqpyiuqadtjhrw7qd1g1wpuppqi8txnwaels4ql6s7or6sivxujen5vcwu1kslbdjpmk5eixqyign2l9uvdw7hhe9fxjsyr69hxnpsh2g2yqifpzzprguu5zrbxqq1n0yclkgowh2eqz5rtbdq8m2rhzqpun7wbnsph68t6bpzg1rny9ejtpztf8hxphf83n7uuj1blumzbermq4uihxmjpnybggdhocdwtjrjpem66dyu6o21drbqnifhsysceeiccrjoreoqaxqz1isujoq1mkx62j3z7fa9n9m1gdmdk3rayknnpj2l7vzaph7lrtfukzinuhslglyuaeufbg0cbqfksmdnia4bs0kikufedaepndhkias7b556ys6dpvxdtpvn1pzp0j8ylepohcwwgz0gwbqnsfluv1prx45abx3bgo8orwlcavcijkgujgiat0ccf3mamuy509z4offcooa35jt6i51k81ov9pjrfsfq3w7rav47ja8mur0gjlagassf8lv5g72xvwyy0fdgwvgddguhl5gihggaubg5jkhxerxvherawko5052pif3ut2spbzz0c7rjorl5xcicvdowdnc4jto4vqn5xtgveesr8unlxavgiqqcmmwkic4hwjzivayxzcndssyychwoctyfnvgu6fuv3uzzu5vsym9fpf6j7dlqxhfe4npwffoadciwimb4hvhvpzndenqywvhm7iiihiufocuem3mz8zb0gv5schzfpwxaelor2u89vkvtwesw0p2triufqyzmdlroxjmphmdzm8aafmdximb8gv99k3vnybfze3rzjj1csjdjlzxksq5qdnia3k81t3gnwgb41dxapz1nu7mf3j6rzu537hqpd6nt5iioemima9vbsaefxlyin7wlv75nmnx5vkmu6o0rnvqboakwwdkhhaezpvp84xo9zr8gy8n9o71lboelt2x7vtp9rdv7zbd73nzvpn9xxhedwdkfhv9oamkbdrfmf1djs4mx3lqcl6uvdkhndkzrtcqhbkbh2hkg0swnqdlqxuzty2x74ztwdqwynqvzi54lh68uwymz7rtifcgkah0zerfwhzrugtqwexgve8vre8q3xngcolxuauwzxpsvemuhwcbcideaoqdeezfflinhocmkddnh5ldtt7vnwonj9ceezb5znz9sddzxcicgbslp4ys4b9oigd2hf1mrwvfnppev418xaxhiw7rmslehoalsiwqywq43ppequadqcx5ctldc9227wh127vpheyx23jxvfgfecnjw7yy7va4htpyt4z9ai1repb4b5nywvluekdbyrnuojjpwlt3cjywsylwtjeidkafwdq25qtzqlo0nsntry2pftgqxjjb99bxltleg2gf0c4dfgoyn5tmipyxvqcvrckxybylre67k5rxh3bjewawyt51cryocwrtxfjewadyas1tt1z8vh2phh3ifroxzzq8d8x9googcexty257sd6vinbrgr8bnuappwv14a7wj3gxvjnffeddbr3hsozdh5x3hla5a6hxb24aaq9j5pwnmiqlshvublpxxspmmhcwe4eb1wwpeciffpw7zxd7vwmfr9mrwpg8jyy4wiiq4vm7rdnff9zt5pzcn0bf8hibrb3xu8f2pwgcvgykfzefkaaaaabjru5erkjggg\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>公式ドキュメントや他サイトを多く紹介してくれている<img null=\"\" data-icon=\"emoji-blush\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAT80lEQVR4AeyVU4AsSRpGzx8RiWIb1xzbtm175nVf1rbNlzXGWtvGtTXXdru6ujIjYrtqNWxcrk6Z+X0nkPyf/2n+z/8R9jPvAnX33Uw1nmNQHCXCdIF2paUeTxYAoeSs7/Sw1XtW4licCgsfeYTVgGM/Iu/aP6VlzT2c6oVrA82lKpAjdaCyKlSoUBAloAWej/V453GV6s1hE1dyiV+SWH4qnu9OeZgZgP+3ngGzriHbVM+tSvNgGKuzdEYpldWoqFrcI8oh2iNaQASej/d4W70J3ilcRXADDley2H7nKmX3B2f5yq5OngJK7CNkMPRe09ODmTyBu00grw0z6mhdMKicQsceFTgkClGZenRxLORakWw7EuYRFQLgXQVf6cWXtkLfdmz3Zlx/J36ggksUtiy4PoftSan0u0Vp4j++dgOPACl7ifzqfPaKsWM5NQ74QJzXF5k6gylqJLKo2GDqJ6DaT0C1nYTkpyNxI5gsiAYB8ACAgAe8hbSEL+/G967EbZuN2zqXtHMDrpziBzRptyXtSin32l+UE94CzGAvkOV3skcc9hiy+i5eE2fl3WFDkNP1ASbrUFmDaTsGPelSVMupkGkED/gUcOA9AAjgeZnnAigQAwL078btmIFd91PSbQtxpZS0pLCdCZWOpK9c8u+c+iifAPyB2gNk1i0UWzJ8Li7ou4PmEFOn0RmLaT0UPf0mVOvpYGLwFfAWEcWe4L0D0SAhpGXc9j9jVz5Lun0Ftl+TdlmSnRXKPfaRHf286uSn6Qb8/hQgc65lTGMjj2brzPlBW4gpCCYfYqZdhpp8ExLVgysjACJ7djT/EhN4ABXjBzpxawclrPoJaW+FtMeTbKtQ6kp/vXs3d534XbaMRoKMtnxzI9+Om4JTopYIXQDT0IA54g5U2zngEwQHIvv2HOOfL0KBBLhtvyNd+jhpRwe2BwZ2DFDelczcuZvrRyPBMDLkx5fRMFj+8Vr59mp5IWhowhz1ENJwBGK7AAEBPPtHACAeoIRqPZUgKCCLvwx6F5GOAE5pJnl8MOsNl/+EDsDvCwECqMPb+UzcYM6NWiN0URE01GOOuAdVnAxJB4h6fvn9JgAAD2L7keJkzJH3wNKvg3QSuQicP/dwn34GuA9wgN8bAQKoFXfzmkxR3xW0hph6jSmEmKlXIfkJkHaCKPB7XXj0QtJyLUM1CyueQajgXEgm9XetuNvOP/QRPjGcBBmu/B9v4aTJDfLLeFycC1siTBHMhLNR4y4GUhBBAIQDiwcP4D1gcJt+Trrh96TdUKnuB5vKfWs7/IVnPs3soSSYocrf00Y8rsBHo6YgFzQEmLxCN7Sjmk8A1wd4RADkoAgQPN4DSC2T7l0Nbis+DfBlmxuXVj462OHKh7dRfp6EkQt468Xclsnrc01DgM4HqIxCNR0NWoEtIQKIcDAR/3cJ2qCajsGXdqBTwTRYMn323LdebG97+FEeBvxIBQig3nwqxVwkb6iVLwToWFD5ZiTbDrYXEQ/+QI/8EDPBCZJtq2XUyQ5cIahJyPW6N7z5VP+dD86g63kShhSgAH3HdG6KivowUzSojEFFCsmPA/GIKx3EkR9iJoipZVSlXbXM1exRMT3sjunpTYMCvg54wA4lQAA5rZGoEMtDpqhROYOOFRJFSFyHuH7AgTA8gQKtIHFgHaNCKwgUWAeJG+FMSCCuq2XVyQAuZ6h2KHTbh05r9E/8ZTcWEMAPJUB/6FxOzGTlZJ03qFijQoWEGUQZsP0gniFRAkZYv7qL7TtLTJ5QpLk9DwOWERFpdm7tZe2Gblqbs0ycXAepB+cZEi+IMrWsKkxq2asdMtnk5A+d60+84Nv8CXBDCVCAbsura4O8Viqr0aFGjAITgU/BJwyJFpyFrz+2hB/8dCXlckJ9fZZ7bz2KSy+ZPLyESPPTnzzHN55aTGdniTgOuOrS6dx325EoAaxnaKSWVYyqZbdZTbVLW55rwc0ALOBeToAAamoDQSb2F0hWo/5eXrSglAFbBtyQxyYwPP7kCr73/eWMazLEjSHdpQG+8LXZFLKeM84cA2XHyxIr/vSH9YPfnUNTVhgzNqScuMH/WkqoHXfddigkKXiGQNWyOi217LUOWU0mTi+odlvdQQoI4F9WwDtPYmoUy2E61kioUYFClP5r9XYBIzmWpHH8F8+ZxdU0PaxhXJg5Wt7V6JiZmZmZmZmZ95iZmXGZhxmau6uqqyoz7Rd3VlnqVOu6j8nSp3Da4XD8v5emBLKjm5AVCEACAgvFQ/ee8od/8qCbrxg7tFqMGg6ujIxPtX7h1+7xRrctWVkOusr8xk2xfSL1OVesh6sOjiyMaLvG8jj0NV/4pgddf/0a00q6QB+F7ETpe089Q8/SM33Zm+WNH/ZHXn8xA5pr1t0xWijLZbEoo6AEgrpLuw1U55sOjIq//PvHLWhdsja2uhiawuKIKw6MPHB028tefp8XPXeVyXlFFss/rzvrzIltN142sr4URg1dJaI4fXbW13b9tdfR1ov3UXcRlOgZ9Cw90zXr9Q7cg7jgIXBguTy9WQgxClGKEAJmM+omZZGagCQrZkSr3ence/9Jh1Ybi6OgprZN0RTLC6wt8rr7J170nFWE+Unuretz+txAO62iRF+rr9nX1p5aNCoNOcKYKAigBHVCNxMIA8Mo9Ew9G/VXL2RA0eON8qYYl70NAxlkoSbtFnapZYDv0BHJKJzeTJsbrf0LYWe3s7g2tnLJgs2ju7pZtbpYPHV0ps5COe+xuV/Wr+tzZtOqjhvrl63YPj012ZpZWghnNlqnT88cXm9pd8lAQzQISkVLJFHIKsIey7hYHLU3GTjnoSEGNeNwmSYoIRQSLWbBNNmdsrvLzoRJyzSZBl04czZ1HTs71WW3H/CBX/x0H/llT/Men3278aHlHsz2drU7QwAg9Mv6dX1On9tv02/b1+hr9TV1nX4fdME0mCS77V4vu7t7vU2TWdAiCYUSNKFnQzPHe/4hYNyEA9HE3HM3mUmboqLLPSUYbAuE2qWtnWr/1Uve58Outm9nizdM3XzFqnf/yOt825febTxNwvkTwWSaZkqf66aDHW844oq1hb6Wb3pox7HHJ2qXTCqT+T7IIJqQBU0yCioS9tb1bBhf9BxQRpYiB/BB0SWzKjvM5ndMFDSo4cBqoy413vKdDtu3eZbTU8bBYxtuumrNG7/5Ya9/1aalZUwrAJWl5UZZGXnj5x100+HKY1sIju3Yd6Dra3rxTzzlwGphpxsMIBMQZBOMeiELDP0TSc+G8i8ZEIASSANgV2mrrMksxWwvapMEFIyClsOHii/44mvcvIhjuywEkhIcP+v93v2A429zQMkdshIwpOCTP/sah1dw7CwFtRJ7te66ZclV/1z78KkJm51s0SYdkEMfxkEX1KTkHkOSUgAFMShHYA6na+1qya4H7+QsRAbTlNM5E2oOrqMGgo3qtqXKmSobCCCCTOu7W9ZXClstjfmJtnPDWrJTZXZEIAGpOXrWbQtFbszkLBmkQ567/VaDDCJkSdl1PQstPRsKEvkvPgu01YZaaTsxCxoyiTaZYVoHAxBoEkEJWvL4jGU0gSBQgkLOiBnKBe4iz07OddWZv9zKNtmYG/VZMk26kBDIkIr5fUbb6lnUqme72OcBaY/veHaV2jsHRJ7bcbb13AkxEoZmg4qIOagghtgAYpALmJCDApEE5LllNalokxYdIeSwH6XQoQuSrC1dJ9uqZ7vQ02AOsjGJh6+a5R5oDUpHRyJqkr2qTGSKRKIChAgDfMpmgO8VFzGgIudUEUTkuVogz+Uy9BEU5+5XMqiArspeberZSBc6BBLtw2fq/be2jVpT5p72gJKSxLzIkhTKGIsDaAkKmhT/VgMKhrLmzajJUC9GySKmZIOOKEEOOVGHGAg1yS7VXi09G7oLPQ5XtH/7hAfe8qa6a1aWapdKkwTRx1FSK5KKsrcsFsORzXTkOHfeiQWMBujBCMXFDcg5QePcSI6wQp3xsnvTMy4LS+MBPIIalGQcjAsNhtVV0qZuUnd7NsxQL2TA7Efv9tinPcv9S7N8RlbD25gIMJiBLmVJUYiFagef+n3VOz87fNwHsn4IaTAhKSgXgHcefABqsIBFHn49X/8DaaPyo59UxFbKHMArSjC2pxFZko7sqLO0tev+nu18A8p5LUzOzsyOno2/y92Uw2gLjLE4p2ViCUtk4frbeL/3K372t/jMr+Mv/4YcYRXjoAThwpo3qAkWg/3szPiFX+EzvoZX3B0+7mOKxX1D7cVBS3sxh9fGKLDH0LMc3Yq/69kwudAhkJhh5w8erX91yxXlI0ZTpfagDUaUwAgtBEGUZIQtPvL9w9EneMkfpW/7Xn7/L3i7d0hv9ixWDiHmLm+JhHkDggZtOv4kf/1X/NHvh0ceJGd80meHu940uCfFMtmihhQEhj4T2VIrOaGdZO2ZsIPZhQyAiu1vfak3vP9t+ZorD+addS0FmiaYv9OSBIrheE+LW3zGFxXf3VT3/UN64oHwvd8VDl+ZnnFnevozuP469h8IqyuMmsH1GVtnOXmS++7jNa/i7teFs6fCyohLVtObf0D4oPcP7ktWghm6uRsfIRoyQnbUdjj5TdOJjXxNz4RtVLiYATsbMzuvOpq/dtml9c5mVjQZFHI8PFpmBYo554OOfZPq07+y+NkfTK/+43TZItNJeOlfhr/9c5qFtLaPpWVKA7QtO1uc3cIsLI04sMLBQ3SFt/zQ4p3eCQ/ncDhhRnSYv2qUQkUlkzpL3XbVs/RM9Lq4ATkkbXzB3/jzZ19THzq0r15fVkNBNIVRUoKcP8vH8ASGKStb1Ud9ZvirZxd/9Qtp+xiHD1BGtDVMW9odakWwEGF1KV29ThPMpkxmXPoM3vZDwu03JY8mESwH7TnDZVD3lEnO+lgN8M5s1Id6Fmxg59/yxUiLzfvP2PzbR/Mn3n5//dJmX1FXQkkDrHMqA3zjXKzBsfSiu7jj2eElf87df5M2jrBQWVmiNJQIUGvqOtqOGHPlbdz55uGNn5PG0+SpPLffFsPhqPYiuqAdTJhRW7qd1G1WPUPPQi8tXNwAEls4/Ql/6s//7or6sivXujeN5VCWU1kslBDjpMk5eIxQYIgn2L9UvdW7hhe9fXjsYR69hxNPsH2G2YQIFpZZPRguu5Zrb+Xqq1N0yclkGowH2EQZ5rtBdQ8+M2RHzqpuN7WbnSPH68t6BpzG1r/ny9EJTp/Ztf8HXpHf83n7uu+J1bLUmzBerMq4UIhxMJp/NyBgGDHocDwtjrjpem66DYU6o21DRBqNiFHSYsceeIccRjoREOQAXQZ1ISuJOq1mkx6+2j3Z7fa9n9m1gdMDk3+rAYkNnPj2l7v/za+PH7lrtfukZinUhSLGlYUAEUFBg0CBQFKSmDNiA4BS0kIkUFEDAEPNDHKIAs7B556ys6dpVXdTPVN1pzp//0j8yLe/PO/HCWwg/z0GwBQnsfLuv1p//R/X45abx+3bGo8oRWlCaVCIJkgUJGIAT0CcF3MAmU+Y509z4OfFCOoA35JT6i51K81OV9Pjrfsfq3/w7r+av47jA8MU/r0GJLaGAssf8lv5g7/2XvWyy0fdGwvGDdGUHl5GihggAubg5jkhXeRXVHERAwKo5052piF3Ut2sPbzZ0c7RJ+or+l5xCicvdOwDNC4+JTo4vqN5xTGveesr8unLxaVGIQqCMMwkIc4HwjzIvAyxzC+nDssyyCHWoCtyFnvgu6FuV3UzzU5VsyM9fPf6j/7d/LqXHfE4npwf/f+oAdCiwiMb4hVHvPzND+eNqyWvHM7IIiHIufOCueM3MZ8zb0gv5sCHZfPwXaELOR2u89vkVtWeSW0P/2TriUfqyz/md/Lr/+oxj+MpHMdZ+M8aAFMDxiMb8g/v99K3vNyBfZE3RZJJ1CSJDJlzxkSQ5qDnIA3K81T3gNWgB+41DXapZ1Nu7MF3J6rZU537Hqp/+D6/nt/5iiOemIM/A/9VBsAEFXlyIn7wlV75nMNx5vKmu6O0RnvQBoAkwWDKHHAEzpvP84xo9zR8Gy8n9o71Lboe/lT2x7vtp9rdv7zbD73Nz+VPn9xxHEdwDKfhv9oAmKBDRfmF1+djs4mX3Lqcl6/UvDKHNdkZRtCQHbKbH2Hk/G0sWnQD+LQXuZty2x74ZtWdqWYnqvZI54lH68u+/W/ymz7rT/IfcGKAH0Ze/rf+WhzruGTQweXG+ve8vRe8+Q3xngcOlxua/UWzXpSVEMuhWcBCiDEaoqDEeZfFlINhOcMkddNh5LdTt7VnwOnj9cE/ezB/5ZN+z9/sdDZxCicGbSL/p/4ys4b9OIgD2Hf1mrWvfnPPev418XaXHIw7RmslehOalSIWQywQ43PPEqUAdQCX5CTldC9227WH127VPHEyX/23j+Xvf/GfecnjW7YY7vA4hTPY+t/4z9Ai1rEPB4b5NYw+/VlueKdbyrNuOJjPWlt3/cJyWSyLwTjEiDKafwdQ25QtZqlO0nSnTrY2PfTgqXjJb99bX/LtL/Eg2gF0c4DfGOYn/5t/mipYxvqcVrCKxYbyLre67K5rXH3bJeWawyt51crYocWRtXFjEWadyaS1tT1z8vh2PHH3ifroXzzq8d+8x9GOOgCexTY257SD6v/INBrgr8BNuAPPwV14a7wj3gXvjnfFe+DdBr3HsOzdh5x3HLa5a6hxB24aaq9j5P/wNMIqLsHVuBlPxxsPMM/HCwe4eb1wWPecIffpw7ZXD7VWMfr/9M/RwPg8jYY4//wIiQ4VM7RDnFf+9zT5PzcN0Bf8hiBRB3X/U8f2PwGcVgYKFzeFKAAAAABJRU5ErkJggg==\"></h3>\n<p>文章中にNuxt.js+GraphQLを学んでいくうえで参考になるサイトを多く紹介してくれています。\nそのため<strong>「読了後も紹介先を見ながら理解を深めていける」</strong>のが良い点です。\n本書に紹介されているものと、それに付随して自分で調べたものを以下にまとめました。</p>\n<ul>\n<li><a href=\"https://www.apollographql.com/docs/react/api/apollo-client.html#apollo-client\">Apollo ClientのAPIリファレンス</a></li>\n<li>\n<p><a href=\"https://github.com/apollographql/apollo-client-devtools\">apollo-devtools</a></p>\n<ul>\n<li><a href=\"https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm\">Chromeの拡張機能</a>です。開発者ツールでアプリのGraphQLサーバーに対してクエリの送信・取得ができます。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://developer.github.com/v4/explorer/\">GitHub GraphQL API explorer</a></p>\n<ul>\n<li>GitHubが提供しているGraphQLのAPIを叩けるオンラインエディターです。</li>\n<li>とりあえずGraphQLを試したいならココがオススメです。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://github.com/graphql/graphiql\">GraphiQL</a></p>\n<ul>\n<li>ブラウザ上でGraphQLのIEDを実現するライブラリです。GraphQLを調べているとよく出てきます。</li>\n<li>機能がシンプル過ぎて、HTTPヘッダーを追加できない（つまり認証情報が乗せられない）などのデメリットがあります。</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://github.com/imolorhe/altair\">Altair</a></p>\n<ul>\n<li>GraphiQLよりリッチなGraphQLのIEDです。Chrome拡張機能、Electronアプリ、Webサイトなどのさまざまな形式で提供されています。</li>\n<li>HTTPヘッダー情報などを追加できるので認証が必要なAPIも叩けます。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"テストについてもチュートリアルがあるのは助かるimg-null-data-iconemoji-blush-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaat80leqvr4aeyvu4assrpgzx8riwib1xzbtm175nvf1rbnlzxgwtvgttxxdru6ujijyrtqnwxcrk6zx0nkpyf2nz8r9jpvanx33uw1nmnqhcxcdif2pauetxyaoess7sw1xtw4liccgsfeytvggmiuap6vlzt2c6ovra82lkpajdacyklsoubaloawejv453gv6s1he1dyivswh4qnu9oezgzgp3nggzrihbvmtsvnggkuzdeypldwoqfrci8oh2inaqasejd4w70j3ilcrxaddley2h7nkmx3b2f5yq5ongjk7cnkmpre09odmtybu00grw0z6mhdmkicqsceftgkclgzenrxlorakww7euyrfqlgxqvf6cwxtklfdmz3zlxj36ggksutiy4poftsan0u0vp4jdgopacl7ifzqfpakswm5nq74qjzxf5k6gylqjlko2gdqj6dat0c1nytkpynxi5gsiayb8acagae8hbselg967ebzun2zqxthmdrpzibzrptyxtsin32lue94czgavkov3skcc9hiyi5ee2fl3wfdknp1asbrufmdatsgpelsvmupkgkedgucoa9aajgeznnaigqawl078btmifd91psbqtxpzs0plcdczwopk9c8uciifapyb2gnk1i0uwzj8li7ou4pmefon0rmlat0upf0mvovpyglwffawecwe4l0d0sahpgxc9j9jvz5lun0ftltdlmsnrxkpfarhf286usn6qb8hqgc65ltgmjj2brzplbw4gpccyfyqzdhpp8exlvgysjacj7djtehn4abxjbzpxawclrpojawftmetbktq6kpvxs3d534xbamrokmtnxzi9om4jtopyixqdt0ia54g5u2zngewqhivv2hoofl0kbblhtvyndjhprwe2bwz2dfdelczcuzvrrypbmdlkx5frmfj8vr59mp5iwhowhz1enjwbgk7aaebppthacaeoirqpzugkcclvwx6f5goae5pjnl8mosnledsdvcwecqmpbuzcym6nwin0ure01goouadvnaxjb4h6fvn9jgaad2l7kejkzjh3wnkvg3qsuqicpdwn34gua9wgn8baqkofxfzmkxr3xw0hph6jsmemklxifkjkhackpb7xxj0qtjylum1cyueqajgxegm9xetunvopqrpjgcbbmub9v4atjdfllefycc1sitbhmhlnr4y4guhbbaiqdiwcp4d1gcjttrrh96tduknub5vkfws7ivnps3sossyocrf00y8rsbho6ygfzqemlxcn7sjmk8a1wd4radkoagqpn4dsc2t7l0nbisdfblmxuxvj462ohkh7drfp6ekqt468xclsnrc01dgm4hqixcnr0nwoetiqkicdar3cj2qcajsgxdqbtwtrymn323ldebg97feebvxibqig3nwqxvwkb6ivlwtowfd5zitbdryxeqqi8edpbczjtq2xuyq5ciahjypw6n7z5vpdd86g63kshhsgah3hdg6kivowuzsojeffcsmpagikx3ekr9ijoipzvslxbxm1exrmt3sjunptymcvg54wa4lqaa5rzgoemtdpqhroyoofrjfsfyhuh7agta8gqktihfghanckwguwaejgfmsccuq2xvyqauz6h2khtbh05r9e8ztcwemapjub6fxozgtlzj03qfijqoweguqzsp0gnifrakzyv7ql7ttltj5qplk9dwowerfpdm7tze2gblqbs0ycxaepbczeiimrwskkxq2asdmtnk5ad6084nv8cxbdcvcabsura4o8viqr0afgjaitgubjwyjfpyfrz2hb8dcxlckj9fzz7bz2ksyzplyespptnzzhn55atgdnitgouors6dx325eoaaxnakswvyyqzbdztbvlw55rwc0alobetoaaamodqsb2f0hwo5exrsglafbbtyqxyywpp7kcr73ewmazlejshdpqg8lxzflkem84ca2xhyxirvsh9ypfnuntvhgznqscumhwkqohxfddigkkxigqnwyoi217luowu0mtiodlvdqqoi4f9wwdtpymouy2e61kiouyfclp5r9xybizmwphh8f8zxdu0paxhxjg5wt7v6jizmzmzmzmz95izmxgzhxmau6uqqyoz7rd3vlnqvou6j8nsp3da4xd8v5emblkjm5avceacagvfqee8od8qcbrxg7tfqmgg6ujixptx7h17xrrctwvkousr8xk2xfsl1ovesh6sojiymalvg8jj0nv4pgddf0a00q6qbf7etpe089q8sm33zmwnhzhxn8xa5pr1t0xwijlzbeoo6aegrpluw1u55sojiqpvhlwhdsja2uhiawukikw6mphb028tefp8xpxevyxlffssrzvrziltn142sr4urg1djai4fxbw13b9tdfr1ov3uxcrlogz9cw90zxr9q7cg7jgixbguty9wqgxclgkeajmmomzzgagcqrzksr3ence9jh1ybi6ogprzn0rtlc6wt8rr7j170nfweunuretztxao62irfrr9nx1p5anconockykaigbhvcnxmia8mo9ew9gvxl2ra0eon8qyyl70naxlkosbtfnapzydv0bhjkjzetjsbrf0lywe3s7g2tnljgs2ju7pztbpyphv0ps5coexuvwrtzztoqjhvrl63ypj012zpzwghnnlqnt88cxm9pd8laqzqiskvljfhiksiey7hyhlu3gtjnosegnenwmsyoirqslwbbnnmdsrvlzorjyzszbl04czz1hts71ww3hcbxx0hlltmen3278ahlhsz2dru7qwag9mv6dx1on9tv02b1hr9tv1nx4fdme0mcs77v4vu7t7vu2twdaicyusnkfnqzphe4hynyea9he3hm3mumboqllpsuybaue2qwtnwr1uve58outm9nizdm3xzfqnfyot825febtxnwvktwwsazkqf66adhw844oq1hb6wb3pox7hhj2qxtcqtt7iijqqbu0ycios9tb1bbhf9bxqrpyibbb0swzkjvm5ndmfdso4cbqoy413vkddtu3ezbtu8bbyxtuumrng75ya91aalzuwrajwl5uzzgxnj5x100hky1siju3yd6dra3rxtzzlwgphpxsmibmqzbomeieldp0tscg8i8zeiassangv2mrrmksxwwvapmefiyclsohii44mvcvihjuywekhicpv93v2a429zqmkdshiwpoctpsah1dw7cwftrj7te66zclv1z78kkjm51s0sydkemfxkex1ktkhkosugafmshhya6na1qya4h7qsrabtlnm5e2oorqmggo3qtqxkmsobcccctou7w9zxclstjfmjtnpdwrjtzxzeiagpoxrwbqtfbszklbmkq567vaddcjksdl1pqstprskevkvpgu01yzaatsxcxoyitazyvohaxboekejwvl4jgu0gsbqgkloibnkbe4iz07oddwzv9zkntmygvzmk26kbdikir5fubb6lnuqme72ocbayvehav2jshrj7bcbb13akxeozmg4qioagghtgaypalmjcdapee5lllnalokxydieswh6xqoqusrc1dj9uqz7vq02aosjgjh6a5r5oduphryjqkr2qtgskrkichagdfmpmgo8vfzggiudueutkuvogzuy9beu55xmqiarspeberzsbc6bbltw2fqbe2jvpt5p72gjksxlzikhtkgisdaakkmhtvgmkhrlmzajjuc9gyskmziookeeoovghgag1ys7vxi09g7olpq5xth7hafe8qa6a1awapdkkwtrx1fsk5kksrcsfsorzxtkohfeiqwmbujbcmxfdcg5qepcsi6wqp3xsnvtmy4lsmbpiialgqcjasnhtvv0qzuund7nsxql2ta7efv9tinpcv9s7n8rlbd25gimjiblmvjuyifagefn3voz87fnwhsn4iatahksgxghcefabqsibfhn49x8daapyo59uxfbkhmarsjc2pxfzko7sqlo0tevnu18a8p5luzozsyono2y92uw2gljle4p2vicutk4frbel3k372tjmrmv4ycyrxjoathwpo3qakwg3szpifxezvozx3b07mokxx1d7cvbs3sxh9fgkldh0lmc3yq69kwudahkjhh5w8erx91yxxli0ztpfagduauwagtbeguziqtpvl9w9enemkfpw7xn7l3i7d0hv9ixwdihmlmjhhkdggztov4kf1xnhvh0cejgd80mehu940ucffmtmihhqehj4t2viroagdzo2zsipzhqyaiu1vfak3vp9tzordadds0fmiayv9osbirheelw3zgfxxf3vt3un64ohwvd8vdlznnfnevozup469h8iqyummsh1gvtnoxms7jnai7tefs6fcyohlvtobf0d4opcp7ktwghm6ursfiroyqnbudjj5tdojjxxnz4rtvliyatsbmzuvopqdtml9c5mvjqzfhi8pfpmbyo554oofzpq07ynkftk43tzitnjeolfhr9c5qftlappwvka7qto1uc3cisli04smlbq3sftzq4p3ecqncdhhrnsyv2quqkulkzpl3xbvsrm9lq4atkkbxzb3jzz19thzq0r15fvknbnivruokcp8vh8asgkstb1ud9zvirzxd9qtpxihd1bgtdvmw9odakwwegf1kv29thpmpkxmxpom3vzdwu03jy8meswh7tndzvd3lenolgn8m5s1id6fmxg59yxuilzfvp2pzbrmn3n5djmx1fxqkkdrhmqa3zjxkzbsfsiu7jj2eelf87df5m2jrbqwvminjqiugvqotqoghplbdz55ugnn5pg0spplfffsphqpyiuqadtjhrw7qd1g1wpuppqi8txnwaels4ql6s7or6sivxujen5vcwu1kslbdjpmk5eixqyign2l9uvdw7hhe9fxjsyr69hxnpsh2g2yqifpzzprguu5zrbxqq1n0yclkgowh2eqz5rtbdq8m2rhzqpun7wbnsph68t6bpzg1rny9ejtpztf8hxphf83n7uuj1blumzbermq4uihxmjpnybggdhocdwtjrjpem66dyu6o21drbqnifhsysceeiccrjoreoqaxqz1isujoq1mkx62j3z7fa9n9m1gdmdk3rayknnpj2l7vzaph7lrtfukzinuhslglyuaeufbg0cbqfksmdnia4bs0kikufedaepndhkias7b556ys6dpvxdtpvn1pzp0j8ylepohcwwgz0gwbqnsfluv1prx45abx3bgo8orwlcavcijkgujgiat0ccf3mamuy509z4offcooa35jt6i51k81ov9pjrfsfq3w7rav47ja8mur0gjlagassf8lv5g72xvwyy0fdgwvgddguhl5gihggaubg5jkhxerxvherawko5052pif3ut2spbzz0c7rjorl5xcicvdowdnc4jto4vqn5xtgveesr8unlxavgiqqcmmwkic4hwjzivayxzcndssyychwoctyfnvgu6fuv3uzzu5vsym9fpf6j7dlqxhfe4npwffoadciwimb4hvhvpzndenqywvhm7iiihiufocuem3mz8zb0gv5schzfpwxaelor2u89vkvtwesw0p2triufqyzmdlroxjmphmdzm8aafmdximb8gv99k3vnybfze3rzjj1csjdjlzxksq5qdnia3k81t3gnwgb41dxapz1nu7mf3j6rzu537hqpd6nt5iioemima9vbsaefxlyin7wlv75nmnx5vkmu6o0rnvqboakwwdkhhaezpvp84xo9zr8gy8n9o71lboelt2x7vtp9rdv7zbd73nzvpn9xxhedwdkfhv9oamkbdrfmf1djs4mx3lqcl6uvdkhndkzrtcqhbkbh2hkg0swnqdlqxuzty2x74ztwdqwynqvzi54lh68uwymz7rtifcgkah0zerfwhzrugtqwexgve8vre8q3xngcolxuauwzxpsvemuhwcbcideaoqdeezfflinhocmkddnh5ldtt7vnwonj9ceezb5znz9sddzxcicgbslp4ys4b9oigd2hf1mrwvfnppev418xaxhiw7rmslehoalsiwqywq43ppequadqcx5ctldc9227wh127vpheyx23jxvfgfecnjw7yy7va4htpyt4z9ai1repb4b5nywvluekdbyrnuojjpwlt3cjywsylwtjeidkafwdq25qtzqlo0nsntry2pftgqxjjb99bxltleg2gf0c4dfgoyn5tmipyxvqcvrckxybylre67k5rxh3bjewawyt51cryocwrtxfjewadyas1tt1z8vh2phh3ifroxzzq8d8x9googcexty257sd6vinbrgr8bnuappwv14a7wj3gxvjnffeddbr3hsozdh5x3hla5a6hxb24aaq9j5pwnmiqlshvublpxxspmmhcwe4eb1wwpeciffpw7zxd7vwmfr9mrwpg8jyy4wiiq4vm7rdnff9zt5pzcn0bf8hibrb3xu8f2pwgcvgykfzefkaaaaabjru5erkjggg\"><a href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%82%82%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB%E3%81%8C%E3%81%82%E3%82%8B%E3%81%AE%E3%81%AF%E5%8A%A9%E3%81%8B%E3%82%8Bimg-null-data-iconemoji-blush-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaat80leqvr4aeyvu4assrpgzx8riwib1xzbtm175nvf1rbnlzxgwtvgttxxdru6ujijyrtqnwxcrk6zx0nkpyf2nz8r9jpvanx33uw1nmnqhcxcdif2pauetxyaoess7sw1xtw4liccgsfeytvggmiuap6vlzt2c6ovra82lkpajdacyklsoubaloawejv453gv6s1he1dyivswh4qnu9oezgzgp3nggzrihbvmtsvnggkuzdeypldwoqfrci8oh2inaqasejd4w70j3ilcrxaddley2h7nkmx3b2f5yq5ongjk7cnkmpre09odmtybu00grw0z6mhdmkicqsceftgkclgzenrxlorakww7euyrfqlgxqvf6cwxtklfdmz3zlxj36ggksutiy4poftsan0u0vp4jdgopacl7ifzqfpakswm5nq74qjzxf5k6gylqjlko2gdqj6dat0c1nytkpynxi5gsiayb8acagae8hbselg967ebzun2zqxthmdrpzibzrptyxtsin32lue94czgavkov3skcc9hiyi5ee2fl3wfdknp1asbrufmdatsgpelsvmupkgkedgucoa9aajgeznnaigqawl078btmifd91psbqtxpzs0plcdczwopk9c8uciifapyb2gnk1i0uwzj8li7ou4pmefon0rmlat0upf0mvovpyglwffawecwe4l0d0sahpgxc9j9jvz5lun0ftltdlmsnrxkpfarhf286usn6qb8hqgc65ltgmjj2brzplbw4gpccyfyqzdhpp8exlvgysjacj7djtehn4abxjbzpxawclrpojawftmetbktq6kpvxs3d534xbamrokmtnxzi9om4jtopyixqdt0ia54g5u2zngewqhivv2hoofl0kbblhtvyndjhprwe2bwz2dfdelczcuzvrrypbmdlkx5frmfj8vr59mp5iwhowhz1enjwbgk7aaebppthacaeoirqpzugkcclvwx6f5goae5pjnl8mosnledsdvcwecqmpbuzcym6nwin0ure01goouadvnaxjb4h6fvn9jgaad2l7kejkzjh3wnkvg3qsuqicpdwn34gua9wgn8baqkofxfzmkxr3xw0hph6jsmemklxifkjkhackpb7xxj0qtjylum1cyueqajgxegm9xetunvopqrpjgcbbmub9v4atjdfllefycc1sitbhmhlnr4y4guhbbaiqdiwcp4d1gcjttrrh96tduknub5vkfws7ivnps3sossyocrf00y8rsbho6ygfzqemlxcn7sjmk8a1wd4radkoagqpn4dsc2t7l0nbisdfblmxuxvj462ohkh7drfp6ekqt468xclsnrc01dgm4hqixcnr0nwoetiqkicdar3cj2qcajsgxdqbtwtrymn323ldebg97feebvxibqig3nwqxvwkb6ivlwtowfd5zitbdryxeqqi8edpbczjtq2xuyq5ciahjypw6n7z5vpdd86g63kshhsgah3hdg6kivowuzsojeffcsmpagikx3ekr9ijoipzvslxbxm1exrmt3sjunptymcvg54wa4lqaa5rzgoemtdpqhroyoofrjfsfyhuh7agta8gqktihfghanckwguwaejgfmsccuq2xvyqauz6h2khtbh05r9e8ztcwemapjub6fxozgtlzj03qfijqoweguqzsp0gnifrakzyv7ql7ttltj5qplk9dwowerfpdm7tze2gblqbs0ycxaepbczeiimrwskkxq2asdmtnk5ad6084nv8cxbdcvcabsura4o8viqr0afgjaitgubjwyjfpyfrz2hb8dcxlckj9fzz7bz2ksyzplyespptnzzhn55atgdnitgouors6dx325eoaaxnakswvyyqzbdztbvlw55rwc0alobetoaaamodqsb2f0hwo5exrsglafbbtyqxyywpp7kcr73ewmazlejshdpqg8lxzflkem84ca2xhyxirvsh9ypfnuntvhgznqscumhwkqohxfddigkkxigqnwyoi217luowu0mtiodlvdqqoi4f9wwdtpymouy2e61kiouyfclp5r9xybizmwphh8f8zxdu0paxhxjg5wt7v6jizmzmzmzmz95izmxgzhxmau6uqqyoz7rd3vlnqvou6j8nsp3da4xd8v5emblkjm5avceacagvfqee8od8qcbrxg7tfqmgg6ujixptx7h17xrrctwvkousr8xk2xfsl1ovesh6sojiymalvg8jj0nv4pgddf0a00q6qbf7etpe089q8sm33zmwnhzhxn8xa5pr1t0xwijlzbeoo6aegrpluw1u55sojiqpvhlwhdsja2uhiawukikw6mphb028tefp8xpxevyxlffssrzvrziltn142sr4urg1djai4fxbw13b9tdfr1ov3uxcrlogz9cw90zxr9q7cg7jgixbguty9wqgxclgkeajmmomzzgagcqrzksr3ence9jh1ybi6ogprzn0rtlc6wt8rr7j170nfweunuretztxao62irfrr9nx1p5anconockykaigbhvcnxmia8mo9ew9gvxl2ra0eon8qyyl70naxlkosbtfnapzydv0bhjkjzetjsbrf0lywe3s7g2tnljgs2ju7pztbpyphv0ps5coexuvwrtzztoqjhvrl63ypj012zpzwghnnlqnt88cxm9pd8laqzqiskvljfhiksiey7hyhlu3gtjnosegnenwmsyoirqslwbbnnmdsrvlzorjyzszbl04czz1hts71ww3hcbxx0hlltmen3278ahlhsz2dru7qwag9mv6dx1on9tv02b1hr9tv1nx4fdme0mcs77v4vu7t7vu2twdaicyusnkfnqzphe4hynyea9he3hm3mumboqllpsuybaue2qwtnwr1uve58outm9nizdm3xzfqnfyot825febtxnwvktwwsazkqf66adhw844oq1hb6wb3pox7hhj2qxtcqtt7iijqqbu0ycios9tb1bbhf9bxqrpyibbb0swzkjvm5ndmfdso4cbqoy413vkddtu3ezbtu8bbyxtuumrng75ya91aalzuwrajwl5uzzgxnj5x100hky1siju3yd6dra3rxtzzlwgphpxsmibmqzbomeieldp0tscg8i8zeiassangv2mrrmksxwwvapmefiyclsohii44mvcvihjuywekhicpv93v2a429zqmkdshiwpoctpsah1dw7cwftrj7te66zclv1z78kkjm51s0sydkemfxkex1ktkhkosugafmshhya6na1qya4h7qsrabtlnm5e2oorqmggo3qtqxkmsobcccctou7w9zxclstjfmjtnpdwrjtzxzeiagpoxrwbqtfbszklbmkq567vaddcjksdl1pqstprskevkvpgu01yzaatsxcxoyitazyvohaxboekejwvl4jgu0gsbqgkloibnkbe4iz07oddwzv9zkntmygvzmk26kbdikir5fubb6lnuqme72ocbayvehav2jshrj7bcbb13akxeozmg4qioagghtgaypalmjcdapee5lllnalokxydieswh6xqoqusrc1dj9uqz7vq02aosjgjh6a5r5oduphryjqkr2qtgskrkichagdfmpmgo8vfzggiudueutkuvogzuy9beu55xmqiarspeberzsbc6bbltw2fqbe2jvpt5p72gjksxlzikhtkgisdaakkmhtvgmkhrlmzajjuc9gyskmziookeeoovghgag1ys7vxi09g7olpq5xth7hafe8qa6a1awapdkkwtrx1fsk5kksrcsfsorzxtkohfeiqwmbujbcmxfdcg5qepcsi6wqp3xsnvtmy4lsmbpiialgqcjasnhtvv0qzuund7nsxql2ta7efv9tinpcv9s7n8rlbd25gimjiblmvjuyifagefn3voz87fnwhsn4iatahksgxghcefabqsibfhn49x8daapyo59uxfbkhmarsjc2pxfzko7sqlo0tevnu18a8p5luzozsyono2y92uw2gljle4p2vicutk4frbel3k372tjmrmv4ycyrxjoathwpo3qakwg3szpifxezvozx3b07mokxx1d7cvbs3sxh9fgkldh0lmc3yq69kwudahkjhh5w8erx91yxxli0ztpfagduauwagtbeguziqtpvl9w9enemkfpw7xn7l3i7d0hv9ixwdihmlmjhhkdggztov4kf1xnhvh0cejgd80mehu940ucffmtmihhqehj4t2viroagdzo2zsipzhqyaiu1vfak3vp9tzordadds0fmiayv9osbirheelw3zgfxxf3vt3un64ohwvd8vdlznnfnevozup469h8iqyummsh1gvtnoxms7jnai7tefs6fcyohlvtobf0d4opcp7ktwghm6ursfiroyqnbudjj5tdojjxxnz4rtvliyatsbmzuvopqdtml9c5mvjqzfhi8pfpmbyo554oofzpq07ynkftk43tzitnjeolfhr9c5qftlappwvka7qto1uc3cisli04smlbq3sftzq4p3ecqncdhhrnsyv2quqkulkzpl3xbvsrm9lq4atkkbxzb3jzz19thzq0r15fvknbnivruokcp8vh8asgkstb1ud9zvirzxd9qtpxihd1bgtdvmw9odakwwegf1kv29thpmpkxmxpom3vzdwu03jy8meswh7tndzvd3lenolgn8m5s1id6fmxg59yxuilzfvp2pzbrmn3n5djmx1fxqkkdrhmqa3zjxkzbsfsiu7jj2eelf87df5m2jrbqwvminjqiugvqotqoghplbdz55ugnn5pg0spplfffsphqpyiuqadtjhrw7qd1g1wpuppqi8txnwaels4ql6s7or6sivxujen5vcwu1kslbdjpmk5eixqyign2l9uvdw7hhe9fxjsyr69hxnpsh2g2yqifpzzprguu5zrbxqq1n0yclkgowh2eqz5rtbdq8m2rhzqpun7wbnsph68t6bpzg1rny9ejtpztf8hxphf83n7uuj1blumzbermq4uihxmjpnybggdhocdwtjrjpem66dyu6o21drbqnifhsysceeiccrjoreoqaxqz1isujoq1mkx62j3z7fa9n9m1gdmdk3rayknnpj2l7vzaph7lrtfukzinuhslglyuaeufbg0cbqfksmdnia4bs0kikufedaepndhkias7b556ys6dpvxdtpvn1pzp0j8ylepohcwwgz0gwbqnsfluv1prx45abx3bgo8orwlcavcijkgujgiat0ccf3mamuy509z4offcooa35jt6i51k81ov9pjrfsfq3w7rav47ja8mur0gjlagassf8lv5g72xvwyy0fdgwvgddguhl5gihggaubg5jkhxerxvherawko5052pif3ut2spbzz0c7rjorl5xcicvdowdnc4jto4vqn5xtgveesr8unlxavgiqqcmmwkic4hwjzivayxzcndssyychwoctyfnvgu6fuv3uzzu5vsym9fpf6j7dlqxhfe4npwffoadciwimb4hvhvpzndenqywvhm7iiihiufocuem3mz8zb0gv5schzfpwxaelor2u89vkvtwesw0p2triufqyzmdlroxjmphmdzm8aafmdximb8gv99k3vnybfze3rzjj1csjdjlzxksq5qdnia3k81t3gnwgb41dxapz1nu7mf3j6rzu537hqpd6nt5iioemima9vbsaefxlyin7wlv75nmnx5vkmu6o0rnvqboakwwdkhhaezpvp84xo9zr8gy8n9o71lboelt2x7vtp9rdv7zbd73nzvpn9xxhedwdkfhv9oamkbdrfmf1djs4mx3lqcl6uvdkhndkzrtcqhbkbh2hkg0swnqdlqxuzty2x74ztwdqwynqvzi54lh68uwymz7rtifcgkah0zerfwhzrugtqwexgve8vre8q3xngcolxuauwzxpsvemuhwcbcideaoqdeezfflinhocmkddnh5ldtt7vnwonj9ceezb5znz9sddzxcicgbslp4ys4b9oigd2hf1mrwvfnppev418xaxhiw7rmslehoalsiwqywq43ppequadqcx5ctldc9227wh127vpheyx23jxvfgfecnjw7yy7va4htpyt4z9ai1repb4b5nywvluekdbyrnuojjpwlt3cjywsylwtjeidkafwdq25qtzqlo0nsntry2pftgqxjjb99bxltleg2gf0c4dfgoyn5tmipyxvqcvrckxybylre67k5rxh3bjewawyt51cryocwrtxfjewadyas1tt1z8vh2phh3ifroxzzq8d8x9googcexty257sd6vinbrgr8bnuappwv14a7wj3gxvjnffeddbr3hsozdh5x3hla5a6hxb24aaq9j5pwnmiqlshvublpxxspmmhcwe4eb1wwpeciffpw7zxd7vwmfr9mrwpg8jyy4wiiq4vm7rdnff9zt5pzcn0bf8hibrb3xu8f2pwgcvgykfzefkaaaaabjru5erkjggg\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>テストについてもチュートリアルがあるのは助かる<img null=\"\" data-icon=\"emoji-blush\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAT80lEQVR4AeyVU4AsSRpGzx8RiWIb1xzbtm175nVf1rbNlzXGWtvGtTXXdru6ujIjYrtqNWxcrk6Z+X0nkPyf/2n+z/8R9jPvAnX33Uw1nmNQHCXCdIF2paUeTxYAoeSs7/Sw1XtW4licCgsfeYTVgGM/Iu/aP6VlzT2c6oVrA82lKpAjdaCyKlSoUBAloAWej/V453GV6s1hE1dyiV+SWH4qnu9OeZgZgP+3ngGzriHbVM+tSvNgGKuzdEYpldWoqFrcI8oh2iNaQASej/d4W70J3ilcRXADDley2H7nKmX3B2f5yq5OngJK7CNkMPRe09ODmTyBu00grw0z6mhdMKicQsceFTgkClGZenRxLORakWw7EuYRFQLgXQVf6cWXtkLfdmz3Zlx/J36ggksUtiy4PoftSan0u0Vp4j++dgOPACl7ifzqfPaKsWM5NQ74QJzXF5k6gylqJLKo2GDqJ6DaT0C1nYTkpyNxI5gsiAYB8ACAgAe8hbSEL+/G967EbZuN2zqXtHMDrpziBzRptyXtSin32l+UE94CzGAvkOV3skcc9hiy+i5eE2fl3WFDkNP1ASbrUFmDaTsGPelSVMupkGkED/gUcOA9AAjgeZnnAigQAwL078btmIFd91PSbQtxpZS0pLCdCZWOpK9c8u+c+iifAPyB2gNk1i0UWzJ8Li7ou4PmEFOn0RmLaT0UPf0mVOvpYGLwFfAWEcWe4L0D0SAhpGXc9j9jVz5Lun0Ftl+TdlmSnRXKPfaRHf286uSn6Qb8/hQgc65lTGMjj2brzPlBW4gpCCYfYqZdhpp8ExLVgysjACJ7djT/EhN4ABXjBzpxawclrPoJaW+FtMeTbKtQ6kp/vXs3d534XbaMRoKMtnxzI9+Om4JTopYIXQDT0IA54g5U2zngEwQHIvv2HOOfL0KBBLhtvyNd+jhpRwe2BwZ2DFDelczcuZvrRyPBMDLkx5fRMFj+8Vr59mp5IWhowhz1ENJwBGK7AAEBPPtHACAeoIRqPZUgKCCLvwx6F5GOAE5pJnl8MOsNl/+EDsDvCwECqMPb+UzcYM6NWiN0URE01GOOuAdVnAxJB4h6fvn9JgAAD2L7keJkzJH3wNKvg3QSuQicP/dwn34GuA9wgN8bAQKoFXfzmkxR3xW0hph6jSmEmKlXIfkJkHaCKPB7XXj0QtJyLUM1CyueQajgXEgm9XetuNvOP/QRPjGcBBmu/B9v4aTJDfLLeFycC1siTBHMhLNR4y4GUhBBAIQDiwcP4D1gcJt+Trrh96TdUKnuB5vKfWs7/IVnPs3soSSYocrf00Y8rsBHo6YgFzQEmLxCN7Sjmk8A1wd4RADkoAgQPN4DSC2T7l0Nbis+DfBlmxuXVj462OHKh7dRfp6EkQt468Xclsnrc01DgM4HqIxCNR0NWoEtIQKIcDAR/3cJ2qCajsGXdqBTwTRYMn323LdebG97+FEeBvxIBQig3nwqxVwkb6iVLwToWFD5ZiTbDrYXEQ/+QI/8EDPBCZJtq2XUyQ5cIahJyPW6N7z5VP+dD86g63kShhSgAH3HdG6KivowUzSojEFFCsmPA/GIKx3EkR9iJoipZVSlXbXM1exRMT3sjunpTYMCvg54wA4lQAA5rZGoEMtDpqhROYOOFRJFSFyHuH7AgTA8gQKtIHFgHaNCKwgUWAeJG+FMSCCuq2XVyQAuZ6h2KHTbh05r9E/8ZTcWEMAPJUB/6FxOzGTlZJ03qFijQoWEGUQZsP0gniFRAkZYv7qL7TtLTJ5QpLk9DwOWERFpdm7tZe2Gblqbs0ycXAepB+cZEi+IMrWsKkxq2asdMtnk5A+d60+84Nv8CXBDCVCAbsura4O8Viqr0aFGjAITgU/BJwyJFpyFrz+2hB/8dCXlckJ9fZZ7bz2KSy+ZPLyESPPTnzzHN55aTGdniTgOuOrS6dx325EoAaxnaKSWVYyqZbdZTbVLW55rwc0ALOBeToAAamoDQSb2F0hWo/5eXrSglAFbBtyQxyYwPP7kCr73/eWMazLEjSHdpQG+8LXZFLKeM84cA2XHyxIr/vSH9YPfnUNTVhgzNqScuMH/WkqoHXfddigkKXiGQNWyOi217LUOWU0mTi+odlvdQQoI4F9WwDtPYmoUy2E61kioUYFClP5r9XYBIzmWpHH8F8+ZxdU0PaxhXJg5Wt7V6JiZmZmZmZmZ95iZmXGZhxmau6uqqyoz7Rd3VlnqVOu6j8nSp3Da4XD8v5emBLKjm5AVCEACAgvFQ/ee8od/8qCbrxg7tFqMGg6ujIxPtX7h1+7xRrctWVkOusr8xk2xfSL1OVesh6sOjiyMaLvG8jj0NV/4pgddf/0a00q6QB+F7ETpe089Q8/SM33Zm+WNH/ZHXn8xA5pr1t0xWijLZbEoo6AEgrpLuw1U55sOjIq//PvHLWhdsja2uhiawuKIKw6MPHB028tefp8XPXeVyXlFFss/rzvrzIltN142sr4URg1dJaI4fXbW13b9tdfR1ov3UXcRlOgZ9Cw90zXr9Q7cg7jgIXBguTy9WQgxClGKEAJmM+omZZGagCQrZkSr3ence/9Jh1Ybi6OgprZN0RTLC6wt8rr7J170nFWE+Unuretz+txAO62iRF+rr9nX1p5aNCoNOcKYKAigBHVCNxMIA8Mo9Ew9G/VXL2RA0eON8qYYl70NAxlkoSbtFnapZYDv0BHJKJzeTJsbrf0LYWe3s7g2tnLJgs2ju7pZtbpYPHV0ps5COe+xuV/Wr+tzZtOqjhvrl63YPj012ZpZWghnNlqnT88cXm9pd8lAQzQISkVLJFHIKsIey7hYHLU3GTjnoSEGNeNwmSYoIRQSLWbBNNmdsrvLzoRJyzSZBl04czZ1HTs71WW3H/CBX/x0H/llT/Men3278aHlHsz2drU7QwAg9Mv6dX1On9tv02/b1+hr9TV1nX4fdME0mCS77V4vu7t7vU2TWdAiCYUSNKFnQzPHe/4hYNyEA9HE3HM3mUmboqLLPSUYbAuE2qWtnWr/1Uve58Outm9nizdM3XzFqnf/yOt825febTxNwvkTwWSaZkqf66aDHW844oq1hb6Wb3pox7HHJ2qXTCqT+T7IIJqQBU0yCioS9tb1bBhf9BxQRpYiB/BB0SWzKjvM5ndMFDSo4cBqoy413vKdDtu3eZbTU8bBYxtuumrNG7/5Ya9/1aalZUwrAJWl5UZZGXnj5x100+HKY1sIju3Yd6Dra3rxTzzlwGphpxsMIBMQZBOMeiELDP0TSc+G8i8ZEIASSANgV2mrrMksxWwvapMEFIyClsOHii/44mvcvIhjuywEkhIcP+v93v2A429zQMkdshIwpOCTP/sah1dw7CwFtRJ7te66ZclV/1z78KkJm51s0SYdkEMfxkEX1KTkHkOSUgAFMShHYA6na+1qya4H7+QsRAbTlNM5E2oOrqMGgo3qtqXKmSobCCCCTOu7W9ZXClstjfmJtnPDWrJTZXZEIAGpOXrWbQtFbszkLBmkQ567/VaDDCJkSdl1PQstPRsKEvkvPgu01YZaaTsxCxoyiTaZYVoHAxBoEkEJWvL4jGU0gSBQgkLOiBnKBe4iz07OddWZv9zKNtmYG/VZMk26kBDIkIr5fUbb6lnUqme72OcBaY/veHaV2jsHRJ7bcbb13AkxEoZmg4qIOagghtgAYpALmJCDApEE5LllNalokxYdIeSwH6XQoQuSrC1dJ9uqZ7vQ02AOsjGJh6+a5R5oDUpHRyJqkr2qTGSKRKIChAgDfMpmgO8VFzGgIudUEUTkuVogz+Uy9BEU5+5XMqiArspeberZSBc6BBLtw2fq/be2jVpT5p72gJKSxLzIkhTKGIsDaAkKmhT/VgMKhrLmzajJUC9GySKmZIOOKEEOOVGHGAg1yS7VXi09G7oLPQ5XtH/7hAfe8qa6a1aWapdKkwTRx1FSK5KKsrcsFsORzXTkOHfeiQWMBujBCMXFDcg5QePcSI6wQp3xsnvTMy4LS+MBPIIalGQcjAsNhtVV0qZuUnd7NsxQL2TA7Efv9tinPcv9S7N8RlbD25gIMJiBLmVJUYiFagef+n3VOz87fNwHsn4IaTAhKSgXgHcefABqsIBFHn49X/8DaaPyo59UxFbKHMArSjC2pxFZko7sqLO0tev+nu18A8p5LUzOzsyOno2/y92Uw2gLjLE4p2ViCUtk4frbeL/3K372t/jMr+Mv/4YcYRXjoAThwpo3qAkWg/3szPiFX+EzvoZX3B0+7mOKxX1D7cVBS3sxh9fGKLDH0LMc3Yq/69kwudAhkJhh5w8erX91yxXlI0ZTpfagDUaUwAgtBEGUZIQtPvL9w9EneMkfpW/7Xn7/L3i7d0hv9ixWDiHmLm+JhHkDggZtOv4kf/1X/NHvh0ceJGd80meHu940uCfFMtmihhQEhj4T2VIrOaGdZO2ZsIPZhQyAiu1vfak3vP9t+ZorD+addS0FmiaYv9OSBIrheE+LW3zGFxXf3VT3/UN64oHwvd8VDl+ZnnFnevozuP469h8IqyuMmsH1GVtnOXmS++7jNa/i7teFs6fCyohLVtObf0D4oPcP7ktWghm6uRsfIRoyQnbUdjj5TdOJjXxNz4RtVLiYATsbMzuvOpq/dtml9c5mVjQZFHI8PFpmBYo554OOfZPq07+y+NkfTK/+43TZItNJeOlfhr/9c5qFtLaPpWVKA7QtO1uc3cIsLI04sMLBQ3SFt/zQ4p3eCQ/ncDhhRnSYv2qUQkUlkzpL3XbVs/RM9Lq4ATkkbXzB3/jzZ19THzq0r15fVkNBNIVRUoKcP8vH8ASGKStb1Ud9ZvirZxd/9Qtp+xiHD1BGtDVMW9odakWwEGF1KV29ThPMpkxmXPoM3vZDwu03JY8mESwH7TnDZVD3lEnO+lgN8M5s1Id6Fmxg59/yxUiLzfvP2PzbR/Mn3n5//dJmX1FXQkkDrHMqA3zjXKzBsfSiu7jj2eElf87df5M2jrBQWVmiNJQIUGvqOtqOGHPlbdz55uGNn5PG0+SpPLffFsPhqPYiuqAdTJhRW7qd1G1WPUPPQi8tXNwAEls4/Ql/6s//7or6sivXujeN5VCWU1kslBDjpMk5eIxQYIgn2L9UvdW7hhe9fXjsYR69hxNPsH2G2YQIFpZZPRguu5Zrb+Xqq1N0yclkGowH2EQZ5rtBdQ8+M2RHzqpuN7WbnSPH68t6BpzG1r/ny9EJTp/Ztf8HXpHf83n7uu+J1bLUmzBerMq4UIhxMJp/NyBgGDHocDwtjrjpem66DYU6o21DRBqNiFHSYsceeIccRjoREOQAXQZ1ISuJOq1mkx6+2j3Z7fa9n9m1gdMDk3+rAYkNnPj2l7v/za+PH7lrtfukZinUhSLGlYUAEUFBg0CBQFKSmDNiA4BS0kIkUFEDAEPNDHKIAs7B556ys6dpVXdTPVN1pzp//0j8yLe/PO/HCWwg/z0GwBQnsfLuv1p//R/X45abx+3bGo8oRWlCaVCIJkgUJGIAT0CcF3MAmU+Y509z4OfFCOoA35JT6i51K81OV9Pjrfsfq3/w7r+av47jA8MU/r0GJLaGAssf8lv5g7/2XvWyy0fdGwvGDdGUHl5GihggAubg5jkhXeRXVHERAwKo5052piF3Ut2sPbzZ0c7RJ+or+l5xCicvdOwDNC4+JTo4vqN5xTGveesr8unLxaVGIQqCMMwkIc4HwjzIvAyxzC+nDssyyCHWoCtyFnvgu6FuV3UzzU5VsyM9fPf6j/7d/LqXHfE4npwf/f+oAdCiwiMb4hVHvPzND+eNqyWvHM7IIiHIufOCueM3MZ8zb0gv5sCHZfPwXaELOR2u89vkVtWeSW0P/2TriUfqyz/md/Lr/+oxj+MpHMdZ+M8aAFMDxiMb8g/v99K3vNyBfZE3RZJJ1CSJDJlzxkSQ5qDnIA3K81T3gNWgB+41DXapZ1Nu7MF3J6rZU537Hqp/+D6/nt/5iiOemIM/A/9VBsAEFXlyIn7wlV75nMNx5vKmu6O0RnvQBoAkwWDKHHAEzpvP84xo9zR8Gy8n9o71Lboe/lT2x7vtp9rdv7zbD73Nz+VPn9xxHEdwDKfhv9oAmKBDRfmF1+djs4mX3Lqcl6/UvDKHNdkZRtCQHbKbH2Hk/G0sWnQD+LQXuZty2x74ZtWdqWYnqvZI54lH68u+/W/ymz7rT/IfcGKAH0Ze/rf+WhzruGTQweXG+ve8vRe8+Q3xngcOlxua/UWzXpSVEMuhWcBCiDEaoqDEeZfFlINhOcMkddNh5LdTt7VnwOnj9cE/ezB/5ZN+z9/sdDZxCicGbSL/p/4ys4b9OIgD2Hf1mrWvfnPPev418XaXHIw7RmslehOalSIWQywQ43PPEqUAdQCX5CTldC9227WH127VPHEyX/23j+Xvf/GfecnjW7YY7vA4hTPY+t/4z9Ai1rEPB4b5NYw+/VlueKdbyrNuOJjPWlt3/cJyWSyLwTjEiDKafwdQ25QtZqlO0nSnTrY2PfTgqXjJb99bX/LtL/Eg2gF0c4DfGOYn/5t/mipYxvqcVrCKxYbyLre67K5rXH3bJeWawyt51crYocWRtXFjEWadyaS1tT1z8vh2PHH3ifroXzzq8d+8x9GOOgCexTY257SD6v/INBrgr8BNuAPPwV14a7wj3gXvjnfFe+DdBr3HsOzdh5x3HLa5a6hxB24aaq9j5P/wNMIqLsHVuBlPxxsPMM/HCwe4eb1wWPecIffpw7ZXD7VWMfr/9M/RwPg8jYY4//wIiQ4VM7RDnFf+9zT5PzcN0Bf8hiBRB3X/U8f2PwGcVgYKFzeFKAAAAABJRU5ErkJggg==\"></h3>\n<p>実際の開発だとテストコードは必須なので、プロダクションコードだけでなくGraphQLのモックを使ったテストが紹介されていて非常にありがたいです。</p>\n<h3 id=\"サンプルコードを見ながら読み進めたほうが良いimg-null-data-iconemoji-warning-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaal1eleqvr4ae2abxbu2dkajynxjzoeiqsqncjuemndoe7rb11deugrcpr7o47xhgpidhi7p7u3e7moyzxf4gtvi7vvdnvy9yl33jhdchwneizgg5gzjsra1648cmubuicfsgyfzztz5e77yxohmydfjozgfehxfxjyjyjk0pgnfdrlnabc7lwclypsdvqdgyxfaaupaeqjkcfv8dvj5qgcsd7s25ufuuk773o3ymd4fggsfrr7rgjqykq7tqsckai89xqiwu1f8bwnbb8fxdkiqzlhgzkq74c026uvjxigdft6jgrkvd51p8oqdm1xxsiilokbexq6elzfi7xx4oa8udhvw1zgot9l1gdzapvimx7b5q2dddz1xytdzmlocepnyb3vrnwauw8nua5esxhctv6setw00r5srxdx8puwiacpy3ty6c9vre8q0uq7ftz9fbdibgxbxl96j9rnzor6hrm9eiizjvzqr9cffiqfyzqfoi1ffbon87kio6utjubws6aqymlgvghk21e0nigwmrbuqza2tvxgxnjgq5s802puzyh6riwqv3mqgkegmmz4er23xskaflqhrt6eqbit7r1qi31cwn48hmq13gvjadhrlosgxytpw7gilyqe2ky1l32bvzc2gweac3gxsjohq6myiquclityisq2cpxnkb5bh7pqjzxdnrewups9mo9hmfw63xmmprybhrxivlbnba7wiv4udtqpietd3ocz1otskz4katjnngveaijkqfa7xlkorp0bz2cfnmon6jqzvffhonzdbjm15qeubxibg3qhglaa2pmdidkuqdvxjy5uwcoov92ighjtrs8xjubmgqwu9pp3vrz8w77lvunt4bqlknifc3juwcypweuz4ap1vndoebb6b9gc5te9qmomow2gesdvgkyi3jsbqqbqfrr467fr69qdlcnbghjuahjk5cjzcsoqx2uzyqfm9waffb7ekuakx4rykn45pcm5aqdjqbff1b4oyieiufgc0vddsr6rqyniouqol5eyg5lgghlqxxijrahltonn4kxogonkkihatzxqiyat6epbix33bnrevmwpxibhysnjdidcizb4zktkbpzdnwwgfyl7c1wdb1xxo4bqog8g15s3lsddlxndjb4qifkprbwuaggslbackb4greedqku0ahydck6obsgycmwsvlvgpkekmhqszi1fooowzgfob4vplcugwyccqtrjdl3dvggmxq0ngb6qyvtjgexrrgqe8jloyn3fqjyppjmywzwlxl9px121zmpgzzte9rwji6aicstg2izvssmbsklbr5elzgz072woubqk1zfzx4rze2uxfeqxye2qfs8flxwidtlk2cfo58vpdytyhofqhjmgcqgzgsfasxbmgucvc4gtapraxqf4yddhdigdvsdah39ype81eyefpfq6ns9ms3ktfk4xo3lf4caggxuhrzb0shy6c7zgy8sdivbanfflcwporgaavua34i5qilb4zdly7odol8vo9owycworadpvhg2qnxy3thfzwmebmzqp5wyd8bie9flm2g7nfof3c2ogilak424cdxdbon323llyhlj3vd2xnuh6v4h0qrd1c0ddtj4bqajegivzrue2uhzzv7m3q5e4cmlhrziqlsfjw6vrpax8opruibpaqyvyddy2x0fwnjobqqc8qw40qpr0qo5hzqtvldwjdo6dsleghypw87uq5byfzxaww3bay34ixfi6mod4d6rhwsvzeh97mra7vfwogbm26mf7s36l2tddyt8zsyrpbhyakbf7f1vzpmsouawnownjad9kd4myqzrrcrogckknab7prg9dt2wqg2q8qzvtkxplov5ftvehyt5ocr2vzroonud7px91emx8w6e4ugsuyhik70qxlsizpvdzle21zdg4mgrgcy8omzxcybetl0v9m3mkvnnxxcviede7srzqfqikqpt4dggbxsdeum9i6sgjdzy7wvtguew2afkwhjtkrlevmy2evkl5qibi6kwdtjnxhclimwioxj5ttk4r0gqit3adoefc90ppdck4ar2z9pav5waunqyxfc1av19pmjpn9iphu1eb2p46dvrwlmz4w6g88ghnkdzapqmdgdzlrqwkdovjp2rmxt1rrvpppiisojjoso13xzkazsrfvchiehtpuwigwt2yhcsdcopnyji3q1gob9as93htsdhtc34mod9kjfvot4qyh5vtv92hjoaic1iafe3mnvvqghgpkij1rhblsmd6wixq2kqoeul9os9w0aigo1ob1we8ooyyecubth73iogz7svdvarr6keecpbddjrb8dl5jefr5yxifslcodvmspt7pb1xbuyd7lc5wkpct89a8sidnvc9qjpfpv8ow5njbdxgupkj2vvu9flr7tafhtzlxmskydvs9rmdmxadxgitaigfitjlq2eckmlzcrmc6cuwyt9nwtr8kf1tvqxojdudd75pejrkaato0f5m3iclqwrjsbjlrc7q12mcvulcczdgrjp0i3vjqvvqyeqdedb5iewt4hiycmerbxxaqxjuzzayhl0ideredtdb31rxmpsegnqdxjvduk1y6zwkkg4s0rnncurkyx9dgps8alqh3o56ps6l7aj3zajzztob3lhhbb73twcifme7qt7l8c5qnyb8tbeszba0eeswujlfn25jw5aqpprb1yyc2390injd7nzryd1sx6ifftmkrgqdygjbwyfunbsdq5asg5axgc2uhvsnmnfxb7eorwjnk2wcpde5vvyo5oejwu87t9pszoxhvgkbn7o2bsw8g9scudmuoquucriqhxhhufi7kr0baeofdkjeisfn41xwfxrf3k8b5ysvmpgsraslzbd5l2jsz3rjydtpazgera16lbizgm3fibubmb5gwxkuzponilndqjonc0vulemt9nksinyfv6wmvaidjamsjhnnhtl5ezdddhvpcsbxvw1iwxrvlasaqulxhvswgczchfhdmky2yjs5wepnxhqwrlezynwbcu3u6xcqvsz0wyy91ta9j4plcx1ver6leryajy2grwdlshfmuosw5hftevzmp0izvlmpmvnn6nabb97sxty3sjwfvrs3yazl1erveziu7u54c8b2np3muhrqxpkl5ljkbn4hxsdsxqcffsw1nipzlmd7avtdh9jyfw2lfpuekxrdniwupqs67edxbpblfe61nolb0qcr8jozqb8n1ejxotzo9v1zxo9shirkx93wxzur6vfmstzs2amgkkauiopmb0r44gtbmcbpcxjh6slo6nmzz3dgamel7rp5n1uggidsmmimgwy367v2crx8tblgkyul30wka1mtudzr35xwbulzvtrdzz9y8z0vqakezg0qynyphmwdqvntuagfkphffr6oes6tbigjzt4mvyeh5snbm3yhjsooo0zg0u3e7b2wjwrppv3aalzmimpbi9mt8r0bnzqwremvdrl40yi9oyfekuekjhejtb0tke2hwxek8awluzrihtz8ts8v4wqayfpndxunodblz9zmd8ulc9bswgh23pyfltzgqp0kzihwcidegm2lvjxgfljvx42oyvfflbx8ris9kcnzgvteeqdzqbznpkqo4hdv0oz8qyg4v8dnjdbyclkewqr8j3yb7id2cnsatvwn9zzhzzdvp5picoioh8lhhnrifzkyeqtcjryhpka7kxjbcbe34ncucerobwbf141mytog3mhajq6bxzizgo2nxg2er9zyxzwhdbvbstsgnp5aie9uhyqq6c8jbryrbndpgtxdf57jup8jmvpeglejdkjhnoydouyztcuoq79d2mhuappwhqaaaabjru5erkjggg\"><a href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%A6%8B%E3%81%AA%E3%81%8C%E3%82%89%E8%AA%AD%E3%81%BF%E9%80%B2%E3%82%81%E3%81%9F%E3%81%BB%E3%81%86%E3%81%8C%E8%89%AF%E3%81%84img-null-data-iconemoji-warning-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaal1eleqvr4ae2abxbu2dkajynxjzoeiqsqncjuemndoe7rb11deugrcpr7o47xhgpidhi7p7u3e7moyzxf4gtvi7vvdnvy9yl33jhdchwneizgg5gzjsra1648cmubuicfsgyfzztz5e77yxohmydfjozgfehxfxjyjyjk0pgnfdrlnabc7lwclypsdvqdgyxfaaupaeqjkcfv8dvj5qgcsd7s25ufuuk773o3ymd4fggsfrr7rgjqykq7tqsckai89xqiwu1f8bwnbb8fxdkiqzlhgzkq74c026uvjxigdft6jgrkvd51p8oqdm1xxsiilokbexq6elzfi7xx4oa8udhvw1zgot9l1gdzapvimx7b5q2dddz1xytdzmlocepnyb3vrnwauw8nua5esxhctv6setw00r5srxdx8puwiacpy3ty6c9vre8q0uq7ftz9fbdibgxbxl96j9rnzor6hrm9eiizjvzqr9cffiqfyzqfoi1ffbon87kio6utjubws6aqymlgvghk21e0nigwmrbuqza2tvxgxnjgq5s802puzyh6riwqv3mqgkegmmz4er23xskaflqhrt6eqbit7r1qi31cwn48hmq13gvjadhrlosgxytpw7gilyqe2ky1l32bvzc2gweac3gxsjohq6myiquclityisq2cpxnkb5bh7pqjzxdnrewups9mo9hmfw63xmmprybhrxivlbnba7wiv4udtqpietd3ocz1otskz4katjnngveaijkqfa7xlkorp0bz2cfnmon6jqzvffhonzdbjm15qeubxibg3qhglaa2pmdidkuqdvxjy5uwcoov92ighjtrs8xjubmgqwu9pp3vrz8w77lvunt4bqlknifc3juwcypweuz4ap1vndoebb6b9gc5te9qmomow2gesdvgkyi3jsbqqbqfrr467fr69qdlcnbghjuahjk5cjzcsoqx2uzyqfm9waffb7ekuakx4rykn45pcm5aqdjqbff1b4oyieiufgc0vddsr6rqyniouqol5eyg5lgghlqxxijrahltonn4kxogonkkihatzxqiyat6epbix33bnrevmwpxibhysnjdidcizb4zktkbpzdnwwgfyl7c1wdb1xxo4bqog8g15s3lsddlxndjb4qifkprbwuaggslbackb4greedqku0ahydck6obsgycmwsvlvgpkekmhqszi1fooowzgfob4vplcugwyccqtrjdl3dvggmxq0ngb6qyvtjgexrrgqe8jloyn3fqjyppjmywzwlxl9px121zmpgzzte9rwji6aicstg2izvssmbsklbr5elzgz072woubqk1zfzx4rze2uxfeqxye2qfs8flxwidtlk2cfo58vpdytyhofqhjmgcqgzgsfasxbmgucvc4gtapraxqf4yddhdigdvsdah39ype81eyefpfq6ns9ms3ktfk4xo3lf4caggxuhrzb0shy6c7zgy8sdivbanfflcwporgaavua34i5qilb4zdly7odol8vo9owycworadpvhg2qnxy3thfzwmebmzqp5wyd8bie9flm2g7nfof3c2ogilak424cdxdbon323llyhlj3vd2xnuh6v4h0qrd1c0ddtj4bqajegivzrue2uhzzv7m3q5e4cmlhrziqlsfjw6vrpax8opruibpaqyvyddy2x0fwnjobqqc8qw40qpr0qo5hzqtvldwjdo6dsleghypw87uq5byfzxaww3bay34ixfi6mod4d6rhwsvzeh97mra7vfwogbm26mf7s36l2tddyt8zsyrpbhyakbf7f1vzpmsouawnownjad9kd4myqzrrcrogckknab7prg9dt2wqg2q8qzvtkxplov5ftvehyt5ocr2vzroonud7px91emx8w6e4ugsuyhik70qxlsizpvdzle21zdg4mgrgcy8omzxcybetl0v9m3mkvnnxxcviede7srzqfqikqpt4dggbxsdeum9i6sgjdzy7wvtguew2afkwhjtkrlevmy2evkl5qibi6kwdtjnxhclimwioxj5ttk4r0gqit3adoefc90ppdck4ar2z9pav5waunqyxfc1av19pmjpn9iphu1eb2p46dvrwlmz4w6g88ghnkdzapqmdgdzlrqwkdovjp2rmxt1rrvpppiisojjoso13xzkazsrfvchiehtpuwigwt2yhcsdcopnyji3q1gob9as93htsdhtc34mod9kjfvot4qyh5vtv92hjoaic1iafe3mnvvqghgpkij1rhblsmd6wixq2kqoeul9os9w0aigo1ob1we8ooyyecubth73iogz7svdvarr6keecpbddjrb8dl5jefr5yxifslcodvmspt7pb1xbuyd7lc5wkpct89a8sidnvc9qjpfpv8ow5njbdxgupkj2vvu9flr7tafhtzlxmskydvs9rmdmxadxgitaigfitjlq2eckmlzcrmc6cuwyt9nwtr8kf1tvqxojdudd75pejrkaato0f5m3iclqwrjsbjlrc7q12mcvulcczdgrjp0i3vjqvvqyeqdedb5iewt4hiycmerbxxaqxjuzzayhl0ideredtdb31rxmpsegnqdxjvduk1y6zwkkg4s0rnncurkyx9dgps8alqh3o56ps6l7aj3zajzztob3lhhbb73twcifme7qt7l8c5qnyb8tbeszba0eeswujlfn25jw5aqpprb1yyc2390injd7nzryd1sx6ifftmkrgqdygjbwyfunbsdq5asg5axgc2uhvsnmnfxb7eorwjnk2wcpde5vvyo5oejwu87t9pszoxhvgkbn7o2bsw8g9scudmuoquucriqhxhhufi7kr0baeofdkjeisfn41xwfxrf3k8b5ysvmpgsraslzbd5l2jsz3rjydtpazgera16lbizgm3fibubmb5gwxkuzponilndqjonc0vulemt9nksinyfv6wmvaidjamsjhnnhtl5ezdddhvpcsbxvw1iwxrvlasaqulxhvswgczchfhdmky2yjs5wepnxhqwrlezynwbcu3u6xcqvsz0wyy91ta9j4plcx1ver6leryajy2grwdlshfmuosw5hftevzmp0izvlmpmvnn6nabb97sxty3sjwfvrs3yazl1erveziu7u54c8b2np3muhrqxpkl5ljkbn4hxsdsxqcffsw1nipzlmd7avtdh9jyfw2lfpuekxrdniwupqs67edxbpblfe61nolb0qcr8jozqb8n1ejxotzo9v1zxo9shirkx93wxzur6vfmstzs2amgkkauiopmb0r44gtbmcbpcxjh6slo6nmzz3dgamel7rp5n1uggidsmmimgwy367v2crx8tblgkyul30wka1mtudzr35xwbulzvtrdzz9y8z0vqakezg0qynyphmwdqvntuagfkphffr6oes6tbigjzt4mvyeh5snbm3yhjsooo0zg0u3e7b2wjwrppv3aalzmimpbi9mt8r0bnzqwremvdrl40yi9oyfekuekjhejtb0tke2hwxek8awluzrihtz8ts8v4wqayfpndxunodblz9zmd8ulc9bswgh23pyfltzgqp0kzihwcidegm2lvjxgfljvx42oyvfflbx8ris9kcnzgvteeqdzqbznpkqo4hdv0oz8qyg4v8dnjdbyclkewqr8j3yb7id2cnsatvwn9zzhzzdvp5picoioh8lhhnrifzkyeqtcjryhpka7kxjbcbe34ncucerobwbf141mytog3mhajq6bxzizgo2nxg2er9zyxzwhdbvbstsgnp5aie9uhyqq6c8jbryrbndpgtxdf57jup8jmvpeglejdkjhnoydouyztcuoq79d2mhuappwhqaaaabjru5erkjggg\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>サンプルコードを見ながら読み進めたほうが良い<img null=\"\" data-icon=\"emoji-warning\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAL1ElEQVR4Ae2aBXBU2dKAJyNxJZOEiQsQnCjuEMNd/oe7rb11DeuGrCPr7o47xHGPIDHi7p7+u3e7mOyZXF4GTVI7VV+dnvY+9yL33JHd/c+/HwNEiZgg5gzJSra1648cMUbUiCfSgyFZzTZ5e77yxohmYDfjoZGfeH+XfXjYJYJk0pGNfdrlnaBC7LwclYPSdvqdgYxFAAUPAeQjKCfv8Dvj5qgcSD7s2+5ufUuk+773O/3YmD4fGgsfRR7RgjqykQ/7tqs/CkaI89xQiwU1F8bWNBb8FxDkIQZlhGzkQ74c026uvjXiG/dFt6jGrKV/D51/P8OQDm1xX/SIIl+OkbeXq++6eLzFI7Xx4+oa8u+Dhvw1zGot9L1gDZAP+VIMx7b5q2+DDDz1XY/TDZmLoCEPNyB3VRNWauW8NUA+5EsxHCtv6//seTw00/r5+sRxDX8PuwIacpY3Ty6C9vrE8Q0UQ7Ft+Z9FBdIBGXbxl96J9RnzoR6HrM9eiizjVZQR9CFfiqFYzqFoi1ffBOn87KIO6+uTJuBwS6A+qymLGVGHK21E0nigWMrBuQza2tVXGxnJgq5s802puzYH6rIWQV3mQgkEG/mmz4Er23xSKAflQhRt6eqbIt7r1qi31CWN48HmQ13GvJaD/hRLOSgXYtpW7gIlYqe2kY1L3+2bVZc2GweaC3gXSJOhq6MYiqUclItyIsq2cPXNkB5bH7P/qjZxDNRe+w/Ups9m/o9hmfW63xmMpRybHrX/iv+LbNba7wIV4uDtqpietd+3oCZ1OtSkz4KatJnNgVeaIJkQ/fA7xlKOrP0+BZ2cFNMoN6JqzVffHOnzdbjm15qEUBxiBg3QhGlAa2PmDIDKuQDVxJy/5UwcOoV92I+gHJTrS8xJubmGQWu9+pp+3VRz8w77lVUnT4bqlKnIFC3JUwCypwEUz4aP1vnDoEBb6B9gC5te9QMomoW2GeSDvgKYi3JSbqqBqFrr467fr69qdlcnBGHjuAHJk5CJzCSoQx2UzYQFM9wAff/B7EkuAKX4RyKN45pCm5AQDJQbff1b4+OyIeIUFGC0vDDSr6rqyniouqoL5EyG5LggHlqXxIjRAHlToNn4KxOgONK/KihAtZxqIYat6epbIX33bNREVMWPxIbHYsNjdIDciZB4ZKTkBpzdNwwgfyL7C1wdB1Xxo4BqoG8g15S3lsddlxnDjB4qifKprbwUAggSLBACkB4GReeDQKU0aHYDck6OBsgYC//MwSvLVGPKEKMHqSZi1FoOOwZGfOB4vPLCUGwyCCqTRjdL3dVggMxQ0Ngb6QyvtjGExrRgqE8Jloyn3FQjYpPjMYwZwLXl9/px121ZmPGzZTE+9RWJI6AicSTg2izVSSMBSkLBr5elzgZ072wOUBQK1ZfZX4RzE2UxfeqXYE2qfS8flxWIDTLk2CfO58vPDYTyhOFQHj+MGcqgzGsFAsXBMGuCvc4GTApRAxQF4YDDhDiGdVSDah39yPE81eYeFPfq6ns9Ms3ktfK4Xo3lF4cAggxuHrZB0ShY+6C7zgY8sdIVbaNFf+lcWPORGaavUA/34i5QILb4ZDLy7OdOl8vO9oWyCwORAdpVhG2QNxy+3thFZwM+ebMzQP5wYD8BIe9FlM/2g7NfOF3C2OGILaK424cdXdbON323LLYHlJ3vD2Xn+uH6v4H0QRD1c0+dDTj4bQ+AjEGivzRUE2uHzzV7m3q5e4cm/LhrZiQLSfjW6VrpaX8oPRuIBPAqyvyddY2X+0FWnJ/OBqQc8QW40q+pr0QO5hzqTvlDwjdO6dSLeGhypw87uq5bYfZxaWw3bAY34Ixfi6mOD4D6RH+wsVZeH97MRA7VFwOgBm26Mf7S36l2TDdYt8zsY+rpbhyaKBF7F1vZpMs/OuaWnOwNJad9kD4MyQzrRCrO+gCk+kNAb7PrG9DT2wQg2Q8qzvtKxPloV5FTveHyT5ocR2vZROoNUd7px91emx8w/6E4ugsUY/Hik70QXlsIZPvDzLE21zdg4mgrgCy8omzXC+yBetl0v9m3mKvnnXxcViEde7srZqf+qikqPt4dG+gBxSdEUM9I6SGjDzy7Wvt/gUeW2AFk+WhjTkrlEvMy2EvKL5qibi6KWdTjnXhcliMWiO+Xj5ttK4r0gqIT3aDoeFc90PpDck/4ar2z9p/AV5wAUnqyXf+c1Av19Pmjpn9iPh/u1eB2P+46DvRWLMz4w6G88GhnKDzapQmdGdZLrQwkdoVjP2r/MxT1rRvppPIISOjjOsO13xzKAzsrFvChieHtPuwI+GWt2YHCSDcoPNYJi3q1gOb9as93htSDHtc34Mo+D9KJfvoT4QY/h5vtv92HJoaIc1iAfE3mNvvqghgPKIj1RHBlSMd6WiXQ2kqOeUL9OS9w0aigo1oB1We8oOyYECuBth73IOgz/7SvDvaRr6KeEcPbddjRb8dL5jEFR5yxiFsLcOdVmspT7pB1xBUyD7lC5WkPCT89a8SiDnvc9qJpFPV8Ow5NjBDXGUPkj2VvU9flR7tAfhTzl+xMsKyDVs9+rMdmXaDxgitAigfiTjLq2EckmlZCrMc6cUWyt9nWTR8kf1TvQxOJd/uDD75pejr/kAaTO0F+5M3iCLQWRjsBJLrC7q12MCvUlCCZdGRjP0I3VjqvVqYeqdeDb5iewt4HiYcmer/bXxaqXJuzzaYhL0IDeREdtdB31rXMpsEGNQDxjvDuk1Y6zwKkg4s0RNNcUrKYX9dGPS8aLQ/H3O56PS6L7/aj3zaJzztoB3lHHBB73TWCIFmE7QT7l8c5QNYB8TBESzba0EeswUjlFn25J+w5aqPpRb1+YyC+2390inJd7nZryD1sx6iFFTmkRgQdygjbWYfUnbSDQ5/aSG5AxGc2UHvSnmNFxB7E+oRWJnK2WcPDE5VvYO5Oejwu87t9pSzoxHvGKbn7O2BSW8g9SCuDMuoQUUcrI/qhXHHUFi7+Kr0BaEOfDkJeISfn41XwFXrF3k+8b5ysVMpGSR+aSLzbD5+l2JSz3RJyDtpAzgERa16lbIzgm3fIBuBMB5gwXKUzPOnIlndQjONc0vUlemT9NksInyF/v6W/MVAidjamsjHnNhtl5ezDDdhvpcsBXvW1IWXRVlASaQULxhvS+wGCZChFHdmkY2+yJs5wepNxhqWRLEzyNwbCu/3u6xcqvsz+0wyy91tA9j4pLCX1vEr6lERYAJy2grwDlshfMuosW5hftEvZmP0IzvLmPMVnN/6NAb/b97SXTY3/SJWfvRs3YA+zl1eRveZIU7u54C8B2nP3mUHRQXPkL5ljKB/n4HxSdSXqCfFsw1niPzLMd7aVTdH9jYFw2LFpueKXrD+NIWuPqS67edXBpBlfE61NOlb0QcR8JozQB8N1eJXOTzO9v1zxo9ShiRKx93WXzUr6VFmStZs2AMGkKAuIOpMb++0R4+4GtBmCbpcxJH6sLO6NMzZ3dGaMeL+7RP5N1u+GGIDsMmIMGWY367V2cRX8tbLgKyUL30Wka1MtUdZ+R35XwbuLZV/TrDzz9Y8Z0v/Qa/KEzG0qyNyphMwdqv/NTuaGfkphFfR6oeS6+tbiGJzt4MvyeH5SNBM3YHjsOoO0zG0U3E7B2WJwRppV3AALZMimpbI9mT8r0BnZqWREmVdRL40YI9oYfeKUEkjHEjTb+0tke2hWxEK8AwLUZrIHtz8tS8v4wQAyfpNDxu/NodBLz9z+mD8ULc9Bs/wgh23PyFLtzGQP0KziHWCIdEGm2lvJXg+fLjvx42OyvF+flBX/8ris9KcnZGVtEeqdZqBZnpkqO4HDv0oz8qyG4v8DnJDByCLkeWQr8j3yB7ID2cnsatVwn9zzHzzDVp5pIc/oiOh8LHhnRiFzkYeQtcjryHpkA7KxjbCBe34NCUceRObwbF141mY/tog3MhAJQ6bxZizgO2NxG2ER9zyXZwhDBvBstsgNP5aIE+9UHyQQ6c8JBrYRBnDPgTxDF57JUp8jMVPEGlEjDkjHNoYDouYZTCUOQ/79/D/2mhuappW/hQAAAABJRU5ErkJggg==\"></h3>\n<p>本書ではチュートリアル形式でサンプルアプリを作っていきますが、記載しているソースコードのファイルパスは書かれていないことが多いので、そこらへんは<a href=\"https://github.com/takanorip/nuxt-graphql-sample\">サンプルコード</a>が理解の助けになります。あと必要なライブラリのyarn addも「明示してないけど適宜やってね」という感じでした。</p>\n<h3 id=\"githubのトークンはハードコードしないほうが良いのでは？img-null-data-iconemoji-warning-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaal1eleqvr4ae2abxbu2dkajynxjzoeiqsqncjuemndoe7rb11deugrcpr7o47xhgpidhi7p7u3e7moyzxf4gtvi7vvdnvy9yl33jhdchwneizgg5gzjsra1648cmubuicfsgyfzztz5e77yxohmydfjozgfehxfxjyjyjk0pgnfdrlnabc7lwclypsdvqdgyxfaaupaeqjkcfv8dvj5qgcsd7s25ufuuk773o3ymd4fggsfrr7rgjqykq7tqsckai89xqiwu1f8bwnbb8fxdkiqzlhgzkq74c026uvjxigdft6jgrkvd51p8oqdm1xxsiilokbexq6elzfi7xx4oa8udhvw1zgot9l1gdzapvimx7b5q2dddz1xytdzmlocepnyb3vrnwauw8nua5esxhctv6setw00r5srxdx8puwiacpy3ty6c9vre8q0uq7ftz9fbdibgxbxl96j9rnzor6hrm9eiizjvzqr9cffiqfyzqfoi1ffbon87kio6utjubws6aqymlgvghk21e0nigwmrbuqza2tvxgxnjgq5s802puzyh6riwqv3mqgkegmmz4er23xskaflqhrt6eqbit7r1qi31cwn48hmq13gvjadhrlosgxytpw7gilyqe2ky1l32bvzc2gweac3gxsjohq6myiquclityisq2cpxnkb5bh7pqjzxdnrewups9mo9hmfw63xmmprybhrxivlbnba7wiv4udtqpietd3ocz1otskz4katjnngveaijkqfa7xlkorp0bz2cfnmon6jqzvffhonzdbjm15qeubxibg3qhglaa2pmdidkuqdvxjy5uwcoov92ighjtrs8xjubmgqwu9pp3vrz8w77lvunt4bqlknifc3juwcypweuz4ap1vndoebb6b9gc5te9qmomow2gesdvgkyi3jsbqqbqfrr467fr69qdlcnbghjuahjk5cjzcsoqx2uzyqfm9waffb7ekuakx4rykn45pcm5aqdjqbff1b4oyieiufgc0vddsr6rqyniouqol5eyg5lgghlqxxijrahltonn4kxogonkkihatzxqiyat6epbix33bnrevmwpxibhysnjdidcizb4zktkbpzdnwwgfyl7c1wdb1xxo4bqog8g15s3lsddlxndjb4qifkprbwuaggslbackb4greedqku0ahydck6obsgycmwsvlvgpkekmhqszi1fooowzgfob4vplcugwyccqtrjdl3dvggmxq0ngb6qyvtjgexrrgqe8jloyn3fqjyppjmywzwlxl9px121zmpgzzte9rwji6aicstg2izvssmbsklbr5elzgz072woubqk1zfzx4rze2uxfeqxye2qfs8flxwidtlk2cfo58vpdytyhofqhjmgcqgzgsfasxbmgucvc4gtapraxqf4yddhdigdvsdah39ype81eyefpfq6ns9ms3ktfk4xo3lf4caggxuhrzb0shy6c7zgy8sdivbanfflcwporgaavua34i5qilb4zdly7odol8vo9owycworadpvhg2qnxy3thfzwmebmzqp5wyd8bie9flm2g7nfof3c2ogilak424cdxdbon323llyhlj3vd2xnuh6v4h0qrd1c0ddtj4bqajegivzrue2uhzzv7m3q5e4cmlhrziqlsfjw6vrpax8opruibpaqyvyddy2x0fwnjobqqc8qw40qpr0qo5hzqtvldwjdo6dsleghypw87uq5byfzxaww3bay34ixfi6mod4d6rhwsvzeh97mra7vfwogbm26mf7s36l2tddyt8zsyrpbhyakbf7f1vzpmsouawnownjad9kd4myqzrrcrogckknab7prg9dt2wqg2q8qzvtkxplov5ftvehyt5ocr2vzroonud7px91emx8w6e4ugsuyhik70qxlsizpvdzle21zdg4mgrgcy8omzxcybetl0v9m3mkvnnxxcviede7srzqfqikqpt4dggbxsdeum9i6sgjdzy7wvtguew2afkwhjtkrlevmy2evkl5qibi6kwdtjnxhclimwioxj5ttk4r0gqit3adoefc90ppdck4ar2z9pav5waunqyxfc1av19pmjpn9iphu1eb2p46dvrwlmz4w6g88ghnkdzapqmdgdzlrqwkdovjp2rmxt1rrvpppiisojjoso13xzkazsrfvchiehtpuwigwt2yhcsdcopnyji3q1gob9as93htsdhtc34mod9kjfvot4qyh5vtv92hjoaic1iafe3mnvvqghgpkij1rhblsmd6wixq2kqoeul9os9w0aigo1ob1we8ooyyecubth73iogz7svdvarr6keecpbddjrb8dl5jefr5yxifslcodvmspt7pb1xbuyd7lc5wkpct89a8sidnvc9qjpfpv8ow5njbdxgupkj2vvu9flr7tafhtzlxmskydvs9rmdmxadxgitaigfitjlq2eckmlzcrmc6cuwyt9nwtr8kf1tvqxojdudd75pejrkaato0f5m3iclqwrjsbjlrc7q12mcvulcczdgrjp0i3vjqvvqyeqdedb5iewt4hiycmerbxxaqxjuzzayhl0ideredtdb31rxmpsegnqdxjvduk1y6zwkkg4s0rnncurkyx9dgps8alqh3o56ps6l7aj3zajzztob3lhhbb73twcifme7qt7l8c5qnyb8tbeszba0eeswujlfn25jw5aqpprb1yyc2390injd7nzryd1sx6ifftmkrgqdygjbwyfunbsdq5asg5axgc2uhvsnmnfxb7eorwjnk2wcpde5vvyo5oejwu87t9pszoxhvgkbn7o2bsw8g9scudmuoquucriqhxhhufi7kr0baeofdkjeisfn41xwfxrf3k8b5ysvmpgsraslzbd5l2jsz3rjydtpazgera16lbizgm3fibubmb5gwxkuzponilndqjonc0vulemt9nksinyfv6wmvaidjamsjhnnhtl5ezdddhvpcsbxvw1iwxrvlasaqulxhvswgczchfhdmky2yjs5wepnxhqwrlezynwbcu3u6xcqvsz0wyy91ta9j4plcx1ver6leryajy2grwdlshfmuosw5hftevzmp0izvlmpmvnn6nabb97sxty3sjwfvrs3yazl1erveziu7u54c8b2np3muhrqxpkl5ljkbn4hxsdsxqcffsw1nipzlmd7avtdh9jyfw2lfpuekxrdniwupqs67edxbpblfe61nolb0qcr8jozqb8n1ejxotzo9v1zxo9shirkx93wxzur6vfmstzs2amgkkauiopmb0r44gtbmcbpcxjh6slo6nmzz3dgamel7rp5n1uggidsmmimgwy367v2crx8tblgkyul30wka1mtudzr35xwbulzvtrdzz9y8z0vqakezg0qynyphmwdqvntuagfkphffr6oes6tbigjzt4mvyeh5snbm3yhjsooo0zg0u3e7b2wjwrppv3aalzmimpbi9mt8r0bnzqwremvdrl40yi9oyfekuekjhejtb0tke2hwxek8awluzrihtz8ts8v4wqayfpndxunodblz9zmd8ulc9bswgh23pyfltzgqp0kzihwcidegm2lvjxgfljvx42oyvfflbx8ris9kcnzgvteeqdzqbznpkqo4hdv0oz8qyg4v8dnjdbyclkewqr8j3yb7id2cnsatvwn9zzhzzdvp5picoioh8lhhnrifzkyeqtcjryhpka7kxjbcbe34ncucerobwbf141mytog3mhajq6bxzizgo2nxg2er9zyxzwhdbvbstsgnp5aie9uhyqq6c8jbryrbndpgtxdf57jup8jmvpeglejdkjhnoydouyztcuoq79d2mhuappwhqaaaabjru5erkjggg\"><a href=\"#github%E3%81%AE%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E3%81%AF%E3%83%8F%E3%83%BC%E3%83%89%E3%82%B3%E3%83%BC%E3%83%89%E3%81%97%E3%81%AA%E3%81%84%E3%81%BB%E3%81%86%E3%81%8C%E8%89%AF%E3%81%84%E3%81%AE%E3%81%A7%E3%81%AF%EF%BC%9Fimg-null-data-iconemoji-warning-styledisplay-inline-margin-0-margin-top-1px-position-relative-top-5px-width-25px-srcdataimagepngbase64-ivborw0kggoaaaansuheugaaaeaaaabacayaaacqaxheaaal1eleqvr4ae2abxbu2dkajynxjzoeiqsqncjuemndoe7rb11deugrcpr7o47xhgpidhi7p7u3e7moyzxf4gtvi7vvdnvy9yl33jhdchwneizgg5gzjsra1648cmubuicfsgyfzztz5e77yxohmydfjozgfehxfxjyjyjk0pgnfdrlnabc7lwclypsdvqdgyxfaaupaeqjkcfv8dvj5qgcsd7s25ufuuk773o3ymd4fggsfrr7rgjqykq7tqsckai89xqiwu1f8bwnbb8fxdkiqzlhgzkq74c026uvjxigdft6jgrkvd51p8oqdm1xxsiilokbexq6elzfi7xx4oa8udhvw1zgot9l1gdzapvimx7b5q2dddz1xytdzmlocepnyb3vrnwauw8nua5esxhctv6setw00r5srxdx8puwiacpy3ty6c9vre8q0uq7ftz9fbdibgxbxl96j9rnzor6hrm9eiizjvzqr9cffiqfyzqfoi1ffbon87kio6utjubws6aqymlgvghk21e0nigwmrbuqza2tvxgxnjgq5s802puzyh6riwqv3mqgkegmmz4er23xskaflqhrt6eqbit7r1qi31cwn48hmq13gvjadhrlosgxytpw7gilyqe2ky1l32bvzc2gweac3gxsjohq6myiquclityisq2cpxnkb5bh7pqjzxdnrewups9mo9hmfw63xmmprybhrxivlbnba7wiv4udtqpietd3ocz1otskz4katjnngveaijkqfa7xlkorp0bz2cfnmon6jqzvffhonzdbjm15qeubxibg3qhglaa2pmdidkuqdvxjy5uwcoov92ighjtrs8xjubmgqwu9pp3vrz8w77lvunt4bqlknifc3juwcypweuz4ap1vndoebb6b9gc5te9qmomow2gesdvgkyi3jsbqqbqfrr467fr69qdlcnbghjuahjk5cjzcsoqx2uzyqfm9waffb7ekuakx4rykn45pcm5aqdjqbff1b4oyieiufgc0vddsr6rqyniouqol5eyg5lgghlqxxijrahltonn4kxogonkkihatzxqiyat6epbix33bnrevmwpxibhysnjdidcizb4zktkbpzdnwwgfyl7c1wdb1xxo4bqog8g15s3lsddlxndjb4qifkprbwuaggslbackb4greedqku0ahydck6obsgycmwsvlvgpkekmhqszi1fooowzgfob4vplcugwyccqtrjdl3dvggmxq0ngb6qyvtjgexrrgqe8jloyn3fqjyppjmywzwlxl9px121zmpgzzte9rwji6aicstg2izvssmbsklbr5elzgz072woubqk1zfzx4rze2uxfeqxye2qfs8flxwidtlk2cfo58vpdytyhofqhjmgcqgzgsfasxbmgucvc4gtapraxqf4yddhdigdvsdah39ype81eyefpfq6ns9ms3ktfk4xo3lf4caggxuhrzb0shy6c7zgy8sdivbanfflcwporgaavua34i5qilb4zdly7odol8vo9owycworadpvhg2qnxy3thfzwmebmzqp5wyd8bie9flm2g7nfof3c2ogilak424cdxdbon323llyhlj3vd2xnuh6v4h0qrd1c0ddtj4bqajegivzrue2uhzzv7m3q5e4cmlhrziqlsfjw6vrpax8opruibpaqyvyddy2x0fwnjobqqc8qw40qpr0qo5hzqtvldwjdo6dsleghypw87uq5byfzxaww3bay34ixfi6mod4d6rhwsvzeh97mra7vfwogbm26mf7s36l2tddyt8zsyrpbhyakbf7f1vzpmsouawnownjad9kd4myqzrrcrogckknab7prg9dt2wqg2q8qzvtkxplov5ftvehyt5ocr2vzroonud7px91emx8w6e4ugsuyhik70qxlsizpvdzle21zdg4mgrgcy8omzxcybetl0v9m3mkvnnxxcviede7srzqfqikqpt4dggbxsdeum9i6sgjdzy7wvtguew2afkwhjtkrlevmy2evkl5qibi6kwdtjnxhclimwioxj5ttk4r0gqit3adoefc90ppdck4ar2z9pav5waunqyxfc1av19pmjpn9iphu1eb2p46dvrwlmz4w6g88ghnkdzapqmdgdzlrqwkdovjp2rmxt1rrvpppiisojjoso13xzkazsrfvchiehtpuwigwt2yhcsdcopnyji3q1gob9as93htsdhtc34mod9kjfvot4qyh5vtv92hjoaic1iafe3mnvvqghgpkij1rhblsmd6wixq2kqoeul9os9w0aigo1ob1we8ooyyecubth73iogz7svdvarr6keecpbddjrb8dl5jefr5yxifslcodvmspt7pb1xbuyd7lc5wkpct89a8sidnvc9qjpfpv8ow5njbdxgupkj2vvu9flr7tafhtzlxmskydvs9rmdmxadxgitaigfitjlq2eckmlzcrmc6cuwyt9nwtr8kf1tvqxojdudd75pejrkaato0f5m3iclqwrjsbjlrc7q12mcvulcczdgrjp0i3vjqvvqyeqdedb5iewt4hiycmerbxxaqxjuzzayhl0ideredtdb31rxmpsegnqdxjvduk1y6zwkkg4s0rnncurkyx9dgps8alqh3o56ps6l7aj3zajzztob3lhhbb73twcifme7qt7l8c5qnyb8tbeszba0eeswujlfn25jw5aqpprb1yyc2390injd7nzryd1sx6ifftmkrgqdygjbwyfunbsdq5asg5axgc2uhvsnmnfxb7eorwjnk2wcpde5vvyo5oejwu87t9pszoxhvgkbn7o2bsw8g9scudmuoquucriqhxhhufi7kr0baeofdkjeisfn41xwfxrf3k8b5ysvmpgsraslzbd5l2jsz3rjydtpazgera16lbizgm3fibubmb5gwxkuzponilndqjonc0vulemt9nksinyfv6wmvaidjamsjhnnhtl5ezdddhvpcsbxvw1iwxrvlasaqulxhvswgczchfhdmky2yjs5wepnxhqwrlezynwbcu3u6xcqvsz0wyy91ta9j4plcx1ver6leryajy2grwdlshfmuosw5hftevzmp0izvlmpmvnn6nabb97sxty3sjwfvrs3yazl1erveziu7u54c8b2np3muhrqxpkl5ljkbn4hxsdsxqcffsw1nipzlmd7avtdh9jyfw2lfpuekxrdniwupqs67edxbpblfe61nolb0qcr8jozqb8n1ejxotzo9v1zxo9shirkx93wxzur6vfmstzs2amgkkauiopmb0r44gtbmcbpcxjh6slo6nmzz3dgamel7rp5n1uggidsmmimgwy367v2crx8tblgkyul30wka1mtudzr35xwbulzvtrdzz9y8z0vqakezg0qynyphmwdqvntuagfkphffr6oes6tbigjzt4mvyeh5snbm3yhjsooo0zg0u3e7b2wjwrppv3aalzmimpbi9mt8r0bnzqwremvdrl40yi9oyfekuekjhejtb0tke2hwxek8awluzrihtz8ts8v4wqayfpndxunodblz9zmd8ulc9bswgh23pyfltzgqp0kzihwcidegm2lvjxgfljvx42oyvfflbx8ris9kcnzgvteeqdzqbznpkqo4hdv0oz8qyg4v8dnjdbyclkewqr8j3yb7id2cnsatvwn9zzhzzdvp5picoioh8lhhnrifzkyeqtcjryhpka7kxjbcbe34ncucerobwbf141mytog3mhajq6bxzizgo2nxg2er9zyxzwhdbvbstsgnp5aie9uhyqq6c8jbryrbndpgtxdf57jup8jmvpeglejdkjhnoydouyztcuoq79d2mhuappwhqaaaabjru5erkjggg\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHubのトークンはハードコードしないほうが良いのでは？<img null=\"\" data-icon=\"emoji-warning\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAL1ElEQVR4Ae2aBXBU2dKAJyNxJZOEiQsQnCjuEMNd/oe7rb11DeuGrCPr7o47xHGPIDHi7p7+u3e7mOyZXF4GTVI7VV+dnvY+9yL33JHd/c+/HwNEiZgg5gzJSra1648cMUbUiCfSgyFZzTZ5e77yxohmYDfjoZGfeH+XfXjYJYJk0pGNfdrlnaBC7LwclYPSdvqdgYxFAAUPAeQjKCfv8Dvj5qgcSD7s2+5ufUuk+773O/3YmD4fGgsfRR7RgjqykQ/7tqs/CkaI89xQiwU1F8bWNBb8FxDkIQZlhGzkQ74c026uvjXiG/dFt6jGrKV/D51/P8OQDm1xX/SIIl+OkbeXq++6eLzFI7Xx4+oa8u+Dhvw1zGot9L1gDZAP+VIMx7b5q2+DDDz1XY/TDZmLoCEPNyB3VRNWauW8NUA+5EsxHCtv6//seTw00/r5+sRxDX8PuwIacpY3Ty6C9vrE8Q0UQ7Ft+Z9FBdIBGXbxl96J9RnzoR6HrM9eiizjVZQR9CFfiqFYzqFoi1ffBOn87KIO6+uTJuBwS6A+qymLGVGHK21E0nigWMrBuQza2tVXGxnJgq5s802puzYH6rIWQV3mQgkEG/mmz4Er23xSKAflQhRt6eqbIt7r1qi31CWN48HmQ13GvJaD/hRLOSgXYtpW7gIlYqe2kY1L3+2bVZc2GweaC3gXSJOhq6MYiqUclItyIsq2cPXNkB5bH7P/qjZxDNRe+w/Ups9m/o9hmfW63xmMpRybHrX/iv+LbNba7wIV4uDtqpietd+3oCZ1OtSkz4KatJnNgVeaIJkQ/fA7xlKOrP0+BZ2cFNMoN6JqzVffHOnzdbjm15qEUBxiBg3QhGlAa2PmDIDKuQDVxJy/5UwcOoV92I+gHJTrS8xJubmGQWu9+pp+3VRz8w77lVUnT4bqlKnIFC3JUwCypwEUz4aP1vnDoEBb6B9gC5te9QMomoW2GeSDvgKYi3JSbqqBqFrr467fr69qdlcnBGHjuAHJk5CJzCSoQx2UzYQFM9wAff/B7EkuAKX4RyKN45pCm5AQDJQbff1b4+OyIeIUFGC0vDDSr6rqyniouqoL5EyG5LggHlqXxIjRAHlToNn4KxOgONK/KihAtZxqIYat6epbIX33bNREVMWPxIbHYsNjdIDciZB4ZKTkBpzdNwwgfyL7C1wdB1Xxo4BqoG8g15S3lsddlxnDjB4qifKprbwUAggSLBACkB4GReeDQKU0aHYDck6OBsgYC//MwSvLVGPKEKMHqSZi1FoOOwZGfOB4vPLCUGwyCCqTRjdL3dVggMxQ0Ngb6QyvtjGExrRgqE8Jloyn3FQjYpPjMYwZwLXl9/px121ZmPGzZTE+9RWJI6AicSTg2izVSSMBSkLBr5elzgZ072wOUBQK1ZfZX4RzE2UxfeqXYE2qfS8flxWIDTLk2CfO58vPDYTyhOFQHj+MGcqgzGsFAsXBMGuCvc4GTApRAxQF4YDDhDiGdVSDah39yPE81eYeFPfq6ns9Ms3ktfK4Xo3lF4cAggxuHrZB0ShY+6C7zgY8sdIVbaNFf+lcWPORGaavUA/34i5QILb4ZDLy7OdOl8vO9oWyCwORAdpVhG2QNxy+3thFZwM+ebMzQP5wYD8BIe9FlM/2g7NfOF3C2OGILaK424cdXdbON323LLYHlJ3vD2Xn+uH6v4H0QRD1c0+dDTj4bQ+AjEGivzRUE2uHzzV7m3q5e4cm/LhrZiQLSfjW6VrpaX8oPRuIBPAqyvyddY2X+0FWnJ/OBqQc8QW40q+pr0QO5hzqTvlDwjdO6dSLeGhypw87uq5bYfZxaWw3bAY34Ixfi6mOD4D6RH+wsVZeH97MRA7VFwOgBm26Mf7S36l2TDdYt8zsY+rpbhyaKBF7F1vZpMs/OuaWnOwNJad9kD4MyQzrRCrO+gCk+kNAb7PrG9DT2wQg2Q8qzvtKxPloV5FTveHyT5ocR2vZROoNUd7px91emx8w/6E4ugsUY/Hik70QXlsIZPvDzLE21zdg4mgrgCy8omzXC+yBetl0v9m3mKvnnXxcViEde7srZqf+qikqPt4dG+gBxSdEUM9I6SGjDzy7Wvt/gUeW2AFk+WhjTkrlEvMy2EvKL5qibi6KWdTjnXhcliMWiO+Xj5ttK4r0gqIT3aDoeFc90PpDck/4ar2z9p/AV5wAUnqyXf+c1Av19Pmjpn9iPh/u1eB2P+46DvRWLMz4w6G88GhnKDzapQmdGdZLrQwkdoVjP2r/MxT1rRvppPIISOjjOsO13xzKAzsrFvChieHtPuwI+GWt2YHCSDcoPNYJi3q1gOb9as93htSDHtc34Mo+D9KJfvoT4QY/h5vtv92HJoaIc1iAfE3mNvvqghgPKIj1RHBlSMd6WiXQ2kqOeUL9OS9w0aigo1oB1We8oOyYECuBth73IOgz/7SvDvaRr6KeEcPbddjRb8dL5jEFR5yxiFsLcOdVmspT7pB1xBUyD7lC5WkPCT89a8SiDnvc9qJpFPV8Ow5NjBDXGUPkj2VvU9flR7tAfhTzl+xMsKyDVs9+rMdmXaDxgitAigfiTjLq2EckmlZCrMc6cUWyt9nWTR8kf1TvQxOJd/uDD75pejr/kAaTO0F+5M3iCLQWRjsBJLrC7q12MCvUlCCZdGRjP0I3VjqvVqYeqdeDb5iewt4HiYcmer/bXxaqXJuzzaYhL0IDeREdtdB31rXMpsEGNQDxjvDuk1Y6zwKkg4s0RNNcUrKYX9dGPS8aLQ/H3O56PS6L7/aj3zaJzztoB3lHHBB73TWCIFmE7QT7l8c5QNYB8TBESzba0EeswUjlFn25J+w5aqPpRb1+YyC+2390inJd7nZryD1sx6iFFTmkRgQdygjbWYfUnbSDQ5/aSG5AxGc2UHvSnmNFxB7E+oRWJnK2WcPDE5VvYO5Oejwu87t9pSzoxHvGKbn7O2BSW8g9SCuDMuoQUUcrI/qhXHHUFi7+Kr0BaEOfDkJeISfn41XwFXrF3k+8b5ysVMpGSR+aSLzbD5+l2JSz3RJyDtpAzgERa16lbIzgm3fIBuBMB5gwXKUzPOnIlndQjONc0vUlemT9NksInyF/v6W/MVAidjamsjHnNhtl5ezDDdhvpcsBXvW1IWXRVlASaQULxhvS+wGCZChFHdmkY2+yJs5wepNxhqWRLEzyNwbCu/3u6xcqvsz+0wyy91tA9j4pLCX1vEr6lERYAJy2grwDlshfMuosW5hftEvZmP0IzvLmPMVnN/6NAb/b97SXTY3/SJWfvRs3YA+zl1eRveZIU7u54C8B2nP3mUHRQXPkL5ljKB/n4HxSdSXqCfFsw1niPzLMd7aVTdH9jYFw2LFpueKXrD+NIWuPqS67edXBpBlfE61NOlb0QcR8JozQB8N1eJXOTzO9v1zxo9ShiRKx93WXzUr6VFmStZs2AMGkKAuIOpMb++0R4+4GtBmCbpcxJH6sLO6NMzZ3dGaMeL+7RP5N1u+GGIDsMmIMGWY367V2cRX8tbLgKyUL30Wka1MtUdZ+R35XwbuLZV/TrDzz9Y8Z0v/Qa/KEzG0qyNyphMwdqv/NTuaGfkphFfR6oeS6+tbiGJzt4MvyeH5SNBM3YHjsOoO0zG0U3E7B2WJwRppV3AALZMimpbI9mT8r0BnZqWREmVdRL40YI9oYfeKUEkjHEjTb+0tke2hWxEK8AwLUZrIHtz8tS8v4wQAyfpNDxu/NodBLz9z+mD8ULc9Bs/wgh23PyFLtzGQP0KziHWCIdEGm2lvJXg+fLjvx42OyvF+flBX/8ris9KcnZGVtEeqdZqBZnpkqO4HDv0oz8qyG4v8DnJDByCLkeWQr8j3yB7ID2cnsatVwn9zzHzzDVp5pIc/oiOh8LHhnRiFzkYeQtcjryHpkA7KxjbCBe34NCUceRObwbF141mY/tog3MhAJQ6bxZizgO2NxG2ER9zyXZwhDBvBstsgNP5aIE+9UHyQQ6c8JBrYRBnDPgTxDF57JUp8jMVPEGlEjDkjHNoYDouYZTCUOQ/79/D/2mhuappW/hQAAAABJRU5ErkJggg==\"></h3>\n<p>GitHubのアクセストークンをソースコードにハードコードするよりは、<a href=\"https://github.com/nuxt-community/dotenv-module\">@nuxtjs/dotenv</a>を使う方法を載せておいたほうが親切かなと思いました。実際<a href=\"https://github.com/takanorip/nuxt-graphql-sample\">サンプルコード</a>は@nuxtjs/dotenvを使っていますし。</p>\n<h3 id=\"誤植？\"><a href=\"#%E8%AA%A4%E6%A4%8D%EF%BC%9F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>誤植？</h3>\n<p><small>自分の認識ミスかもしれませんが...</small></p>\n<ul>\n<li>（P9）<code class=\"language-text\">apollo-moduleとapollo-link-httpをインストールします。</code>の直後のコマンドが<code class=\"language-text\">yarn add @nuxtjs/apollo</code>になっています。正しくは<code class=\"language-text\">yarn add @nuxtjs/apollo apollo-link-http</code>です。</li>\n<li>（32P）型「URI」は「String」です。GraphQLにURIという型はないし、32Pの型定義にもURIの定義はないので、おそらく「String」かと思います。</li>\n<li>（33P）reposMockのviewer.repositories.nodesは配列なので[]で囲む必要があります。</li>\n<li>（33P）addMockFunctionsToSchemaにセットするオブジェクトのプロパティは<code class=\"language-text\">mock</code>ではなく<code class=\"language-text\">mocks</code>です。</li>\n<li>（39P）「予期せぬネラー」は「予期せぬエラー」です。</li>\n</ul>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>Nuxt.js＋GraphQLをまだ始めたばかりですが、<strong><a href=\"https://booth.pm/ja/items/1045830\">「Hello, GraphQL for client-side!」</a></strong>は最初のとっかかりとしてオススメの一冊でした。これでapollo-moduleの設定・実装・テストの必要最低限を把握できたので、次のステップとしては、以下を参考に、サンプルアプリを作ったりAppoloのキャッシュまわりの設計について取り組むのが良いかなぁと考えています。<br/></p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"padding-bottom: 70.7035%; padding-top: 120px;\"><a href=\"https://www.aintek.xyz/posts/graphql-nuxt-chat\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fwww.aintek.xyz%2Fposts%2Fgraphql-nuxt-chat&key=0658bf78be97cafcf2b0b9f96c1270ee&iframe=card-small\"></a></div></div>\n<br/>\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.hiroppy.me%2Fentry%2Fapollo-link-state\" style=\"border: 0; width: 100%; height: 190px;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe>\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Femployment.en-japan.com%2Fengineerhub%2Fentry%2F2018%2F12%2F26%2F103000\" style=\"border: 0; width: 100%; height: 190px;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe>\n<br/>\n<p>🍅</p>","fields":{"slug":"/hello-nuxt-graphql-with-apollo-client","title":"Nuxt.js＋Apollo＋GraphQLをサクッと学べた /「Hello, GraphQL for client-side!」を読んだ","date":"2019-01-07T19:00:00.000+09:00","excerpt":"なにこれNuxt.js＋GraphQLの知識がこれから必要になるので「Hello, GraphQL for client-side!」を読んだところ、非常にサクっと学ぶことができたので感想を書きます。GraphQLでサーバーと通信するには「...","tags":["GraphQL","Nuxt.js","Apollo Client","Vue.js","読書感想"],"keywords":["GraphQL"],"thumbnail":"thumbnail/2019/01/hello-nuxt-graphql-with-apollo-client.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>AWSのGraphQLマネージドサービス「<a href=\"https://aws.amazon.com/jp/appsync/\">AppSync</a>」はGUIで簡単に設定ができて便利ですが、\n本格的に開発を進めていくとGUIポチポチでソースコードを管理するのはつらくなってきます。\n<strong><a href=\"https://serverless.com/\">Serverless Framework</a>というツールと<a href=\"https://github.com/sid88in/serverless-appsync-plugin\">serverless-appsync-plugin</a>（Serverless Frameworkのプラグイン）を使うと、AppSyncの設定をymlファイルで管理し、CLIでAWS上にデプロイできるので、GitHub等で構成管理が可能になります。</strong>\n今回はAppSyncからDynamoDBのユーザー情報を1件取得する場合を例にしてAppSync + Serverless Frameworkの使い方をご紹介します。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b4e940dd98c7ab5be67d93e353ffd018/1719c/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABcRAAAXEQHKJvM/AAABOUlEQVQY012PvU7DQAzH8xLwQuwdmVh4ERbUhVfgY+ABWBgQLMwIUEWhLbS95tK4adLQpvm4JJc7n7lmQAJLP/kv27L/djjn90QUK6XmFmiaBogMGGNavaOqqjZLKS11S13XgFpBWTWwLSQY1Is8z5kDAG9aa9okCQkhyBgiz5uT7wMphbSLLMvJDtP/yERNh6c3dHByR+9+aiuoHMbYi4UAfDUafeLMX2Pvg+Frf4LM6kW4xvGYoet6GKxShFWBPEgQwhSfh3Pc63Rx/+gKrx8n1ooRThAse4PBiM4vLs1kykhbU0Uh7IEFxXFM9lUKlhGFkdVKt27DMCKPc8pFRcdnt9TpPlCfJ3afrp2Z6z2lJdL3tq4yoaSopLTefynKRg5ZJL94bPXfXrwRcgZbOfWT2oWNLMsq/QGLmW71JK3q7AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/b4e940dd98c7ab5be67d93e353ffd018/5a190/image.png\"\n        srcset=\"/static/b4e940dd98c7ab5be67d93e353ffd018/772e8/image.png 200w,\n/static/b4e940dd98c7ab5be67d93e353ffd018/e17e5/image.png 400w,\n/static/b4e940dd98c7ab5be67d93e353ffd018/5a190/image.png 800w,\n/static/b4e940dd98c7ab5be67d93e353ffd018/c1b63/image.png 1200w,\n/static/b4e940dd98c7ab5be67d93e353ffd018/29007/image.png 1600w,\n/static/b4e940dd98c7ab5be67d93e353ffd018/1719c/image.png 2914w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ol>\n<li><a href=\"#1-serverless-framework%E3%81%AE%E8%A8%AD%E5%AE%9A\">🔰 Serverless Frameworkの設定</a></li>\n<li><a href=\"#2-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E4%BD%9C%E6%88%90\">💪 プロジェクトのひな型作成</a></li>\n<li><a href=\"#3-%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E4%BD%9C%E6%88%90\">📝 設定ファイル作成</a></li>\n<li><a href=\"#4-%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E4%BD%9C%E6%88%90\">💖 リゾルバー作成</a></li>\n<li><a href=\"#5-%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E4%BD%9C%E6%88%90\">💎 スキーマ作成</a></li>\n<li><a href=\"#6-aws%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4\">🎊 AWSにデプロイ</a></li>\n</ol>\n<h2 id=\"1-serverless-frameworkの設定\"><a href=\"#1-serverless-framework%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Serverless Frameworkの設定</h2>\n<ul>\n<li>Serverless Frameworkはnpmで提供されるCLIツールです。まずはnpmでインストールします。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i -g serverless</code></pre></div>\n<ul>\n<li>クレデンシャルを設定します（事前にIAMでユーザを作成しておいてください）</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">serverless config credentials --provider aws --key AKIAIOSFODNN7EXAMPLE --secret wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</code></pre></div>\n<p><small>※詳細：<a href=\"https://serverless.com/framework/docs/providers/aws/guide/credentials#using-aws-profiles\">Serverless Framework - AWS Lambda Guide - Credentials</a></small></p>\n<h2 id=\"2-プロジェクトのひな型作成\"><a href=\"#2-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E4%BD%9C%E6%88%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. プロジェクトのひな型作成</h2>\n<p>プロジェクトのひな型を作ります。\nServerless FrameworkでAppSync資産を扱えるように、<a href=\"https://github.com/sid88in/serverless-appsync-plugin\">serverless-appsync-plugin</a>と<a href=\"https://github.com/aws/aws-sdk-js\">aws-sdk</a>をインストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mkdir appsync-sample-with-serverless\ncd appsync-sample-with-serverless\nnpm init -y\nnpm i serverless-appsync-plugin aws-sdk</code></pre></div>\n<br/>\n<h2 id=\"3-設定ファイル作成\"><a href=\"#3-%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E4%BD%9C%E6%88%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 設定ファイル作成</h2>\n<p>プロジェクト直下にServerless Frameworkの設定ファイル<code class=\"language-text\">serverless.yml</code>を作ります。<br/>\n<small>※ここではserverless.ymlの全量を示して、次のセクションでブロックごとに詳細を説明します。</small></p>\n<div class=\"gatsby-code-title\">serverless.yml</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># サービス名</span>\n<span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> appsync<span class=\"token punctuation\">-</span>sample<span class=\"token punctuation\">-</span>with<span class=\"token punctuation\">-</span>serverless\n<span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token comment\"># ステージ、デプロイ先を開発、運用などで分けたい場合はココを切り替えます</span>\n  <span class=\"token key atrule\">stage</span><span class=\"token punctuation\">:</span> production\n  <span class=\"token comment\"># デプロイ先のリージョンです</span>\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n<span class=\"token comment\"># AppSyncのプラグインを指定します</span>\n<span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> serverless<span class=\"token punctuation\">-</span>appsync<span class=\"token punctuation\">-</span>plugin\n<span class=\"token comment\"># プラグイン関連の設定はcustomで行います</span>\n<span class=\"token key atrule\">custom</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># ここでAppSyncの設定を行います</span>\n  <span class=\"token key atrule\">appSync</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># エンドポイントの名前を指定します</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> appsync<span class=\"token punctuation\">-</span>serverless<span class=\"token punctuation\">-</span>sample\n    <span class=\"token comment\"># AppSyncの認証方法を指定します</span>\n    <span class=\"token comment\"># ここではCognitoによる認証方法を指定しています</span>\n    <span class=\"token key atrule\">authenticationType</span><span class=\"token punctuation\">:</span> AMAZON_COGNITO_USER_POOLS\n    <span class=\"token comment\"># Cogtnitoによる認証方法の場合、Cognito側の情報を指定する必要があります</span>\n    <span class=\"token key atrule\">userPoolConfig</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># Cognitoが存在するリージョンを指定します</span>\n      <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n      <span class=\"token key atrule\">awsRegion</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n      <span class=\"token comment\"># CognitoのユーザープールのIDを指定します</span>\n      <span class=\"token key atrule\">userPoolId</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>1_U0e7zFRLQ\n      <span class=\"token comment\"># スキーマ定義で認証設定が記述されていない場合の挙動を指定します</span>\n      <span class=\"token comment\"># DENYを指定すると、認証されたいかなるユーザーも認可エラーに倒します</span>\n      <span class=\"token key atrule\">defaultAction</span><span class=\"token punctuation\">:</span> DENY\n    <span class=\"token comment\"># AppSyncのスキーマ定義ファイルのパスを指定します</span>\n    <span class=\"token comment\"># デフォルトだとschema.graphqlです</span>\n    <span class=\"token key atrule\">schema</span><span class=\"token punctuation\">:</span> schema.graphql\n    <span class=\"token comment\"># データソースを指定します(複数指定可能)</span>\n    <span class=\"token key atrule\">dataSources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># データソースの型を指定します</span>\n      <span class=\"token comment\"># 以下が指定できます</span>\n      <span class=\"token comment\"># AMAZON_DYNAMODB ・・・DynamoDB</span>\n      <span class=\"token comment\"># AMAZON_ELASTICSEARCH ・・・Elasticsearch</span>\n      <span class=\"token comment\"># AWS_LAMBDA ・・・Lambda関数</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> AMAZON_DYNAMODB\n        <span class=\"token comment\"># データソース名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># DynamoDBのテーブルの説明を指定します</span>\n        <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ユーザー情報テーブル'</span>\n        <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n          <span class=\"token comment\"># 参照するテーブル名を指定します</span>\n          <span class=\"token key atrule\">tableName</span><span class=\"token punctuation\">:</span> dynamo_user\n          <span class=\"token comment\"># データソースのロールARNを指定します</span>\n          <span class=\"token key atrule\">serviceRoleArn</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>999999999999<span class=\"token punctuation\">:</span>role/sample_role_arn\n          <span class=\"token comment\"># データソースのリージョンを指定します</span>\n          <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n          <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n    <span class=\"token comment\"># マッピングテンプレートのVTLファイルの格納先を指定します</span>\n    <span class=\"token comment\"># デフォルトはmapping-templatesです</span>\n    <span class=\"token key atrule\">mappingTemplatesLocation</span><span class=\"token punctuation\">:</span> mapping<span class=\"token punctuation\">-</span>templates\n    <span class=\"token comment\"># リゾルバー定義を指定します</span>\n    <span class=\"token comment\"># ※ここではPipeline Resolverの例を示します</span>\n    <span class=\"token key atrule\">mappingTemplates</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># リゾルバーの方を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Query\n        <span class=\"token comment\"># リゾルバーを紐づけるスキーマ中のフィールド名を指定します</span>\n        <span class=\"token key atrule\">field</span><span class=\"token punctuation\">:</span> user\n        <span class=\"token comment\"># Pipeline Resolverを使い場合、以下を指定します</span>\n        <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PIPELINE\n        <span class=\"token comment\"># リクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'start.vtl'</span>\n        <span class=\"token comment\"># レスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'end.vtl'</span>\n        <span class=\"token comment\"># リゾルバーで使う関数を実行順に指定します</span>\n        <span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> GetUser\n    <span class=\"token comment\"># 関数定義を指定します</span>\n    <span class=\"token key atrule\">functionConfigurations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># ユーザー一覧取得</span>\n        <span class=\"token comment\"># 関数で扱うデータソース名を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">dataSource</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># 関数名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser'</span>\n        <span class=\"token comment\"># 関数のリクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.req.vtl'</span>\n        <span class=\"token comment\"># 関数のレスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.res.vtl'</span></code></pre></div>\n<br/>\n<p>以下で、<code class=\"language-text\">serverless.yml</code>に定義したプロパティがAWSコンソール上のどの項目に紐づくかを説明します。</p>\n<h3 id=\"appsyncの基本設定\"><a href=\"#appsync%E3%81%AE%E5%9F%BA%E6%9C%AC%E8%A8%AD%E5%AE%9A\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AppSyncの基本設定</h3>\n<div class=\"gatsby-code-title\">serverless.ymlからAppSyncの基本設定を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">  <span class=\"token comment\"># ここでAppSyncの設定を行います</span>\n  <span class=\"token key atrule\">appSync</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># エンドポイントの名前を指定します</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> appsync<span class=\"token punctuation\">-</span>serverless<span class=\"token punctuation\">-</span>sample\n    <span class=\"token comment\"># AppSyncの認証方法を指定します</span>\n    <span class=\"token comment\"># ここではCognitoによる認証方法を指定しています</span>\n    <span class=\"token key atrule\">authenticationType</span><span class=\"token punctuation\">:</span> AMAZON_COGNITO_USER_POOLS\n    <span class=\"token comment\"># Cogtnitoによる認証方法の場合、Cognito側の情報を指定する必要があります</span>\n    <span class=\"token key atrule\">userPoolConfig</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># Cognitoが存在するリージョンを指定します</span>\n      <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n      <span class=\"token key atrule\">awsRegion</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n      <span class=\"token comment\"># CognitoのユーザープールのIDを指定します</span>\n      <span class=\"token key atrule\">userPoolId</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>1_U0e7zFRLQ\n      <span class=\"token comment\"># スキーマ定義で認証設定が記述されていない場合の挙動を指定します</span>\n      <span class=\"token comment\"># DENYを指定すると、認証されたいかなるユーザーも認可エラーに倒します</span>\n      <span class=\"token key atrule\">defaultAction</span><span class=\"token punctuation\">:</span> DENY</code></pre></div>\n<br/>\n<p>AWSコンソールのAppSyncの画面で、エンドポイント一覧が表示されます。\n<code class=\"language-text\">serverless.yml</code>で定義したエンドポイント名はココで確認できます。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0d72e5f2831b7d4fea63c5eda934a0c0/cd78c/appsync-gui-main-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 53.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABcRAAAXEQHKJvM/AAAB1ElEQVQoz42Sy3KbMBSGebv2JdpF+3bNNLvaronKrvY6m8TZkICpAWNA3C8H/T2SGceTZlHNfHMkwfl1bpbn+VvXde/CMHKklI7McydNUyeKY2cfBM6L7zvPnud4bPX5Lf5+r63g75tvNzcfLfBq2xbvLcXIokAmCwxE5jwp9Q8jf9NrvV5/sWbfniGllEHvx3Gkoixpt9vR84tHVV1TLuW78KNDw0EtV6tPRnCappGFzlHNlvhVHV3BHJMEZVmiaRrUTHMFnxWLkfaybfuzNYuMOkF1JcgRGrE0y8B1Ms76bhiGtyidjfb55Tivguq8gZproP/IqxplXaPtOnSMTqudaV4xEWqfOyFmQU5ZixlBXWApQWEI6XsoeV9UDUoWl0xxsRW4rhrFaZNuzI/FYhbkDC+d1cIPD6DtFtVmgzJO4Gc1orxCkJYI2e7TCnVP18NgDtwUFuS6TIdDr5KE1OlE2iJNiXgvgz/UZpnptu5y3/fU9R1x3S4Tca6/mRIslkvuMhcej4+A5wG+D7guEATA0xNwf89D2mCYJvzPWq5+frW6adpU42jX4yjqYRDGMkXXicPpJKKEiWIRRpE4hOGFMI5FfDyKiImPic13v7/f3n74C7W6OcaoFOEsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui main 1\"\n        title=\"\"\n        src=\"/static/0d72e5f2831b7d4fea63c5eda934a0c0/5a190/appsync-gui-main-1.png\"\n        srcset=\"/static/0d72e5f2831b7d4fea63c5eda934a0c0/772e8/appsync-gui-main-1.png 200w,\n/static/0d72e5f2831b7d4fea63c5eda934a0c0/e17e5/appsync-gui-main-1.png 400w,\n/static/0d72e5f2831b7d4fea63c5eda934a0c0/5a190/appsync-gui-main-1.png 800w,\n/static/0d72e5f2831b7d4fea63c5eda934a0c0/c1b63/appsync-gui-main-1.png 1200w,\n/static/0d72e5f2831b7d4fea63c5eda934a0c0/cd78c/appsync-gui-main-1.png 1236w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>エンドポイントの画面を開き<code class=\"language-text\">Settings</code>を確認するとuserPoolConfigなどの詳細が確認できます。\nほぼ<code class=\"language-text\">serverless.yml</code>のプロパティ名と一致しているので、なんとなく紐づけがわかると思います。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ebbcece7c06dbe507ee4c1450e51f3f6/29c1d/appsync-gui-main-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 85%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABcRAAAXEQHKJvM/AAACvElEQVQ4y41UXW/TQBD07+d/ICHBM4qgQfQBtQ+tGjVx3NKq8Wdix46/z46b8y2zF5eaUCROWmd9uZvbmZ2zcX5+/s40lz8sy/oahtE0vLycBh8/Te2zs6mFfDZfTE3TnDqOM3Vd983Af2ee5327vr7+YNi2/Z3Go+uIkoQoy0i1Lcle0f+OLYYxXyw+d0pR2e67rBbyQCQBISspZdG2cpemsqwq2e73kkff938FHgc+NoqilfFoWZPm4YGEZcnetkm5LqmnJxKYq5FnRUFZnlOKikXT0B4MAE77UeBdHaQkPwgc48lcTCQA5GqFGY+IAX2fGnNJ+cUFhbsdn0xpmlIDQDFEMwq8q+fnZ2x1HcNznQnzV0eqNORUY2GN6nJEVVXUQE8FaThAk8B+HHprGIaO4XveEZBnsRCrOada1FSKBkLHBA2pKEoqypLKsqIW4HrPcIDix7EpqPAFcFQhYEFDUFo1FAEwirYakGm9gJwMPRHH8QiwaaSCwFBZ26UCVVHXg17tsRmYFyMdX6IWQnU4zNEarlYT3QjTlAgiyyK1WJBYLikNAgq3WwqCNS/WneYq9yddRijW1ff9AZCpJIlUAKGbGwYn8fMnVQDMUaXehAq77hlG76kfGjMKTRluGACZMkysYA9yHFLwo0BF5TaiDTSMkx0xJfYfVyjf6DIjrjebAZA7K4RU9/dEbO7HRxLzOQl4MOfuQk/22+Fw0A05AfsNuNGArjshXnh1JdXdHdHtLSmANdCyhNE3cUJ5Xmi7sBe5UgZ+rbL/04ee72vKfZoeVJ4rVRSqzzIl4ljlaapw7RRfLQAp6KhzAHITtHWH6FnX9XptG0EQfHnry9Hh9AaaVWhK0+5fm8GUkfPdPR3woWfMZrP3WZYhj1cJjJkkicMG5XsZrNdOiM5tQOVfER5/bZjfw3fz8heLbQepoY3dIgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui main 2\"\n        title=\"\"\n        src=\"/static/ebbcece7c06dbe507ee4c1450e51f3f6/5a190/appsync-gui-main-2.png\"\n        srcset=\"/static/ebbcece7c06dbe507ee4c1450e51f3f6/772e8/appsync-gui-main-2.png 200w,\n/static/ebbcece7c06dbe507ee4c1450e51f3f6/e17e5/appsync-gui-main-2.png 400w,\n/static/ebbcece7c06dbe507ee4c1450e51f3f6/5a190/appsync-gui-main-2.png 800w,\n/static/ebbcece7c06dbe507ee4c1450e51f3f6/c1b63/appsync-gui-main-2.png 1200w,\n/static/ebbcece7c06dbe507ee4c1450e51f3f6/29c1d/appsync-gui-main-2.png 1375w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<h3 id=\"データソース定義\"><a href=\"#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BD%E3%83%BC%E3%82%B9%E5%AE%9A%E7%BE%A9\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>データソース定義</h3>\n<div class=\"gatsby-code-title\">serverless.ymlからデータソース定義を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">    <span class=\"token comment\"># データソースを指定します(複数指定可能)</span>\n    <span class=\"token key atrule\">dataSources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># データソースの型を指定します</span>\n      <span class=\"token comment\"># 以下が指定できます</span>\n      <span class=\"token comment\"># AMAZON_DYNAMODB ・・・DynamoDB</span>\n      <span class=\"token comment\"># AMAZON_ELASTICSEARCH ・・・Elasticsearch</span>\n      <span class=\"token comment\"># AWS_LAMBDA ・・・Lambda関数</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> AMAZON_DYNAMODB\n        <span class=\"token comment\"># データソース名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># DynamoDBのテーブルの説明を指定します</span>\n        <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ユーザー情報テーブル'</span>\n        <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n          <span class=\"token comment\"># 参照するテーブル名を指定します</span>\n          <span class=\"token key atrule\">tableName</span><span class=\"token punctuation\">:</span> dynamo_user\n          <span class=\"token comment\"># データソースのロールARNを指定します</span>\n          <span class=\"token key atrule\">serviceRoleArn</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>999999999999<span class=\"token punctuation\">:</span>role/sample_role_arn\n          <span class=\"token comment\"># データソースのリージョンを指定します</span>\n          <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n          <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span></code></pre></div>\n<br/>\n<p>エンドポイントの画面を開き<code class=\"language-text\">Data Sources</code>を確認すると\nデータソースが一覧表示されるので、一覧から今回<code class=\"language-text\">serverless.yml</code>に定義したデータソースを選択すると、以下のように詳細が確認できます。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ce7642343b110f652569cb878bcb890a/133ae/appsync-gui-datasource.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABcRAAAXEQHKJvM/AAAClElEQVQ4y32Ub2/aMBDG8/WnfZhpmhia1OVF30xTqcSgGxBISMgoFJIQO84/fPbt7NAqZVstPVIM4fHvuTvj3N7evp/N5t+Wy9XXw+Hg7vd7N45jd+n77uin5z54K3e6WLqT+cpqOvdIS/fHzHO9le/6QeD6vn+zDsPvd6PRO4c2Lv5jSaVwl3HMihJZIVBUNZZ1g6C1lVQaFb2nSWcp7W82cXzjTCaTQd20yDhvGWOglLLKsgyCwIcw2kAYRhCsQ4g2G+BFAfQucBK7KGesNcZE+ckJA3+IWiKcWzpY25OAxJsGkzTD3X6Px+MRG9obkrqusabnnjR9ZhG32+3A8RaLYUsvKSnBuqUpKs9DMZuhoGcuBJZliQBgRfRWz3uSlgDWkHowcNabzRC7WoDlyzKEKEIRBJgT2VOS4Ikxa8yK4kUFHSI6afpOdizpwPlNhNi2qKMINHSQajzGcjpFTmZpnmNBZiZeQ7Vu2k7S0FKJiFaTrGGSJAMnvrsbou+jHo1AEwnS6crEXa3wdDjgkYhTEhX+Je5fkaXsGcbx68imhvM5CjokJ8MsZy+EFdXaNKZvbAjhUsPOMAg6w7oGTWS4WKAiOmPIqIaHJLVNMUb9prw27Eder2lsNOqqAr3bmVYhbLco4hhPRPtEhukpt3SmZmDivhnZGPYjX+awIINclHg8MTyQxIXyfD5fx75qynPkviGRmLFIcm4Hu27qrrNkJC/Re4vi6aumnE6ofv2S+uFB43is4f5ei+lUp/FWU5e1EIW+XhcyK7gQ0o2iOXx8/GLPqSpt5pEyId0vrDhHe8dFhS0ofGspk93eieyz+bf5aIrdnM+8lbI0qtu2TLKsTHNulTFeCiH+KxorbuoaRdGHP06Xvi0j2WSQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui datasource\"\n        title=\"\"\n        src=\"/static/ce7642343b110f652569cb878bcb890a/5a190/appsync-gui-datasource.png\"\n        srcset=\"/static/ce7642343b110f652569cb878bcb890a/772e8/appsync-gui-datasource.png 200w,\n/static/ce7642343b110f652569cb878bcb890a/e17e5/appsync-gui-datasource.png 400w,\n/static/ce7642343b110f652569cb878bcb890a/5a190/appsync-gui-datasource.png 800w,\n/static/ce7642343b110f652569cb878bcb890a/c1b63/appsync-gui-datasource.png 1200w,\n/static/ce7642343b110f652569cb878bcb890a/133ae/appsync-gui-datasource.png 1424w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<h3 id=\"リゾルバー定義\"><a href=\"#%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E5%AE%9A%E7%BE%A9\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リゾルバー定義</h3>\n<div class=\"gatsby-code-title\">serverless.ymlからリゾルバー定義を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">    <span class=\"token comment\"># リゾルバー定義を指定します</span>\n    <span class=\"token comment\"># ※ここではPipeline Resolverの例を示します</span>\n    <span class=\"token key atrule\">mappingTemplates</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># リゾルバーの方を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Query\n        <span class=\"token comment\"># リゾルバーを紐づけるスキーマ中のフィールド名を指定します</span>\n        <span class=\"token key atrule\">field</span><span class=\"token punctuation\">:</span> user\n        <span class=\"token comment\"># Pipeline Resolverを使い場合、以下を指定します</span>\n        <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PIPELINE\n        <span class=\"token comment\"># リクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'start.vtl'</span>\n        <span class=\"token comment\"># レスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'end.vtl'</span>\n        <span class=\"token comment\"># リゾルバーで使う関数を実行順に指定します</span>\n        <span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> GetUser</code></pre></div>\n<br/>\n<p>リゾルバー定義は、エンドポイントの画面を開き<code class=\"language-text\">Schema</code>を確認します。\n今回は<code class=\"language-text\">user</code>というフィールド名のクエリに対してリゾルバーを割り当てているので、右側のペインで以下のように確認できます。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9433457c9ebfa1de9cb0d571d6625d1c/b4904/appsync-gui-resolver.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACJUlEQVQ4y4WTyXLaQBRF+f9vyAdk50UW9tIsUsEuVXAqZZshoAEJEEIIoaFnvdxuBifErnTVlbpeN6dvP11634fDT4tF/HO9Xj/u93svyzIvXCy851ng/Qojb+RH3us88sZ+6PlB4EVYi5PEW8TxRVEUPSbL5dPg4eFzz/f9b3Q1hFQUxgnlRUE141S1nJiQqEuSSlPTMmpRl0oR48e3HZPp9LU3HY/uWVVSWR6kEMKgbvZlafwgNIs4MclyZdJsa/JdbtZparJtjnlhtnludkVhDlVlpSx0NB4Pe0EQ9E3X2QO0fXSYV3VNxW5HTVWQVoyM1nAnXB0HE4erPN9Rjj0KoJMR6/BHD/fvn0DawqwOVU2CASQho6m77gn2wB2lmw3VOERw/gZMkuQC/NNh2zQkOYNDTkY1rm7BZ6EtVOPghgtiWjvg1ALjOP4HaB02AApuQXB4ctnhqlRVZCDWtm6vzDLSq5UDznz/fYdoMoAtgBVgwllywCAgursjGgxoG0VU4wD18kL85sYQWjANgo+B9spKwI3mgB672IUh0e0tdYBW69RFSRpDZcOODmezD3oI4Dlb55pziK9NhwN1WHf9wy04Pl7D5RsQPbw//cgSkKDOZUtK6eZ/ya6fZHPIGDNtCzWNMzOZTJ6sw6/XqeBC0P+GUo6BWBmq0R475vP5s83hF8xrBDTVWmcKQiQyRCdrGXtXTdte1nGbDAHfwESJf0r/N4rd3ksu3UVVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui resolver\"\n        title=\"\"\n        src=\"/static/9433457c9ebfa1de9cb0d571d6625d1c/5a190/appsync-gui-resolver.png\"\n        srcset=\"/static/9433457c9ebfa1de9cb0d571d6625d1c/772e8/appsync-gui-resolver.png 200w,\n/static/9433457c9ebfa1de9cb0d571d6625d1c/e17e5/appsync-gui-resolver.png 400w,\n/static/9433457c9ebfa1de9cb0d571d6625d1c/5a190/appsync-gui-resolver.png 800w,\n/static/9433457c9ebfa1de9cb0d571d6625d1c/c1b63/appsync-gui-resolver.png 1200w,\n/static/9433457c9ebfa1de9cb0d571d6625d1c/29007/appsync-gui-resolver.png 1600w,\n/static/9433457c9ebfa1de9cb0d571d6625d1c/b4904/appsync-gui-resolver.png 1768w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>上記画面の<code class=\"language-text\">Pipeline</code>のリンクを開くとリゾルバーの詳細が確認できます。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ec96f8926f756713f045671cd3c5f466/cc6fe/appsync-gui-resolver-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 63%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACKUlEQVQ4y4WUbW+bMBSF8/9/w77sR0yapn5Zt7CNuFpWRdWaJiFA3iDhzRgDqe2za2BRulWbpaNDMDk89/omoyAIZnEcu3meM3LmhyH76QVsHW7Zwg/Zk79hT+uALQYtSSuffLViS89j4XY/CeOcBVE6+XBz83aEP1bbtvA3W/jhBrtDTL5FzkvUdF82DZrzGS2ppmvZ0jU/4XnloPVcMPfr3Ui1DQohzi2gKU8nnOunpad9P9B+EOi173cehBtSqKM41kma6iRJdHRKdbpdqvz7O539eK++OZ/GI2OxskyBMejpFNV8jrzg2O33nba7HdIsQ2PpiPLiJFtNc1aGYCAVjMvYl75kIZQ5HGCOR5RWQiBNUySDbCAvS1RSvlRVQVTCVPR8WXLjum4faOZzhft7mNkM4vERG8+j/kXg1LuCcxREnBcFFZJ34enwkqqSlthYUlnXxp1MhkBAWdfGdHQl0VgiSRQdWU/SXdv9mKo4JemwJ41tAxFfBRrTB2pN1dMX8hIH0pFXiIsKUS6QCdn1ra7rvn/DaROdsf6S8DqQaOwDSmsM9Jdl9y2hUup60syw93qgbbbtSWZ7RaKBt2/HP1YXqK4DqXet6e5pRQSKKBXnXBW8JC/ps1RU5utqeqeXPlPguB+bxQJ4eABoBkGzZ0l/n6yVHsr/35owNh1ReXc0R5+lEA6dpkMn6NCvwaGhdmioL36IIud4Ov2tY+/0PzD+eHv75hdnwtP/gHqLVwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui resolver 2\"\n        title=\"\"\n        src=\"/static/ec96f8926f756713f045671cd3c5f466/5a190/appsync-gui-resolver-2.png\"\n        srcset=\"/static/ec96f8926f756713f045671cd3c5f466/772e8/appsync-gui-resolver-2.png 200w,\n/static/ec96f8926f756713f045671cd3c5f466/e17e5/appsync-gui-resolver-2.png 400w,\n/static/ec96f8926f756713f045671cd3c5f466/5a190/appsync-gui-resolver-2.png 800w,\n/static/ec96f8926f756713f045671cd3c5f466/c1b63/appsync-gui-resolver-2.png 1200w,\n/static/ec96f8926f756713f045671cd3c5f466/29007/appsync-gui-resolver-2.png 1600w,\n/static/ec96f8926f756713f045671cd3c5f466/cc6fe/appsync-gui-resolver-2.png 1860w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<h3 id=\"関数定義\"><a href=\"#%E9%96%A2%E6%95%B0%E5%AE%9A%E7%BE%A9\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>関数定義</h3>\n<div class=\"gatsby-code-title\">serverless.ymlから関数定義を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">    <span class=\"token comment\"># 関数定義を指定します</span>\n    <span class=\"token key atrule\">functionConfigurations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># ユーザー一覧取得</span>\n        <span class=\"token comment\"># 関数で扱うデータソース名を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">dataSource</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># 関数名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser'</span>\n        <span class=\"token comment\"># 関数のリクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.req.vtl'</span>\n        <span class=\"token comment\"># 関数のレスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.res.vtl'</span></code></pre></div>\n<br/>\n<p>関数定義は、エンドポイントの画面を開き<code class=\"language-text\">Functions</code>を確認します。\n関数が一覧表示されるので、一覧から今回<code class=\"language-text\">serverless.yml</code>に定義した関数を選択すると、以下のように詳細が確認できます。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/435d0863a69c0fbe6ef7d6fe1f99ab06/14747/appsync-gui-function.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 97.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABcRAAAXEQHKJvM/AAAC3klEQVQ4y31U23LTMBTM//8AL3wIPJBhmBZMYSgT2iZpEqeJHd/vF1myZR3Okd00U1w8s5FlxetzdleaGYbxfrczby3L/hZFkeE4jmHu98af9c5Yb03jYWMa9487Y7nZGSucr3C8W29xfQDdr5/sr09evPi5eHg3M03zBl5dnZRwtB1wPB9sx4U0L6ERLTDOQbQdcATTcwFN1wM7/AYIbuH4a349Wy6XX+q6hjzLW865RD6ZFYV83GwGbE15OFrSsm2NMIpkkqYyjmMZhKGMk0ym629tb16D+f3Dp9nBOl6B74K6+SFhsQB1fw/1agVJloEfBBDFCQghoG1brK7V9xwhRnDBoZFAhYDlhfPZfr+/ookSQiJANQ3UeQ4ZIk4SaHCulJpE3/fDfS81oes689nJtgdCGL5Cf6gYg6IsIS+Koao30KCmpDdCv4uGzmf2M2Hfy5EYyoZjqzF4vg9pmgGjqvEjpHVdsxeMz6q61u8ejscLQqowikChjuzxEQpsmcgaJO+6DqgIavENDBW67ivCqgJ1OgHzPIxKpg3J8gLQVShxjcygFiWSyHEc9Rw09LzplivUBttAogQwStCPBgy4MOXFoAnCZ1NIQyRpxzZ1qxcE2gRcI7QvUky0TMK6mEfHgdq2Uc4IMLg4xnqkTNJIrTM0g0CmFDjHNGjCp8PhgpAe3t2BQrDtFnBHnEloDCMkj6MxKt25SpIEU6AJkWu6ZdKQdkaps1jqiOgFBGk4cel3vTc1xNxRXAQeAIJ3ILAA3nQajNE2RO16eXZaTgbbdSVg/tR2A7VlQTC2SfCxbWqdZCD3z0Efd1Q2pWGfJBINUcrzVO37KvRD5Zx8FQSRCqNYJUmmMOiKc6FQuzMwm7j9sfRnDbHM61GHszgNii0YtlvTxscFOeA/V08/aN5nOmDnJAFvmkpwznjDWZqmLPAj5rsJi4KIpUmOz3JW1RWrqn+B5pVkIp70H/8CGYSmIXpWVBIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"appsync gui function\"\n        title=\"\"\n        src=\"/static/435d0863a69c0fbe6ef7d6fe1f99ab06/5a190/appsync-gui-function.png\"\n        srcset=\"/static/435d0863a69c0fbe6ef7d6fe1f99ab06/772e8/appsync-gui-function.png 200w,\n/static/435d0863a69c0fbe6ef7d6fe1f99ab06/e17e5/appsync-gui-function.png 400w,\n/static/435d0863a69c0fbe6ef7d6fe1f99ab06/5a190/appsync-gui-function.png 800w,\n/static/435d0863a69c0fbe6ef7d6fe1f99ab06/c1b63/appsync-gui-function.png 1200w,\n/static/435d0863a69c0fbe6ef7d6fe1f99ab06/29007/appsync-gui-function.png 1600w,\n/static/435d0863a69c0fbe6ef7d6fe1f99ab06/14747/appsync-gui-function.png 1914w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<br/>\n<p>設定ファイルの説明は以上です。次にリゾルバーとスキーマの定義について説明します。</p>\n<h2 id=\"4-リゾルバー作成\"><a href=\"#4-%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E4%BD%9C%E6%88%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. リゾルバー作成</h2>\n<p><code class=\"language-text\">mapping-templates</code>フォルダを作成し、その中にリクエストマッピングテンプレートとレスポンスマッピングテンプレートを作成します。</p>\n<p>PipelineResolver用のマッピングテンプレート</p>\n<div class=\"gatsby-code-title\">mapping-templates/start.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\">{}</code></pre></div>\n<br/>\n<p>PipelineResolver用のマッピングテンプレート</p>\n<div class=\"gatsby-code-title\">mapping-templates/end.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\"><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">)</span></span></code></pre></div>\n<br/>\n<p>ユーザー1件取得用の関数ではDynamoDBのGetItemを呼び出します。</p>\n<div class=\"gatsby-code-title\">mapping-templates/GetUser.req.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\">{\n    \"version\": \"2018-05-29\",\n    \"operation\": \"GetItem\",\n    \"key\": {\n        \"id\": <span class=\"token variable\">$util<span class=\"token punctuation\">.</span>dynamodb<span class=\"token punctuation\">.</span><span class=\"token function\">toDynamoDBJson</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span></span>,\n    }\n}</code></pre></div>\n<br/>\n<p>取得情報をレスポンスにて返却します。</p>\n<div class=\"gatsby-code-title\">mapping-templates/GetUser.res.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>error</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$res</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>result</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span>\n<span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span>$res<span class=\"token punctuation\">)</span></span></code></pre></div>\n<br/>\n<h2 id=\"5-スキーマ作成\"><a href=\"#5-%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E4%BD%9C%E6%88%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. スキーマ作成</h2>\n<p>ユーザー情報（ID、名前）を1件検索するだけのシンプルなスキーマ定義です。\n<code class=\"language-text\">serverless.yml</code>の<code class=\"language-text\">schema</code>で指定した通り、プロジェクトルートに<code class=\"language-text\">schema.graphql</code>ファイルを作成します。</p>\n<div class=\"gatsby-code-title\">schema.graphql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\">type User <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> String\n<span class=\"token punctuation\">}</span>\n\ntype UserResponse <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">user</span><span class=\"token punctuation\">:</span> User\n<span class=\"token punctuation\">}</span>\n\ninput GetUserInput <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\"># ユーザー1件取得</span>\n</span><span class=\"gatsby-highlight-code-line\">type Query <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    user<span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> UserResponse\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span>\n</span></code></pre></div>\n<h2 id=\"6-awsにデプロイ\"><a href=\"#6-aws%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. AWSにデプロイ</h2>\n<p>以下コマンドを実行します。とても簡単にデプロイできます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">serverless deploy -v</code></pre></div>\n<br/>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はAppSync + Serverless FrameworkによるAppSync資産の構成管理についてご紹介しました。\n複数人開発においてGUI操作の場合、意図せず変更が加えられてデグレするリスクがあるので、Serverless Frameworkを使って構成管理するのが得策です。\nまたServerless Frameworkの利点はなんといっても1コマンドでAWSにデプロイという手軽さです。\nAppSync資産だけでなく、Lambdaや他資産もServerless Frameworkで管理できるので、AWSでサーバーレスなアプリを開発するときは是非使ってみてください🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://foobar123.com/building-an-appsync-serverless-framework-backend-foobar-c383a840de0d\">Building an AppSync + Serverless Framework Backend | FooBar</a></li>\n</ul>","fields":{"slug":"/aws-appsync-and-serverless-framework","title":"AppSync + Serverless Frameworkによるソースコードの構成管理","date":"2019-03-04T07:50:00.000+09:00","excerpt":"なにこれAWSのGraphQLマネージドサービス「AppSync」はGUIで簡単に設定ができて便利ですが、本格的に開発を進めていくとGUIポチポチでソースコードを管理するのはつらくなってきます。Serverless Frameworkという...","tags":["AppSync","serverless","AWS","GraphQL"],"keywords":["AppSync"],"thumbnail":"thumbnail/2019/03/aws-appsync-and-serverless-framework.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>AppSyncのリゾルバーでDynamoDBのデータを更新する場合、更新処理の前に入力チェックは必ず実施すると思います。\nこの時、入力チェックエラーを見つけた時点で1つのエラーメッセージを返すより、\nすべてのチェック実施後にまとめてエラーメッセージを返してあげたほうが、AppSyncの呼び出し側としては助かります。\nただ、このやり方は調べてもあまり出てきませんでした。そのため本記事で紹介します。</p>\n<h2 id=\"結論\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>たとえば、人(ID、名前、組織名)を更新する場合</p>\n<div class=\"gatsby-code-title\">人(ID、名前、組織名)を更新するmutation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  updatePerson <span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    id\n    name\n    organizationName\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    person <span class=\"token punctuation\">{</span>\n      id\n      name\n      organizationName\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>以下のようにリクエストマッピングテンプレートのVTLを記述します。</p>\n<div class=\"gatsby-code-title\">複数エラーメッセージを返すVTL</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n</span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n</span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n</span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n</span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#return</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors</span><span class=\"token punctuation\">)</span></span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n</span>\n{\n  \"operation\" : \"PutItem\",\n  \"key\" : {\n    \"id\" : { \"S\" : \"<span class=\"token variable\">$<span class=\"token punctuation\">{</span>ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span>\" }\n  },\n  \"condition\" : {\n    \"expression\" : \"attribute_exists(id)\"\n  },\n  \"attributeValues\" : <span class=\"token variable\">$util<span class=\"token punctuation\">.</span>dynamodb<span class=\"token punctuation\">.</span><span class=\"token function\">toMapValuesJson</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span></span>\n}</code></pre></div>\n<br/>\n<h2 id=\"実際どのようなレスポンスが返ってくるか\"><a href=\"#%E5%AE%9F%E9%9A%9B%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AA%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%81%8C%E8%BF%94%E3%81%A3%E3%81%A6%E3%81%8F%E3%82%8B%E3%81%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実際どのようなレスポンスが返ってくるか</h2>\n<p>以下のmutationを発行してみると...</p>\n<div class=\"gatsby-code-title\">複数の入力チェックエラーになるようなmutation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  updatePerson<span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1234\"</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前\"</span>\n    <span class=\"token attr-name\">organizationName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    person <span class=\"token punctuation\">{</span>\n      id\n      name\n      organizationName\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>複数エラーメッセージを含むレスポンスが返ってきます！</p>\n<div class=\"gatsby-code-title\">複数エラーメッセージを含むレスポンス</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"updatePerson\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"person\"</span><span class=\"token punctuation\">:</span> null\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"errors\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"path\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token string\">\"updatePerson\"</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">:</span> null<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorType\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorInfo\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"locations\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"line\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"column\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"sourceName\"</span><span class=\"token punctuation\">:</span> null\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"message\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"名前は30文字以下で入力してください。\"</span>\n</span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"path\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token string\">\"updatePerson\"</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">:</span> null<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorType\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorInfo\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"locations\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"line\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"column\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"sourceName\"</span><span class=\"token punctuation\">:</span> null\n</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"message\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span>\n</span>    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h2 id=\"結論に至るまでの試行錯誤\"><a href=\"#%E7%B5%90%E8%AB%96%E3%81%AB%E8%87%B3%E3%82%8B%E3%81%BE%E3%81%A7%E3%81%AE%E8%A9%A6%E8%A1%8C%E9%8C%AF%E8%AA%A4\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論に至るまでの試行錯誤</h2>\n<p><a href=\"https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/resolver-util-reference.html\">AppSyncの公式ドキュメント</a>を見ると、<code class=\"language-text\">$util.appendError</code>が使えそうだと思ったのですが、いざ書こうとすると、以下2点につまづきました。</p>\n<ol>\n<li>「1つ以上入力チェックエラーがある」ことをどうやって判定するのか</li>\n<li>複数エラー情報をどうやってレスポンスとして返すのか</li>\n</ol>\n<h3 id=\"1-「1つ以上入力チェックエラーがある」ことをどうやって判定するのか\"><a href=\"#1-%E3%80%8C1%E3%81%A4%E4%BB%A5%E4%B8%8A%E5%85%A5%E5%8A%9B%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E3%81%82%E3%82%8B%E3%80%8D%E3%81%93%E3%81%A8%E3%82%92%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E5%88%A4%E5%AE%9A%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 「1つ以上入力チェックエラーがある」ことをどうやって判定するのか</h3>\n<p>最初に考えたのは、<code class=\"language-text\">#set($valid=true)</code>のようにフラグで判断する方法です。</p>\n<div class=\"gatsby-code-title\">validフラグで判定する方法</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\"><span class=\"gatsby-highlight-code-line\"><span class=\"token velocity-comment comment\">## 事前にフラグを定義しておく</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span></span>\n</span>\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token velocity-comment comment\">## チェックNGの場合はフラグを更新</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span>\n</span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span>\n</span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span>\n</span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span>\n</span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token velocity-comment comment\">## 異常時の処理</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n</span></code></pre></div>\n<br/>\n<p>ただこれだと記述が冗長です。<br/>\nappendErrorしたエラーはどこに格納されているのか？<br/>\n<code class=\"language-text\">$util.error($util.toJson($context))</code>をして<code class=\"language-text\">$context</code>の中身を確認してみると、\nどうやら<code class=\"language-text\">$context.outErrors</code>に格納されているということがわかりました。<br/>\nそれを踏まえて処理を以下のようにリファクタリングしました。</p>\n<div class=\"gatsby-code-title\">validフラグを使わずに判定する方法</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token velocity-comment comment\">## 異常時の処理</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n</span></code></pre></div>\n<br/>\n<h3 id=\"2-複数エラー情報をどうやってレスポンスとして返すのか\"><a href=\"#2-%E8%A4%87%E6%95%B0%E3%82%A8%E3%83%A9%E3%83%BC%E6%83%85%E5%A0%B1%E3%82%92%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%81%A8%E3%81%97%E3%81%A6%E8%BF%94%E3%81%99%E3%81%AE%E3%81%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 複数エラー情報をどうやってレスポンスとして返すのか</h3>\n<p><code class=\"language-text\">$util.appendError</code>はエラーを追加してくれるだけです。<code class=\"language-text\">$util.error</code>は1つのエラー情報しか返してくれません。<br/>\n試行錯誤した結果、<code class=\"language-text\">#return</code>で返せそうだということがわかりました。<br/>\n1の調査結果により<code class=\"language-text\">$util.appendError</code>で詰めたエラー情報は<code class=\"language-text\">$ctx.outErrors</code>に格納されていることがわかっていたので、\nそれら踏まえて以下のようにしました。</p>\n<div class=\"gatsby-code-title\">エラー時に複数エラーメッセージを返すにはreturnを使う</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre class=\"language-velocity\"><code class=\"language-velocity\">  <span class=\"token directive\"><span class=\"token keyword\">#return</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors</span><span class=\"token punctuation\">)</span></span></code></pre></div>\n<br/>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>VLTは結構めんどくさいですが、ちょっとずつ慣れてきました。\nググってもAppSyncのVTL系の情報は、まだあまり見かけません。そのため今後もノウハウがたまったら記事を書きます🍅</p>","fields":{"slug":"/mutliple-validation-errors-in-aws-appsync","title":"AWS AppSyncで入力チェックエラーを複数返す方法","date":"2019-02-26T07:30:00.000+09:00","excerpt":"なにこれAppSyncのリゾルバーでDynamoDBのデータを更新する場合、更新処理の前に入力チェックは必ず実施すると思います。この時、入力チェックエラーを見つけた時点で1つのエラーメッセージを返すより、すべてのチェック実施後にまとめてエラ...","tags":["AppSync","AWS","GraphQL"],"keywords":["AppSync"],"thumbnail":"thumbnail/2019/02/mutliple-validation-errors-in-aws-appsync.png"}}],"latestPosts":[{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>クロスプラットフォームアプリを開発する手段はいくつかありますが、とっつきやすそうなIonicについて調査しました。実装方法というよりは、全体像と、React Native・Flutterとの比較についてまとめています。</p>\n<small>\n📝私はWeb開発の経験はありますが、Ionicの経験があるわけではなく、これからやってみようという段階です。\nそのため本記事はあくまでも調査結果をまとめたもので、実際の開発の経験に基づくものではありません。\n</small>\n<h2 id=\"ionic概要\"><a href=\"#ionic%E6%A6%82%E8%A6%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ionic概要</h2>\n<p>クロスプラットフォームアプリをWebの技術（HTML/CSS/JS）を使って作るためのフレームワークです。\niOS・Android・Electron・Web(PWA)などの複数の環境で動作させ、ネイティブ機能にアクセスするための<strong>Capacitor</strong>と、\nWebComponentベースのネイティブ風な<strong>UI Component</strong>から構成されます。\nUI Componentは、素のHTML/CSS/JSでも使えますし、SPAフレームワーク（Angular/React/Vue）とあわせても使えます。\nそれ以外にも、CLIやCI/CD自動化ツール、マーケットといった開発を支えるための周辺機能や、企業向け有償サポートも提供しています。</p>\n<h2 id=\"ionic全体像\"><a href=\"#ionic%E5%85%A8%E4%BD%93%E5%83%8F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ionic全体像</h2>\n<p>アプリ開発からストア公開までの手順の中でIonicが提供する機能は以下の図の青背景・青文字で示してある部分です。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6fddeb839fa28c2dd602c28bf9bf6d10/a7115/ionic-landscape.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABcRAAAXEQHKJvM/AAACbUlEQVQoz1WRW08TURSF+2sNDz7rm4n6pAk+8CgkihoTIhCVWwlKkXKxtKC0pS2llLlPO53OnE6vlE4/DwOonGRlnb2y99or2bFxeMXo6hLP83Bdl6Zk0WohxD90A59+4BEIj2azKTUR9XuOi+/50Ywr9W63S8xqtrHdVmRmaCp1y4gG2y1Bp90ikJyz+qT0IaY/pFar4Qufy/6AQ62EXjflwoCm06DX6xN7Ml9mdtuMGlf2T3m/WWIuUWD1Z4W11DmbhwrPp1eYeDrD4naZ43yJ1dVlKucqVa+JYpiojqAQOPR7HWLrv+tkzgW2XePrgcFCus7bhMqLZYXJVYUPSYtnkzNMPHzMm887BN0hDceRaXqITognOvjtDt1eW6buESN6YZRwLllhRprN72rMbim8+6GzmDwjW9bR3AFOEJLK5Pi2sYGqqOT1DtlTFeH7ZBpj3EAahmMYXo1kQpuVtMZ82mFxT+f1d43phMXHRBlDN7juGwxlIl9wUa1GHIahnA1pypQZQx42uEs4DrEsm+WUxqI0XNg3mYorvIobTMdLGIZx0zYe8/+7qy4vB1E16MujuO0hXnuAbVnE0wqfUhZLBzpTK2Wm1jVm1vJYunrrMIqW/2XCW6MeV6Pw5sqP5issZWqolsvmsc5W1iQhcc3JvMV2VudXpU5OE5yZLSrWfZQNgeN3o33966M8ePmFhQOXsumzfGSTLLpsnTTYLkoUGuyduuxILZGvsyu1/ZLUbnH935U9ecVHdwJaHZlwI33Oqd2nLgbslD2OLgSZquBQ8n7FJ6e2KBoBJaMdcUG/j6LUT7SAQznjdYb8AdsZHFGtVxFjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ionic-landscape\"\n        title=\"\"\n        src=\"/static/6fddeb839fa28c2dd602c28bf9bf6d10/5a190/ionic-landscape.png\"\n        srcset=\"/static/6fddeb839fa28c2dd602c28bf9bf6d10/772e8/ionic-landscape.png 200w,\n/static/6fddeb839fa28c2dd602c28bf9bf6d10/e17e5/ionic-landscape.png 400w,\n/static/6fddeb839fa28c2dd602c28bf9bf6d10/5a190/ionic-landscape.png 800w,\n/static/6fddeb839fa28c2dd602c28bf9bf6d10/c1b63/ionic-landscape.png 1200w,\n/static/6fddeb839fa28c2dd602c28bf9bf6d10/29007/ionic-landscape.png 1600w,\n/static/6fddeb839fa28c2dd602c28bf9bf6d10/a7115/ionic-landscape.png 2186w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>以下で機能ごとの概要を説明します。</p>\n<h3 id=\"ui-component\"><a href=\"#ui-component\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UI Component</h3>\n<p><small>参考: <a href=\"https://ionicframework.com/docs/components\">Ionic公式ドキュメント: UI Component</a></small></p>\n<p>コア機能はWebComponentで作られており、素のHTML/CSS/JSでも使えますし、アダプターを使えばAngularやReactでも使えます（Vueは現在Beta版）。\n以下の図のようにアプリが動作するプラットフォームによってCSSが切り替わるので、AndroidだとAndroid風、iOSだとiOS風のコンポーネントが表示されます。ダークモードにも対応しています。\nクロスプラットフォーム開発の際、AndroidとiOS両方のスタイルに準拠したUIを設計するのは大変ですが、Ionicのようにあらかじめ双方のスタイルに対応したUIフレームワークを提供してくれているのはありがたいですね。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49bd0ce7c0636d1b53f8284246ac3c1a/c23ad/ionic-component-style.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcRAAAXEQHKJvM/AAACF0lEQVQoz31T23LaMBD1r7fP7UOmP9LJUwOayXR6mTQlDSUN2NiyjS+4GIyNDdiyBNtdDZfwkGrmjKzV6uzlrI1+v/9mtVp9y7LsZrlcdhHsJWzb1vtmsznZ5vM5m0wmzHEcliTTLr7vFEXxZTAYvDOiKOrAf5bv+5DnBex2+wt7HMfg4V2WLV/a7g2M9PFwFgh1RNMIxV1PfbrpqqurD+pn70EFYaTvrLGtTGusoihWvh+owdNzeyC8NYIguKYDlqSqqoKyLGGnFKTpHGyHX2RlWTbs93sYjSzMeHeyu55PgSBJks9GGIbXh4OiMjAAEHGE3w73YL1e68dt24JpjtFzD3+ex9iGEuq61oS2zc+ExwwPpZ5WVa1hNksvMgyjWGd43I8r+TvTb6fT6ZkQs1CUCYGcCZQdtYCASsJ2u9UEZVkBKg2oOIqyQGSaEAV+PUMhBNzdPwAKAyG2wRpz+PU40HeP/d/AOccJmIAfxHD3o3cuGVk1YZqmCqEjU29o9/wAqDKFIolWUq905hSE7LWQOkAQhBei6LHBkgRCYnlSiEYuFgvpcFei4lI0jWzqWqIoEgnlyLTQp5XVppbIK3EaBAVFwlsiZK8N9Ww2h6JYYa9yyHGnAaeV5yuIpwlWsdDjRSIdROkZw+HwLZb4HUelgyKwI1AA/M1yhtEZ5y5zXU/b6RdEf4bVsIJQFGTrYs+/mqb5/h/QFH8Xi6OZXwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ionic-component-style\"\n        title=\"\"\n        src=\"/static/49bd0ce7c0636d1b53f8284246ac3c1a/5a190/ionic-component-style.png\"\n        srcset=\"/static/49bd0ce7c0636d1b53f8284246ac3c1a/772e8/ionic-component-style.png 200w,\n/static/49bd0ce7c0636d1b53f8284246ac3c1a/e17e5/ionic-component-style.png 400w,\n/static/49bd0ce7c0636d1b53f8284246ac3c1a/5a190/ionic-component-style.png 800w,\n/static/49bd0ce7c0636d1b53f8284246ac3c1a/c23ad/ionic-component-style.png 1193w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id=\"capacitor\"><a href=\"#capacitor\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Capacitor</h3>\n<p><small>参考: <a href=\"https://capacitor.ionicframework.com/docs/\">Capacitor公式ドキュメント</a></small></p>\n<p>クロスプラットフォームでアプリを動作させるためのライブラリです。ビルド時にはプラットフォームごとにWebViewを表示するネイティブアプリが生成され、WebView上でHTML/CSS/JSが動作します。\nまたGPSやカメラといったネイティブ機能にアクセスするためのAPIをプラグインとして提供しています。\nプラグインには、Ionicが提供するプレミア版（企業向け有償サポートのみで使用可能）と、有志が提供するコミュニティ版の2種類があります。\nCapacitor自身のプラグインだけでなく、Cordovaのプラグインも使用可能です。</p>\n<h3 id=\"ionic-cli\"><a href=\"#ionic-cli\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ionic CLI</h3>\n<p><small>参考: <a href=\"https://ionicframework.com/docs/cli\">Ionic公式ドキュメント: Ionic CLI</a></small></p>\n<p>アプリの生成から、ビルド、実機プレビューまでの一連の操作ができます。\nビルド資産はプラットフォームごとにソースコードとバイナリが生成され、それ以降はAndroid StudioとXCodeで作業しますが、CLIはそれらIDEを起動するところまでやってくれます。\nAngularで開発する場合は、<code class=\"language-text\">ionic generate</code>コマンドでコンポーネントやサービスといったソースコードを自動生成できる強力な機能があります。\nnpmで提供されており、グローバルインストールの必要はなく、プロジェクトごとにローカルインストールして使えます。</p>\n<h3 id=\"appflow\"><a href=\"#appflow\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Appflow</h3>\n<p><small>参考: <a href=\"https://ionicframework.com/docs/appflow\">Ionic公式ドキュメント: Welcome to Appflow</a></small></p>\n<p>複数のIonicアプリを管理できるWeb上のダッシュボードです。\nアプリの作成からストアへの申請・公開までのすべての工程を管理し、それらを自動化できます。\n一度公開したアプリは、Web資産（HTML/CSS/JS）であればストアの審査を介さずにリアルタイムで更新可能です（<a href=\"https://ionicframework.com/resources/articles/how-hybrid-app-development-helps-deliver-great-ux\">参考記事</a>）。\nAppflowはかなり強力なツールですが有料プランでしか使えないのが残念です。</p>\n<h3 id=\"ionic-studio\"><a href=\"#ionic-studio\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ionic Studio</h3>\n<p><small>参考: <a href=\"https://ionicframework.com/docs/studio\">Ionic公式ドキュメント: Welcome to Studio</a></small></p>\n<p>GUIでIonicアプリを開発できるIDEです。\nこちらも有料プランでしか使えません。\n今のところ、Angular Ionic 4.x+ にしか対応しておらず、個人的にはReactに対応したら使って見たいという気持ちです。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0b3aa6fc4542ca02f9df37d5ac9561b3/56fb6/ionic-studio.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 71.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAADVklEQVQ4y01TW2/TWBD247ZIQBoKWjaJnTRtkziJ4zoXx3buaaKkSQttEVuKgIVF9BKXbYtQI+22AvGwv2GJQMADEgIE4oH/s7tISEB6QdUu+NTD+FhtsfVppJnRd75vzhwm6htQQnzwkYsbvO/hhu672YGOy+3t/OTiOi6Pr8Ny/k4oHOvwCM7rP6xhdGPd4+E6nG/4r2g4+kTiB7OMj2VXJDEGweEhCAcDkEhpkFLykEznQEpqEAiPQERMAy8kIRiWaM6qWUil8xRCLAEjUgq8nG+D8QmlljK5Bsq5P74kJ24bWrFplCpjRiZfMWYuXjVev3lrLCzdMpaW14xnz19h7hdDy1VoT7bUMOTqNewt/x9PqcB6/WuMN6ToydocSNUbJFq4Yqr5GhTLdZDVAiy0VmF7ewe+/1o3b0FCzkJxdAy03CiI8TRkcmWi5cowMBhoMyzr1WMC2ooIJBTkzTQSFUcblHBu8Tf48PETdLtb0N3cht3d/2C+tUztWj1atgThiAgRQSIxMQke1ttm3B6vbs3ASgZDUVPRivT0lFKAxaVV1GTi/xUjoQoX9H3CMVRWBQFnK8TilBC52ozfH9CluAwhXrAJMzahrXAV3v0D8O/fexhNeP8O4MY8EioWYR0JayBJWRDEBBElGVxurs0MDoX0tFaCQrlOGuPTB4RKpgDXrq/Cm6cALx+Z8OKhCa+eAVz+dQUPsy2raDkQiqBt27LbIgwEI/r84k2Ymb1CZi9dPSBMqfuWgdq2YVlesS1XrEspAx8WcWVkEk+qOENfm4lERf3Bw8fw+/pdcvfen6aaKR1YXtRtQkL2KEzk3L+UUsVWiPODWn2cpNU8zhAVDg3zenNiGuqNSXJm8ryl0ERCE5fbxBUxv5NHgYeYCTlHezL5UWsrzKScIdaDoAqHA3yrNnYWqrWJrxapli2TcrVJVIzX55bI5tYO+dTdJFvbn0m3u0tzOHPakyvWCKpFZL/EEwqw3MAaXkpw+ecLl2EcVZ6dOk+fnrWLMj4/GW00xqcQ09CcOAf15tRBLa0VaC8KArwH3JIYnD7tXmccjr7YyVM/3unvP7VuwdHn3HA4DtHTc4Tih57ejZ7eI5jrO6xjr9PZv9Hn7F93njh55+ix44lvFQAGsrmhgpkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ionic-studio\"\n        title=\"\"\n        src=\"/static/0b3aa6fc4542ca02f9df37d5ac9561b3/5a190/ionic-studio.png\"\n        srcset=\"/static/0b3aa6fc4542ca02f9df37d5ac9561b3/772e8/ionic-studio.png 200w,\n/static/0b3aa6fc4542ca02f9df37d5ac9561b3/e17e5/ionic-studio.png 400w,\n/static/0b3aa6fc4542ca02f9df37d5ac9561b3/5a190/ionic-studio.png 800w,\n/static/0b3aa6fc4542ca02f9df37d5ac9561b3/c1b63/ionic-studio.png 1200w,\n/static/0b3aa6fc4542ca02f9df37d5ac9561b3/29007/ionic-studio.png 1600w,\n/static/0b3aa6fc4542ca02f9df37d5ac9561b3/56fb6/ionic-studio.png 2752w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id=\"ionic-market\"><a href=\"#ionic-market\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ionic Market</h3>\n<p><small>参考: <a href=\"https://ionicframework.com/blog/introducing-the-ionic-market-buy-and-sell-ionic-starters-plugins-and-themes/\">Ionic公式ブログ: Introducing the Ionic Market: Buy and sell Ionic starters, plugins, and themes</a></small></p>\n<p>Ionicのスターター、プラグイン、テーマが公開されているマーケットです。\n無料のもの、有料のもの豊富に用意されており、自分で公開することもできます。\nお高いですが作りこまれたものも用意されていますので、効率的に開発をすすめる上で見ておいて損はないと思います。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d00e2d347c1d9e0e047b68e330dd2d4c/07108/ionic-market.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 77%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADqUlEQVQ4y52TS28bVRiG51/Agl/Aj2CHBAKpOwQbhLhICFQQQqUIqY1QoVUFSWirNi2tekniXpI4aeI4xck4adw4tsex40s8E8f2+B6PPWMndsae2/F5GbsINogFn/TMdxZnvsX7PYeJRCKjTVmJyI2GT5blLRv/AEV52f+Tho2i+OtKY6smS9spPjXPFMq1LdhF8D+LUlQ7RcwTDoVmpc1kM7m1hDeGo1bH1E2T9DTNRiftrt11jRiWQay+RSil/45lEcPQiEo0KivyIZPmBdZ98TZatTrRdR3dExXq8Qmstg7jWAM0CliAruno9TRodtfse6ZpwbQITNJHvz8cjWazKTHlcpnNHx3BH+dJILEPLpFGqMBjOreCubwXD7PPMC960dZV+8c+uoYGQsjwTAbnAYOJoLBzl5h8ocBedTzFZ+cuk68vjeP0yBV8MvUzXpl7E689fgevzryF1xffQ6lbB/qAQfv/5KfKQO9omOTg05AViSnk82w0nsDazBRZvnERC08XEdzhUGxUUGlVINbyOGxWUcwKKJZKqGYOIJVsyjn8NunD9WkPLiw+o9dmnBAiQYkRxRwr5svY290jqYAfm74XCAXCuH7nPCZG3oZvYRrOm+PghANsp0VEDkrgd5NI8jxWVhax+ocXS8836dzqOtJ8SmIqlQpbq1ZRLlVIQzlGvlCEsLcHx+xNrMyNIR56Af/yLMZcXpy/No6xxzMYvzWFsds3cHfpFE5PTGJscpu6/PsQxLLEVA8PWT4ShGvmIXHOz2M7tINcNg36Mpa/y7e1gZVVN3bjO0gKSayzC/jyzBv44POP8OGZUTryzVnscpzESLLMKmIeKdcyIZaFVlNGRuCR8Drgc9/HWtCFSCwAonVtfXT0ex37FRhoNxU4Jy7j1qVv8eM9D/34qwsIBkISo7SabJILw+1wkJa4jxi3jVAojBjrwJMno3A4ryDDc9g4OMLvOzJ+Ccq4G2nYvnagWz178bakMG1tDNRlW5tqtcqaRhdS/dAydJUet+o0m8nQpQUXFcKbNLrupmvbYRqOJKnHw9IHc276yBOlJW6V5s+9Tx2/XqU/PAjQ2buPkI1FhwM3BhmZpjkQdJhX5+TE3lgIlWwUWSGOg0oRP3F38K7zC3zq+R6nXN/hXug+zNgm9rkgBD4NIRpHRRRlWxvRZZtPdd1o20NVwzBUy7JUeyWq/ZqGvU/66o6cU9frKfV5XVC9tYSa7kjqQO2/OLHp1er13J/uQxLZiketSAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ionic-studio\"\n        title=\"\"\n        src=\"/static/d00e2d347c1d9e0e047b68e330dd2d4c/5a190/ionic-market.png\"\n        srcset=\"/static/d00e2d347c1d9e0e047b68e330dd2d4c/772e8/ionic-market.png 200w,\n/static/d00e2d347c1d9e0e047b68e330dd2d4c/e17e5/ionic-market.png 400w,\n/static/d00e2d347c1d9e0e047b68e330dd2d4c/5a190/ionic-market.png 800w,\n/static/d00e2d347c1d9e0e047b68e330dd2d4c/c1b63/ionic-market.png 1200w,\n/static/d00e2d347c1d9e0e047b68e330dd2d4c/29007/ionic-market.png 1600w,\n/static/d00e2d347c1d9e0e047b68e330dd2d4c/07108/ionic-market.png 1619w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id=\"enterprise-support\"><a href=\"#enterprise-support\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enterprise Support</h3>\n<p><small>参考: <a href=\"https://ionicframework.com/pricing/enterprise\">Ionic公式ドキュメント: Pricing</a></small></p>\n<p>サブスクリプションは、HOBBY（無料）・LAUNCH（42ドル/月）・GROWTH（102ドル/月）の3種類で、それとは別に企業向け有償サポートを用意しています。Appflowのフル機能、Capacitorプレミアプラグイン（生体認証、オフラインストレージ、シングルサインオン含む）に加えて、Ionicのエキスパートによるコンサル、教育、コードレビューを受けられ、連絡窓口も用意されます。</p>\n<h3 id=\"公式ページ・コミュニティなど\"><a href=\"#%E5%85%AC%E5%BC%8F%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%BB%E3%82%B3%E3%83%9F%E3%83%A5%E3%83%8B%E3%83%86%E3%82%A3%E3%81%AA%E3%81%A9\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>公式ページ・コミュニティなど</h3>\n<p>公式ドキュメントに、大体の情報が載っており、参考記事へのリンクも多く掲載されているので、ココを起点に情報をたどるのが良さそうです。</p>\n<ul>\n<li><a href=\"https://ionicframework.com/docs/\">★公式ドキュメント</a></li>\n<li><a href=\"https://ionicframework.com/blog/\">公式ブログ</a></li>\n<li><a href=\"https://github.com/ionic-team/ionic\">GitHub</a></li>\n<li><a href=\"https://www.youtube.com/channel/UChYheBnVeCfhCmqZfCUdJQw/\">YouTube</a></li>\n<li><a href=\"https://twitter.com/ionicframework\">Twitter</a></li>\n<li><a href=\"https://forum.ionicframework.com/\">Forum</a></li>\n<li><a href=\"https://ionicworldwide.herokuapp.com/\">Slack</a></li>\n<li>\n<p>日本語情報</p>\n<ul>\n<li><a href=\"https://ionicframework.jp/docs/\">公式ドキュメント(日本語版)</a> ※訳されてない部分もある</li>\n<li><a href=\"https://ionic-jp.connpass.com/\">日本ユーザーグループ イベントページ(Connpass)</a></li>\n<li><a href=\"https://ionic-jp.herokuapp.com/\">日本ユーザーグループ Slack</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ionic、react-native、flutter比較\"><a href=\"#ionic%E3%80%81react-native%E3%80%81flutter%E6%AF%94%E8%BC%83\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ionic、React Native、Flutter比較</h2>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Ionic</th>\n<th>React Native</th>\n<th>Flutter</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>開発元</td>\n<td>Ionic <br />(<a href=\"https://ionicframework.com/about\">2012年設立</a>)</td>\n<td>Facebook</td>\n<td>Google</td>\n</tr>\n<tr>\n<td>GitHubスター</td>\n<td>40.9k</td>\n<td>86.8k</td>\n<td>91.5k</td>\n</tr>\n<tr>\n<td>言語</td>\n<td>TypeScript, JavaScript</td>\n<td>TypeScript, JavaScript</td>\n<td>Dart</td>\n</tr>\n<tr>\n<td>使えるSPAフレームワーク</td>\n<td>Angular, React, Vue（Beta版）</td>\n<td>-</td>\n<td>-</td>\n</tr>\n<tr>\n<td>プラットフォーム</td>\n<td>iOS, Android, Web（PWAも対応可能）, Electron</td>\n<td>iOS, Android, Web</td>\n<td>iOS, Android, Web, Windows, Mac, Linux</td>\n</tr>\n<tr>\n<td>UI</td>\n<td>Web Component <br />（WebView上で動作）</td>\n<td>ネイティブUI</td>\n<td>独自UI</td>\n</tr>\n<tr>\n<td>採用事例</td>\n<td><code class=\"language-text\">NASA</code>、 <code class=\"language-text\">McDonald&#39;s</code>、 <code class=\"language-text\">Diesel</code>、 <code class=\"language-text\">MarketWatch</code>、 <code class=\"language-text\">Pacifica</code>、 <code class=\"language-text\">Sworkit</code></td>\n<td><code class=\"language-text\">Facebook</code>、<code class=\"language-text\">Skype</code>、<code class=\"language-text\">Instagram</code>、<code class=\"language-text\">Walmart</code>、<code class=\"language-text\">Uber Eats</code>、<del><code class=\"language-text\">Airbnb</code></del>  <br/> <small>📝AirbnbはReact Nativeからネイティブ開発にシフトしています。<a href=\"https://medium.com/airbnb-engineering/sunsetting-react-native-1868ba28e30a\">参考記事</a></small></td>\n<td><code class=\"language-text\">Alibaba</code>, <code class=\"language-text\">Tencent</code>, <code class=\"language-text\">Square</code>, <code class=\"language-text\">Groupon</code>, <code class=\"language-text\">ebay</code>, <code class=\"language-text\">Google Assistant</code> , <code class=\"language-text\">Grab</code></td>\n</tr>\n<tr>\n<td>ネイティブ上で動作する時のレイヤー</td>\n<td>\n  <a class=\"gatsby-resp-image-link\" href=\"/static/2f3ddc56a5351bc635139f34313d3b6a/13e20/layers-ionic.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 741px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 104%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABcRAAAXEQHKJvM/AAAE/klEQVQ4y5WUe2wUVRTGJxoDYvQ/jBEUg1CMJhaCATGER3iDoCAoopZXQQoI1aA2IG1DgyRoKW33MbNAWbuPloKlsPTB0ha29gF9stXa7nZ3u93udnfbCoV2+5jZzueZaUUT+YebnMzcuTO/+51z7nyMyWT60OFwnLPb7Wmtra2Kx4XNblc0tdgUbqdDcc/bpnA5WhX3fG5FG82l5zabPc3pdJ61WCxfMtINnmAU+sKILevCDf/I/9a6u7srGFKQKk1GRkYGRVEUpKB7QQiPCIBIAaF/WBAMVr+wPPOuMDm5QohUVQvT024La/RWIavRL9DykMTwBwJFDKWbLk0IxIsyTXy0Y4gPw9gYwCq9FZOTK/EOV4tdV1oQTTFHU4tIZRUi0qvFBRl1YYt/CD1dQfMjICni/wH1D4ehtwawmkBTUqrkj2NMNiTdciOl0oOvC5oRqa7FGxob5nG38X2xJ9xB3/V0d5kp5VEgDV4C6Qi0xtAISgmzSdHuqy04WupClacXp8pdWJv1B4HsmEugRDYerdx04PqKMAZrEPD7zIyTFIaJdr7ex68zNGBGWhXeVlVjprpGBquqOxBf0op1BIrgbJilKEO8Mg52dhrAMQDLSNcwmhIQ9LWbGa/blX4zOIK3VPX8a8omzNY00O53CHgHS7W1+PTSn5jGtsigBFUcHJnzgUukSsNgmBsHq3ohmu9ckzShq6vHzND5k1MOBN18su5nzFeXkBI73ubuIoJtxixVFRLURwj0HpD9EpA/B0PGN9HILUK2Jgmn1Ub8dPpcuLamGl5vBzWlPZiOwQYg4zkeKgY+bhJOst9iGXsdR7ljcKinAJnPAiUrEcqYBKtyHrJVRwhkQIrSCOP5RDTeZmWFwWA3NcXhHG2KJ4/vNcyGBJVq84B9YbQ+FCF2AqW2AIVZp8BqLyNNrYdRewLW4g0IN78K2J+hplAN/W1mpq2tTQbm3yjjz2ZoUcDthZebIYN4qtFd9SLkG1OQW1CBa0XlyNGfRMnFDwDbK0DHOAw3vgyx6zgpDJHCoAQcVVh0vYznuDNIVmZDxZ5FgWY/crgEmhtwIdcM06+pyM1YDYt+Irp/ewoDTRHQG2OxP+5HpCp14e6eB9SHADWlVVI4ANw/zN9rmIvSy3ug0aiRrMhGqkoPA6VWnLMWDXkv4vfLDFyWqbh65RtsTijDgkMBLD1QjnlLNoaTjiXC6+s0M26pKejFw6bFPGzPUxoT8FddJG7m7UFd0SaUZ01EwPI0POVTcc10CKkXrdineojF+8qwfPMRRG2PhtFoDI+Zg5mpr69Lr6lpQGzcKT4mMR23ij4BnBMJPB5oH4/Oqtehz4pFkrYO8fpB7DxeTaAfsHXHLlzI1qGv76HEkoGBAKWcd+Vq+oGDB7Fq1Qp+U9R3WLZDi5hjHEoLPkam4SssjS3Fu7E+7D5Ri2UE2hIVjRwC9ff1PTIRgbxp9NhQUzwej9yUTJ2e377tM3Ht6iXixi8OiSt36cSZ0VYxMuqWuPCjw+Ln23aLl3IM4sBAv2RHchBIHBv/AulPSR3baPB+7wMhU2cUtkZtETatXym8v36zsHVnjJB70SAMDIRkbxwVJMie+R//HBoDyn545nHObMovRElJ8ZOYuQSsYAoLCze0t7f/4na7VS6XiyUHZzs7O9lQKMT294dYr9cnP6MfgKV3Hhu0pqbSaSsrK/f+Deb1HaMn5G3SAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"layers-ionic\" title=\"\" src=\"/static/2f3ddc56a5351bc635139f34313d3b6a/13e20/layers-ionic.png\" srcset=\"/static/2f3ddc56a5351bc635139f34313d3b6a/772e8/layers-ionic.png 200w,\n/static/2f3ddc56a5351bc635139f34313d3b6a/e17e5/layers-ionic.png 400w,\n/static/2f3ddc56a5351bc635139f34313d3b6a/13e20/layers-ionic.png 741w\" sizes=\"(max-width: 741px) 100vw, 741px\">\n    </span>\n  </span>\n  \n  </a>\n    </td>\n<td>\n  <a class=\"gatsby-resp-image-link\" href=\"/static/cf71b106ca4fdcbc1486378c78ca8a1d/13e20/layers-react-native.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 741px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 104%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABcRAAAXEQHKJvM/AAAEYElEQVQ4y62Ua0xbZRjHG6OJRqfB6Bc/KYOhy4yJMV42/bBJxhwMGLhLlumQIozLRrmMsDndnJbSAnPQK7e2jALjNlfKVkOgmzIQJsKisIXeL1m7tIBudrD0HM7f9xwYDMwSYzzJP33fvu/5Pf/nfc/z8AwGQ4LVaq03m81VFotF9l/Evmuz2er6+/szeewA/9MzNTV1jUciVLKT+fn5OYZhqEeJrFMUTXNjsp0TO6fnaXbtPsvw+/29PJKulJ2QjSEiZnGMxSH3S83TK5x0T4zgN6/rwZQhYHoRaFoNXAEi0Zfm7NM18QuStBK8faYIb5TnofhiI8wBL7vEAQOBwErgw44IegmkH7+GHfUleK/qKNLblcjXaxBVmoOXvuZjQ1kuiroaaGdwBt7bvmUgOYcQtcrRxRsjSFSXYqP0KLI7a5DWKkdcvRCviQ8THeJgL4sy8eLJz+hjfW2wuJ3/dMilRhwlqEXYJD3GwVJapEhtlSFClIXIkizOXXgpGYtzEC05gpYrRi7lmelpE89sMUsXOaGeyevYc7YC71YW42CHCoILau68XhEe5PQqcbW2NBsRRFsrivGFvAy11XVQSuvowcEBuNwuE++Wyy0NkFvfVn0q9PyXn+LN0wUQ951HoqaUpCRApCgb6yWHEUHcrC3JRHRZ0QJIVQuVQkeAp3G5p5p8P+wtE4d2m41z2DE+HIqt+YaLvk5yCOHEEZsa6yicgLaIC/GtWobGBh2qFWdRWyOHSZ+BP8Y2AOY1NO4fh/+2xcRWCge8MTYaatQ1ILdKiPfLCzlQJAFGlxdxIIO+G709V9F6TgPDuTT8ef11wP0UYAkDfKnE3wRx6DXxnA47B+zU94VkCi1qSHRVtQq50hIUyyUkLRUunO9Bl74F7Vo+jJooePqeAOwv4OoPyThxKhd16mZ6ltSKn/0OLZYFIO5qQt6RGHS3CaAi58OmpSJS18txqS0NP3esw3DLY3CZnsNQbzIEZa3YfMSDD/N+xwfb+XRhQS5sdgdJ2eEjwL/A2DeHYHsScK2Bd/gddLcXkDPKwuXmKFiNj2N6OAw/XkpCXacB+TUz2JJ/E9EHpEjcw4dILKYDU9MLlTI5eVPq8/khFMtCRSIhRq/EAs5niZ4hehrB0TD0de3EGd33OKG7A4HMg/gMBRJ281EmFsJmnVwqPa6WBwYGpYK8PMTExISSD3yFbelNKBRX4lfTR/jJmIiUk03YKHAip9KN+HQFtielQiIugcNuWaooiqKWgXa7XcrOZQpFaP++j5n42K1M4ifHmbjMJuatjDFmfco4s2lvFRO3i8+USUSM02Fha5MTaTIMKVm2SS0DH/RD8szd8voomUJF7dubRO1KiqNik/nUjt2fU99VlFIuh3WpDxIQ1x8f6pcr+mHt6s57b3YOjbpmaLX1uHtn5l93bHIpwzyj0bjT7XZrnU6nnKSvJAGUJJLyXjCoDAZnleT2uP/YNbLnUZJ7PB7N0NBQ9t9/Ji5cDE+sxAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"layers-react-native\" title=\"\" src=\"/static/cf71b106ca4fdcbc1486378c78ca8a1d/13e20/layers-react-native.png\" srcset=\"/static/cf71b106ca4fdcbc1486378c78ca8a1d/772e8/layers-react-native.png 200w,\n/static/cf71b106ca4fdcbc1486378c78ca8a1d/e17e5/layers-react-native.png 400w,\n/static/cf71b106ca4fdcbc1486378c78ca8a1d/13e20/layers-react-native.png 741w\" sizes=\"(max-width: 741px) 100vw, 741px\">\n    </span>\n  </span>\n  \n  </a>\n    </td>\n<td>\n  <a class=\"gatsby-resp-image-link\" href=\"/static/e573828a57114ffb881c32793600a246/13e20/layers-flutter.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 741px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 104%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABcRAAAXEQHKJvM/AAADTUlEQVQ4y62UWUhUURjH560Ih4joQaOHssKgRYiijawQI0Uq8yHL0ii1DEuiIEvLXjQoKrPGCy2mNS6YBkkpk5VDaJCTRS7ZzDgzDpqztLnNlbucf98ddUozSenCxz3nnnt+5/9955y/qrKycofZbL5jNBqvm0ymG1MJZW57e/ttvV6fpFIa+E+P2+2uU9EKOUpHlmWeMSZOJWjuoMJwOBzVKko3V+nQgEDBJquKDT2S0nY6nbpRwKmmOjXgiHjlzeRR/ckBvYCRyQpIGt3+Z+AYENV+qKlsoNgD5vtNomFpAuBEIMEJ5soCbCtoSw+D8S0jY38BjgGNqJAFFx2yi4A1CDDOQNurQLTXBQCmAMhdKQRuHR/IfgN5gxTJLgJZgsBa/WB9HYiKig1Iy9mO2urVgNnf+11uniZh8NoYoCwIvrqIDkotmyYsIRXTYSHQ08fr8LB8Pa7nh+LN82DIbaTQMhNC63zgWxYp7KGD7SKgyegF0p4JTOweqpECapsBT3MA3tcG4452M14/C4bz7SJICqjDDwPNi1BSfAQnzpxHfuEjycPLcLlIoclsJeAPKkC6IJuWUgpq9H+Yi6rKtV5FBcUb8e7lclLqTzVU43tjIMrLjyEmU4+NJx0ITanFmk2R0tWrl+H+8lWnstldBOwE/3GlgE9qwD4bXQ2LUfNkFZr0y0jJPPrmhy+GBXhUkYpL2kYc1fQiJPkVwmLSsS8+AdqiImnYHHSqBkNDbmNjE1LTrginLl7Ce/02SnkOxSxaR42+DwtxvygFF+4akKnlkZDVQKAMxB1IoJQL0dvbo7CkYXPQqfLvFeQmJiUhIiJC2BV3DlsTH+D05SswvAhHoTYZW44/x6ZT3UjINnhBMfsPoZRAfX29vjsgiuKvY9PR0ZEryTJuavKEvXuiWWREGIvan8G2JpWw5Yda2Iq4WhYSfZbFxieyslIt8wz0+04VgdgfbkNumzO8EN/1uVu8oeHEPbujxOid4WL4zlgx7uARsbxMKxJIuTLikCBR8cA//JCAXj+8NdYPPPwgSkrLUFOjm5SNEbBOVVVVFUVpF9hsNo3FYuFoAY4GOJ73cP39A1xnZxdHrs5ZrVaO/hk3aCzPbrffq6+vT/4Jbxyqk/4zObcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"layers-flutter\" title=\"\" src=\"/static/e573828a57114ffb881c32793600a246/13e20/layers-flutter.png\" srcset=\"/static/e573828a57114ffb881c32793600a246/772e8/layers-flutter.png 200w,\n/static/e573828a57114ffb881c32793600a246/e17e5/layers-flutter.png 400w,\n/static/e573828a57114ffb881c32793600a246/13e20/layers-flutter.png 741w\" sizes=\"(max-width: 741px) 100vw, 741px\">\n    </span>\n  </span>\n  \n  </a>\n    </td>\n</tr>\n<tr>\n<td>Qiitaの記事数とフォロワー数</td>\n<td>546記事、290人</td>\n<td>1501記事、741人<br/><small>タグが<code class=\"language-text\">reactnative</code>と<code class=\"language-text\">react-native</code>に分かれていたので実際はこれより多いかもしれません。</small></td>\n<td>1585記事、1155人</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"ionic\"><a href=\"#ionic\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ionic</h3>\n<p>👍 「現在世の中に広く普及しているWebの技術をつかって、1つのコードを書けばどこでも動くアプリ」というのがIonicのコンセプトにもなっているので、最大限Web開発の恩恵を受けることができます。SPAフレームワークやさまざまなHTML/CSS/JSライブラリ、Webを取り巻くエコシステム、チームで培ってきたWeb開発のやり方やノウハウ、これらを全て活かせますし、採用面においてもWeb開発のエンジニアを雇うことは、React NativeやFlutterのエンジニアを雇うより容易です。またフレームワークだけでなくCI/CD自動化やマーケットなども充実しており、企業向け有償サポートもあります。\nWeb開発をしてきた企業がモバイル開発に取り組む際は有力な選択肢の1つとなるでしょう。</p>\n<p>❌ WebViewのためレンダリングパフォーマンスに限界があります。ゲームなどを作る場合は他2つを検討したほうが良さそうです。</p>\n<p><small>📝ネイティブ機能の呼び出しに関しては、<a href=\"https://dev.to/rubensdemelo/flutter-react-native-ionic-and-native-platform-a-visual-guide-2ff8\">この記事</a>のMike Hartingtonさんのコメントいはく「アプリ起動時のCordovaプラグインのロードが遅いと言われていたが、Capacitorプラグインになってから解消されている」らしいです。</small></p>\n<h3 id=\"react-native\"><a href=\"#react-native\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React Native</h3>\n<p>👍 ネイティブのUIを使っているのでサクサク動きます。Reactの有識者であれば学習コストは低いです。Facebookをバックにした強大なコミュニティ、Instagramなど大手での採用事例も魅力です。日本語記事も多くあります。</p>\n<p>❌ 用意されていないオリジナルのUIを作る場合はNativeの知識（Swift/iOS Kotlin/Android）が必要です。あとReact Nativeは<code class=\"language-text\">JSスレッド &lt;===&gt; ブリッジ &lt;===&gt; ネイティブスレッド</code>のような仕組みで動作しますが、実装方法によってはJSスレッドに負荷がかかって遅くなることがあります。アニメーションにはとくに気を付けなければいけません。実際、パフォーマンスチューニング系の記事は多数あるのでハマりやすいポイントなのでしょう。</p>\n<h3 id=\"flutter\"><a href=\"#flutter\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Flutter</h3>\n<p>👍 ネイティブのUIを使わずに独自のレンダリングエンジンでGPUを使って描画しているためパフォーマンスがネイティブ並みかそれ以上です。Googleという強大なバック、Alibabaなどの大手での採用事例があります。</p>\n<p>❌ 2018年にv1.0がリリースで、まだ枯れていません。バージョンアップによる仕様変更もありえます。またFlutterで採用されているDartはまだあまり普及していない言語なので、学習コストがかかるうえに、独自のエコシステムを使う必要があります。採用面からみてもDart/Flatterエンジニアを雇うのは、他2つと比べて難しいでしょう。またUIがマテリアルデザイン固定なので、iOSユーザーからすると慣れないUIを使わされることになります。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>三者ともメリ・デメリがあってコンセプトも異なるので、自分たちの環境や重視する要素によってどれを選択するのかは変わってくると思います。Web開発に慣れ親しんだ私にとっては、学習コストが一番低いIonicでクロスプラットフォームアプリ開発を始めてみるのが良さそうだと感じました🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<p><strong>Ionic公式ブログ</strong></p>\n<ul>\n<li><a href=\"https://ionicframework.com/resources/articles/what-is-hybrid-app-development\">What is Hybrid App Development?</a></li>\n<li><a href=\"https://ionicframework.com/resources/articles/ionic-vs-react-native-a-comparison-guide\">Ionic vs. Everyone: Comparing Cross-Platform Frameworks</a></li>\n<li><a href=\"https://ionicframework.com/resources/articles/ionic-react-vs-react-native\">Ionic React vs React Native</a></li>\n<li><a href=\"https://ionicframework.com/resources/articles/ionic-vs-flutter-comparison-guide\">Ionic vs Flutter: A Comparison</a></li>\n</ul>\n<p><strong>その他</strong></p>\n<ul>\n<li><a href=\"https://codeburst.io/react-native-vs-ionic-vs-flutter-comparison-of-top-cross-platform-app-development-tools-71c8011309ac\">Medium: React Native vs. Ionic vs. Flutter: Comparison of Top Cross-Platform App Development Tools</a></li>\n<li><a href=\"https://dev.to/rubensdemelo/flutter-react-native-ionic-and-native-platform-a-visual-guide-2ff8\">Dev.to: Flutter, React Native, Ionic and Native platform: A visual guide</a></li>\n</ul>","fields":{"slug":"/ionic-summary-and-comparison-with-react-native-and-flutter-2020","title":"Ionicの全体像、React Native・Flutterとの比較 2020年5月","date":"2020-05-01T21:00:00.000-07:00","excerpt":"なにこれクロスプラットフォームアプリを開発する手段はいくつかありますが、とっつきやすそうなIonicについて調査しました。実装方法というよりは、全体像と、React Native・Flutterとの比較についてまとめています。Ionic概要...","tags":["Ionic","ReactNative","Flutter","Mobile"],"keywords":["Ionic"],"thumbnail":"thumbnail/2020/05/ionic-summary-and-comparison-with-react-native-and-flutter-2020.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>一時期いろんな勉強会に行きましたが、「勉強会に参加すると勉強している気になるだけで実際そうじゃない」ので最近はモクモク会にしか顔を出さなくなりました。\nその中でも<a href=\"https://shinjuku-moku.connpass.com/\">Shinjuku Mokumoku Programming</a>(通称「新宿もくもく」)にはほぼ毎週参加していた覚えがあります。\n僕は2019年6月に転勤で東京を離れてしまって行けなくなりましたが、一番お気に入りの勉強会だったので、この記事で紹介したいと思います。</p>\n<h2 id=\"必ず毎週開催される\"><a href=\"#%E5%BF%85%E3%81%9A%E6%AF%8E%E9%80%B1%E9%96%8B%E5%82%AC%E3%81%95%E3%82%8C%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>必ず毎週開催される</h2>\n<p><a href=\"https://shinjuku-moku.connpass.com/\">コンパスイベントページ</a></p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 612px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 122%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADyklEQVQ4y41V224iRxTkb5I/QELyu73A7n7g5iFaozxF+YLkD9aOBOZuC3Mzc78yt4Y+qWoYkxVRtCOVeobuOXNOVZ1DYzQa/S64qqqS9+sYiRRr+ZHreDxKWZbm/vX19Y/GZDL5lQ+B7xeOY6uiVMpe9NVq8Jd6XSwUDqn1eq2Wy6XabDbKti2121nqcDgoXlEUqTCMCsbAma+N4Wh0z4eHb9/UcDiUJInF9UJZby2ZTqcynU3Ftm1J01TiOJb9fi9ZlonWuk6SN4o3+HCvMR6PTcAkSRTLriolcRKK59kmUBgGEgEJgqVpYqjR+ihIsIZWqjIBV6tVr/Hy8nJ/5kKRj+NRS1GEkkSW7NNYyiKTOAqkKnMEK8wzUeR7ybOU0FmWngMuew2UZQKCWJXnOFgdJd4MJJz9Ka7riOf7EkaROI6LkhNTMgEOJc9z8X1fY0+dOew1RmcOB/2+Gj49Ga7e3rby8jwX0CHjyZgHxbIs2W63Zt3tdgI9apU1q7vicAk1Pc9DuYUh38aLOIDgbwIlze/M6Dt7/ZcodYZQTvGFWkWCQYhsn1E0g3qfZwnsa6zq7MNe4+/Hx3tmRK8xGyobBAG5MSsRhqHJmgG5EqyG5wENdU0ys9n8IkqBr/DrtI3rurJCuY7jvINBGYQrQUewfDSE9jz/Ypu65MeHB9Xv900WJH6xWAi6SCbTiaBDTMa27WD1jPJU+X85tHY7RfOyL01JsAwDWbYlIcomb6ygLIpTFHTKybdU+XAJ+Pz8/L2xD0fZ5ygrcoyhaeDAdyFMckF2gjF2vtf5v409n89NQHXqdcMLy6YYJxOnJjvuvQNn+PHa2OD22tjz2UwBJghLhWLAzAwH8klTwxZYN7LGPgOzbCSg2WVXokzGY7VCRzBgFMXiwD4MxC6hquT2h4yNLE4l49LYI4dJSh9ahrsUA8J1LDNxotDH1AnJm+HWDIoy12WRX0+bA0ShFVhKlnP2QVnwV5ZsueycCKApHLkuwe0ewoUaI+7CYd3LMLNyYWC2Gpt/sXg1vUyQP3bQdstOsuBT24jCj0NAzan9niGm9NezsaunwUDzAFTTCKRn06lGJ2kEM7+DS41phPmXa30a2TWqM4f3/E/p8SHFCzXLGJgQwmNbmSnNvwXah6VzWl+0OOGgKn0O+BsDfmH6KDWAinFZlHGUuLHn7WLfc2KIELu2ZVYCZr9CFAUBhYIevzRardbP7Xa7dXt727y7uzPotD82u93PwMfmhw/t5qdPn81KtNudZqfTbbY7HaB7An/rdls3Nzc//QP9oeBaZ857xgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"connpass event list\"\n        title=\"\"\n        src=\"/static/d4852b01a57efa0adb0f463d7654684b/8c76f/connpass-event-list.png\"\n        srcset=\"/static/d4852b01a57efa0adb0f463d7654684b/772e8/connpass-event-list.png 200w,\n/static/d4852b01a57efa0adb0f463d7654684b/e17e5/connpass-event-list.png 400w,\n/static/d4852b01a57efa0adb0f463d7654684b/8c76f/connpass-event-list.png 612w\"\n        sizes=\"(max-width: 612px) 100vw, 612px\"\n      />\n    </span>\n  </span>\n  を見るとわかりますが、週次で開催されています。\n勉強会のなかには開催が不定期で開催予定日を常にウォッチしておく必要がありますが、\n新宿もくもくはほぼ毎週欠かさず開催されるのでウォッチ不要です。\n自分の生活の一部として週一モクモク会参加を習慣化できます。</p>\n<h2 id=\"1回の時間が長い\"><a href=\"#1%E5%9B%9E%E3%81%AE%E6%99%82%E9%96%93%E3%81%8C%E9%95%B7%E3%81%84\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1回の時間が長い</h2>\n<p>朝11:00から夕方6:00と比較的長めです。\n途中にランチ、最後に成果発表がありますが、実質<strong>5時間</strong>は作業できます。\nせっかく来たならガッツリもくもくしたい！という人にピッタリです。</p>\n<h2 id=\"最初にやること宣言、最後に成果発表\"><a href=\"#%E6%9C%80%E5%88%9D%E3%81%AB%E3%82%84%E3%82%8B%E3%81%93%E3%81%A8%E5%AE%A3%E8%A8%80%E3%80%81%E6%9C%80%E5%BE%8C%E3%81%AB%E6%88%90%E6%9E%9C%E7%99%BA%E8%A1%A8\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>最初にやること宣言、最後に成果発表</h2>\n<p>まず勉強会の最初に、以下リポジトリに本日やることをプッシュして自己紹介を兼ねて各自宣言します。\nそして最後に、成果をプッシュして成果発表をします。\n成果発表では<a href=\"https://gitpitch.com/\">GitPitch</a>を使って2～3分程度みんなの前で発表します。\nこのような仕組みによって自分に適度なプレッシャーを与え、効率的に作業を進められます。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://github.com/shinjuku-mokumoku/shinjuku-mokumoku/tree/master/meetups\" data-iframely-url=\"//cdn.iframe.ly/WUoeQH0\"></a></div></div>\n<h2 id=\"ランチのお店がおいしい\"><a href=\"#%E3%83%A9%E3%83%B3%E3%83%81%E3%81%AE%E3%81%8A%E5%BA%97%E3%81%8C%E3%81%8A%E3%81%84%E3%81%97%E3%81%84\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ランチのお店がおいしい</h2>\n<p>午前中に勉強会Slackにて、ランチのお店の候補が提示されるので各自行きたいお店を選んで昼1:00になったらランチに行きます。\n候補は、寿司、和食、パスタ、カレー、中華などいろんなお店があって、どのお店もめっちゃおいしい料理が出てきます。</p>\n<p>午前中2時間もくもくして、おいしいランチを食べて、午後また集中してもくもくするといった流れです。\n立て込んでいる場合はランチに行かずに会場に残って作業することもできます。</p>\n<h2 id=\"おいしいコーヒ\"><a href=\"#%E3%81%8A%E3%81%84%E3%81%97%E3%81%84%E3%82%B3%E3%83%BC%E3%83%92\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>おいしいコーヒ</h2>\n<p>電源、Wifiはもちろん用意されているのですが、ウォーターサーバーとコーヒーサーバーもあります。\nコーヒーサーバーはちょっと高級なものらしく、とてもおいしいコーヒーが飲めます。</p>\n<h2 id=\"会場は代々木駅から徒歩１分、最近できた素敵なフロア\"><a href=\"#%E4%BC%9A%E5%A0%B4%E3%81%AF%E4%BB%A3%E3%80%85%E6%9C%A8%E9%A7%85%E3%81%8B%E3%82%89%E5%BE%92%E6%AD%A9%EF%BC%91%E5%88%86%E3%80%81%E6%9C%80%E8%BF%91%E3%81%A7%E3%81%8D%E3%81%9F%E7%B4%A0%E6%95%B5%E3%81%AA%E3%83%95%E3%83%AD%E3%82%A2\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>会場は代々木駅から徒歩１分、最近できた素敵なフロア</h2>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 63%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8AIt9b5SGeXxuYo19b31wYmRZTF1QQ3luYXBkWF1PQmteUllPRWBVS25iV2ddUmRbUWtjW3BtanFubW1qaQCVh3eZjX+RhXmjlIihkoeRgXWXiHqEd2twYlZ3aFluX1JhU0hmWU5rYFZoXlRoYFlmX1hsZV9wa2dvbW4Ajn9xiXpqiXxujX9xin9yj4R6loyCjYJ4h351joZ+h393g3pyfXVtd3BneHBod3Brb2pla2Vgc3JycHF0AIp9cIl8boZ3aIl7bYZ6boV5bYh+coZ+c4J6cYJ7c4B7dYF9e35+fHt4dImLj4+TnYeLkIKFiX2Bhnd7gADAvbjIxsOPg3iFdmiXjoWel5GFem+Ee3GOh4B/e3h8foJ+fXx9fHp6dnKDgoOPl6KPl6OIkJp/hYx6f4YA8fHv////sKujin5y29rX9Pb3koqBkYqC7evprLvJib3sh6XEe3l3eHVxe3d1j5eikpyoiZKcgIaNeX+GAODf2e/w67y5sZSNhcnIxfj5+KGemKCdmP/+/MDS4JXR+4uqzIiHhHx5dX99e5Ocp5KeqomSm3+GjXl+hgBcUEhiVk9fU0siHRwUEhRsZF0gHiA9ODZtZ2M0OUFfcoM0PEeNjIuLiISGhIGXoKyUn6yIkZt9hIx3fYQAQTQqPzEoOSwkKSAcKyEcMCQdIxsXKR8aJRsVJBsWLBwSNC4sn56el5WPkpCNn6i0lqO0iJCbe4GIdHp/AEc4L0c5L0AyKkE0LEAzKzktJ0Q2LTktJTwwKEA1KzQoIWNeW6yrp5qWj5eUjqexvp2vyIuWpXqDinF3ewBGNi1FNy0+MSk7Lyg8MCg4LSU8MSg1KiM4LiY9Myo6LiRfWleopqehm5aYkY2VmJ+Jlad8go9tcXhmZ2oAXEs8Yk9BXUxAXk9CW0tATkE4W0xBSjw0TD81TD40TT40Wk1FaWBecWhmc2tpb2dlamNhZl5cYVdVXFFQAHFeTmxZSmJOQlJANFI/NU49M1E+NU08Mkw7Mks6MEg4L08/NlVGPFZHPVhKQVxPSFxQSVtNSFhMRVZKRcheVnT1bph/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/7d91e83cc1cee4e7c723289ed8f39057/5a190/image.png\"\n        srcset=\"/static/7d91e83cc1cee4e7c723289ed8f39057/772e8/image.png 200w,\n/static/7d91e83cc1cee4e7c723289ed8f39057/e17e5/image.png 400w,\n/static/7d91e83cc1cee4e7c723289ed8f39057/5a190/image.png 800w,\n/static/7d91e83cc1cee4e7c723289ed8f39057/c1b63/image.png 1200w,\n/static/7d91e83cc1cee4e7c723289ed8f39057/2cefc/image.png 1400w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>勉強会の名前自体は「新宿もくもく」なんですが、開催場所は代々木です。\n会場提供は<a href=\"https://www.wantedly.com/companies/repro?aql=gaFxpXJlcHJv\">Repro</a>さん。\n2019年6月からは、オフィス拡張に伴い新設したフロアでやっているらしいです。\n僕は6月に転勤になって東京を離れてしまったのでフロア移動後の勉強会には参加していませんが、\n5月に工事中のフロアを見せてもらった時は、こんなに素敵な空間でもくもく会できるなんて！と思いました。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>みなさん是非、<a href=\"https://shinjuku-moku.connpass.com/\">新宿もくもく</a>に参加してみてください🍅</p>","fields":{"slug":"/shinjuku-mokumoku-programming","title":"もくもく会ならShinjuku Mokumoku Programmingがオススメ","date":"2019-06-23T09:00:00.000-07:00","excerpt":"なにこれ一時期いろんな勉強会に行きましたが、「勉強会に参加すると勉強している気になるだけで実際そうじゃない」ので最近はモクモク会にしか顔を出さなくなりました。その中でもShinjuku Mokumoku Programming(通称「新宿も...","tags":["勉強会"],"keywords":["勉強会"],"thumbnail":"thumbnail/2019/06/shinjuku-mokumoku-programming.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>自分専用のRSSリーダーを<a href=\"https://gatsbyjs.org\">Gatsby</a> + <a href=\"https://netlify.com\">Netlify</a> + <a href=\"https://zapier.com/\">Zapier</a>を使って作りました。Gatsbyビルド時にRSSとOGPを取得して、Webサイトに表示しています。\n今回はこのWebサイトのビルドの仕組みと、GatsbyビルドでRSS+OGPを取得する方法をご紹介します。</p>\n<p>サイトはコチラ↓</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://favorite-blogs.netlify.com//\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Ffavorite-blogs.netlify.com&key=0658bf78be97cafcf2b0b9f96c1270ee\"></a></div></div>\n<br/>\n<p>ソースはコチラ↓</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://github.com/Takumon/blog-rss\" data-iframely-url=\"//cdn.iframe.ly/B8twzEh\"></a></div></div>\n<br/>\n<h2 id=\"ビルドの仕組み\"><a href=\"#%E3%83%93%E3%83%AB%E3%83%89%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ビルドの仕組み</h2>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 106%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABcRAAAXEQHKJvM/AAADJElEQVQ4y6WVW3PTRhiG/dt70avedmhpO0Og0EIChCQOYAcfZNmSZVmWLB8U2zlgwKFTEgewSdI0+/TTyk5CJ1DaXnyzHu3q1fN+h3WKZoWrQgVlCC3eWhuMcmuMy1k+uEV5Zus9FZ+Lz/ztvdQnBX0TOg57dh7zl5/IL1zjlZmFrZCzeO8T76U+S9iymEQ9jF+zBGmb/fAlDELZMxPCfy3YsfjdjzBuuriLIVFuC3Y6mv6/CbYqTHs7mA+rrP6wzsvaSCy3/5/g22hANvOMhesL7FpD2P5SwlhgVjV1SfCwOyAMIqKwz7C6pwn5xxzOxS6Lxmvb5mgwoF3y2LV9oX0hRWl9JKhb6BJIKhZQbQfVqoqAc0EnceyVGHsW07AOu6GI+ahO7Xx/3glceielmvIgfw9Ky6icrF4hEd90mdaK9J6s0kk/4o35lH1pbuT8eWPLuUPrGUd1Q2CqM8LNBkoLPgTjPqpbg9W7qFvfg/x+H9aoLC3Sz6wwNDLQ80VUaDY9/XtnY4V9Oyf0TaF3RbAfcNxrspVd5TRqwLCHSi+iblwDITqql2gu/azJ4pS896siss5pp55QSp61ZRlToroIivLILfPozi2sOz/qKv7p5Dmr5UGsbKfvk/72G04kn9O6ySRwmDhFjtt1TgProihiX2lBIRx6Ntuj1+xUCsmsBhU9XrHlSdNhkHks+TR4XcqwXdzgg3zwpF3Tl4ee+Tjk0kgIRWDcDXjuuxw05VBfZrU5O9iymUiFh0aRUdlgr5znhSXUmTX262K364pVWwdSfSJPqiyJjCnpSf4GgbSQbAiBzonEgVeVvDn85li88+MPNpJWicVEIKZKwtO2U7pJGwZnckg9XoKb36GePkBJm9CpclDJMxG7Y6vAGyGcOIau8tnMqpqFth334fmkSB9RXIcHUtHl26jsMrh5Dqsmpw2TQ7vESaMiogVNwrwXPzvLkrO4EKrrJAkX668Ka9reQTXH2M5y0qoxKqxIaq4WvSCcr7GF+dr3mRpfy+rxh3+XY+eGvg8nxa90i3yZ4EeXg5B2hVQIiZLQhZCx1HN/xX/KX27fz4YdRTNFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"build flow\"\n        title=\"\"\n        src=\"/static/d3807cd064fa752ebfead37f471691c0/5a190/build-flow.png\"\n        srcset=\"/static/d3807cd064fa752ebfead37f471691c0/772e8/build-flow.png 200w,\n/static/d3807cd064fa752ebfead37f471691c0/e17e5/build-flow.png 400w,\n/static/d3807cd064fa752ebfead37f471691c0/5a190/build-flow.png 800w,\n/static/d3807cd064fa752ebfead37f471691c0/c1b63/build-flow.png 1200w,\n/static/d3807cd064fa752ebfead37f471691c0/29007/build-flow.png 1600w,\n/static/d3807cd064fa752ebfead37f471691c0/ccf3b/build-flow.png 2607w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>以下時系列で説明します。</p>\n<ul>\n<li>\n<p>Zapier</p>\n<ul>\n<li>ジョブで定義したRSSを監視</li>\n<li>RSSに更新があったらNetlifyビルドをトリガー</li>\n</ul>\n</li>\n<li>\n<p>Netlify</p>\n<ul>\n<li>ビルドでGitHubからGatsbyプロジェクトのリポジトリをフェッチ</li>\n<li>Gatsbyプロジェクトのビルドを実行</li>\n<li>Gatsbyプロジェクトのビルドの中で、設定ファイルに定義したRSSをフェッチ</li>\n<li>ビルドが終わったらCDNにホスティング</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"netlifyとgithubの連携\"><a href=\"#netlify%E3%81%A8github%E3%81%AE%E9%80%A3%E6%90%BA\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NetlifyとGitHubの連携</h3>\n<p>Netlify上でGitHubリポジトリをビルド＆ホストできるようにしておきます。\n連携はNelityのGUIで簡単にできます。</p>\n<h3 id=\"zapierとnetlifyの連携\"><a href=\"#zapier%E3%81%A8netlify%E3%81%AE%E9%80%A3%E6%90%BA\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ZapierとNetlifyの連携</h3>\n<p>RSSリーダーは「RSSが更新されたらビルドをトリガーする」ような仕組みが必要です。この仕組みはNetlifyとZapierで実現できます。\nZapierはいろんなサービスやアプリを連携させて自動化できるWebサービスで、Netlifyにも対応しています。\nZapierの画面上で、監視したいRSSをポチポチ登録すると「RSSが更新されたらNetlifyのビルドをトリガーする」が簡単に実現できます。</p>\n<h2 id=\"rss--ogp取得\"><a href=\"#rss--ogp%E5%8F%96%E5%BE%97\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RSS + OGP取得</h2>\n<p>さてビルドの仕組みを整えたので、次はGatsbyのビルドでRSSを取得する方法について説明します。</p>\n<p>どのRSSを引っ張ってくるかは、GitHubリポジトリに設定ファイルにて定義します（<a href=\"https://github.com/Takumon/blog-rss/blob/master/favorite-blog-rss.js\">実際の設定ファイル</a>）。\nただコレ、ZapierのジョブのRSS定義と二重管理になるのが難点です。Zapierのタスクがyamlで書けるようになったら一元管理できるかもですが...</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> striptags <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'striptags'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> cheerio <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cheerio'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> crypto <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"crypto\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> Parser <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rss-parser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> parser <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Parser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'something different'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG</span> <span class=\"token operator\">=</span> <span class=\"token string\">'blog'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG_POST</span> <span class=\"token operator\">=</span> <span class=\"token string\">'blogPost'</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// RSSのような外部リソースを</span>\n<span class=\"token comment\">// GatsbyでGraphQLのデータとして扱うためには</span>\n<span class=\"token comment\">// sorceNodeで処理する</span>\nexports<span class=\"token punctuation\">.</span>sourceNodes <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> createNodeId<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> cache <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> feeds <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// 設定ファイルかなにかしらの方法でRSSのURLを読み込む</span>\n  <span class=\"token keyword\">const</span> blogUrls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'rss-url-1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'rss-url-2'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> blogUrl <span class=\"token keyword\">of</span> blogUrls<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  \n    <span class=\"token comment\">// rss-parserでRSS情報を取得する</span>\n    <span class=\"token keyword\">const</span> feed <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> parser<span class=\"token punctuation\">.</span><span class=\"token function\">parseURL</span><span class=\"token punctuation\">(</span>blogUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>feed <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>feed<span class=\"token punctuation\">,</span>\n        items<span class=\"token punctuation\">:</span> feed<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>item <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          title<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n          excerpt<span class=\"token punctuation\">:</span> <span class=\"token function\">excerpt</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          content<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">,</span>\n          pubDate<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>pubDate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toISOString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          link <span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    feeds<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>feed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n\n  <span class=\"token comment\">// ブログごとにノード生成</span>\n  feeds\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>feed <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      title<span class=\"token punctuation\">:</span> feed<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n      description<span class=\"token punctuation\">:</span> feed<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">,</span>\n      link<span class=\"token punctuation\">:</span> feed<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span>\n      lastBuildDate<span class=\"token punctuation\">:</span> feed<span class=\"token punctuation\">.</span>lastBuildDate<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>b <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> contentDigest <span class=\"token operator\">=</span> crypto<span class=\"token punctuation\">.</span><span class=\"token function\">createHash</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`md5`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">digest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>b<span class=\"token punctuation\">,</span>\n        id<span class=\"token punctuation\">:</span> <span class=\"token function\">createNodeId</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">INTERNAL_TYPE_BLOG</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>b<span class=\"token punctuation\">.</span>link<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        parent<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`__SOURCE__`</span></span><span class=\"token punctuation\">,</span>\n        internal<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token punctuation\">:</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG</span><span class=\"token punctuation\">,</span>\n          contentDigest<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// RSSに加えて、OGPを取得</span>\n  <span class=\"token keyword\">const</span> rssPosts <span class=\"token operator\">=</span> feeds<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>feed <span class=\"token operator\">=></span> feed<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>a<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> rssPostsWithImageUrl <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Promise.allでやると503になるのでfor文を使う</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> p <span class=\"token keyword\">of</span> rssPosts<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> pWithImageUrl <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'something different'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>res <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token comment\">// 取得したHTMLからOGPを取得</span>\n      <span class=\"token keyword\">const</span> $ <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">let</span> imageUrl<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head meta'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> property <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'property'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'content'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>property <span class=\"token operator\">===</span> <span class=\"token string\">'og:image'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          imageUrl <span class=\"token operator\">=</span> content\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 記事情報にOGPのURLを追加</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>p<span class=\"token punctuation\">,</span>\n        imageUrl<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    rssPostsWithImageUrl<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>pWithImageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n\n  <span class=\"token comment\">// OGP画像のノードを生成</span>\n  <span class=\"token comment\">// 重複を考慮してユニークにしてから処理する</span>\n  <span class=\"token keyword\">const</span> imageUrls <span class=\"token operator\">=</span> <span class=\"token function\">_uniq</span><span class=\"token punctuation\">(</span>rssPostsWithImageUrl<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> p<span class=\"token punctuation\">.</span>imageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> p<span class=\"token punctuation\">.</span>imageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>imageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> imageUrl <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fileNode <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">createRemoteFileNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      url<span class=\"token punctuation\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n      cache<span class=\"token punctuation\">,</span>\n      store<span class=\"token punctuation\">,</span>\n      createNode<span class=\"token punctuation\">:</span> actions<span class=\"token punctuation\">.</span>createNode<span class=\"token punctuation\">,</span>\n      createNodeId<span class=\"token punctuation\">:</span> createNodeId<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'ThumbnailImage'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'link'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> fileNode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n  <span class=\"token comment\">// ブログ記事ごとのノード生成</span>\n  rssPostsWithImageUrl<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> contentDigest <span class=\"token operator\">=</span> crypto<span class=\"token punctuation\">.</span><span class=\"token function\">createHash</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`md5`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">digest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">const</span> excerpt <span class=\"token operator\">=</span> \n    actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>p<span class=\"token punctuation\">,</span>\n      id<span class=\"token punctuation\">:</span> <span class=\"token function\">createNodeId</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">INTERNAL_TYPE_BLOG_POST</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>p<span class=\"token punctuation\">.</span>link<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      parent<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`__SOURCE__`</span></span><span class=\"token punctuation\">,</span>\n      internal<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG_POST</span><span class=\"token punctuation\">,</span>\n        contentDigest<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// 記事要約は記事本文から抽出</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">excerpt</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">,</span> maxLength<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> rowText <span class=\"token operator\">=</span> <span class=\"token function\">striptags</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">,</span> <span class=\"token string\">'&lt;pre>'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/&lt;pre[\\s\\S]+?>[\\s\\S]+?&lt;\\/pre>/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/\\n/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/ /g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> rowText<span class=\"token punctuation\">.</span>length <span class=\"token operator\">>=</span> maxLength\n    <span class=\"token operator\">?</span> rowText<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> maxLength<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'...'</span>\n    <span class=\"token punctuation\">:</span> rowText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>OGP画像をGatsbyで扱う処理は今も参考にしてみてください。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"padding-bottom: 52.5%; padding-top: 120px;\"><a href=\"https://takumon.com/gatsby-image-of-remote-in-building-by-using-create-remote-file-node\" data-iframely-url=\"//cdn.iframe.ly/r1GTW3Y\"></a></div></div>\n<h3 id=\"リソース取得は間隔を置かないと503になる\"><a href=\"#%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E5%8F%96%E5%BE%97%E3%81%AF%E9%96%93%E9%9A%94%E3%82%92%E7%BD%AE%E3%81%8B%E3%81%AA%E3%81%84%E3%81%A8503%E3%81%AB%E3%81%AA%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リソース取得は間隔を置かないと503になる</h3>\n<p>ビルド時にRSSやらOGPやらを引っ張ってくるために、大量のリクエストを発行しますが、サイトによっては時間当たりのリクエスト上限に引っかかって503エラーになることがあります。\n対処法としては、<code class=\"language-text\">Promise.all</code>で一度にリクエストを投げずに、for文でリクエスト1つずつawaitしながら投げて、適度に間隔を開けるのが良いと思います。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>RSSリーダーのようなものをSPAだけで作ろうとすると、フロント側の高負荷処理で画面描画が遅くなってしまいますが、\nGatsbyを使えばビルド時に重い処理を流せるので、パフォーマンスの向上が期待できます。\nまた今回のように、NetlifyやZapierなど他サービスと連携することで、作れる静的サイトの幅も広がります。\nSPA(Single Page Application)でこのような静的サイトを作っている方は一度Gatsbyを導入してみてはいかがでしょうか🍅</p>","fields":{"slug":"/gatsby-rss-reader-with-netlify-and-zapier","title":"Gatsby + Netlify + ZapierでRSSリーダーを作る","date":"2019-06-18T10:00:00.000-07:00","excerpt":"なにこれ自分専用のRSSリーダーをGatsby + Netlify + Zapierを使って作りました。Gatsbyビルド時にRSSとOGPを取得して、Webサイトに表示しています。今回はこのWebサイトのビルドの仕組みと、Gatsbyビル...","tags":["Gatsby","Netlify","Zapier","RSS","gatsby-plugin-feed"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2019/06/gatsby-rss-reader-with-netlify-zapier.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://www.netlify.com/docs/form-handling/\">Netlify Forms</a>はNetlifyにホストしている静的サイトでお問い合わせフォームを作れる機能です。DBを用意しなくても、お問い合わせフォーム送信結果はNetlify側で保持しれくれます。Netlifyの管理画面からCSVダウンロードなども可能です。\nさらに<a href=\"https://zapier.com/\">Zapier</a>と連携すると、お問い合わフォームで入力したメールアドレス宛てに定型フォーマットのメールを送信できたりもします。\nそんな便利なNetlify Formsですが、ググっても、お問い合わせフォームを同期的に送信する簡単な方法しか実装サンプルを見つけられませんでした。そこで今回は以下のような実用的サンプルの実装方法をご紹介します。</p>\n<ul>\n<li>お問い合わせフォームにファイルアップロードを含む</li>\n<li>Reactを使う</li>\n<li>入力チェックに<a href=\"https://jaredpalmer.com/formik/\">Formik</a>を使う</li>\n<li><a href=\"https://github.com/axios/axios\">axios</a>で非同期にお問い合わせフォームを送信する</li>\n</ul>\n<h2 id=\"step1-ファイルアップロード--単純なhmlt--同期送信\"><a href=\"#step1-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--%E5%8D%98%E7%B4%94%E3%81%AAhmlt--%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.1 ファイルアップロード + 単純なHMLT + 同期送信</h2>\n<p>もっとも単純なパターン、こちら<a href=\"https://www.netlify.com/docs/form-handling/\">Netlifyの公式サイト</a>に書いてある情報を参考に実装します。</p>\n<div class=\"gatsby-code-title\">index.html</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- (中略) --></span>\n  <span class=\"token comment\">&lt;!-- name：Formの名前NetlifyのおけるFormの識別子となる --></span>\n  <span class=\"token comment\">&lt;!-- novalidate：Formikで入力チェックするためブラウザの入力チェックはオフ --></span>\n  <span class=\"token comment\">&lt;!-- data-netlify：NetlifyでFormを認識させるための属性 --></span>\n  <span class=\"token comment\">&lt;!-- netlify-honeypot：NetlifyでFormを認識させるための属性 --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span>\n    <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>POST<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>contact<span class=\"token punctuation\">\"</span></span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">novalidate</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">data-netlify</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">netlify-honeypot</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>bot-field<span class=\"token punctuation\">\"</span></span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">></span></span>\n</span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleFile<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token comment\">&lt;!-- 送信ボタン --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">></span></span>\n      SUBMIT\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!-- (中略) --></span></code></pre></div>\n<br/>\n<h2 id=\"step2-ファイルアップロード--react--同期送信\"><a href=\"#step2-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--react--%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.2 ファイルアップロード + React + 同期送信</h2>\n<p>次にReactの場合です。Reactの場合はフォーム情報に<code class=\"language-text\">bot-field</code>と<code class=\"language-text\">form-name</code>を付与する必要があります。\nこれらは<code class=\"language-text\">&lt;input type=&quot;hidden&quot;&gt;</code>で実装します。</p>\n<div class=\"gatsby-code-title\">SampleForm.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>  <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>form\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"contact\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formの名前NetlifyのおけるFormの識別子となる */</span><span class=\"token punctuation\">}</span>\n    method<span class=\"token operator\">=</span><span class=\"token string\">\"POST\"</span>\n    novalidate<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formikで入力チェックするためブラウザの入力チェックはオフ */</span><span class=\"token punctuation\">}</span>\n    data<span class=\"token operator\">-</span>netlify<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    netlify<span class=\"token operator\">-</span>honeypot<span class=\"token operator\">=</span><span class=\"token string\">\"bot-field\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>bot-field<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleFile<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* 送信ボタン */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      SUBMIT</span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">);</span></code></pre></div>\n<br/>\n<h2 id=\"step3-ファイルアップロード--react--formik--同期送信\"><a href=\"#step3-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--react--formik--%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.3 ファイルアップロード + React + Formik + 同期送信</h2>\n<p>Netlify Formsはサーバー側のバリデーション機能はないので、\n実際使うときはフロント側のバリデーションが必要です。\nここでは、Reactのバリデーションライブラリ<a href=\"https://jaredpalmer.com/formik/\">Fromik</a>を使ってバリデーションを追加します。</p>\n<p>入力チェックエラーメッセージ表示はコンポーネント化します。そのほうがすっきりするので。</p>\n<div class=\"gatsby-code-title\">ErrorMessage.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Field<span class=\"token punctuation\">,</span> getIn <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'formik'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Formikエラーメッセージ表示用コンポーネント</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Field</span>\n    <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> form <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> error <span class=\"token operator\">=</span> <span class=\"token function\">getIn</span><span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> touch <span class=\"token operator\">=</span> <span class=\"token function\">getIn</span><span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>touched<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      cosnt isShowError <span class=\"token operator\">=</span> touch <span class=\"token operator\">&amp;&amp;</span> error<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> isShowError\n        <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>error<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>入力フォームのコンポーネントはFormikの作法にしたがって以下を実装します。<br/></p>\n<ul>\n<li><code class=\"language-text\">initialValues</code>:入力フォーム初期値設定処理</li>\n<li><code class=\"language-text\">validate</code>: 入力チェック処理</li>\n<li><code class=\"language-text\">render</code>: 入力フォーム描画処理</li>\n</ul>\n<p>ただしファイルについてはFormikが用意している<code class=\"language-text\">Field</code>タグは<code class=\"language-text\">type=file</code>をサポートしていないので、HTMLの<code class=\"language-text\">input</code>タグでファイル変更時に手動でFormikにファイルを追加します。</p>\n<div class=\"gatsby-code-title\">SampleForm.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> navigate <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Formik<span class=\"token punctuation\">,</span> Field <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'formik'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ErrorMessage <span class=\"token keyword\">from</span> <span class=\"token string\">'./ErrorMessage'</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// フォームの値を初期化</span>\n<span class=\"token keyword\">const</span> initialValues <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">'form-name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'contact'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// NetlifyFormで必要な値</span>\n  <span class=\"token string\">'bot-field'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// NetlifyFormで必要な値</span>\n  sampleText<span class=\"token punctuation\">]</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  sampleFile<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// 入力チェック</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleValidate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> errors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// sampleText</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>values<span class=\"token punctuation\">.</span>sampleText<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    errors<span class=\"token punctuation\">.</span>sampleText <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`テキストを記入してください`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// sampleFile</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>values<span class=\"token punctuation\">.</span>sampleFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    errors<span class=\"token punctuation\">.</span>sampleFile <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`ファイルを添付してください`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">.</span>sampleFile<span class=\"token punctuation\">.</span>size <span class=\"token operator\">></span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    errors<span class=\"token punctuation\">.</span>sampleFile <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`100MB以下のファイルを添付してください`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> errors<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// Form描画処理</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renderForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  dirty<span class=\"token punctuation\">,</span>\n  isSubmitting<span class=\"token punctuation\">,</span>\n  setFieldValue<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>form\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"contact\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formの名前NetlifyのおけるFormの識別子となる */</span><span class=\"token punctuation\">}</span>\n    method<span class=\"token operator\">=</span><span class=\"token string\">\"POST\"</span>\n    novalidate<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formikで入力チェックするためブラウザの入力チェックはオフ */</span><span class=\"token punctuation\">}</span>\n    data<span class=\"token operator\">-</span>netlify<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    netlify<span class=\"token operator\">-</span>honeypot<span class=\"token operator\">=</span><span class=\"token string\">\"bot-field\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Field</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>bot-field<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Field</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Field</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ErrorMessage</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* FormikのFieldタグではなくHTMLのinputタグを使う */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span>input\n      id<span class=\"token operator\">=</span><span class=\"token string\">\"sampleFile\"</span>\n      name<span class=\"token operator\">=</span><span class=\"token string\">\"sampleFile\"</span>\n      type<span class=\"token operator\">=</span><span class=\"token string\">\"file\"</span>\n      <span class=\"token punctuation\">{</span><span class=\"token comment\">/* ファイル変更時に、手動でFormikの値に設定 */</span><span class=\"token punctuation\">}</span>\n      onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>event <span class=\"token operator\">=></span> <span class=\"token function\">setFieldValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sampleFile\"</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ErrorMessage</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sampleFile<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* 送信ボタン */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">disabled</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>isSubmitting<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span> isSubmitting <span class=\"token operator\">?</span> <span class=\"token string\">'SUBMITTING...'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'SUBMIT'</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n);\n\n\n// Form用Reactコンポーネント\nexport default () =>  (\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Formik</span>\n    <span class=\"token attr-name\">initialValues</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>initialValues<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">validate</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleValidate<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>renderForm<span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n);</span></code></pre></div>\n<br />\n<h2 id=\"step5-ファイルアップロード--react--formik--非同期送信axios\"><a href=\"#step5-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--react--formik--%E9%9D%9E%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1axios\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.5 ファイルアップロード + React + Formik + 非同期送信(Axios)</h2>\n<p>Reactを使っている場合、SPAなので同期通信は極力控えたほうが良いです。\nそのため入力フォームの送信も非同期でやるのが現実的でしょう。\nここでは、<code class=\"language-text\">Formik</code>の<code class=\"language-text\">onSubmit</code>でAxiosを使ってお問い合わせフォームを非同期送信する例を示します。<br/>\n<code class=\"language-text\">Formik</code>タグは<code class=\"language-text\">onSubmit</code>プロパティでサブミット処理を自分で定義できます。\nこの<code class=\"language-text\">onSubmit</code>にて、axiosを使うことで非同期処理が可能です。<br/></p>\n<p><small>大半は前セクションと同じなので差分にフォーカスして説明します</small></p>\n<p>エラーメッセージ用コンポーネントは前回と同じなので割愛します。</p>\n<p>以下フォーム用コンポーネントです。</p>\n<div class=\"gatsby-code-title\">SampleForm.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> navigate <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Formik<span class=\"token punctuation\">,</span> Field <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'formik'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ErrorMessage <span class=\"token keyword\">from</span> <span class=\"token string\">'./ErrorMessage'</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">\"axios\"</span><span class=\"token punctuation\">;</span>\n</span>\n<span class=\"token comment\">// フォームの値を初期化</span>\n<span class=\"token comment\">/* (略) */</span>\n\n<span class=\"token comment\">// 入力チェック</span>\n<span class=\"token comment\">/* (略) */</span>\n\n<span class=\"token comment\">// サブミット処理</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// FormData作成</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span>  params <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'form-name'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'form-name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// for Netlify Forms</span>\n</span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bot-field'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'bot-field'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// for Netlify Forms</span>\n</span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sampleText'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'sampleText'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sampleFile'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'sampleFile'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// Formikの送信中フラグをオンにする</span>\n</span><span class=\"gatsby-highlight-code-line\">  actions<span class=\"token punctuation\">.</span><span class=\"token function\">setSubmitting</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// axiosで非同期にお問い合わせフォームを送信</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    method<span class=\"token punctuation\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"Content-Type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"application/x-www-form-urlencoded\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    data<span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">,</span>\n</span><span class=\"gatsby-highlight-code-line\">    url<span class=\"token punctuation\">:</span> <span class=\"token string\">\"/\"</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>res <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// フォーム送信完了後</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// 他画面に遷移（同期遷移ではなくSPAとしての遷移）</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/application-complete'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// フォーム内容初期化</span>\n</span><span class=\"gatsby-highlight-code-line\">    actions<span class=\"token punctuation\">.</span><span class=\"token function\">resetForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// 最後にFormikの送信中フラグをオフにする</span>\n</span><span class=\"gatsby-highlight-code-line\">    actions<span class=\"token punctuation\">.</span><span class=\"token function\">setSubmitting</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span>err <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// なにかしらエラーハンドリング</span>\n</span><span class=\"gatsby-highlight-code-line\">    actions<span class=\"token punctuation\">.</span><span class=\"token function\">setSubmitting</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">\n</span>    <span class=\"token comment\">/* (中略) */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// Form描画処理</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renderForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  handleSubmit<span class=\"token punctuation\">,</span>\n  dirty<span class=\"token punctuation\">,</span>\n  isSubmitting<span class=\"token punctuation\">,</span>\n  setFieldValue<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>form\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"contact\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formの名前NetlifyのおけるFormの識別子となる */</span><span class=\"token punctuation\">}</span>\n    method<span class=\"token operator\">=</span><span class=\"token string\">\"POST\"</span>\n    novalidate<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formikで入力チェックするためブラウザの入力チェックはオフ */</span><span class=\"token punctuation\">}</span>\n    data<span class=\"token operator\">-</span>netlify<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    netlify<span class=\"token operator\">-</span>honeypot<span class=\"token operator\">=</span><span class=\"token string\">\"bot-field\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* (中略) */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// Form用Reactコンポーネント</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>  <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Formik</span>\n    <span class=\"token attr-name\">initialValues</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>initialValues<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">validate</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleValidate<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>renderForm<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br />\n<p>これでようやくNetlify FormsにおいてReactを使って非同期でファイルアップロードできるようになりました！</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>自分の復習も兼ねてステップごとに実装方法をご紹介しました。\nAngularとVueで実装する場合も今回紹介した実装と似たような感じになると思います。\n参考にしてみてください🍅</p>","fields":{"slug":"/async-file-upload-in-netlify-forms-with-react-formik-axios","title":"Netlify Formsでファイルを非同期アップロード with React + Formik + Axios","date":"2019-06-01T22:00:00.000-07:00","excerpt":"なにこれNetlify FormsはNetlifyにホストしている静的サイトでお問い合わせフォームを作れる機能です。DBを用意しなくても、お問い合わせフォーム送信結果はNetlify側で保持しれくれます。Netlifyの管理画面からCSVダ...","tags":["Netlify","NetlifyForms","React","Fromik","Axios"],"keywords":["Netlify"],"thumbnail":"thumbnail/2019/06/async-file-upload-in-netlify-forms-with-react-formik-axios.png"}},{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Gatsbyで画像を扱う場合<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-image\">gatsby-image</a>を使うとイイ感じに最適化してくれます。\nWebサイトのリポジトリ内の画像については<code class=\"language-text\">gatsby-config.js</code>で簡単に設定できますが、<strong>今回はビルド時に動的に取得する外部画像に対して設定する方法をご紹介します。</strong></p>\n<h2 id=\"実装方法\"><a href=\"#%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装方法</h2>\n<h3 id=\"step1-外部画像ファイルノード生成\"><a href=\"#step1-%E5%A4%96%E9%83%A8%E7%94%BB%E5%83%8F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%8E%E3%83%BC%E3%83%89%E7%94%9F%E6%88%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step1. 外部画像ファイルノード生成</h3>\n<p>Gatsbyの<a href=\"\">gatsby-source-filesystem</a>では、外部画像を扱うためのAPI(<code class=\"language-text\">createRemoteFileNode</code>)が用意されています。\nコチラを<code class=\"language-text\">gatsby-node.js</code>の<code class=\"language-text\">sourceNodes</code>で呼び出せば外部画像にgatsby-imageを適用できます。\nあと、ちょっとしたハックとして、Reactコンポーネント側で他ファイルノードと区別できるように、ノード生成時に識別子を付けましょう。これは後述する外部画像表示用コンポーネントで使うためのものです。</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createRemoteFileNode <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// sourceNodesにて外部画像のファイルノードを作成する</span>\nexports<span class=\"token punctuation\">.</span>sourceNodes <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> createNodeId<span class=\"token punctuation\">,</span> cache<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* (中略) */</span>\n\n  <span class=\"token comment\">// ここでは外部画像のURLの配列を処理するサンプルを示す</span>\n  <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>sampleImageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> sampleImageUrl <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// createRemoteFileNodeで外部の画像のファイルノードを作成する</span>\n    <span class=\"token keyword\">const</span> fileNode <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">createRemoteFileNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      url<span class=\"token punctuation\">:</span> sampleImageUrl<span class=\"token punctuation\">,</span>\n      cache<span class=\"token punctuation\">,</span>\n      store<span class=\"token punctuation\">,</span>\n      createNode<span class=\"token punctuation\">:</span> actions<span class=\"token punctuation\">.</span>createNode<span class=\"token punctuation\">,</span>\n      createNodeId<span class=\"token punctuation\">:</span> createNodeId<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 他ファイルノードと区別するための識別子を付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'SampleImage'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// メタ情報として画像のURLを付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'link'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> sampleImageUrl<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> fileNode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3 id=\"step2-外部画像表示用reactコンポーネント作成\"><a href=\"#step2-%E5%A4%96%E9%83%A8%E7%94%BB%E5%83%8F%E8%A1%A8%E7%A4%BA%E7%94%A8react%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E4%BD%9C%E6%88%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step2. 外部画像表示用Reactコンポーネント作成</h3>\n<p>外部画像のファイルノードを生成できたら、\n今度はReactコンポーネント側で、それに<code class=\"language-text\">gatsby-iamge</code>を適用して表示します。\nGraphQLのクエリで、ファイルノードを生成時に付与した識別子を使い、すべてのファイルノードから外部画像だけを抽出するようにしましょう。</p>\n<div class=\"gatsby-code-title\">sample-image.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> GatsbyImage <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-image'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> StaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// OGP画像のURLを引数に取る</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> url <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n</span>  <span class=\"token operator\">&lt;</span>StaticQuery\n    query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>graphql<span class=\"token template-string\"><span class=\"token string\">`\n      query {\n        allFile(\n          # Gatsby Buildで付与した識別子をもとに\n          # 全ファイルからOPG画像のみ抽出\n          filter: {fields: {SampleImage: {eq: \"true\"}}}\n        ){\n          edges {\n            node {\n              childImageSharp {\n                resolutions {\n                  ...GatsbyImageSharpResolutions\n                }\n              }\n              id\n              fields {\n                # 一応メタ情報も取得する\n                SampleImage\n                link\n              }\n            }\n          }\n        }\n      }\n    `</span></span><span class=\"token punctuation\">}</span>\n    render<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// OGP画像リストの中から、コンポーネント引数で指定したURLの画像を抽出する</span>\n</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> targetEdge <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allFile<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>edge <span class=\"token operator\">=></span> edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>link <span class=\"token operator\">===</span> url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>\n      <span class=\"token comment\">// 画像が取得できた場合のみgatsby-imageのコンポーネントを返す</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        targetEdge <span class=\"token operator\">&amp;&amp;</span> targetEdge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>childImageSharp\n          <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>GatsbyImage</span> <span class=\"token attr-name\">resolutions</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>targetEdge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>childImageSharp<span class=\"token punctuation\">.</span>resolutions<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n          <span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"step3-上記で作成したコンポーネントの呼び出し\"><a href=\"#step3-%E4%B8%8A%E8%A8%98%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step3. 上記で作成したコンポーネントの呼び出し</h3>\n<p>最後に上記コンポーネントの呼び出します。以下のように外部画像のURLを指定してあげましょう。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SampleImage</span> <span class=\"token attr-name\">url</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>SampleImageUrl<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<br/>\n<p>これで外部画像に<code class=\"language-text\">gatsby-image</code>を適用してイイ感じに表示できます！</p>\n<h2 id=\"例：webサイトurlからogp画像を取得する場合\"><a href=\"#%E4%BE%8B%EF%BC%9Aweb%E3%82%B5%E3%82%A4%E3%83%88url%E3%81%8B%E3%82%89ogp%E7%94%BB%E5%83%8F%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>例：WEBサイトURLからOGP画像を取得する場合</h2>\n<p>実用的な例として、複数のWebサイトのOGP画像を<code class=\"language-text\">gatsby-image</code>として扱う方法をご紹介します。</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> cheerio <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cheerio'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createRemoteFileNode <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// sourceNodesにて外部画像のファイルノードを作成する</span>\nexports<span class=\"token punctuation\">.</span>sourceNodes <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> createNodeId<span class=\"token punctuation\">,</span> cache<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* (中略) */</span>\n\n\n  <span class=\"token comment\">// WEBサイトURLからHTMLを取得してOGPを抽出</span>\n  <span class=\"token keyword\">const</span> ogpImageUrls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Promise.allで処理するとリクエスト多可で503になるのでfor文で一件ずつ処理する</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> postUrl <span class=\"token keyword\">of</span> postUrls<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>postUrl<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'something different'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// cheerioを使ってHMTLからOGP画像URLを抽出</span>\n    <span class=\"token keyword\">let</span> ogpImageUrl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> $ <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head meta'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> property <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'property'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'content'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>property <span class=\"token operator\">===</span> <span class=\"token string\">'og:image'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        ogpImageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>ogpImageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 取得したOGP画像URLをもとにファイルノードを生成</span>\n  <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>ogpImageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> imageUrl <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fileNode <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">createRemoteFileNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      url<span class=\"token punctuation\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n      cache<span class=\"token punctuation\">,</span>\n      store<span class=\"token punctuation\">,</span>\n      createNode<span class=\"token punctuation\">:</span> actions<span class=\"token punctuation\">.</span>createNode<span class=\"token punctuation\">,</span>\n      createNodeId<span class=\"token punctuation\">:</span> createNodeId<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 他ファイルノードと区別するための識別子を付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'OgpImage'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// メタ情報として画像のURLを付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token string\">'link'</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> fileNode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>Reactのコンポーネントの定義、呼び出し側定義は<a href=\"#%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95\">実装方法</a>で紹介した内容とほぼ同じなので割愛します。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回の方法を使えば、外部から画像をかき集めてリッチなWebサイトを構築する場合でも、Gatsby側でブラウザ表示を最適化してくれて、画面表示が遅くなる心配もありません。\n是非参考にしてみてください🍅</p>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://www.wildsmithstudio.com/blog/remote-images-with-gatsby/\">Wrangling remote images with Gatsby</a></li>\n<li><a href=\"https://stackoverflow.com/questions/52612936/gatsby-fetching-remote-images-with-createremotefilenode\">graphql - Gatsby - fetching remote images with createRemoteFileNode - Stack Overflow</a></li>\n</ul>","fields":{"slug":"/gatsby-image-of-remote-in-building-by-using-create-remote-file-node","title":"Gatsbyにおける外部取得画像へのgatsby-image適用方法","date":"2019-06-01T21:30:00.000-07:00","excerpt":"なにこれGatsbyで画像を扱う場合gatsby-imageを使うとイイ感じに最適化してくれます。Webサイトのリポジトリ内の画像についてはgatsby-config.jsで簡単に設定できますが、今回はビルド時に動的に取得する外部画像に対し...","tags":["Gatsby","gatsby-image"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2019/06/gatsby-image-of-remote-in-building-by-using-create-remote-file-node.png"}}],"previous":{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>以前の記事<a href=\"graphpack-graphql-zero-config-server\">設定いらずのNode製GraphQLサーバー「Graphpack」の使い方</a>でGraphQLのサーバー側を実装を紹介しました。\nGraphpackは備え付けの<a href=\"https://github.com/prisma/graphql-playground\">GraphQL Playground IDE</a>で動作確認できますが、せっかくなので今回はクライアント側も作成してみました。\n本記事では<strong><a href=\"https://ja.nuxtjs.org/\">Nuxt.js</a>と<a href=\"https://www.apollographql.com/docs/react/api/apollo-client.html\">Apollo Client</a>を使って簡単なユーザー管理画面を作成する方法をチュートリアル形式でご紹介します。</strong><br/>\n最終的にはQuery, Mutation, Subscription全てを実装しますが、\n以下のようにステップを分けて、少しずつ実装していきましょう✨</p>\n<ul>\n<li><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\">🔰 プロジェクトのひな型を作成する</a></li>\n<li><a href=\"#query%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💪 Queryを実装する</a> → ユーザー情報が一覧で表示できる</li>\n<li><a href=\"#mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💖 Mutationを実装する</a> → ユーザーの登録・更新・削除ができる</li>\n<li><a href=\"#subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💎 Subscriptionを実装する</a> → 他ブラウザとリアルタイムでユーザー情報が同期する</li>\n</ul>\n<p>完成イメージ\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 534px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACo0lEQVQ4y52T204acRDGV+2tN76CT1BvjCY+ju1FL3rVpzGEEKMX0kbDRbGmbcqpKTaiAVrksMAe2TOgnOS/8HX+a1AwTdt0ki9kJrs/Zr6ZFdbW1nY3NzejOzs74e3t7ci8tra2IlSPrK+vRwRB+JPCpCPSK2H35YvDfKWEfD4PUayj2WyQmoHq9TparRbC4TA2Np5jdXUVS0tLeLaygpXfaXn5WDg7O9uzHRuapg1LpRJTNT2QompMUhTWMqwg/3b+naUzX1kylWapdIalMo9KpjOj3OUVom/f7QvJRCJUrVRRKBSZbVlwXJfkwXZcuPTbvblBfzDAeMzAfB88JtMpxuw+D8R8xus1UTwQ4vH3IcMwCZhnzaaE+ZhMJrjpdjAcDYN8SqBatYrb295DzsP3WQAUOTCRTIR44tgWKxZ/wCfI3WiEwXCATqeDuliDYZoYUW08HuO6VIKu63AcB57nod1uc3AAbDQaB4Io1kJTgmiqyjhgOBzCNAzIsgTLtoKXNVWDQTXPa+PubgxFlpHJZPCzdL9MikdgsVAI8Y5lRWV8dFVVYVk2ySJAB7ymGzr44trkL/dUVRVcXFygWquhXC4vAsvX18HIrusy0zTQlGS4NIqiyWjpGiTqRtEVAuvw2h76vR6/CFxdXXLPUKlUFoGJL59DPXqIWmfcq2j0CKfx04elcOPnNav7tN2ZFjxMJZMhRiOTR0ysVWl0OVgGr/EXn8YM+qT2CEwmkiHPc7kX7Pw8S19HI/Cw3+8H/z6DzHf4tOsF4IfT+N4tjUxnMKJFkI8mcxyXDQYDulmf8Yf/JppkxIH0qe4L6VTqkCcEIsP7wbn8b0iSdCxks9nXtm1/ons7IR9jpmHGHNuJ0cHG6HD/SXQhJ91u92Mul3vzC1hCARcadoS1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-4\"\n        title=\"\"\n        src=\"/static/5454a20a76b75a63cafbfdaec4944a08/a07a7/project-image-4.png\"\n        srcset=\"/static/5454a20a76b75a63cafbfdaec4944a08/772e8/project-image-4.png 200w,\n/static/5454a20a76b75a63cafbfdaec4944a08/e17e5/project-image-4.png 400w,\n/static/5454a20a76b75a63cafbfdaec4944a08/a07a7/project-image-4.png 534w\"\n        sizes=\"(max-width: 534px) 100vw, 534px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>完成品はGitHubに置いております。躓いたときは参考にしてください。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"\" data-iframely-url=\"//cdn.iframe.ly/HQ2E77R\"></a></div></div>\n<h2 id=\"プロジェクトのひな型を作成する\"><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プロジェクトのひな型を作成する</h2>\n<ul>\n<li>create-nuxt-appで雛形を作成します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx create-nuxt-app client</code></pre></div>\n<br/>\n<ul>\n<li>何個か質問されるので以下のように答えます。<code class=\"language-text\">Author name</code>は読み替えてください。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">? Project name client\n? Project description My amazing Nuxt.js project\n? Use a custom server framework none\n? Choose features to install\n? Use a custom UI framework none\n? Use a custom test framework none\n? Choose rendering mode Single Page App\n? Author name Takumon\n? Choose a package manager npm</code></pre></div>\n<br/>\n<ul>\n<li>アプリを起動しましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd client\nnpm run dev</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">http://localhost:3000</code>にアクセスして以下の画面が表示されればOKです。</li>\n</ul>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACTUlEQVQ4y61TzWsTQRTfPyD/gVcPIoR6kFjwrkfBsyB6ELR6zE0bCQhaCBW6FUqhFhHSUg+KiSal3eDBgl78QNDShpoSs7W2+djvzc7Ozze7m7BEYiP44Ddv5r03v3lv3ox0e/LORiaTWSMo2WxWSafTSiKRUCRJGgnJZHJ9fPxMJZVKlY+PnZqQDNOEqqpottqEFg4Om8gvLWNGliHPzg7FjCz0I8zNz0Om2Fwuh8s3b01LIDEMw7Vtm1mWxRzXZWT6V3CC9ay8+iAgjIx98RkDI3ieF4Ry5qNLcxbZByDIhN/JFwpTAaHv+4xzjjh87gfk1c5PaJ6NKA6DcVwMJB5jzlKhGBKSLciQh/M+hNx4v4DrpTl8qm6HpfjhQT1/j5AJwuIAYU96m0r1jzhbuouxq1dwaeoeeOTvkR1JGJYaBu+ZLZyr3MeJyWs4efoijp2/AHn1Rf/AkTKME251VCxW3+DpqzKeLBewuPISz9+97d/tyISI3Z+nueA+jxrCwVyvTzbYlD8I4/cipK3p2Nyp4fPXLXzb/o4PXzax29jDoPw1Qy94e+Jt+XC7XZiWTdoL5l3SAsInYgSGZijeYfBjTAuttgZNN0nrATodAzqtD5saaSvw/TpoB+uI6+iSRRdt14Xp2DBsytLrwrYd6IYJ+prxhgzN0BWkfkjMqHSm079uahpr6TqzXYdR+YyyZ0RM54VxsT2crsDKF4r9v/xfZOV1aVr6sb+/UWs01nYbqhJAVZVaQ6ARQ9wWxUWg9TrtqezU6+WHC48nfgNALr8PAswu2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-1\"\n        title=\"\"\n        src=\"/static/8683d513dabb23a5d6a660ace450aff3/5a190/project-image-1.png\"\n        srcset=\"/static/8683d513dabb23a5d6a660ace450aff3/772e8/project-image-1.png 200w,\n/static/8683d513dabb23a5d6a660ace450aff3/e17e5/project-image-1.png 400w,\n/static/8683d513dabb23a5d6a660ace450aff3/5a190/project-image-1.png 800w,\n/static/8683d513dabb23a5d6a660ace450aff3/d9217/project-image-1.png 904w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<ul>\n<li>次にApollo Clientを導入します。<a href=\"https://www.npmjs.com/package/@nuxtjs/apollo\">@nuxtjs/apollo</a>をインストールしましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i @nuxtjs/apollo</code></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">nuxt.config.js</code>に以下設定を追加します。</li>\n</ul>\n<div class=\"gatsby-code-title\">nuxt.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n  modules<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'@nuxtjs/apollo'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    clientConfigs<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Graphpack側のエンドポイントを指定します。</span>\n        httpEndpoint<span class=\"token punctuation\">:</span> <span class=\"token string\">'http://localhost:4000/graphql'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Subscription用にWebSocketの設定も追加します。</span>\n        wsEndpoint<span class=\"token punctuation\">:</span> <span class=\"token string\">'ws://localhost:4000/graphql'</span><span class=\"token punctuation\">,</span>\n        websocketsOnly<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> \n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>これで準備は整いました。\n次からは本格的な実装に入っていきます。</p>\n<h2 id=\"queryを実装する\"><a href=\"#query%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Queryを実装する</h2>\n<h3 id=\"実装\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー情報取得用のクエリ<code class=\"language-text\">apollo/queries/getUsers.gql</code>を作成します。今回は<code class=\"language-text\">apollo/queries</code>配下にgqlファイルを作成することにします。</li>\n</ul>\n<div class=\"gatsby-code-title\">apollo/queries/getUsers.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> GetUsers <span class=\"token punctuation\">{</span>\n    users <span class=\"token punctuation\">{</span>\n        id\n        name\n        email\n        age\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<ul>\n<li>次に<code class=\"language-text\">pages/index.vue</code>を修正します。ここでは<a href=\"https://github.com/Akryum/vue-apollo/blob/master/docs/api/smart-query.md\">SmartQuery</a>を使い、コンポーネントにapolloオブジェクトを定義してApollo Clientを呼び出す方法を使います。 <small>※今回デザインは一切気にしないので<code class=\"language-text\">&lt;style&gt;～&lt;/style&gt;</code>の部分を削除しています。</small></li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vue</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>table<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token constant\">ID</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>名前<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>メール<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>年齢<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>tr v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"item in users\"</span> <span class=\"token punctuation\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.id\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> getUsersGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/queries/getUsers.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<h3 id=\"動作確認\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<h4 id=\"サーバー側起動\"><a href=\"#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E5%81%B4%E8%B5%B7%E5%8B%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>サーバー側起動</h4>\n<ul>\n<li>\n<p>GraphQLサーバを起動します。以下2通り、お好きなほうで起動してください。</p>\n<ul>\n<li>\n<p>サーバー側を作成する</p>\n<ul>\n<li><a href=\"graphpack-graphql-zero-config-server\">以前のGraphpackの記事</a>にしたがって作成</li>\n<li>作成したアプリに移動</li>\n<li><code class=\"language-text\">npm run dev</code></li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://github.com/Takumon/nuxt-graphpack-sample\">本記事のサンプルコード</a>を使う</p>\n<ul>\n<li><code class=\"language-text\">git clone https://github.com/Takumon/nuxt-graphpack-sample.git</code></li>\n<li><code class=\"language-text\">cd nuxt-graphpack-sample/server</code></li>\n<li><code class=\"language-text\">npm i</code></li>\n<li><code class=\"language-text\">npm run dev</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>GraphQLサーバーの起動確認をします。<code class=\"language-text\">http://localhost:4000/</code>にアクセスして以下のクエリを発行しユーザー情報が返ってくればOKです。</li>\n</ul>\n<div class=\"gatsby-code-title\">サーバー動作確認用クエリ</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  users <span class=\"token punctuation\">{</span>\n    id\n    name\n    email\n    age\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 78.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACh0lEQVQ4y52Uy27TQBSG/QoxSezUl1ycm2PHThw3iZukqahXREjs2bJFbFmiVrBCqNC0pa4Ej0EbqU1dFlWFxLuAugFGPpyx09SNUhYsfp0ZT86X/5/jhHn+9Nm7o4OPV+O98dTzPH97a9svKorPsqyfSqX8VDJ5v/CcTST8arV6PhqNLlzXPWE877N/9e07TM4u4OziEk5Ofdj3PsHO+BA+7Hv/1Pu9w1C7B0ews3sAW6/fBEyu+/hYabuQLpq/WblMEmKRrJTrKIPwRQ2lE17RSLpQm+21cJ8p6USsmOFnhYpBhLIRyJr1kxFVe6JY65Bv9AgKJL0DWcMBSWtDutQIxVes8DlXac0l4HmhOQDZWKM1KLbWIWf0rplUXpusaF3IVFuELzchg81UdE2VyGmwuvEIXrx8BVnTgQI2SmYfJKMPgtEDMVIg6GsgO8NrJp3XJxm9DbzWIlzRpNHn4tBdSjEAU0DNcUFu9CFrY8VEEq4jcI+uA0F1QH0yihxmNBt4wyZpJYLcKA7l1XbU3HIh23GpG5C7Q5DsEB5Qx6LVR2ABHVZt2kzisDmUVgSLdQcd4p1ZGwgY4j6KS13SyGGt4x0m87UJvfQb4I2rRaeCjoMyeyC3NkFuPwS5g+5W0R0OBmHBDHwXuAx2C+yGbkKgvYnRB1FcWhv3AJfB4kAaedYYRa7fTvk/gM4cFk43JtGMA3MxII288OqkS+adyOLtuxdX3KF2zJctOs1fKELFLYh+GTokUmNAsHGZ/tDBoNMf6FD9Sl8bGi36dVjAYeVKM4Xrxp3Iy0TPaAoG/xDeciXjki/VTwW1Oc3VV6d4r1M2W52yubjU6QMUu6DZs7NkQTtHzpe/Ik/mSq0GcCYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"server-image-1\"\n        title=\"\"\n        src=\"/static/45799f178c13308357e838cda5402668/5a190/server-image-1.png\"\n        srcset=\"/static/45799f178c13308357e838cda5402668/772e8/server-image-1.png 200w,\n/static/45799f178c13308357e838cda5402668/e17e5/server-image-1.png 400w,\n/static/45799f178c13308357e838cda5402668/5a190/server-image-1.png 800w,\n/static/45799f178c13308357e838cda5402668/eb2af/server-image-1.png 954w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"クライアント側起動\"><a href=\"#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E5%81%B4%E8%B5%B7%E5%8B%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>クライアント側起動</h4>\n<ul>\n<li>サーバーの準備が整ったら、クライアント側を<code class=\"language-text\">npm run dev</code>で起動します。</li>\n<li>ブラウザで<a href=\"http://localhost:3000\">http://localhost:3000</a> にアクセスして以下の画面が表示されればOKです。</li>\n</ul>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABIUlEQVQ4y+2TwUqEQBjH5w3aN+jipY6Cj9K97t5bDN8gdjVIIbqsW2wF7b0dOgU9h7ihpGO6ycoOjvM1moeCzGq71R9+/Afm48d3mEH7/f6dpmk3AqzrOlZVFfd6Gxgh9CUkSZopioJlWZ5tbm1rKFsuIQgCIPETxEkCj1EE19MpDA0TTPNItNGKYZpwbNl1DwcD2Nndu0QkIuC6Ll1RyuI4ZvOHOQMAlud53d/hdHIxQovFMxBCWCQ28/0APM8T7UMYhkApBcZYF7wsSxBwyxk7CCq1SFEU0FzUg1VX4Zx3wZs5bjtnr0JxZvBBmtlP8044fiNs26BL3CqEH+Zf+GeF4lfQ5i2uhRCOEPxiTs4nVyjLsvskSXCaprfrcmjZBy+EHdn6piVGoQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-2\"\n        title=\"\"\n        src=\"/static/aadd25baed54bb3fdc5f7088b257ad92/5a190/project-image-2.png\"\n        srcset=\"/static/aadd25baed54bb3fdc5f7088b257ad92/772e8/project-image-2.png 200w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/e17e5/project-image-2.png 400w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/5a190/project-image-2.png 800w,\n/static/aadd25baed54bb3fdc5f7088b257ad92/142fb/project-image-2.png 907w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<h2 id=\"mutationを実装する\"><a href=\"#mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mutationを実装する</h2>\n<h3 id=\"実装-1\"><a href=\"#%E5%AE%9F%E8%A3%85-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー一覧ができたので、登録、更新、削除処理を追加します。</li>\n</ul>\n<div class=\"gatsby-code-title\">apollo/mutations/createUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($name: String!, $email: String!, $age: Int) {\n  createUser(name: $name, email: $email, age: $age) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/mutations/updateUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($id: ID!, $name: String!, $email: String!, $age: Int) {\n  updateUser(id: $id,name: $name,email: $email,age: $age) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/mutations/deleteUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">mutation($id: ID!) {\n  deleteUser(id: $id) {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<ul>\n<li>次にユーザー一覧で、登録、更新、削除ができるようにします。index.vueを修正しましょう。</li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vueの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブル上部に登録ボタンを設置します。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"isShowEditArea = true\"</span><span class=\"token operator\">></span>\n      新規登録\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブルに編集ボタンと削除ボタンの列を追加します。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>table<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token constant\">ID</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>名前<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>メール<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>年齢<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token operator\">-</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>tr v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"item in users\"</span> <span class=\"token punctuation\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.id\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"editItem(item)\"</span><span class=\"token operator\">></span>\n            編集\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"deleteItem(item)\"</span><span class=\"token operator\">></span>\n            削除\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 登録と更新の両方で使う編集エリアです。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 登録か更新かの判定はeditedIndexを見ます。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div v<span class=\"token operator\">-</span><span class=\"token keyword\">if</span><span class=\"token operator\">=</span><span class=\"token string\">\"isShowEditArea\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> formTitle <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.name\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"名前\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.email\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"email\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"メール\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.age\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"number\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"年齢\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"close\"</span><span class=\"token operator\">></span>\n          キャンセル\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"save\"</span><span class=\"token operator\">></span>\n          保存\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> getUsersGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/queries/getUsers.gql'</span>\n<span class=\"token comment\">// 今回定義したgqlファイルをインポートします。</span>\n<span class=\"token keyword\">import</span> createUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/createUser.gql'</span>\n<span class=\"token keyword\">import</span> updateUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/updateUser.gql'</span>\n<span class=\"token keyword\">import</span> deleteUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/deleteUser.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 登録・更新用の編集エリア表示非表示のためのフラグです</span>\n      isShowEditArea<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 登録か更新かを判定するための値です。</span>\n      <span class=\"token comment\">// -1の場合は登録</span>\n      <span class=\"token comment\">// それ以外の場合は更新　と判定します。</span>\n      editedIndex<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 編集エリア用のモデルです。</span>\n      editedItem<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        id<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 編集エリア用のモデルを初期化用モデルです。</span>\n      <span class=\"token comment\">// 初期化時に</span>\n      <span class=\"token comment\">// this.editedItem = Object.asigne({}, this.defaultEditedItem)</span>\n      <span class=\"token comment\">// のように使います。</span>\n      defaultEditedItem<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        id<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 更新の場合、更新対象が何番目かをeditedIndexにセットしているので</span>\n  <span class=\"token comment\">// editedIndexの値によって、更新か登録かを判断し</span>\n  <span class=\"token comment\">// 編集エリアのタイトルを出しわけます。</span>\n  computed<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">formTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n        <span class=\"token operator\">?</span> <span class=\"token string\">'ユーザー新規登録'</span>\n        <span class=\"token punctuation\">:</span> <span class=\"token string\">'ユーザー更新'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//登録処理です。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// mutationを発行する場合は、Smart Queryではなく</span>\n      <span class=\"token comment\">// $apolloを使って処理します。</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> createUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// refetchQueriesは処理完了後に発行するGraphQLの操作を指定できます。</span>\n        <span class=\"token comment\">// ここでは登録後に、データを再取得してユーザー一覧をリフレッシュしています。</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// 編集エリアを非表示にします。</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 更新処理です。</span>\n    <span class=\"token comment\">// 登録処理とほぼ同様の処理なので説明は割愛します。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> updateUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 削除処理です。</span>\n    <span class=\"token comment\">// 登録処理とほぼ同様の処理なので説明は割愛します。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">deleteItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`ユーザー(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)を削除しますか?`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> deleteUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>id\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          query<span class=\"token punctuation\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 一覧の編集ボタンクリック時の処理です</span>\n    <span class=\"token comment\">// 編集エリアの変数に値を代入して、編集エリアを表示します。</span>\n    <span class=\"token function\">editItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isShowEditArea <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 編集エリアを非表示にする処理です。</span>\n    <span class=\"token comment\">// 編集エリアのモデルの初期化もあわせて実施します。</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isShowEditArea <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>defaultEditedItem<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 編集エリアで保存ボタンをクリックした場合の処理です。</span>\n    <span class=\"token comment\">// editedIndexをみて登録か更新かを判断します。</span>\n    <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-1\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>ブラウザを開いてみてください。\nそれぞれの以下のようにして操作ができます。</p>\n<h4 id=\"登録\"><a href=\"#%E7%99%BB%E9%8C%B2\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>登録</h4>\n<ol>\n<li>右上の新規登録ボタンをクリック</li>\n<li>名前、メール、年齢を入力</li>\n<li>保存ボタンをクリック</li>\n</ol>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAAC3UlEQVQ4y5WTS0sbURTHx426cmW/g5/BTV2oxS8hiFgpLS26E6Qb7cpFu2iJD0o1oYggSoVa4wOhraiNxkYTm4eaySTzMIlJMJOZSe7M/HsmWtrQKvbAb+4993L+99xzz3D3mpt729ruzz/o7JzuaG93V+noqNJO866uLndLS4u7rq7OzXHcTUwT88Qjrv/JY09Q4BGMRMHzPIRkEoIgIEljIsEjm81iamoKra2taGpqQn19PRobG9HQ0FCDs0Z789zq4oIrHwpCDgT0cCTCUqLIUso5SwgC45MpJsoKEyWZHXwPMN/ePtv17bFvNPr+gHwj9COM5ZWVGS44PPz+9OMyQosLTO1/CK2jEzlJQjZfQC6fx2WxCE03UK5UwEwTjpmWRT5DhVWxCeasUxIebn9gYFbZ2UFkaYnxT58Bo6MABVQDSaRQKKCkla58kyEaiUBV1aoP265+LWeDLJVKebjdtdUJUCaFUIiFz+JwctANA6VSCRe5C6prHOfn5zBoTdN0nJycQJZkKIqCTCaDfCHvqFYFRVH0cNGT2KQjIqXTrJDLQafTMyQgiWI1QBRTkGWFkOncAhgzISQS+Lq1hcOjI4Qj4VrBYDg84ThxegApnXWEEYvzOKUgSVQouzRkRUImm8EFvbiTuaLIOD4+Rjwed7qhVnDT4357SXUJrW8wnmr5YXwcsy9fYXpsDDt7+7iD2WS/BWNDQ7vFgwOkvF4z+/kLyjTXAwGo6+uo9PQA3d2wr6JuolYw7HL5k9QCMUmygtTQiQxdu1xBiZrcGhkBKFP7+kXtq1e9XTA6MLCt7eyiuLlpXq6tIrexAd1/gIrXC4tq9kvgukX+ed8awe1Py5M5Ku5pMFhOz82Z0TevzXJvr4nBQdM2DNO2rCts+zbK14Iz3JkgvPvrWJcL6OvD/5okSXPc0eHhc13XY2qx6FNLJb9qGH7VsvyqafpVXffTX3EXfJqmxche/ARiYvUEkG7PUgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-create-1\"\n        title=\"\"\n        src=\"/static/219f2e622c366462cb616927adf04e8a/5a190/project-image-create-1.png\"\n        srcset=\"/static/219f2e622c366462cb616927adf04e8a/772e8/project-image-create-1.png 200w,\n/static/219f2e622c366462cb616927adf04e8a/e17e5/project-image-create-1.png 400w,\n/static/219f2e622c366462cb616927adf04e8a/5a190/project-image-create-1.png 800w,\n/static/219f2e622c366462cb616927adf04e8a/ddc81/project-image-create-1.png 837w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧に登録したユーザが追加されます。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACk0lEQVQ4y62Ty07bQBSGvWCDYMeOt+AJeAC6ABa8QDe9rLrqktegkVrAEpvCDlJuAQJJCVIWhARsCL40dpzEjp0YciMZe/7OpBEEtZUq1CN9OufMGf9zfDwWJicnX8+8mtmYn59fnp2dFefm5h7h+cLCgjg1NSWOjIyIgiD8jRXGOuON8Pb9O1HWVciyDMMwYFnWI6ZpolarQRRFTE9PY2JiAqOjoxgbG/uN8fFxXtsQYgexJdd1uUBHkiRiGCYxLYvohQLDYHGJlG2HXEoyyeYuyUU2Ry6Yzz7nQdF0HBwerQjxo6NI/uYGmUyG8G5q9Trqvt/3vn+HRrOJdqeDbreHXo+AWxCGj3m316PM9wsFwxCFrc3NiOt6kKQrks8rGLYgILhj4s1Wq59TJsQPv7+/H97GlsO+YLFYFIXkyXGEJ67jEPlKQsAO6zCBVqOBmluFrqmolMpot9psvQ1dVVHiMy4W4dg2PLdK6UCQjU0UbormEuVJtUr8dgvtIIRd82BUbNh+na+j7Hmo8HE0W+jyvY6NZDqNy3wekqZS9vyToLK2JgbyNQoHh8SKH8OKx1FOJFBJfkc1dYbSSQJWIg7nNAk3lULj/JzVEjhfX4eytwstGqWUNdMX5K98t7i4RzIZ+PF44MT2YWxtoRqLwdqOorKzAysaRZHFzv4u6uyw1ukpbCaUZVdJZ3t/fPlMaersl6BpioK5vb3MLhugqgSaBug6jxks5nk/Vp/F9FYBVRSEnOtrSn3/qUPFND/xJGRz4LP8FzDkefhshurtbWTw7QnYteDQAX+Kh9cGUGZDgqq61O8wDB9YIXgh3YHgqqBp2ir+k5VKpa9COp3+4Pt+kv3PUc/zdl7IN/bbJnK53Mef7IQBrxTsBPQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-create-2\"\n        title=\"\"\n        src=\"/static/ddded17ee5f77eae7cceb841d2b22ab2/5a190/project-image-create-2.png\"\n        srcset=\"/static/ddded17ee5f77eae7cceb841d2b22ab2/772e8/project-image-create-2.png 200w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/e17e5/project-image-create-2.png 400w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/5a190/project-image-create-2.png 800w,\n/static/ddded17ee5f77eae7cceb841d2b22ab2/27b8e/project-image-create-2.png 836w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"更新\"><a href=\"#%E6%9B%B4%E6%96%B0\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更新</h4>\n<ol>\n<li>更新したい行の編集ボタンをクリック</li>\n<li>名前、メール、年齢を入力</li>\n<li>保存ボタンをクリック</li>\n</ol>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADCElEQVQ4y5WTTU8TURSGJ8CShexd8Q/cEEjgR/gbFOPGhXEnezEu3JloSQTGhVGLWpooaCSBtkZCqVDSUlvo18ydmc4HzDBKp70z83qmYKxGTTzJm5NzJ/c5X3eEkZGRK2NjY/HJycn5iYkJsV/j4+Pi1NSUODo6KgqC8C8tkF6QrgtXr02L+XIJe3t7qFaraNTrqJMiH8WtVgtzc3MgOIaHhzEwMIChoaHfNNjzg4ODcWFlZeWhYZpgjLVLpRKXZMYVVeNN8k1Z5orW4hJT+OZWlqczH/lGKs1T6QxPZfqUznjbuc94lVheEDbW12OHBwdRhdwksGlasKwj6IYBk7ztnOC03Uany8H9AJGFpC73Ke4pJPHovClJorCcSMQYU7CXz/NarYF+8zmH49j4+u1bLw4IUD08xMmJewYOewlC/xwoRcBUOhWLAtMw+O5uHkEQwPM8tKmq4+MjNBp1aDTHTqcL77SNUqEAhTEYdGZRR7Zth2Q9II1NFCqVcgyUiYbPXdeF1+lEcERVm5YJVVWh6wZ0AjhtDz5dVAwdmVwOxfIX7O/v/wqkVmM+D1Cr1bksMcquQJYkMJlBU1ugJaHRrEO1DLSyWbiJBFrbWew+e4by1hYqtSp13gcsFItnLR8fc1XXUW02YRwdQdYYVIVBplgioNb14M7eAS5ehHn/PnZu3sQBQb8wOYQf/AS+f/vmUZtaLGxucp3eXnxhHu9evgKt7+d2wvDMOw7CSgWhbSOQZQS0rCD62t9yfmbmSXttDSyR4MXFRTSW4nDX19FdXUVAGwUli3AhLSvEHywMfwWW7t57odIzKDPGs/tFHNAM9a6Pr9RqMD0NXLqEkCrDORQRmCoOf/jfgYWZ20+9RhNu9bBjVyq+Xa35rqr6XqnkB6urPpaWfLrsU3U+XfybvHPgovBp/vET7OxA39gAF0Vo84+BBw+Ay5dBbwL/Y4qiPBdSudwNxXHWGrbzmhUKSSmZTGrx+HL3woVte3b2nXF6mjA1LUm/5V9lGMZry7I+5PP5W98BuHvqiqfu8OAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-update-1\"\n        title=\"\"\n        src=\"/static/b0c9d01a7a765f2ad8726624b95eff41/5a190/project-image-update-1.png\"\n        srcset=\"/static/b0c9d01a7a765f2ad8726624b95eff41/772e8/project-image-update-1.png 200w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/e17e5/project-image-update-1.png 400w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/5a190/project-image-update-1.png 800w,\n/static/b0c9d01a7a765f2ad8726624b95eff41/27b8e/project-image-update-1.png 836w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧のユーザー情報が更新されています。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACrElEQVQ4y61TTU8aURSdhRujS/0j/gO3dqM0cds2XfYfdNtF+xNaFtWMVhY20QRTPxAlFUythspARWRgmIH5AEYGKSDDgzm9M47apDZpmt7k5N5337z7zrvnDjc5Ofl85tHMx8DjwMLc3BwfCAR417uYnZ3l5+fn+ampKX5kZITnOO5PWCCsEl5wT549XfpeyCObPYeiKFBV9Q7lchmNRgPLy8uYnp7GxMQERkdHMTY29hvGx8fdvXUuEom8rZsmNFW7zmazrCTLrKJqTCJfUsqsTLFerbHM2RkT0hkPKSHNUn7srdOZXlEqIbof+8DtRaPB/EUexycnzGXTarVgNZuwrCYaloWrqxauezYGgwHsfh/9PoNrg+EQPdt2145t3yTphSFuIxwO1mo1GIbORFGEeXmJX21IBy0q7F7kmePgIpfzLvTNIXgFqU0hLpGIB90FIzvPnaPuF+x0u2h32sTWgqzI0HQd3e61x1ai52maDlXTQO1yavW6V1DTtBCXl4pB4g1ZFJlFTHutHy4t1EkURSygSl6jgjoJZihlmLoBu92GUVaQiMWQFVKOcHp6XzATWgni6zGU8AbTPm2itL6Oy+gerP0YjK1t1CJR6JtbMHa2UN3ZhhmJoPX5APXdCIQlHvJG2CnwPAP1UzNNYvjmdRDpDCxBYObJMfK7u8ht70A/+gL18AC1oyOoiTgqh3FUKWd9S6KdyXj507U1SPG4k19cZKCWaM1miCukUkF0OgCNCckEVCrU3Qq8+CHIsgenVLr1jlMs3jzZMEKcKEmeKEPSxfEl+xvg3pPuNyprrsoFUfQKOsMh87Z8OD4eiu9yJB7B8c7eikKz986fN5s+Gv4LyPr+HK5wkiS9x38ywzBWabATL+lPEYjuga7rh/8C92y1WhWSyeSrn8H5AJ/EVXCaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-update-2\"\n        title=\"\"\n        src=\"/static/836e31067505db3d284f49bb4ea425b5/5a190/project-image-update-2.png\"\n        srcset=\"/static/836e31067505db3d284f49bb4ea425b5/772e8/project-image-update-2.png 200w,\n/static/836e31067505db3d284f49bb4ea425b5/e17e5/project-image-update-2.png 400w,\n/static/836e31067505db3d284f49bb4ea425b5/5a190/project-image-update-2.png 800w,\n/static/836e31067505db3d284f49bb4ea425b5/a1dd2/project-image-update-2.png 838w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  </p>\n<h4 id=\"削除\"><a href=\"#%E5%89%8A%E9%99%A4\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>削除</h4>\n<p>削除したい行の削除ボタンをクリック</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAAClUlEQVQ4y61TS08TURQeXBtc+agrgjuNEYwLQlF/jBvxR7gC3bPSJkadRlnIgpgALSaAQMKigUILKTPMtLTzHvrAPtLH7cznmdsSSHzEEE/y5dx759zvfPecM8LNoaFno+PhuYcTj9/fHxsTH4yPiyPhCXGUMBIOi4+ePBWH7t4Tr4VucwzeComDoVDPn+MD4cvV6zcmhecvJqM7BynsbG9DkiQcyTJkuecPMxnomobpqSncGR7GlYEBCILwN8wJsXj8TalSgWVZTSJkpmUx03aYYdnMMC3mFktMyebYyuoaiy1/Y0vxZbYYi3Mf64PWre8bm/g0O/tRWFtdjWRVFal0mp2cnKBcrsAlb7suHEKQrNXuwPOBrueBHLfAB/uu5/vkWXCm6UZU+Do/H8nnC8jlckzXNTQaDVy0TruNCpGenbdbLaiKQr7dI+5Zj1DTosL6xnok2LBOh+2ldklhmQc2m0206HKwLxQKKBaLoBBOfLC/D8dx+Lei6/q1apUT6gYplGQp4pN0w9BZrVZDt+txQtu2YZoGiqUSLFq7DpWAUK83eIxyJGM7mcTuYcbPUt05YaAwtbcXYZSZns0Mw0L+OM9VmIYJXTeoWQ7VRsdxIUdJLDhEXq1WoWap7okEpKVF39jc7BGaZlRIp1L8yfQk5rgO0vSczKEEyyGFlk6ENoLamrZJSi2c/jhFvVaHUshjf2EB8utXvjYzw0C11svlqKBms5F+/Rn+YFT0X86oufA71H3b8buOw+8agUJVVTmhR60PLv4rcJ4kWPUIg6acEQat/+3FvsKLa1yM8Uhrfw45oaIob/sK2xTgXRId3hRdFwUa6Hf4T0a/72dha2vrJXX4iOYuQcO6c0kk6LeVk8nk9E+KvwmFDR1ScwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-delete-1\"\n        title=\"\"\n        src=\"/static/b1607176351ad84514e6c52fec749066/5a190/project-image-delete-1.png\"\n        srcset=\"/static/b1607176351ad84514e6c52fec749066/772e8/project-image-delete-1.png 200w,\n/static/b1607176351ad84514e6c52fec749066/e17e5/project-image-delete-1.png 400w,\n/static/b1607176351ad84514e6c52fec749066/5a190/project-image-delete-1.png 800w,\n/static/b1607176351ad84514e6c52fec749066/ddc81/project-image-delete-1.png 837w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n<br/></p>\n<p>ユーザー一覧から削除したユーザーがなくなっています。\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 535px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACFElEQVQ4y62SzW7aQBDHVxyAG3eegBfgBVIB4kF6qnrpx9NEVsslkZse2hL1SA5waQ2KGuwaAgaMMbbxFy0GDAtMxxtKW0W9IEb6eTVrzX/+u7MknU4/PXtydlUoFN7k87lSPp8/kMvlSsVisZTJZEqxWKxECPkfbxEeeU5evH51IfcVkCQJVFUFTRsiGmOI+WQyAY7jIJvNQiqVgng8DolE4hHJZDL6VyaVSuXccV0YjUZLWZapNtKpputUHWq0r2p0bJhUHxu0cXtLhXqDfhHq9Gs9ovEHoR6K32X48PHTJbmp3HDtdhuazSZ1XQc8zwPP98HF1fen8HMWwGKxhNV6DWtKIYrNdos5ZfmeTbR/3+nw5Lpc5mzbwSOLVFU1+Du2WDid+hCG4cPGbgf32DwIgkPOGmBEa7fb5Um1VuWixDLGVJJkJrJYLGA+D5hbRemCaVrMZRiuoNVqgWkYYNv2wymw4W63Y4KKovCk0+lwG7SNQ6CRQDCbYYHJBmThQHRdj+4XDBRxXQ9WqzX0egrUalVoiiJ8u7tjJg+CkigyhxPLptGdRaKO44DtuNj9B07ZBtNCMQ9zJAjm6NhkTtXhkPGPYL/f5/ZXRuHI+H3kXq/HE/xw+wFQ/AFH8lgQN0/r8JSC5/sjLyPRY8DacD+US4LP4wJOFIPBoEwEQXjm+/5nfKg8Ppf3x4C171DjGrVe/gIh5xJ+ikFGNwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"project-image-delete-2\"\n        title=\"\"\n        src=\"/static/f05fb2933584ab5973f6a98536edbbe1/b5245/project-image-delete-2.png\"\n        srcset=\"/static/f05fb2933584ab5973f6a98536edbbe1/772e8/project-image-delete-2.png 200w,\n/static/f05fb2933584ab5973f6a98536edbbe1/e17e5/project-image-delete-2.png 400w,\n/static/f05fb2933584ab5973f6a98536edbbe1/b5245/project-image-delete-2.png 535w\"\n        sizes=\"(max-width: 535px) 100vw, 535px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>これでユーザ一覧でCRUD操作ができるようになりました。</p>\n<h2 id=\"subscriptionを実装する\"><a href=\"#subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Subscriptionを実装する</h2>\n<p>Subscriptionを使って、ユーザー情報を他の人が編集したときにリアルタイムで同期するようにしてみましょう。</p>\n<h3 id=\"実装-2\"><a href=\"#%E5%AE%9F%E8%A3%85-2\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userCreated.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userCreated {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userUpdated.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userUpdated {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userDeleted.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre class=\"language-gql\"><code class=\"language-gql\">subscription {\n  userDeleted {\n    id\n    name\n    email\n    age\n  }\n}</code></pre></div>\n<br/>\n<ul>\n<li>index.vueでSubscriptionを実装します。templateには一切手をいれません。scriptタグのみ修正します。</li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vueの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/* (中略) */</span>\n<span class=\"token comment\">// 今回定義したgqlファイルをインポートします。</span>\n<span class=\"token keyword\">import</span> userCreatedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userCreated.gql'</span>\n<span class=\"token keyword\">import</span> userUpdatedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userUpdated.gql'</span>\n<span class=\"token keyword\">import</span> userDeletedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userDeleted.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n  apollo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    users<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      query<span class=\"token punctuation\">:</span> getUsersGql<span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// SubscriptionはSmart QueryのsubscribeToMoreで指定します。</span>\n      subscribeToMore<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\">// 登録時の処理です</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userCreatedGql<span class=\"token punctuation\">,</span>\n          <span class=\"token comment\">// Subscription発生時の処理をupdateQueryに定義します。</span>\n          <span class=\"token comment\">// 第一引数は前回のusers</span>\n          <span class=\"token comment\">// 第二引数はサーバーからのレスポンス情報　です。</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> newUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userCreated\n            <span class=\"token comment\">// ここで返した値がusersに代入されます。</span>\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// 更新時の処理です。</span>\n        <span class=\"token comment\">// 登録時とほぼ同様の処理なので説明は割愛します。</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userUpdatedGql<span class=\"token punctuation\">,</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userUpdated\n            <span class=\"token keyword\">const</span> targetUser <span class=\"token operator\">=</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span> <span class=\"token operator\">===</span> updatedUser<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n            targetUser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>name\n            targetUser<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>email\n            targetUser<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>age\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// 削除時の処理です。</span>\n        <span class=\"token comment\">// 登録時とほぼ同様の処理なので説明は割愛します。</span>\n        <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">:</span> userDeletedGql<span class=\"token punctuation\">,</span>\n          updateQuery<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> deletedUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userDeleted\n            <span class=\"token keyword\">const</span> userIndex <span class=\"token operator\">=</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span> <span class=\"token operator\">===</span> deletedUser<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User not found'</span><span class=\"token punctuation\">)</span>\n\n            prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>userIndex<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> createUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> updateUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">deleteItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`ユーザー(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)を削除しますか?`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mutation<span class=\"token punctuation\">:</span> deleteUserGql<span class=\"token punctuation\">,</span>\n        variables<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>id\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/* (中略) */</span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3 id=\"動作確認-2\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-2\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>2つブラウザを開いてみて、片方で操作してみてください。\nリアルタイムでもう一方のブラウザにユーザー情報の変更が反映されていればOKです。</p>\n<h2 id=\"まとめ\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>簡単ではありますが、Nuxt.js+Apollo Clientで簡単なアプリの作り方をご紹介しました。\nせっかくのクライアントアプリなので、UIフレームワークを使ってリッチにしてみるのも良いかもしれません。\n一応Vue.jsのマテリアルデザインのUIフレームワーク<a href=\"https://vuetifyjs.com/ja/\">「Vuetify」</a>を使った版も以下においておりますので、参考にしてみてください🍅</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://github.com/Takumon/nuxt-graphpack-sample/tree/master/client_vuetify\" data-iframely-url=\"//cdn.iframe.ly/9B6aV8g\"></a></div></div>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://medium.freecodecamp.org/how-to-build-a-real-time-editable-data-table-in-vue-js-46b7f0b11684\">How to build a real-time editable data table in Vue.js</a></li>\n<li><a href=\"https://www.aintek.xyz/posts/graphql-nuxt-chat\">GraphQL と Nuxt.js でチャットを作る</a></li>\n<li><a href=\"https://github.com/the-road-to-graphql/fullstack-apollo-subscription-example\">the-road-to-graphql/fullstack-apollo-subscription-example: A minimal Apollo Server 2 with Apollo Client 2 with Subscriptions application.</a></li>\n<li><a href=\"https://github.com/bmsantos/apollo-graphql-subscriptions-example\">bmsantos/apollo-graphql-subscriptions-example: Apollo GraphQL Subscriptions issue</a></li>\n<li><a href=\"https://www.levvel.io/our-ideas/A-Guide-to-Subscriptions-in-GraphQL-with-Apollo\">Levvel Blog - A Guide to Subscriptions in GraphQL with Apollo</a></li>\n</ul>","fields":{"slug":"/nuxt-apollo-with-graphpack","title":"Nuxt.js＋Apollo ClientでCRUD操作 / ユーザー管理画面でQuery, Mutation, Subscriptionを実装","date":"2019-02-12T07:00:00.000+09:00","excerpt":"なにこれ以前の記事設定いらずのNode製GraphQLサーバー「Graphpack」の使い方でGraphQLのサーバー側を実装を紹介しました。Graphpackは備え付けのGraphQL Playground IDEで動作確認できますが、せ...","tags":["GraphQL","Nuxt.js","Apollo Client","Vue.js"],"keywords":["GraphQL"],"thumbnail":"thumbnail/2019/02/nuxt-apollo-with-graphpack.png"}},"next":{"html":"<h2 id=\"なにこれ\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://kazupon.github.io/vue-i18n/\"><strong>VueI18n</strong></a>はVue.jsの多言語対応ライブラリです。vueファイルのtemplateタグでは、<code class=\"language-text\">&lt;p&gt;{{$t(&#39;message.hello&#39;)}}&lt;/p&gt;</code>のように使います。ただ<strong>vueファイルのscriptタグや、他のJavaScriptファイルでの使い方</strong>は<a href=\"https://kazupon.github.io/vue-i18n/guide/formatting.html\">ガイド</a>に明記されていません。今回はそのやり方についてご紹介します。</p>\n<h2 id=\"使い方\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h2>\n<p><a href=\"https://github.com/kazupon/vue-i18n/issues/149\">GitHubのIssue</a>に答えが載っています。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://github.com/kazupon/vue-i18n/issues/149\" data-iframely-url=\"//cdn.iframe.ly/GvV4JME\"></a></div></div>\n<br/>\n<p>まずVueI18nを以下のように定義します。</p>\n<div class=\"gatsby-code-title\">i18n.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span>\n<span class=\"token keyword\">import</span> VueI18n <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-i18n'</span>\n\n<span class=\"token keyword\">const</span> messages <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  en<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    message<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      hello<span class=\"token punctuation\">:</span> <span class=\"token string\">'hello world'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  ja<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    message<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      hello<span class=\"token punctuation\">:</span> <span class=\"token string\">'こんにちは、世界'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>VueI18n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> i18n <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VueI18n</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  locale<span class=\"token punctuation\">:</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span>\n  messages<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>vueファイルのscriptタグでは以下のようにします。\n<strong>VueI18nオブジェクトの<code class=\"language-text\">tc</code>メソッドを使います。</strong>\nこうすることでvueファイルのscriptやJavaScriptファイルなど、どこでも使えるようになります。</p>\n<div class=\"gatsby-code-title\">vueファイルのscriptタグ</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// i18nをインポートします</span>\n</span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> i18n <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'i18n.jsの相対パス'</span>\n</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* (中略) */</span>\n    methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">getHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">return</span> i18n<span class=\"token punctuation\">.</span><span class=\"token function\">tc</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message.hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>        <span class=\"token punctuation\">}</span>    \n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">/* (中略) */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<p>以上です🍅</p>","fields":{"slug":"/vue-i18n-in-script-tag","title":"VueI18nをscriptタグやJSファイル内で使う方法","date":"2019-02-21T07:50:00.000+09:00","excerpt":"なにこれVueI18nはVue.jsの多言語対応ライブラリです。vueファイルのtemplateタグでは、&#x3C;p>{{$t('message.hello')}}&#x3C;/p>のように使います。ただvueファイルのscriptタグ...","tags":["Vue.js","VueI18n"],"keywords":["Vue.js"],"thumbnail":"thumbnail/2019/02/vue-i18n-in-script-tag.png"}}}}}